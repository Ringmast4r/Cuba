/* Source and licensing information for the line(s) below can be found at https://www.fgr.gob.cu/themes/custom/fgr/js/openlayers/ol.js. */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ol=e():t.ol=e()}(window,function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e,i){"use strict";t.exports=n,t.exports.default=n;var r=i(5);function n(t,e){if(!(this instanceof n))return new n(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,r,n){n||(n=y(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,s=e;s<i;s++)o=t.children[s],h(n,t.leaf?r(o):o);return n}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function p(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function f(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}function _(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,i,n,o){for(var s,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=n||(s=e+Math.ceil((i-e)/n/2)*n,r(t,s,e,i,o),a.push(e,s,s,i))}n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!g(t,e))return i;for(var n,o,s,a,h=[];e;){for(n=0,o=e.children.length;n<o;n++)s=e.children[n],g(t,a=e.leaf?r(s):s)&&(e.leaf?i.push(s):_(t,a)?this._all(s,i):h.push(s));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!g(t,e))return!1;for(var r,n,o,s,a=[];e;){for(r=0,n=e.children.length;r<n;r++)if(o=e.children[r],g(t,s=e.leaf?i(o):o)){if(e.leaf||_(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,e){if(!t)return this;for(var i,r,n,s,a=this.data,h=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],i=u.pop(),s=!0),a.leaf&&-1!==(n=o(t,a.children,e)))return a.children.splice(n,1),l.push(a),this._condense(l),this;s||a.leaf||!_(a,h)?r?(i++,a=r.children[i],s=!1):a=null:(l.push(a),u.push(i),i=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,o=i-e+1,a=this._maxEntries;if(o<=a)return s(n=y(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(n=y([])).leaf=!1,n.height=r;var h,l,u,p,c=Math.ceil(o/a),d=c*Math.ceil(Math.sqrt(a));for(v(t,e,i,d,this.compareMinX),h=e;h<=i;h+=d)for(v(t,h,u=Math.min(h+d-1,i),c,this.compareMinY),l=h;l<=u;l+=c)p=Math.min(l+c-1,u),n.children.push(this._build(t,l,p,r-1));return s(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,o,s,a,h,l,u,c;r.push(e),!e.leaf&&r.length-1!==i;){for(u=c=1/0,n=0,o=e.children.length;n<o;n++)h=p(s=e.children[n]),(l=d(t,s)-h)<c?(c=l,u=h<u?h:u,a=s):l===c&&h<u&&(u=h,a=s);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),o=[],s=this._chooseSubtree(n,this.data,e,o);for(s.children.push(t),h(s,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),a=y(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,o,s,h,l,u,c;for(l=u=1/0,r=e;r<=i-e;r++)s=f(n=a(t,0,r,this.toBBox),o=a(t,r,i,this.toBBox)),h=p(n)+p(o),s<l?(l=s,c=r,u=h<u?h:u):s===l&&h<u&&(u=h,c=r);return c},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:l,n=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,o,s=this.toBBox,l=a(t,0,e,s),u=a(t,i-e,i,s),p=c(l)+c(u);for(n=e;n<i-e;n++)o=t.children[n],h(l,t.leaf?s(o):o),p+=c(l);for(n=i-e-1;n>=e;n--)o=t.children[n],h(u,t.leaf?s(o):o),p+=c(u);return p},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)h(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():s(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,i){"use strict";t.exports=n;var r=i(6);function n(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;function o(t){return t.type===n.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function a(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function h(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function l(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function _(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function y(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function v(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function m(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=y(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=m(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=y(this.buf,this.pos)+4294967296*y(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=y(this.buf,this.pos)+4294967296*m(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,o=i.buf;if(n=o[i.pos++],r=(112&n)>>4,n<128)return s(t,r,e);if(n=o[i.pos++],r|=(127&n)<<3,n<128)return s(t,r,e);if(n=o[i.pos++],r|=(127&n)<<10,n<128)return s(t,r,e);if(n=o[i.pos++],r|=(127&n)<<17,n<128)return s(t,r,e);if(n=o[i.pos++],r|=(127&n)<<24,n<128)return s(t,r,e);if(n=o[i.pos++],r|=(1&n)<<31,n<128)return s(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,i){var r="",n=e;for(;n<i;){var o,s,a,h=t[n],l=null,u=h>239?4:h>223?3:h>191?2:1;if(n+u>i)break;1===u?h<128&&(l=h):2===u?128==(192&(o=t[n+1]))&&(l=(31&h)<<6|63&o)<=127&&(l=null):3===u?(o=t[n+1],s=t[n+2],128==(192&o)&&128==(192&s)&&((l=(15&h)<<12|(63&o)<<6|63&s)<=2047||l>=55296&&l<=57343)&&(l=null)):4===u&&(o=t[n+1],s=t[n+2],a=t[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&((l=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,u=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),n+=u}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var i=o(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),v(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),v(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),v(this.buf,-1&t,this.pos),v(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),v(this.buf,-1&t,this.pos),v(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;if(e.buf[e.pos++]|=i|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&a(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&a(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,n.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,h,e)},writePackedSVarint:function(t,e){this.writeMessage(t,l,e)},writePackedBoolean:function(t,e){this.writeMessage(t,c,e)},writePackedFloat:function(t,e){this.writeMessage(t,u,e)},writePackedDouble:function(t,e){this.writeMessage(t,p,e)},writePackedFixed32:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedFixed64:function(t,e){this.writeMessage(t,_,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,g,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,i){var r=i(7);e.Processor=r},,,function(t,e,i){t.exports=function(){"use strict";function t(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function e(t,e){return t<e?-1:t>e?1:0}return function(i,r,n,o,s){!function e(i,r,n,o,s){for(;o>n;){if(o-n>600){var a=o-n+1,h=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*u*(a-u)/a)*(h-a/2<0?-1:1),c=Math.max(n,Math.floor(r-h*u/a+p)),d=Math.min(o,Math.floor(r+(a-h)*u/a+p));e(i,r,c,d,s)}var f=i[r],_=n,g=o;for(t(i,n,r),s(i[o],f)>0&&t(i,n,o);_<g;){for(t(i,_,g),_++,g--;s(i[_],f)<0;)_++;for(;s(i[g],f)>0;)g--}0===s(i[n],f)?t(i,n,g):t(i,++g,o),g<=r&&(n=g+1),r<=g&&(o=g-1)}}(i,r,n||0,o||i.length-1,s||e)}}()},function(t,e){e.read=function(t,e,i,r,n){var o,s,a=8*n-r-1,h=(1<<a)-1,l=h>>1,u=-7,p=i?n-1:0,c=i?-1:1,d=t[e+p];for(p+=c,o=d&(1<<-u)-1,d>>=-u,u+=a;u>0;o=256*o+t[e+p],p+=c,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+p],p+=c,u-=8);if(0===o)o=1-l;else{if(o===h)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=l}return(d?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,i,r,n,o){var s,a,h,l=8*o-n-1,u=(1<<l)-1,p=u>>1,c=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),(e+=s+p>=1?c/h:c*Math.pow(2,1-p))*h>=2&&(s++,h/=2),s+p>=u?(a=0,s=u):s+p>=1?(a=(e*h-1)*Math.pow(2,n),s+=p):(a=e*Math.pow(2,p-1)*Math.pow(2,n),s=0));n>=8;t[i+d]=255&a,d+=f,a/=256,n-=8);for(s=s<<n|a,l+=n;l>0;t[i+d]=255&s,d+=f,s/=256,l-=8);t[i+d-f]|=128*_}},function(t,e,i){var r=i(8).newImageData;function n(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function i(t,i,r){return e?new ImageData(t,i,r):{data:t,width:i,height:r}}return function(e){var r,n,o=e.buffers,s=e.meta,a=e.imageOps,h=e.width,l=e.height,u=o.length,p=o[0].byteLength;if(a){var c=new Array(u);for(n=0;n<u;++n)c[n]=i(new Uint8ClampedArray(o[n]),h,l);r=t(c,s).data}else{r=new Uint8ClampedArray(p);var d=new Array(u),f=new Array(u);for(n=0;n<u;++n)d[n]=new Uint8ClampedArray(o[n]),f[n]=[0,0,0,0];for(var _=0;_<p;_+=4){for(var g=0;g<u;++g){var y=d[g];f[g][0]=y[_],f[g][1]=y[_+1],f[g][2]=y[_+2],f[g][3]=y[_+3]}var v=t(f,s);r[_]=v[0],r[_+1]=v[1],r[_+2]=v[2],r[_+3]=v[3]}}return r.buffer}}function o(t,e){var i=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+n.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(i,{type:"text/javascript"}),o=URL.createObjectURL(r),s=new Worker(o);return s.addEventListener("message",e),s}function s(t){var e;this._imageOps=!!t.imageOps;var i=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var r=0;r<e;++r)i[r]=o(t,this._onWorkerMessage.bind(this,r));else i[0]=function(t,e){var i=n(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:i(t),meta:t.meta}})},0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=i,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}s.prototype.process=function(t,e,i){this._enqueue({inputs:t,meta:e,callback:i}),this._dispatch()},s.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},s.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},s.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,i=t.inputs[0].height,r=t.inputs.map(function(t){return t.data.buffer}),n=this._workers.length;if(this._running=n,1===n)this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:e,height:i},r);else for(var o=t.inputs[0].data.length,s=4*Math.ceil(o/4/n),a=0;a<n;++a){for(var h=a*s,l=[],u=0,p=r.length;u<p;++u)l.push(r[a].slice(h,h+s));this._workers[a].postMessage({buffers:l,meta:t.meta,imageOps:this._imageOps,width:e,height:i},l)}}},s.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},s.prototype._resolveJob=function(){var t,e,i=this._job,n=this._workers.length;if(1===n)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var o=i.inputs[0].data.length;t=new Uint8ClampedArray(o),e=new Array(o);for(var s=4*Math.ceil(o/4/n),a=0;a<n;++a){var h=this._dataLookup[a].buffer,l=a*s;t.set(new Uint8ClampedArray(h),l),e[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},i.callback(null,r(t,i.inputs[0].width,i.inputs[0].height),e),this._dispatch()},t.exports=s},function(t,e){var i=!0;try{new ImageData(10,10)}catch(t){i=!1}var r=document.createElement("canvas").getContext("2d");e.newImageData=function(t,e,n){if(i)return new ImageData(t,e,n);var o=r.createImageData(e,n);return o.data.set(t),o}},function(t,e,i){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}i.r(e);var n=0;function o(t){return t.ol_uid||(t.ol_uid=String(++n))}var s="5.3.0",a=function(t){function e(e){var i="Assertion failed. See https://openlayers.org/en/"+("latest"===s?s:"v"+s.split("-")[0])+"/doc/errors/#"+e+" for details.";t.call(this,i),this.code=e,this.name="AssertionError",this.message=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),h={ADD:"add",REMOVE:"remove"},l="propertychange",u="function"==typeof Object.assign?Object.assign:function(t,e){var i=arguments;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,o=arguments.length;n<o;++n){var s=i[n];if(void 0!==s&&null!==s)for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a])}return r};function p(t){for(var e in t)delete t[e]}function c(t){var e=[];for(var i in t)e.push(t[i]);return e}function d(t){var e;for(e in t)return!1;return!e}function f(t,e,i,r){for(var n,o=0,s=t.length;o<s;++o)if((n=t[o]).listener===e&&n.bindTo===i)return r&&(n.deleteIndex=o),n}function _(t,e){var i=g(t);return i?i[e]:void 0}function g(t,e){var i=t.ol_lm;return!i&&e&&(i=t.ol_lm={}),i}function y(t,e){var i=_(t,e);if(i){for(var r=0,n=i.length;r<n;++r)t.removeEventListener(e,i[r].boundListener),p(i[r]);i.length=0;var o=g(t);o&&(delete o[e],0===Object.keys(o).length&&function(t){delete t.ol_lm}(t))}}function v(t,e,i,r,n){var o=g(t,!0),s=o[e];s||(s=o[e]=[]);var a=f(s,i,r,!1);return a?n||(a.callOnce=!1):(a={bindTo:r,callOnce:!!n,listener:i,target:t,type:e},t.addEventListener(e,function(t){var e=function(e){var i=t.listener,r=t.bindTo||t.target;return t.callOnce&&E(t),i.call(r,e)};return t.boundListener=e,e}(a)),s.push(a)),a}function m(t,e,i,r){return v(t,e,i,r,!0)}function x(t,e,i,r){var n=_(t,e);if(n){var o=f(n,i,r,!0);o&&E(o)}}function E(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=_(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&y(t.target,t.type)}p(t)}}function S(t){var e=g(t);if(e)for(var i in e)y(t,i)}var T=function(){this.disposed_=!1};T.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},T.prototype.disposeInternal=function(){};var C=T;function R(){return!0}function w(){return!1}function I(){}var L=function(t){this.propagationStopped,this.type=t,this.target=null};function O(t){t.stopPropagation()}L.prototype.preventDefault=function(){this.propagationStopped=!0},L.prototype.stopPropagation=function(){this.propagationStopped=!0};var P=L,b=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var i=this.listeners_[t];i||(i=this.listeners_[t]=[]),-1===i.indexOf(e)&&i.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new P(t):t,i=e.type;e.target=this;var r,n=this.listeners_[i];if(n){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var o=0,s=n.length;o<s;++o)if(!1===n[o].call(this,e)||e.propagationStopped){r=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var a=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];a--;)this.removeEventListener(i,I);delete this.dispatching_[i]}return r}},e.prototype.disposeInternal=function(){S(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var r=i.indexOf(e);t in this.pendingRemovals_?(i[r]=I,++this.pendingRemovals_[t]):(i.splice(r,1),0===i.length&&delete this.listeners_[t])}},e}(C),M={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};var F=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(M.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),n=0;n<i;++n)r[n]=v(this,t[n],e);return r}return v(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),n=0;n<i;++n)r[n]=m(this,t[n],e);return r}return m(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,r=t.length;i<r;++i)x(this,t[i],e);else x(this,t,e)},e}(b),A=function(t){function e(e,i,r){t.call(this,e),this.key=i,this.oldValue=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P),N={};function G(t){return N.hasOwnProperty(t)?N[t]:N[t]="change:"+t}var D=function(t){function e(e){t.call(this),o(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return u({},this.values_)},e.prototype.notify=function(t,e){var i;i=G(t),this.dispatchEvent(new A(i,t,e)),i=l,this.dispatchEvent(new A(i,t,e))},e.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var r=this.values_[t];this.values_[t]=e,r!==e&&this.notify(t,r)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},e}(F),k="length",j=function(t){function e(e,i){t.call(this,e),this.element=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P),U=function(t){function e(e,i){t.call(this);var r=i||{};if(this.unique_=!!r.unique,this.array_=e||[],this.unique_)for(var n=0,o=this.array_.length;n<o;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,r=e.length;i<r;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(k)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new j(h.ADD,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,r=e.length;i<r;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new j(h.REMOVE,e)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new j(h.REMOVE,r)),this.dispatchEvent(new j(h.ADD,e))}else{for(var n=i;n<t;++n)this.insertAt(n,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(k,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==e)throw new a(58)},e}(D);function Y(t,e){if(!t)throw new a(e)}var B=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,v(this,G(this.geometryName_),this.handleGeometryChanged_,this),e)if("function"==typeof e.getSimplifiedGeometry){var i=e;this.setGeometry(i)}else{var r=e;this.setProperties(r)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(E(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=v(t,M.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;if(Array.isArray(t))e=t;else{Y("function"==typeof t.getZIndex,41);var i=t;e=[i]}return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){x(this,G(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,v(this,G(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(D);function V(t,e){return t>e?1:t<e?-1:0}function X(t,e){return t.indexOf(e)>=0}function z(t,e,i){var r,n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;if(i>0){for(r=1;r<n;++r)if(t[r]<e)return r-1}else if(i<0){for(r=1;r<n;++r)if(t[r]<=e)return r}else for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}function W(t,e,i){for(;e<i;){var r=t[e];t[e]=t[i],t[i]=r,++e,--i}}function K(t,e){for(var i=Array.isArray(e)?e:[e],r=i.length,n=0;n<r;n++)t[t.length]=i[n]}function H(t,e){for(var i,r=t.length>>>0,n=0;n<r;n++)if(e(i=t[n],n,t))return i;return null}function Z(t,e){var i=t.length;if(i!==e.length)return!1;for(var r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0}function q(t,e){var i,r=t.length,n=Array(t.length);for(i=0;i<r;i++)n[i]={index:i,value:t[i]};for(n.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=n[i].value}function J(t,e){var i;return!t.every(function(r,n){return i=n,!e(r,n,t)})?i:-1}var Q={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},$={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function tt(t){for(var e=ht(),i=0,r=t.length;i<r;++i)_t(e,t[i]);return e}function et(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function it(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function rt(t,e,i){var r,n;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(n=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*n}function nt(t,e){return st(t,e[0],e[1])}function ot(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function st(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function at(t,e){var i=t[0],r=t[1],n=t[2],o=t[3],s=e[0],a=e[1],h=$.UNKNOWN;return s<i?h|=$.LEFT:s>n&&(h|=$.RIGHT),a<r?h|=$.BELOW:a>o&&(h|=$.ABOVE),h===$.UNKNOWN&&(h=$.INTERSECTING),h}function ht(){return[1/0,1/0,-1/0,-1/0]}function lt(t,e,i,r,n){return n?(n[0]=t,n[1]=e,n[2]=i,n[3]=r,n):[t,e,i,r]}function ut(t){return lt(1/0,1/0,-1/0,-1/0,t)}function pt(t,e){var i=t[0],r=t[1];return lt(i,r,i,r,e)}function ct(t,e,i,r,n){return yt(ut(n),t,e,i,r)}function dt(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function ft(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function _t(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function gt(t,e){for(var i=0,r=e.length;i<r;++i)_t(t,e[i]);return t}function yt(t,e,i,r,n){for(;i<r;i+=n)vt(t,e[i],e[i+1]);return t}function vt(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function mt(t,e,i){var r;return(r=e.call(i,Et(t)))?r:(r=e.call(i,St(t)))?r:(r=e.call(i,Lt(t)))?r:(r=e.call(i,It(t)))||!1}function xt(t){var e=0;return bt(t)||(e=Ot(t)*Rt(t)),e}function Et(t){return[t[0],t[1]]}function St(t){return[t[2],t[1]]}function Tt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Ct(t,e,i,r,n){var o=e*r[0]/2,s=e*r[1]/2,a=Math.cos(i),h=Math.sin(i),l=o*a,u=o*h,p=s*a,c=s*h,d=t[0],f=t[1],_=d-l+c,g=d-l-c,y=d+l-c,v=d+l+c,m=f-u-p,x=f-u+p,E=f+u+p,S=f+u-p;return lt(Math.min(_,g,y,v),Math.min(m,x,E,S),Math.max(_,g,y,v),Math.max(m,x,E,S),n)}function Rt(t){return t[3]-t[1]}function wt(t,e,i){var r=i||[1/0,1/0,-1/0,-1/0];return Pt(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):ut(r),r}function It(t){return[t[0],t[3]]}function Lt(t){return[t[2],t[3]]}function Ot(t){return t[2]-t[0]}function Pt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function bt(t){return t[2]<t[0]||t[3]<t[1]}function Mt(t,e){var i=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=r,t[3]+=r}function Ft(t,e,i){var r=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(r,r,2),function(t,e,i){return lt(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}([r[0],r[2],r[4],r[6]],[r[1],r[3],r[5],r[7]],i)}var At={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},Nt={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};function Gt(t,e,i,r,n,o){for(var s=o||[],a=0,h=e;h<i;h+=r){var l=t[h],u=t[h+1];s[a++]=n[0]*l+n[2]*u+n[4],s[a++]=n[1]*l+n[3]*u+n[5]}return o&&s.length!=a&&(s.length=a),s}function Dt(t,e,i,r,n,o,s){for(var a=s||[],h=0,l=e;l<i;l+=r){a[h++]=t[l]+n,a[h++]=t[l+1]+o;for(var u=l+2;u<l+r;++u)a[h++]=t[u]}return s&&a.length!=h&&(a.length=h),a}function kt(t,e,i){return Math.min(Math.max(t,e),i)}var jt="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function Ut(t,e,i,r,n,o){var s=n-i,a=o-r;if(0!==s||0!==a){var h=((t-i)*s+(e-r)*a)/(s*s+a*a);h>1?(i=n,r=o):h>0&&(i+=s*h,r+=a*h)}return Yt(t,e,i,r)}function Yt(t,e,i,r){var n=i-t,o=r-e;return n*n+o*o}function Bt(t){return 180*t/Math.PI}function Vt(t){return t*Math.PI/180}function Xt(t,e){var i=t%e;return i*e<0?i+e:i}function zt(t,e,i){return t+i*(e-t)}
/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */var Wt=6371008.8;function Kt(t,e,i){var r=i||Wt,n=Vt(t[1]),o=Vt(e[1]),s=(o-n)/2,a=Vt(e[0]-t[0])/2,h=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function Ht(t,e){for(var i=0,r=0,n=t.length;r<n-1;++r)i+=Kt(t[r],t[r+1],e);return i}function Zt(t,e){for(var i=0,r=t.length,n=t[r-1][0],o=t[r-1][1],s=0;s<r;s++){var a=t[s][0],h=t[s][1];i+=Vt(a-n)*(2+Math.sin(Vt(o))+Math.sin(Vt(h))),n=a,o=h}return i*e*e/2}function qt(t,e,i,r){var n=r||Wt,o=Vt(t[1]),s=Vt(t[0]),a=e/n,h=Math.asin(Math.sin(o)*Math.cos(a)+Math.cos(o)*Math.sin(a)*Math.cos(i));return[Bt(s+Math.atan2(Math.sin(i)*Math.sin(a)*Math.cos(o),Math.cos(a)-Math.sin(o)*Math.sin(h))),Bt(h)]}var Jt={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Qt={};Qt[Jt.DEGREES]=2*Math.PI*6370997/360,Qt[Jt.FEET]=.3048,Qt[Jt.METERS]=1,Qt[Jt.USFEET]=1200/3937;var $t=Jt,te=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};te.prototype.canWrapX=function(){return this.canWrapX_},te.prototype.getCode=function(){return this.code_},te.prototype.getExtent=function(){return this.extent_},te.prototype.getUnits=function(){return this.units_},te.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Qt[this.units_]},te.prototype.getWorldExtent=function(){return this.worldExtent_},te.prototype.getAxisOrientation=function(){return this.axisOrientation_},te.prototype.isGlobal=function(){return this.global_},te.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},te.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},te.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},te.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},te.prototype.setWorldExtent=function(t){this.worldExtent_=t},te.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},te.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var ee=te,ie=6378137,re=Math.PI*ie,ne=[-re,-re,re,re],oe=[-180,-85,180,85],se=function(t){function e(e){t.call(this,{code:e,units:$t.METERS,extent:ne,global:!0,worldExtent:oe,getPointResolution:function(t,e){return t/jt(e[1]/ie)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ee),ae=[new se("EPSG:3857"),new se("EPSG:102100"),new se("EPSG:102113"),new se("EPSG:900913"),new se("urn:ogc:def:crs:EPSG:6.18:3:3857"),new se("urn:ogc:def:crs:EPSG::3857"),new se("http://www.opengis.net/gml/srs/epsg.xml#3857")];function he(t,e,i){var r=t.length,n=i>1?i:2,o=e;void 0===o&&(o=n>2?t.slice():new Array(r));for(var s=re,a=0;a<r;a+=n){o[a]=s*t[a]/180;var h=ie*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));h>s?h=s:h<-s&&(h=-s),o[a+1]=h}return o}function le(t,e,i){var r=t.length,n=i>1?i:2,o=e;void 0===o&&(o=n>2?t.slice():new Array(r));for(var s=0;s<r;s+=n)o[s]=180*t[s]/re,o[s+1]=360*Math.atan(Math.exp(t[s+1]/ie))/Math.PI-90;return o}var ue=[-180,-90,180,90],pe=6378137*Math.PI/180,ce=function(t){function e(e,i){t.call(this,{code:e,units:$t.DEGREES,extent:ue,axisOrientation:i,global:!0,metersPerUnit:pe,worldExtent:ue})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ee),de=[new ce("CRS:84"),new ce("EPSG:4326","neu"),new ce("urn:ogc:def:crs:EPSG::4326","neu"),new ce("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ce("urn:ogc:def:crs:OGC:1.3:CRS84"),new ce("urn:ogc:def:crs:OGC:2:84"),new ce("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ce("urn:x-ogc:def:crs:EPSG:4326","neu")],fe={};var _e={};function ge(t,e,i){var r=t.getCode(),n=e.getCode();r in _e||(_e[r]={}),_e[r][n]=i}function ye(t,e){var i;return t in _e&&e in _e[t]&&(i=_e[t][e]),i}function ve(t,e,i){var r;if(void 0!==e){for(var n=0,o=t.length;n<o;++n)e[n]=t[n];r=e}else r=t.slice();return r}function me(t,e,i){if(void 0!==e&&t!==e){for(var r=0,n=t.length;r<n;++r)e[r]=t[r];t=e}return t}function xe(t){!function(t,e){fe[t]=e}(t.getCode(),t),ge(t,t,ve)}function Ee(t){return"string"==typeof t?function(t){return fe[t]||null}(t):t||null}function Se(t,e,i,r){var n,o=(t=Ee(t)).getPointResolutionFunc();if(o)n=o(e,i);else if(t.getUnits()==$t.DEGREES&&!r||r==$t.DEGREES)n=e;else{var s=Le(t,Ee("EPSG:4326")),a=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];n=(Kt((a=s(a,a,2)).slice(0,2),a.slice(2,4))+Kt(a.slice(4,6),a.slice(6,8)))/2;var h=r?Qt[r]:t.getMetersPerUnit();void 0!==h&&(n/=h)}return n}function Te(t){!function(t){t.forEach(xe)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&ge(e,t,ve)})})}function Ce(t,e){return t?"string"==typeof t?Ee(t):t:Ee(e)}function Re(t){return function(e,i,r){for(var n=e.length,o=void 0!==r?r:2,s=void 0!==i?i:new Array(n),a=0;a<n;a+=o){var h=t([e[a],e[a+1]]);s[a]=h[0],s[a+1]=h[1];for(var l=o-1;l>=2;--l)s[a+l]=e[a+l]}return s}}function we(t,e,i,r){var n=Ee(t),o=Ee(e);ge(n,o,Re(i)),ge(o,n,Re(r))}function Ie(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?i:Le(t,e)===ve&&i}function Le(t,e){var i=ye(t.getCode(),e.getCode());return i||(i=me),i}function Oe(t,e){return Le(Ee(t),Ee(e))}function Pe(t,e,i){return Oe(e,i)(t,void 0,t.length)}function be(t,e,i){return Ft(t,Oe(e,i))}Te(ae),Te(de),function(t,e,i,r){t.forEach(function(t){e.forEach(function(e){ge(t,e,i),ge(e,t,r)})})}(de,ae,he,le);var Me=new Array(6);function Fe(t){return Ne(t,1,0,0,1,0,0)}function Ae(t,e){var i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],h=e[0],l=e[1],u=e[2],p=e[3],c=e[4],d=e[5];return t[0]=i*h+n*l,t[1]=r*h+o*l,t[2]=i*u+n*p,t[3]=r*u+o*p,t[4]=i*c+n*d+s,t[5]=r*c+o*d+a,t}function Ne(t,e,i,r,n,o,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=o,t[5]=s,t}function Ge(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function De(t,e){var i=e[0],r=e[1];return e[0]=t[0]*i+t[2]*r+t[4],e[1]=t[1]*i+t[3]*r+t[5],e}function ke(t,e){var i=Math.cos(e),r=Math.sin(e);return Ae(t,Ne(Me,i,r,-r,i,0,0))}function je(t,e,i){return Ae(t,Ne(Me,e,0,0,i,0,0))}function Ue(t,e,i){return Ae(t,Ne(Me,1,0,0,1,e,i))}function Ye(t,e,i,r,n,o,s,a){var h=Math.sin(o),l=Math.cos(o);return t[0]=r*l,t[1]=n*h,t[2]=-r*h,t[3]=n*l,t[4]=s*r*l-a*r*h+e,t[5]=s*n*h+a*n*l+i,t}function Be(t){var e=function(t){return t[0]*t[3]-t[1]*t[2]}(t);Y(0!==e,32);var i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5];return t[0]=o/e,t[1]=-r/e,t[2]=-n/e,t[3]=i/e,t[4]=(n*a-o*s)/e,t[5]=-(i*a-r*s)/e,t}var Ve=[1,0,0,1,0,0],Xe=function(t){function e(){t.call(this),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return r()},e.prototype.closestPointXY=function(t,e,i,n){return r()},e.prototype.containsXY=function(t,e){return!1},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return r()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){r()},e.prototype.scale=function(t,e,i){r()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return r()},e.prototype.getType=function(){return r()},e.prototype.applyTransform=function(t){r()},e.prototype.intersectsExtent=function(t){return r()},e.prototype.translate=function(t,e){r()},e.prototype.transform=function(t,e){var i=Ee(t),r=i.getUnits()==$t.TILE_PIXELS?function(t,r,n){var o=i.getExtent(),s=i.getWorldExtent(),a=Rt(s)/Rt(o);return Ye(Ve,s[0],s[3],a,-a,0,0,0),Gt(t,0,t.length,n,Ve,r),Oe(i,e)(t,r,n)}:Oe(i,e);return this.applyTransform(r),this},e}(D);function ze(t){var e;return t==At.XY?e=2:t==At.XYZ||t==At.XYM?e=3:t==At.XYZM&&(e=4),e}var We=function(t){function e(){t.call(this),this.layout=At.XY,this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeExtent=function(t){return ct(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return r()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(p(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=ze(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){r()},e.prototype.setLayout=function(t,e,i){var r;if(t)r=ze(t);else{for(var n=0;n<i;++n){if(0===e.length)return this.layout=At.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=At.XY:3==t?e=At.XYZ:4==t&&(e=At.XYZM);return e}(r=e.length)}this.layout=t,this.stride=r},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var r=this.getStride();!function(t,e,i,r,n,o,s){for(var a=s||[],h=Math.cos(n),l=Math.sin(n),u=o[0],p=o[1],c=0,d=e;d<i;d+=r){var f=t[d]-u,_=t[d+1]-p;a[c++]=u+f*h-_*l,a[c++]=p+f*l+_*h;for(var g=d+2;g<d+r;++g)a[c++]=t[g]}s&&a.length!=c&&(a.length=c)}(i,0,i.length,r,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var r=e;void 0===r&&(r=t);var n=i;n||(n=Tt(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();!function(t,e,i,r,n,o,s,a){for(var h=a||[],l=s[0],u=s[1],p=0,c=e;c<i;c+=r){var d=t[c]-l,f=t[c+1]-u;h[p++]=l+n*d,h[p++]=u+o*f;for(var _=c+2;_<c+r;++_)h[p++]=t[_]}a&&h.length!=p&&(h.length=p)}(o,0,o.length,s,t,r,n,o),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Dt(i,0,i.length,r,t,e,i),this.changed()}},e}(Xe);function Ke(t,e,i,r){for(var n=0,o=t[i-r],s=t[i-r+1];e<i;e+=r){var a=t[e],h=t[e+1];n+=s*a-o*h,o=a,s=h}return n/2}function He(t,e,i,r){for(var n=0,o=0,s=i.length;o<s;++o){var a=i[o];n+=Ke(t,e,a,r),e=a}return n}function Ze(t,e,i,r,n,o,s){var a,h=t[e],l=t[e+1],u=t[i]-h,p=t[i+1]-l;if(0===u&&0===p)a=e;else{var c=((n-h)*u+(o-l)*p)/(u*u+p*p);if(c>1)a=i;else{if(c>0){for(var d=0;d<r;++d)s[d]=zt(t[e+d],t[i+d],c);return void(s.length=r)}a=e}}for(var f=0;f<r;++f)s[f]=t[a+f];s.length=r}function qe(t,e,i,r,n){var o=t[e],s=t[e+1];for(e+=r;e<i;e+=r){var a=t[e],h=t[e+1],l=Yt(o,s,a,h);l>n&&(n=l),o=a,s=h}return n}function Je(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o];n=qe(t,e,a,r,n),e=a}return n}function Qe(t,e,i,r,n,o,s,a,h,l,u){if(e==i)return l;var p,c;if(0===n){if((c=Yt(s,a,t[e],t[e+1]))<l){for(p=0;p<r;++p)h[p]=t[e+p];return h.length=r,c}return l}for(var d=u||[NaN,NaN],f=e+r;f<i;)if(Ze(t,f-r,f,r,s,a,d),(c=Yt(s,a,d[0],d[1]))<l){for(l=c,p=0;p<r;++p)h[p]=d[p];h.length=r,f+=r}else f+=r*Math.max((Math.sqrt(c)-Math.sqrt(l))/n|0,1);if(o&&(Ze(t,i-r,e,r,s,a,d),(c=Yt(s,a,d[0],d[1]))<l)){for(l=c,p=0;p<r;++p)h[p]=d[p];h.length=r}return l}function $e(t,e,i,r,n,o,s,a,h,l,u){for(var p=u||[NaN,NaN],c=0,d=i.length;c<d;++c){var f=i[c];l=Qe(t,e,f,r,n,o,s,a,h,l,p),e=f}return l}function ti(t,e,i,r){for(var n=0,o=i.length;n<o;++n)t[e++]=i[n];return e}function ei(t,e,i,r){for(var n=0,o=i.length;n<o;++n)for(var s=i[n],a=0;a<r;++a)t[e++]=s[a];return e}function ii(t,e,i,r,n){for(var o=n||[],s=0,a=0,h=i.length;a<h;++a){var l=ei(t,e,i[a],r);o[s++]=l,e=l}return o.length=s,o}function ri(t,e,i,r,n){for(var o=void 0!==n?n:[],s=0,a=e;a<i;a+=r)o[s++]=t.slice(a,a+r);return o.length=s,o}function ni(t,e,i,r,n){for(var o=void 0!==n?n:[],s=0,a=0,h=i.length;a<h;++a){var l=i[a];o[s++]=ri(t,e,l,r,o[s]),e=l}return o.length=s,o}function oi(t,e,i,r,n){for(var o=void 0!==n?n:[],s=0,a=0,h=i.length;a<h;++a){var l=i[a];o[s++]=ni(t,e,l,r,o[s]),e=l[l.length-1]}return o.length=s,o}function si(t,e,i,r,n,o,s){var a=(i-e)/r;if(a<3){for(;e<i;e+=r)o[s++]=t[e],o[s++]=t[e+1];return s}var h=new Array(a);h[0]=1,h[a-1]=1;for(var l=[e,i-r],u=0;l.length>0;){for(var p=l.pop(),c=l.pop(),d=0,f=t[c],_=t[c+1],g=t[p],y=t[p+1],v=c+r;v<p;v+=r){var m=Ut(t[v],t[v+1],f,_,g,y);m>d&&(u=v,d=m)}d>n&&(h[(u-e)/r]=1,c+r<u&&l.push(c,u),u+r<p&&l.push(u,p))}for(var x=0;x<a;++x)h[x]&&(o[s++]=t[e+x*r],o[s++]=t[e+x*r+1]);return s}function ai(t,e,i,r,n,o,s,a){for(var h=0,l=i.length;h<l;++h){var u=i[h];s=si(t,e,u,r,n,o,s),a.push(s),e=u}return s}function hi(t,e){return e*Math.round(t/e)}function li(t,e,i,r,n,o,s){if(e==i)return s;var a,h,l=hi(t[e],n),u=hi(t[e+1],n);e+=r,o[s++]=l,o[s++]=u;do{if(a=hi(t[e],n),h=hi(t[e+1],n),(e+=r)==i)return o[s++]=a,o[s++]=h,s}while(a==l&&h==u);for(;e<i;){var p=hi(t[e],n),c=hi(t[e+1],n);if(e+=r,p!=a||c!=h){var d=a-l,f=h-u,_=p-l,g=c-u;d*g==f*_&&(d<0&&_<d||d==_||d>0&&_>d)&&(f<0&&g<f||f==g||f>0&&g>f)?(a=p,h=c):(o[s++]=a,o[s++]=h,l=a,u=h,a=p,h=c)}}return o[s++]=a,o[s++]=h,s}function ui(t,e,i,r,n,o,s,a){for(var h=0,l=i.length;h<l;++h){var u=i[h];s=li(t,e,u,r,n,o,s),a.push(s),e=u}return s}var pi=function(t){function e(e,i){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){return r<rt(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(qe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,r))},e.prototype.getArea=function(){return Ke(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return ri(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=si(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,At.XY)},e.prototype.getType=function(){return Nt.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ei(this.flatCoordinates,0,t,this.stride),this.changed()},e}(We),ci=function(t){function e(e,i){t.call(this),this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){var n=this.flatCoordinates,o=Yt(t,e,n[0],n[1]);if(o<r){for(var s=this.stride,a=0;a<s;++a)i[a]=n[a];return i.length=s,o}return r},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return pt(this.flatCoordinates,t)},e.prototype.getType=function(){return Nt.POINT},e.prototype.intersectsExtent=function(t){return st(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ti(this.flatCoordinates,0,t,this.stride),this.changed()},e}(We);function di(t,e,i,r,n){return!mt(n,function(n){return!fi(t,e,i,r,n[0],n[1])})}function fi(t,e,i,r,n,o){for(var s=0,a=t[i-r],h=t[i-r+1];e<i;e+=r){var l=t[e],u=t[e+1];h<=o?u>o&&(l-a)*(o-h)-(n-a)*(u-h)>0&&s++:u<=o&&(l-a)*(o-h)-(n-a)*(u-h)<0&&s--,a=l,h=u}return 0!==s}function _i(t,e,i,r,n,o){if(0===i.length)return!1;if(!fi(t,e,i[0],r,n,o))return!1;for(var s=1,a=i.length;s<a;++s)if(fi(t,i[s-1],i[s],r,n,o))return!1;return!0}function gi(t,e,i,r,n,o,s){for(var a,h,l,u,p,c,d,f=n[o+1],_=[],g=0,y=i.length;g<y;++g){var v=i[g];for(u=t[v-r],c=t[v-r+1],a=e;a<v;a+=r)p=t[a],d=t[a+1],(f<=c&&d<=f||c<=f&&f<=d)&&(l=(f-c)/(d-c)*(p-u)+u,_.push(l)),u=p,c=d}var m=NaN,x=-1/0;for(_.sort(V),u=_[0],a=1,h=_.length;a<h;++a){p=_[a];var E=Math.abs(p-u);E>x&&_i(t,e,i,r,l=(u+p)/2,f)&&(m=l,x=E),u=p}return isNaN(m)&&(m=n[o]),s?(s.push(m,f,x),s):[m,f,x]}function yi(t,e,i,r,n){for(var o=[],s=0,a=i.length;s<a;++s){var h=i[s];o=gi(t,e,h,r,n,2*s,o),e=h[h.length-1]}return o}function vi(t,e,i,r,n,o){for(var s,a=[t[e],t[e+1]],h=[];e+r<i;e+=r){if(h[0]=t[e+r],h[1]=t[e+r+1],s=n.call(o,a,h))return s;a[0]=h[0],a[1]=h[1]}return!1}function mi(t,e,i,r,n){var o=yt([1/0,1/0,-1/0,-1/0],t,e,i,r);return!!Pt(n,o)&&(!!ot(n,o)||(o[0]>=n[0]&&o[2]<=n[2]||(o[1]>=n[1]&&o[3]<=n[3]||vi(t,e,i,r,function(t,e){return function(t,e,i){var r=!1,n=at(t,e),o=at(t,i);if(n===$.INTERSECTING||o===$.INTERSECTING)r=!0;else{var s,a,h=t[0],l=t[1],u=t[2],p=t[3],c=e[0],d=e[1],f=i[0],_=i[1],g=(_-d)/(f-c);o&$.ABOVE&&!(n&$.ABOVE)&&(r=(s=f-(_-p)/g)>=h&&s<=u),r||!(o&$.RIGHT)||n&$.RIGHT||(r=(a=_-(f-u)*g)>=l&&a<=p),r||!(o&$.BELOW)||n&$.BELOW||(r=(s=f-(_-l)/g)>=h&&s<=u),r||!(o&$.LEFT)||n&$.LEFT||(r=(a=_-(f-h)*g)>=l&&a<=p)}return r}(n,t,e)}))))}function xi(t,e,i,r,n){if(!function(t,e,i,r,n){return!!(mi(t,e,i,r,n)||fi(t,e,i,r,n[0],n[1])||fi(t,e,i,r,n[0],n[3])||fi(t,e,i,r,n[2],n[1])||fi(t,e,i,r,n[2],n[3]))}(t,e,i[0],r,n))return!1;if(1===i.length)return!0;for(var o=1,s=i.length;o<s;++o)if(di(t,i[o-1],i[o],r,n)&&!mi(t,i[o-1],i[o],r,n))return!1;return!0}function Ei(t,e,i,r){for(;e<i-r;){for(var n=0;n<r;++n){var o=t[e+n];t[e+n]=t[i-r+n],t[i-r+n]=o}e+=r,i-=r}}function Si(t,e,i,r){for(var n=0,o=t[i-r],s=t[i-r+1];e<i;e+=r){var a=t[e],h=t[e+1];n+=(a-o)*(h+s),o=a,s=h}return n>0}function Ti(t,e,i,r,n){for(var o=void 0!==n&&n,s=0,a=i.length;s<a;++s){var h=i[s],l=Si(t,e,h,r);if(0===s){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=h}return!0}function Ci(t,e,i,r,n){for(var o=void 0!==n&&n,s=0,a=i.length;s<a;++s){var h=i[s],l=Si(t,e,h,r);(0===s?o&&l||!o&&!l:o&&!l||!o&&l)&&Ei(t,e,h,r),e=h}return e}function Ri(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o)e=Ci(t,e,i[o],r,n);return e}var wi=function(t){function e(e,i,r){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==i&&r?(this.setFlatCoordinates(i,e),this.ends_=r):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?K(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,r){return r<rt(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Je(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$e(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,r))},e.prototype.containsXY=function(t,e){return _i(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return He(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Ci(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,ni(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Tt(this.getExtent());this.flatInteriorPoint_=gi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new ci(this.getFlatInteriorPoint(),At.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new pi(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[],n=0,o=0,s=i.length;o<s;++o){var a=i[o],h=new pi(e.slice(n,a),t);r.push(h),n=a}return r},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Ti(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ci(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=ui(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,r),new e(i,At.XY,r)},e.prototype.getType=function(){return Nt.POLYGON},e.prototype.intersectsExtent=function(t){return xi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=ii(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(We),Ii=wi;function Li(t,e,i,r){for(var n=i||32,o=[],s=0;s<n;++s)K(o,qt(t,e,2*Math.PI*s/n,r));return o.push(o[0],o[1]),new wi(o,At.XY,[o.length])}function Oi(t){var e=t[0],i=t[1],r=t[2],n=t[3],o=[e,i,e,n,r,n,r,i,e,i];return new wi(o,At.XY,[o.length])}function Pi(t,e,i){for(var r=e||32,n=t.getStride(),o=t.getLayout(),s=t.getCenter(),a=n*(r+1),h=new Array(a),l=0;l<a;l+=n){h[l]=0,h[l+1]=0;for(var u=2;u<n;u++)h[l+u]=s[u]}var p=[h.length],c=new wi(h,o,p);return bi(c,s,t.getRadius(),i),c}function bi(t,e,i,r){for(var n=t.getFlatCoordinates(),o=t.getStride(),s=n.length/o-1,a=r||0,h=0;h<=s;++h){var l=h*o,u=a+2*Xt(h,s)*Math.PI/s;n[l]=e[0]+i*Math.cos(u),n[l+1]=e[1]+i*Math.sin(u)}t.changed()}var Mi="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",Fi=-1!==Mi.indexOf("firefox"),Ai=-1!==Mi.indexOf("safari")&&-1==Mi.indexOf("chrom"),Ni=-1!==Mi.indexOf("webkit")&&-1==Mi.indexOf("edge"),Gi=-1!==Mi.indexOf("macintosh"),Di=window.devicePixelRatio||1,ki=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),ji="geolocation"in navigator,Ui="ontouchstart"in window,Yi="PointerEvent"in window,Bi=!!navigator.msPointerEnabled,Vi={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},Xi=function(t){function e(e){t.call(this,M.ERROR),this.code=e.code,this.message=e.message}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P),zi=function(t){function e(e){t.call(this);var i=e||{};this.position_=null,this.transform_=me,this.watchId_=void 0,v(this,G(Vi.PROJECTION),this.handleProjectionChanged_,this),v(this,G(Vi.TRACKING),this.handleTrackingChanged_,this),void 0!==i.projection&&this.setProjection(i.projection),void 0!==i.trackingOptions&&this.setTrackingOptions(i.trackingOptions),this.setTracking(void 0!==i.tracking&&i.tracking)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Le(Ee("EPSG:4326"),t),this.position_&&this.set(Vi.POSITION,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if(ji){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(Vi.ACCURACY,e.accuracy),this.set(Vi.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(Vi.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(Vi.HEADING,null===e.heading?void 0:Vt(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var i=this.transform_(this.position_);this.set(Vi.POSITION,i),this.set(Vi.SPEED,null===e.speed?void 0:e.speed);var r=Li(this.position_,e.accuracy);r.applyTransform(this.transform_),this.set(Vi.ACCURACY_GEOMETRY,r),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new Xi(t))},e.prototype.getAccuracy=function(){return this.get(Vi.ACCURACY)},e.prototype.getAccuracyGeometry=function(){return this.get(Vi.ACCURACY_GEOMETRY)||null},e.prototype.getAltitude=function(){return this.get(Vi.ALTITUDE)},e.prototype.getAltitudeAccuracy=function(){return this.get(Vi.ALTITUDE_ACCURACY)},e.prototype.getHeading=function(){return this.get(Vi.HEADING)},e.prototype.getPosition=function(){return this.get(Vi.POSITION)},e.prototype.getProjection=function(){return this.get(Vi.PROJECTION)},e.prototype.getSpeed=function(){return this.get(Vi.SPEED)},e.prototype.getTracking=function(){return this.get(Vi.TRACKING)},e.prototype.getTrackingOptions=function(){return this.get(Vi.TRACKING_OPTIONS)},e.prototype.setProjection=function(t){this.set(Vi.PROJECTION,Ee(t))},e.prototype.setTracking=function(t){this.set(Vi.TRACKING,t)},e.prototype.setTrackingOptions=function(t){this.set(Vi.TRACKING_OPTIONS,t)},e}(D);function Wi(t,e,i){var r=void 0!==i?t.toFixed(i):""+t,n=r.indexOf(".");return(n=-1===n?r.length:n)>e?r:new Array(1+e-n).join("0")+r}function Ki(t,e){for(var i=(""+t).split("."),r=(""+e).split("."),n=0;n<Math.max(i.length,r.length);n++){var o=parseInt(i[n]||"0",10),s=parseInt(r[n]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}function Hi(t,e){return t[0]+=e[0],t[1]+=e[1],t}function Zi(t,e){var i,r,n=t[0],o=t[1],s=e[0],a=e[1],h=s[0],l=s[1],u=a[0],p=a[1],c=u-h,d=p-l,f=0===c&&0===d?0:(c*(n-h)+d*(o-l))/(c*c+d*d||0);return f<=0?(i=h,r=l):f>=1?(i=u,r=p):(i=h+f*c,r=l+f*d),[i,r]}function qi(t,e,i){var r=Xt(e+180,360)-180,n=Math.abs(3600*r),o=i||0,s=Math.pow(10,o),a=Math.floor(n/3600),h=Math.floor((n-3600*a)/60),l=n-3600*a-60*h;return(l=Math.ceil(l*s)/s)>=60&&(l=0,h+=1),h>=60&&(h=0,a+=1),a+" "+Wi(h,2)+" "+Wi(l,2,o)+""+(0==r?"":" "+t.charAt(r<0?1:0))}function Ji(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function Qi(t,e){for(var i=!0,r=t.length-1;r>=0;--r)if(t[r]!=e[r]){i=!1;break}return i}function $i(t,e){var i=Math.cos(e),r=Math.sin(e),n=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=n,t[1]=o,t}function tr(t,e){return t[0]*=e,t[1]*=e,t}function er(t,e){var i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function ir(t,e){return Math.sqrt(er(t,e))}function rr(t,e){return er(t,Zi(t,e))}function nr(t,e){return Ji(t,"{x}, {y}",e)}function or(t,e,i,r,n,o){var s=NaN,a=NaN,h=(i-e)/r;if(1===h)s=t[e],a=t[e+1];else if(2==h)s=(1-n)*t[e]+n*t[e+r],a=(1-n)*t[e+1]+n*t[e+r+1];else if(0!==h){for(var l=t[e],u=t[e+1],p=0,c=[0],d=e+r;d<i;d+=r){var f=t[d],_=t[d+1];p+=Math.sqrt((f-l)*(f-l)+(_-u)*(_-u)),c.push(p),l=f,u=_}var g=n*p,y=function(t,e,i){for(var r,n,o=i||V,s=0,a=t.length,h=!1;s<a;)(n=+o(t[r=s+(a-s>>1)],e))<0?s=r+1:(a=r,h=!n);return h?s:~s}(c,g);if(y<0){var v=(g-c[-y-2])/(c[-y-1]-c[-y-2]),m=e+(-y-2)*r;s=zt(t[m],t[m+r],v),a=zt(t[m+1],t[m+r+1],v)}else s=t[e+y*r],a=t[e+y*r+1]}return o?(o[0]=s,o[1]=a,o):[s,a]}function sr(t,e,i,r,n,o){if(i==e)return null;var s;if(n<t[e+r-1])return o?((s=t.slice(e,e+r))[r-1]=n,s):null;if(t[i-1]<n)return o?((s=t.slice(i-r,i))[r-1]=n,s):null;if(n==t[e+r-1])return t.slice(e,e+r);for(var a=e/r,h=i/r;a<h;){var l=a+h>>1;n<t[(l+1)*r-1]?h=l:a=l+1}var u=t[a*r-1];if(n==u)return t.slice((a-1)*r,(a-1)*r+r);var p=(n-u)/(t[(a+1)*r-1]-u);s=[];for(var c=0;c<r-1;++c)s.push(zt(t[(a-1)*r+c],t[a*r+c],p));return s.push(n),s}function ar(t,e,i,r){for(var n=t[e],o=t[e+1],s=0,a=e+r;a<i;a+=r){var h=t[a],l=t[a+1];s+=Math.sqrt((h-n)*(h-n)+(l-o)*(l-o)),n=h,o=l}return s}var hr=function(t){function e(e,i){t.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendCoordinate=function(t){this.flatCoordinates?K(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){return r<rt(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(qe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,r))},e.prototype.forEachSegment=function(t){return vi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=At.XYM&&this.layout!=At.XYZM)return null;var i=void 0!==e&&e;return sr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return ri(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return or(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return ar(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=si(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,At.XY)},e.prototype.getType=function(){return Nt.LINE_STRING},e.prototype.intersectsExtent=function(t){return mi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ei(this.flatCoordinates,0,t,this.stride),this.changed()},e}(We);function lr(t,e,i){for(var r,n,o,s,a,h,l=[],u=t(0),p=t(1),c=e(u),d=e(p),f=[p,u],_=[d,c],g=[1,0],y={},v=1e5;--v>0&&g.length>0;)o=g.pop(),u=f.pop(),c=_.pop(),(h=o.toString())in y||(l.push(c[0],c[1]),y[h]=!0),s=g.pop(),p=f.pop(),d=_.pop(),Ut((n=e(r=t(a=(o+s)/2)))[0],n[1],c[0],c[1],d[0],d[1])<i?(l.push(d[0],d[1]),y[h=s.toString()]=!0):(g.push(s,a,a,o),_.push(d,n,n,c),f.push(p,r,r,u));return l}var ur={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"},pr=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,cr=/^([a-z]*)$/i;function dr(t){return"string"==typeof t?t:yr(t)}var fr=function(){var t={},e=0;return function(i){var r;if(t.hasOwnProperty(i))r=t[i];else{if(e>=1024){var n=0;for(var o in t)0==(3&n++)&&(delete t[o],--e)}r=function(t){var e,i,r,n,o;cr.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}(t));if(pr.exec(t)){var s,a=t.length-1;s=a<=4?1:2;var h=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),i=parseInt(t.substr(1+1*s,s),16),r=parseInt(t.substr(1+2*s,s),16),n=h?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,i=(i<<4)+i,r=(r<<4)+r,h&&(n=(n<<4)+n)),o=[e,i,r,n/255]}else 0==t.indexOf("rgba(")?gr(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),gr(o)):Y(!1,14);return o}(i),t[i]=r,++e}return r}}();function _r(t){return Array.isArray(t)?t:fr(t)}function gr(t){return t[0]=kt(t[0]+.5|0,0,255),t[1]=kt(t[1]+.5|0,0,255),t[2]=kt(t[2]+.5|0,0,255),t[3]=kt(t[3],0,1),t}function yr(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+e+","+i+","+r+","+(void 0===t[3]?1:t[3])+")"}var vr=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};vr.prototype.clone=function(){var t=this.getColor();return new vr({color:Array.isArray(t)?t.slice():t||void 0})},vr.prototype.getColor=function(){return this.color_},vr.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},vr.prototype.getChecksum=function(){if(void 0===this.checksum_){var t=this.color_;t?Array.isArray(t)||"string"==typeof t?this.checksum_="f"+dr(t):this.checksum_=o(this.color_):this.checksum_="f-"}return this.checksum_};var mr=vr,xr=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};xr.prototype.clone=function(){var t=this.getColor();return new xr({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},xr.prototype.getColor=function(){return this.color_},xr.prototype.getLineCap=function(){return this.lineCap_},xr.prototype.getLineDash=function(){return this.lineDash_},xr.prototype.getLineDashOffset=function(){return this.lineDashOffset_},xr.prototype.getLineJoin=function(){return this.lineJoin_},xr.prototype.getMiterLimit=function(){return this.miterLimit_},xr.prototype.getWidth=function(){return this.width_},xr.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},xr.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},xr.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},xr.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},xr.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},xr.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},xr.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},xr.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=o(this.color_):this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_};var Er=xr,Sr="point",Tr="line",Cr=function(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new mr({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:Sr,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};Cr.prototype.clone=function(){return new Cr({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},Cr.prototype.getOverflow=function(){return this.overflow_},Cr.prototype.getFont=function(){return this.font_},Cr.prototype.getMaxAngle=function(){return this.maxAngle_},Cr.prototype.getPlacement=function(){return this.placement_},Cr.prototype.getOffsetX=function(){return this.offsetX_},Cr.prototype.getOffsetY=function(){return this.offsetY_},Cr.prototype.getFill=function(){return this.fill_},Cr.prototype.getRotateWithView=function(){return this.rotateWithView_},Cr.prototype.getRotation=function(){return this.rotation_},Cr.prototype.getScale=function(){return this.scale_},Cr.prototype.getStroke=function(){return this.stroke_},Cr.prototype.getText=function(){return this.text_},Cr.prototype.getTextAlign=function(){return this.textAlign_},Cr.prototype.getTextBaseline=function(){return this.textBaseline_},Cr.prototype.getBackgroundFill=function(){return this.backgroundFill_},Cr.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},Cr.prototype.getPadding=function(){return this.padding_},Cr.prototype.setOverflow=function(t){this.overflow_=t},Cr.prototype.setFont=function(t){this.font_=t},Cr.prototype.setMaxAngle=function(t){this.maxAngle_=t},Cr.prototype.setOffsetX=function(t){this.offsetX_=t},Cr.prototype.setOffsetY=function(t){this.offsetY_=t},Cr.prototype.setPlacement=function(t){this.placement_=t},Cr.prototype.setFill=function(t){this.fill_=t},Cr.prototype.setRotation=function(t){this.rotation_=t},Cr.prototype.setScale=function(t){this.scale_=t},Cr.prototype.setStroke=function(t){this.stroke_=t},Cr.prototype.setText=function(t){this.text_=t},Cr.prototype.setTextAlign=function(t){this.textAlign_=t},Cr.prototype.setTextBaseline=function(t){this.textBaseline_=t},Cr.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},Cr.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},Cr.prototype.setPadding=function(t){this.padding_=t};var Rr=Cr,wr=new Er({color:"rgba(0,0,0,0.2)"}),Ir=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],Lr=function(t){var e=t||{};this.map_=null,this.postcomposeListenerKey_=null,this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxLatP_=1/0,this.maxLonP_=1/0,this.minLatP_=-1/0,this.minLonP_=-1/0,this.targetSize_=void 0!==e.targetSize?e.targetSize:100,this.maxLines_=void 0!==e.maxLines?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==e.strokeStyle?e.strokeStyle:wr,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,1==e.showLabels&&(this.lonLabelFormatter_=void 0==e.lonLabelFormatter?qi.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=void 0==e.latLabelFormatter?qi.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=void 0==e.lonLabelPosition?0:e.lonLabelPosition,this.latLabelPosition_=void 0==e.latLabelPosition?1:e.latLabelPosition,this.lonLabelStyle_=void 0!==e.lonLabelStyle?e.lonLabelStyle:new Rr({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new mr({color:"rgba(0,0,0,1)"}),stroke:new Er({color:"rgba(255,255,255,1)",width:3})}),this.latLabelStyle_=void 0!==e.latLabelStyle?e.latLabelStyle:new Rr({font:"12px Calibri,sans-serif",textAlign:"end",fill:new mr({color:"rgba(0,0,0,1)"}),stroke:new Er({color:"rgba(255,255,255,1)",width:3})}),this.meridiansLabels_=[],this.parallelsLabels_=[]),this.intervals_=void 0!==e.intervals?e.intervals:Ir,this.setMap(void 0!==e.map?e.map:null)};Lr.prototype.addMeridian_=function(t,e,i,r,n,o){var s=this.getMeridian_(t,e,i,r,o);if(Pt(s.getExtent(),n)){if(this.meridiansLabels_){var a=this.getMeridianPoint_(s,n,o);this.meridiansLabels_[o]={geom:a,text:this.lonLabelFormatter_(t)}}this.meridians_[o++]=s}return o},Lr.prototype.getMeridianPoint_=function(t,e,i){var r,n=t.getFlatCoordinates(),o=Math.max(e[1],n[1]),s=Math.min(e[3],n[n.length-1]),a=kt(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,o,s),h=[n[0],a];return i in this.meridiansLabels_?(r=this.meridiansLabels_[i].geom).setCoordinates(h):r=new ci(h),r},Lr.prototype.addParallel_=function(t,e,i,r,n,o){var s=this.getParallel_(t,e,i,r,o);if(Pt(s.getExtent(),n)){if(this.parallelsLabels_){var a=this.getParallelPoint_(s,n,o);this.parallelsLabels_[o]={geom:a,text:this.latLabelFormatter_(t)}}this.parallels_[o++]=s}return o},Lr.prototype.getParallelPoint_=function(t,e,i){var r,n=t.getFlatCoordinates(),o=Math.max(e[0],n[0]),s=Math.min(e[2],n[n.length-2]),a=[kt(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,o,s),n[1]];return i in this.parallelsLabels_?(r=this.parallelsLabels_[i].geom).setCoordinates(a):r=new ci(a),r},Lr.prototype.createGraticule_=function(t,e,i,r){var n=this.getInterval_(i);if(-1==n)return this.meridians_.length=this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o,s,a,h,l=this.toLonLatTransform_(e),u=l[0],p=l[1],c=this.maxLines_,d=[Math.max(t[0],this.minLonP_),Math.max(t[1],this.minLatP_),Math.min(t[2],this.maxLonP_),Math.min(t[3],this.maxLatP_)],f=(d=be(d,this.projection_,"EPSG:4326"))[3],_=d[2],g=d[1],y=d[0];for(h=kt(u=Math.floor(u/n)*n,this.minLon_,this.maxLon_),s=this.addMeridian_(h,g,f,r,t,0),o=0;h!=this.minLon_&&o++<c;)h=Math.max(h-n,this.minLon_),s=this.addMeridian_(h,g,f,r,t,s);for(h=kt(u,this.minLon_,this.maxLon_),o=0;h!=this.maxLon_&&o++<c;)h=Math.min(h+n,this.maxLon_),s=this.addMeridian_(h,g,f,r,t,s);for(this.meridians_.length=s,this.meridiansLabels_&&(this.meridiansLabels_.length=s),a=kt(p=Math.floor(p/n)*n,this.minLat_,this.maxLat_),s=this.addParallel_(a,y,_,r,t,0),o=0;a!=this.minLat_&&o++<c;)a=Math.max(a-n,this.minLat_),s=this.addParallel_(a,y,_,r,t,s);for(a=kt(p,this.minLat_,this.maxLat_),o=0;a!=this.maxLat_&&o++<c;)a=Math.min(a+n,this.maxLat_),s=this.addParallel_(a,y,_,r,t,s);this.parallels_.length=s,this.parallelsLabels_&&(this.parallelsLabels_.length=s)},Lr.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1],r=-1,n=Math.pow(this.targetSize_*t,2),o=[],s=[],a=0,h=this.intervals_.length;a<h;++a){var l=this.intervals_[a]/2;if(o[0]=e-l,o[1]=i-l,s[0]=e+l,s[1]=i+l,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(s,s),Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)<=n)break;r=this.intervals_[a]}return r},Lr.prototype.getMap=function(){return this.map_},Lr.prototype.getMeridian_=function(t,e,i,r,n){var o=function(t,e,i,r,n){return lr(function(r){return[t,e+(i-e)*r]},Oe(Ee("EPSG:4326"),r),n)}(t,e,i,this.projection_,r),s=this.meridians_[n];return s?(s.setFlatCoordinates(At.XY,o),s.changed()):s=this.meridians_[n]=new hr(o,At.XY),s},Lr.prototype.getMeridians=function(){return this.meridians_},Lr.prototype.getParallel_=function(t,e,i,r,n){var o=function(t,e,i,r,n){return lr(function(r){return[e+(i-e)*r,t]},Oe(Ee("EPSG:4326"),r),n)}(t,e,i,this.projection_,r),s=this.parallels_[n];return s?(s.setFlatCoordinates(At.XY,o),s.changed()):s=new hr(o,At.XY),s},Lr.prototype.getParallels=function(){return this.parallels_},Lr.prototype.handlePostCompose_=function(t){var e,i,r,n,o=t.vectorContext,s=t.frameState,a=s.extent,h=s.viewState,l=h.center,u=h.projection,p=h.resolution,c=s.pixelRatio,d=p*p/(4*c*c);for((!this.projection_||!Ie(this.projection_,u))&&this.updateProjectionInfo_(u),this.createGraticule_(a,l,p,d),o.setFillStrokeStyle(null,this.strokeStyle_),e=0,i=this.meridians_.length;e<i;++e)r=this.meridians_[e],o.drawGeometry(r);for(e=0,i=this.parallels_.length;e<i;++e)r=this.parallels_[e],o.drawGeometry(r);if(this.meridiansLabels_)for(e=0,i=this.meridiansLabels_.length;e<i;++e)n=this.meridiansLabels_[e],this.lonLabelStyle_.setText(n.text),o.setTextStyle(this.lonLabelStyle_),o.drawGeometry(n.geom);if(this.parallelsLabels_)for(e=0,i=this.parallelsLabels_.length;e<i;++e)n=this.parallelsLabels_[e],this.latLabelStyle_.setText(n.text),o.setTextStyle(this.latLabelStyle_),o.drawGeometry(n.geom)},Lr.prototype.updateProjectionInfo_=function(t){var e=Ee("EPSG:4326"),i=t.getWorldExtent(),r=be(i,e,t);this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0],this.maxLatP_=r[3],this.maxLonP_=r[2],this.minLatP_=r[1],this.minLonP_=r[0],this.fromLonLatTransform_=Oe(e,t),this.toLonLatTransform_=Oe(t,e),this.projectionCenterLonLat_=this.toLonLatTransform_(Tt(t.getExtent())),this.projection_=t},Lr.prototype.setMap=function(t){this.map_&&(E(this.postcomposeListenerKey_),this.postcomposeListenerKey_=null,this.map_.render()),t&&(this.postcomposeListenerKey_=v(t,ur.POSTCOMPOSE,this.handlePostCompose_,this),t.render()),this.map_=t};var Or=Lr,Pr=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};Pr.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},Pr.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},Pr.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var r=this.points_[e+2]-this.points_[i+2];if(r<1e3/60)return!1;var n=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,n),this.initialVelocity_=Math.sqrt(n*n+o*o)/r,this.initialVelocity_>this.minVelocity_},Pr.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},Pr.prototype.getAngle=function(){return this.angle_};var br=Pr,Mr=function(t){function e(e,i,r){t.call(this,e),this.map=i,this.frameState=void 0!==r?r:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P),Fr=function(t){function e(e,i,r,n,o){t.call(this,e,i,o),this.originalEvent=r,this.pixel=i.getEventPixel(r),this.coordinate=i.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==n&&n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Mr),Ar={SINGLECLICK:"singleclick",CLICK:M.CLICK,DBLCLICK:M.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Nr=function(t){function e(e,i,r,n,o){t.call(this,e,i,r.originalEvent,n,o),this.pointerEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Fr),Gr={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Dr=function(t,e){this.dispatcher=t,this.mapping_=e};Dr.prototype.getEvents=function(){return Object.keys(this.mapping_)},Dr.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var kr=Dr,jr=1,Ur="mouse";function Yr(t){if(!this.isEventSimulatedFromTouch_(t)){jr.toString()in this.pointerMap&&this.cancel(t);var e=Wr(t,this.dispatcher);this.pointerMap[jr.toString()]=t,this.dispatcher.down(e,t)}}function Br(t){if(!this.isEventSimulatedFromTouch_(t)){var e=Wr(t,this.dispatcher);this.dispatcher.move(e,t)}}function Vr(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[jr.toString()];if(e&&e.button===t.button){var i=Wr(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}}function Xr(t){if(!this.isEventSimulatedFromTouch_(t)){var e=Wr(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function zr(t){if(!this.isEventSimulatedFromTouch_(t)){var e=Wr(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}function Wr(t,e){var i=e.cloneEvent(t,t),r=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),r()},i.pointerId=jr,i.isPrimary=!0,i.pointerType=Ur,i}var Kr=function(t){function e(e){var i={mousedown:Yr,mousemove:Br,mouseup:Vr,mouseover:Xr,mouseout:zr};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,r=t.clientY,n=0,o=e.length,s=void 0;n<o&&(s=e[n]);n++){var a=Math.abs(i-s[0]),h=Math.abs(r-s[1]);if(a<=25&&h<=25)return!0}return!1},e.prototype.cancel=function(t){var e=Wr(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[jr.toString()]},e}(kr),Hr=["","unavailable","touch","pen","mouse"];function Zr(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function qr(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function Jr(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function Qr(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function $r(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function tn(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function en(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function rn(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var nn=function(t){function e(e){var i={MSPointerDown:Zr,MSPointerMove:qr,MSPointerUp:Jr,MSPointerOut:Qr,MSPointerOver:$r,MSPointerCancel:tn,MSGotPointerCapture:rn,MSLostPointerCapture:en};t.call(this,e,i),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=Hr[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(kr);function on(t){this.dispatcher.fireNativeEvent(t)}function sn(t){this.dispatcher.fireNativeEvent(t)}function an(t){this.dispatcher.fireNativeEvent(t)}function hn(t){this.dispatcher.fireNativeEvent(t)}function ln(t){this.dispatcher.fireNativeEvent(t)}function un(t){this.dispatcher.fireNativeEvent(t)}function pn(t){this.dispatcher.fireNativeEvent(t)}function cn(t){this.dispatcher.fireNativeEvent(t)}var dn=function(t){function e(e){var i={pointerdown:on,pointermove:sn,pointerup:an,pointerout:hn,pointerover:ln,pointercancel:un,gotpointercapture:cn,lostpointercapture:pn};t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(kr),fn=!1,_n=function(t){function e(e,i,r){t.call(this,e),this.originalEvent=i;var n=r||{};this.buttons=function(t){var e;if(t.buttons||fn)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(n),this.pressure=function(t,e){var i=0;i=t.pressure?t.pressure:e?.5:0;return i}(n,this.buttons),this.bubbles="bubbles"in n&&n.bubbles,this.cancelable="cancelable"in n&&n.cancelable,this.view="view"in n?n.view:null,this.detail="detail"in n?n.detail:null,this.screenX="screenX"in n?n.screenX:0,this.screenY="screenY"in n?n.screenY:0,this.clientX="clientX"in n?n.clientX:0,this.clientY="clientY"in n?n.clientY:0,this.ctrlKey="ctrlKey"in n&&n.ctrlKey,this.altKey="altKey"in n&&n.altKey,this.shiftKey="shiftKey"in n&&n.shiftKey,this.metaKey="metaKey"in n&&n.metaKey,this.button="button"in n?n.button:0,this.relatedTarget="relatedTarget"in n?n.relatedTarget:null,this.pointerId="pointerId"in n?n.pointerId:0,this.width="width"in n?n.width:0,this.height="height"in n?n.height:0,this.tiltX="tiltX"in n?n.tiltX:0,this.tiltY="tiltY"in n?n.tiltY:0,this.pointerType="pointerType"in n?n.pointerType:"",this.hwTimestamp="hwTimestamp"in n?n.hwTimestamp:0,this.isPrimary="isPrimary"in n&&n.isPrimary,i.preventDefault&&(this.preventDefault=function(){i.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P);!function(){try{var t=new MouseEvent("click",{buttons:1});fn=1===t.buttons}catch(t){}}();var gn=_n;function yn(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function vn(t){this.processTouches_(t,this.moveOverOut_)}function mn(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function xn(t){this.processTouches_(t,this.cancelOut_)}var En=function(t){function e(e,i){var r={touchstart:yn,touchmove:vn,touchend:mn,touchcancel:xn};t.call(this,e,r),this.pointerMap=e.pointerMap,this.mouseSource=i,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&jr.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.radiusX||0,i.height=e.radiusY||0,i.pressure=e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType="touch",i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},e.prototype.processTouches_=function(t,e){var i=Array.prototype.slice.call(t.changedTouches),r=i.length;function n(){t.preventDefault()}for(var o=0;o<r;++o){var s=this.touchToPointer_(t,i[o]);s.preventDefault=n,e.call(this,t,s)}},e.prototype.findTouch_=function(t,e){for(var i=t.length,r=0;r<i;r++){if(t[r].identifier===e)return!0}return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),r=i.length;if(r>=e.length){for(var n=[],o=0;o<r;++o){var s=Number(i[o]),a=this.pointerMap[s];s==jr||this.findTouch_(e,s-2)||n.push(a.out)}for(var h=0;h<n.length;++h)this.cancelOut_(t,n[h])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var i=e,r=this.pointerMap[i.pointerId];if(r){var n=r.out,o=r.outTarget;this.dispatcher.move(i,t),n&&o!==i.target&&(n.relatedTarget=i.target,i.relatedTarget=o,n.target=o,i.target?(this.dispatcher.leaveOut(n,t),this.dispatcher.enterOver(i,t)):(i.target=o,i.relatedTarget=null,this.cancelOut_(t,i))),r.out=i,r.outTarget=i.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var r=[i.clientX,i.clientY];e.push(r),setTimeout(function(){!function(t,e){var i=t.indexOf(e),r=i>-1;r&&t.splice(i,1)}(e,r)},this.dedupTimeout_)}},e}(kr),Sn=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],Tn=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(Yi)this.registerSource("native",new dn(this));else if(Bi)this.registerSource("ms",new nn(this));else{var t=new Kr(this);this.registerSource("mouse",t),Ui&&this.registerSource("touch",new En(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var i=e,r=i.getEvents();r&&(r.forEach(function(t){var e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))}.bind(this)),this.eventSourceList_.push(i))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.addEvents_(i.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.removeEvents_(i.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,i=this.eventMap_[e];i&&i(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){v(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){x(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var i={},r=0,n=Sn.length;r<n;r++){var o=Sn[r][0];i[o]=t[o]||e[o]||Sn[r][1]}return i},e.prototype.down=function(t,e){this.fireEvent(Gr.POINTERDOWN,t,e)},e.prototype.move=function(t,e){this.fireEvent(Gr.POINTERMOVE,t,e)},e.prototype.up=function(t,e){this.fireEvent(Gr.POINTERUP,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(Gr.POINTERENTER,t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(Gr.POINTERLEAVE,t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(Gr.POINTEROVER,t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(Gr.POINTEROUT,t,e)},e.prototype.cancel=function(t,e){this.fireEvent(Gr.POINTERCANCEL,t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,i){return new gn(t,i,e)},e.prototype.fireEvent=function(t,e,i){var r=this.makeEvent(t,e,i);this.dispatchEvent(r)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,Wr(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(b),Cn=function(t){function e(e,i){t.call(this),this.map_=e,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i?i*Di:Di,this.down_=null;var r=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new Tn(r),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=v(this.pointerEventHandler_,Gr.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=v(this.pointerEventHandler_,Gr.POINTERMOVE,this.relayEvent_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emulateClick_=function(t){var e=new Nr(Ar.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Nr(Ar.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new Nr(Ar.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Ar.POINTERUP||e.type==Ar.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Ar.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Nr(Ar.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(E),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new Nr(Ar.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new Tn(document),this.dragListenerKeys_.push(v(this.documentPointerEventHandler_,Ar.POINTERMOVE,this.handlePointerMove_,this),v(this.documentPointerEventHandler_,Ar.POINTERUP,this.handlePointerUp_,this),v(this.pointerEventHandler_,Ar.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Nr(Ar.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Nr(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(E(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(E(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(E),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(b),Rn="postrender",wn="movestart",In="moveend",Ln={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},On={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5},Pn=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};Pn.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,p(this.queuedElements_)},Pn.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var r=this.keyFunction_(i);return delete this.queuedElements_[r],i},Pn.prototype.enqueue=function(t){Y(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},Pn.prototype.getCount=function(){return this.elements_.length},Pn.prototype.getLeftChildIndex_=function(t){return 2*t+1},Pn.prototype.getRightChildIndex_=function(t){return 2*t+2},Pn.prototype.getParentIndex_=function(t){return t-1>>1},Pn.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},Pn.prototype.isEmpty=function(){return 0===this.elements_.length},Pn.prototype.isKeyQueued=function(t){return t in this.queuedElements_},Pn.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},Pn.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,r=e.length,n=e[t],o=i[t],s=t;t<r>>1;){var a=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),l=h<r&&i[h]<i[a]?h:a;e[t]=e[l],i[t]=i[l],t=l}e[t]=n,i[t]=o,this.siftDown_(s,t)},Pn.prototype.siftDown_=function(t,e){for(var i=this.elements_,r=this.priorities_,n=i[e],o=r[e];e>t;){var s=this.getParentIndex_(e);if(!(r[s]>o))break;i[e]=i[s],r[e]=r[s],e=s}i[e]=n,r[e]=o},Pn.prototype.reprioritize=function(){var t,e,i,r=this.priorityFunction_,n=this.elements_,o=this.priorities_,s=0,a=n.length;for(e=0;e<a;++e)(i=r(t=n[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[s]=i,n[s++]=t);n.length=s,o.length=s,this.heapify_()};var bn=Pn,Mn=function(t){function e(e,i){t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);i&&v(e[0],M.CHANGE,this.handleTileChange,this);return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===On.LOADED||i===On.ERROR||i===On.EMPTY||i===On.ABORT){x(e,M.CHANGE,this.handleTileChange,this);var r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,r,n,o=0,s=!1;this.tilesLoading_<t&&o<e&&this.getCount()>0;)n=(r=this.dequeue()[0]).getKey(),(i=r.getState())===On.ABORT?s=!0:i!==On.IDLE||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++o,r.load());0===o&&s&&this.tileChangeCallback_()},e}(bn),Fn=42,An=256;function Nn(t){return t}function Gn(t,e){return void 0!==t?0:void 0}function Dn(t,e){return void 0!==t?t+e:void 0}var kn=0,jn=1,Un="center",Yn="resolution",Bn="rotation";function Vn(t){return Math.pow(t,3)}function Xn(t){return 1-Vn(1-t)}function zn(t){return 3*t*t-2*t*t*t}function Wn(t){return t}var Kn=0;function Hn(t,e){setTimeout(function(){t(e)},0)}function Zn(t){return!(t.sourceCenter&&t.targetCenter&&!Qi(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var qn=function(t){function e(e){t.call(this);var i=u({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Ce(i.projection,"EPSG:3857"),this.applyOptions_(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var e={};e[Un]=void 0!==t.center?t.center:null;var i=function(t){var e,i,r,n=void 0!==t.minZoom?t.minZoom:Kn,o=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var a=t.resolutions;i=a[n],r=void 0!==a[o]?a[o]:a[a.length-1],e=function(t){return function(e,i,r){if(void 0!==e){var n=z(t,e,r);n=kt(n+i,0,t.length-1);var o=Math.floor(n);if(n!=o&&o<t.length-1){var s=t[o]/t[o+1];return t[o]/Math.pow(s,n-o)}return t[o]}}}(a)}else{var h=Ce(t.projection,"EPSG:3857"),l=h.getExtent(),u=l?Math.max(Ot(l),Rt(l)):360*Qt[$t.DEGREES]/h.getMetersPerUnit(),p=u/An/Math.pow(2,Kn),c=p/Math.pow(2,28-Kn);void 0!==(i=t.maxResolution)?n=0:i=p/Math.pow(s,n),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(s,o):p/Math.pow(s,o):c),o=n+Math.floor(Math.log(i/r)/Math.log(s)),r=i/Math.pow(s,o-n),e=function(t,e,i){return function(r,n,o){if(void 0!==r){var s=-o/2+.5,a=Math.floor(Math.log(e/r)/Math.log(t)+s),h=Math.max(a+n,0);return void 0!==i&&(h=Math.min(h,i)),e/Math.pow(t,h)}}}(s,i,o-n)}return{constraint:e,maxResolution:i,minResolution:r,minZoom:n,zoomFactor:s}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;var r=function(t){return void 0!==t.extent?function(t){return function(e){return e?[kt(e[0],t[0],t[2]),kt(e[1],t[1],t[3])]:void 0}}(t.extent):Nn}(t),n=i.constraint,o=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?function(t){var e=t||Vt(5);return function(t,i){return void 0!==t?Math.abs(t+i)<=e?0:t+i:void 0}}():!1===e?Dn:"number"==typeof e?function(t){var e=2*Math.PI/t;return function(t,i){return void 0!==t?t=Math.floor((t+i)/e+.5)*e:void 0}}(e):Dn}return Gn}(t);this.constraints_={center:r,resolution:n,rotation:o},void 0!==t.resolution?e[Yn]=t.resolution:void 0!==t.zoom&&(e[Yn]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[Yn]=kt(Number(this.getResolution()||e[Yn]),this.minResolution_,this.maxResolution_))),e[Bn]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=u({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),u({},e,t)},e.prototype.animate=function(t){var e,i=arguments,r=arguments.length;if(r>1&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r),!this.isDef()){var n=arguments[r-1];return n.center&&this.setCenter(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&Hn(e,!0))}for(var o=Date.now(),s=this.getCenter().slice(),a=this.getResolution(),h=this.getRotation(),l=[],u=0;u<r;++u){var p=i[u],c={start:o,complete:!1,anchor:p.anchor,duration:void 0!==p.duration?p.duration:1e3,easing:p.easing||zn};if(p.center&&(c.sourceCenter=s,c.targetCenter=p.center,s=c.targetCenter),void 0!==p.zoom?(c.sourceResolution=a,c.targetResolution=this.constrainResolution(this.maxResolution_,p.zoom-this.minZoom_,0),a=c.targetResolution):p.resolution&&(c.sourceResolution=a,c.targetResolution=p.resolution,a=c.targetResolution),void 0!==p.rotation){c.sourceRotation=h;var d=Xt(p.rotation-h+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=h+d,h=c.targetRotation}c.callback=e,Zn(c)?c.complete=!0:o+=c.duration,l.push(c)}this.animations_.push(l),this.setHint(kn,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[kn]>0},e.prototype.getInteracting=function(){return this.hints_[jn]>0},e.prototype.cancelAnimations=function(){this.setHint(kn,-this.hints_[kn]);for(var t=0,e=this.animations_.length;t<e;++t){var i=this.animations_[t];i[0].callback&&Hn(i[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var r=this.animations_[i],n=!0,o=0,s=r.length;o<s;++o){var a=r[o];if(!a.complete){var h=t-a.start,l=a.duration>0?h/a.duration:1;l>=1?(a.complete=!0,l=1):n=!1;var u=a.easing(l);if(a.sourceCenter){var p=a.sourceCenter[0],c=a.sourceCenter[1],d=p+u*(a.targetCenter[0]-p),f=c+u*(a.targetCenter[1]-c);this.set(Un,[d,f])}if(a.sourceResolution&&a.targetResolution){var _=1===u?a.targetResolution:a.sourceResolution+u*(a.targetResolution-a.sourceResolution);a.anchor&&this.set(Un,this.calculateCenterZoom(_,a.anchor)),this.set(Yn,_)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var g=1===u?Xt(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+u*(a.targetRotation-a.sourceRotation);a.anchor&&this.set(Un,this.calculateCenterRotate(g,a.anchor)),this.set(Bn,g)}if(e=!0,!a.complete)break}}if(n){this.animations_[i]=null,this.setHint(kn,-1);var y=r[0].callback;y&&Hn(y,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var i,r=this.getCenter();return void 0!==r&&($i(i=[r[0]-e[0],r[1]-e[1]],t-this.getRotation()),Hi(i,e)),i},e.prototype.calculateCenterZoom=function(t,e){var i,r=this.getCenter(),n=this.getResolution();void 0!==r&&void 0!==n&&(i=[e[0]-t*(e[0]-r[0])/n,e[1]-t*(e[1]-r[1])/n]);return i},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+o(this)+'"]',i=document.querySelector(e);if(i){var r=getComputedStyle(i);t[0]=parseInt(r.width,10),t[1]=parseInt(r.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,i){var r=e||0,n=i||0;return this.constraints_.resolution(t,r,n)},e.prototype.constrainRotation=function(t,e){var i=e||0;return this.constraints_.rotation(t,i)},e.prototype.getCenter=function(){return this.get(Un)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),i=this.getCenter();Y(i,1);var r=this.getResolution();Y(void 0!==r,2);var n=this.getRotation();return Y(void 0!==n,3),Ct(i,r,n,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(Yn)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var i=e||this.getSizeFromViewport_(),r=Ot(t)/i[0],n=Rt(t)/i[1];return Math.max(r,n)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.maxResolution_,r=this.minResolution_,n=Math.log(i/r)/Math.log(e);return function(t){return i/Math.pow(e,t*n)}},e.prototype.getRotation=function(){return this.get(Bn)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,i=this.maxResolution_,r=this.minResolution_,n=Math.log(i/r)/Math.log(e);return function(t){return Math.log(i/t)/Math.log(e)/n}},e.prototype.getState=function(t){var e=this.getCenter(),i=this.getProjection(),r=this.getResolution(),n=r/t,o=this.getRotation();return{center:[Math.round(e[0]/n)*n,Math.round(e[1]/n)*n],projection:void 0!==i?i:null,resolution:r,rotation:o,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,i,r=this.minZoom_||0;if(this.resolutions_){var n=z(this.resolutions_,t,1);r=n,e=this.resolutions_[n],i=n==this.resolutions_.length-1?2:e/this.resolutions_[n+1]}else e=this.maxResolution_,i=this.zoomFactor_;return r+Math.log(e/t)/Math.log(i)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var i,r=e||{},n=r.size;n||(n=this.getSizeFromViewport_()),Y(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?(Y(!bt(t),25),i=Oi(t)):t.getType()===Nt.CIRCLE?(i=Oi(t=t.getExtent())).rotate(this.getRotation(),Tt(t)):i=t;var o,s=void 0!==r.padding?r.padding:[0,0,0,0],a=void 0===r.constrainResolution||r.constrainResolution,h=void 0!==r.nearest&&r.nearest;o=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.constrainResolution(this.maxResolution_,r.maxZoom-this.minZoom_,0):0;for(var l=i.getFlatCoordinates(),u=this.getRotation(),p=Math.cos(-u),c=Math.sin(-u),d=1/0,f=1/0,_=-1/0,g=-1/0,y=i.getStride(),v=0,m=l.length;v<m;v+=y){var x=l[v]*p-l[v+1]*c,E=l[v]*c+l[v+1]*p;d=Math.min(d,x),f=Math.min(f,E),_=Math.max(_,x),g=Math.max(g,E)}var S=this.getResolutionForExtent([d,f,_,g],[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);if(S=isNaN(S)?o:Math.max(S,o),a){var T=this.constrainResolution(S,0,0);!h&&T<S&&(T=this.constrainResolution(T,-1,0)),S=T}c=-c;var C=(d+_)/2,R=(f+g)/2,w=[(C+=(s[1]-s[3])/2*S)*p-(R+=(s[0]-s[2])/2*S)*c,R*p+C*c],L=r.callback?r.callback:I;void 0!==r.duration?this.animate({resolution:S,center:w,duration:r.duration,easing:r.easing},L):(this.setResolution(S),this.setCenter(w),Hn(L,!0))},e.prototype.centerOn=function(t,e,i){var r=this.getRotation(),n=Math.cos(-r),o=Math.sin(-r),s=t[0]*n-t[1]*o,a=t[1]*n+t[0]*o,h=this.getResolution(),l=(s+=(e[0]/2-i[0])*h)*n-(a+=(i[1]-e[1]/2)*h)*(o=-o),u=a*n+s*o;this.setCenter([l,u])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(Un,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(Yn,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(Bn,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(D);function Jn(t,e){var i=document.createElement("canvas");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")}function Qn(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function $n(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function to(t){for(;t.lastChild;)t.removeChild(t.lastChild)}var eo={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"},io=function(t){function e(e){t.call(this);var i=u({},e);i[eo.OPACITY]=void 0!==e.opacity?e.opacity:1,i[eo.VISIBLE]=void 0===e.visible||e.visible,i[eo.Z_INDEX]=e.zIndex,i[eo.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,i[eo.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(i),this.state_=null,this.type}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=kt(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},e.prototype.getLayersArray=function(t){return r()},e.prototype.getLayerStatesArray=function(t){return r()},e.prototype.getExtent=function(){return this.get(eo.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(eo.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(eo.MIN_RESOLUTION)},e.prototype.getOpacity=function(){return this.get(eo.OPACITY)},e.prototype.getSourceState=function(){return r()},e.prototype.getVisible=function(){return this.get(eo.VISIBLE)},e.prototype.getZIndex=function(){return this.get(eo.Z_INDEX)},e.prototype.setExtent=function(t){this.set(eo.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(eo.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(eo.MIN_RESOLUTION,t)},e.prototype.setOpacity=function(t){this.set(eo.OPACITY,t)},e.prototype.setVisible=function(t){this.set(eo.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(eo.Z_INDEX,t)},e}(D),ro={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},no={LAYERS:"layers"},oo=function(t){function e(e){var i=e||{},r=u({},i);delete r.layers;var n=i.layers;t.call(this,r),this.layersListenerKeys_=[],this.listenerKeys_={},v(this,G(no.LAYERS),this.handleLayersChanged_,this),n?Array.isArray(n)?n=new U(n.slice(),{unique:!0}):Y("function"==typeof n.getArray,43):n=new U(void 0,{unique:!0}),this.setLayers(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(E),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(v(t,h.ADD,this.handleLayersAdd_,this),v(t,h.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(E);p(this.listenerKeys_);for(var i=t.getArray(),r=0,n=i.length;r<n;r++){var s=i[r];this.listenerKeys_[o(s)]=[v(s,l,this.handleLayerChange_,this),v(s,M.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[o(e)]=[v(e,l,this.handleLayerChange_,this),v(e,M.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=o(t.element);this.listenerKeys_[e].forEach(E),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(no.LAYERS)},e.prototype.setLayers=function(t){this.set(no.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var r=this.getLayerState(),n=i,o=e.length;n<o;n++){var s=e[n];s.opacity*=r.opacity,s.visible=s.visible&&r.visible,s.maxResolution=Math.min(s.maxResolution,r.maxResolution),s.minResolution=Math.max(s.minResolution,r.minResolution),void 0!==r.extent&&(void 0!==s.extent?s.extent=wt(s.extent,r.extent):s.extent=r.extent)}return e},e.prototype.getSourceState=function(){return ro.READY},e}(io);function so(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i}function ao(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function ho(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}var lo=function(t){function e(e){t.call(this);var i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,r,n,o={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new oo({layers:t.layers});o[Ln.LAYERGROUP]=s,o[Ln.TARGET]=t.target,o[Ln.VIEW]=void 0!==t.view?t.view:new qn,void 0!==t.controls&&(Array.isArray(t.controls)?i=new U(t.controls.slice()):(Y("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new U(t.interactions.slice()):(Y("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?n=new U(t.overlays.slice()):(Y("function"==typeof t.overlays.getArray,49),n=t.overlays):n=new U;return{controls:i,interactions:r,keyboardEventTarget:e,overlays:n,values:o}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Di,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(Ui?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var r=[M.CLICK,M.DBLCLICK,M.MOUSEDOWN,M.TOUCHSTART,M.MSPOINTERDOWN,Ar.POINTERDOWN,M.MOUSEWHEEL,M.WHEEL],n=0,o=r.length;n<o;++n)v(this.overlayContainerStopEvent_,r[n],O);for(var s in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new Cn(this,e.moveTolerance),Ar)v(this.mapBrowserEventHandler_,Ar[s],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=i.keyboardEventTarget,this.keyHandlerKeys_=null,v(this.viewport_,M.CONTEXTMENU,this.handleBrowserEvent,this),v(this.viewport_,M.WHEEL,this.handleBrowserEvent,this),v(this.viewport_,M.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=i.controls||new U,this.interactions=i.interactions||new U,this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new Mn(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},v(this,G(Ln.LAYERGROUP),this.handleLayerGroupChanged_,this),v(this,G(Ln.VIEW),this.handleViewChanged_,this),v(this,G(Ln.SIZE),this.handleSizeChanged_,this),v(this,G(Ln.TARGET),this.handleTargetChanged_,this),this.setProperties(i.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),v(this.controls,h.ADD,function(t){t.element.setMap(this)},this),v(this.controls,h.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),v(this.interactions,h.ADD,function(t){t.element.setMap(this)},this),v(this.interactions,h.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),v(this.overlays_,h.ADD,function(t){this.addOverlayInternal_(t.element)},this),v(this.overlays_,h.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),x(this.viewport_,M.CONTEXTMENU,this.handleBrowserEvent,this),x(this.viewport_,M.WHEEL,this.handleBrowserEvent,this),x(this.viewport_,M.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(M.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var r=this.getCoordinateFromPixel(t),n=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==i.layerFilter?i.layerFilter:R;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,n,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var i=null;return this.forEachFeatureAtPixel(t,function(t){i||(i=[]),i.push(t)},e),i},e.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var r=i||{},n=void 0!==r.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=r.layerFilter||R;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,n,e,null,o,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(t),r=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:R,n=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,n,r,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},e.prototype.getTarget=function(){return this.get(Ln.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?De(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Ln.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?De(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Ln.SIZE)},e.prototype.getView=function(){return this.get(Ln.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,i,r){var n=this.frameState_;if(!(n&&e in n.wantedTiles))return 1/0;if(!n.wantedTiles[e][t.getKey()])return 1/0;var o=i[0]-n.focus[0],s=i[1]-n.focus[1];return 65536*Math.log(r)+Math.sqrt(o*o+s*s)/r},e.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,r=new Fr(i,this,t);this.handleMapBrowserEvent(r)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=e.length-1;i>=0;i--){var r=e[i];if(r.getActive())if(!r.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,r=i;if(t){var n=t.viewHints;n[kn]&&(i=this.loadTilesWhileAnimating_?8:0,r=2),n[jn]&&(i=this.loadTilesWhileInteracting_?8:0,r=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,r))}!t||!this.hasListener(ur.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||function t(e){for(var i=0,r=e.length;i<r;++i){var n=e[i];if("function"==typeof n.getLayers)return t(n.getLayers().getArray());var o=n.getSource();if(o&&o.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(ur.RENDERCOMPLETE,t);for(var o=this.postRenderFunctions_,s=0,a=o.length;s<a;++s)o[s](this,t);o.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)E(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var r=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[v(r,M.KEYDOWN,this.handleBrowserEvent,this),v(r,M.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),addEventListener(M.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),$n(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(M.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(E(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(E(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",o(t)),this.viewPropertyListenerKey_=v(t,l,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=v(t,M.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(E),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[v(t,l,this.render,this),v(t,M.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,i=this.getSize(),r=this.getView(),n=[1/0,1/0,-1/0,-1/0],s=this.frameState_,a=null;if(void 0!==i&&function(t){return t[0]>0&&t[1]>0}(i)&&r&&r.isDef()){for(var h=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=this.getLayerGroup().getLayerStatesArray(),u={},p=0,c=l.length;p<c;++p)u[o(l[p].layer)]=l[p];e=r.getState(this.pixelRatio_),a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:n,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:u,layerStatesArray:l,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:h,wantedTiles:{}}}if(a&&(a.extent=Ct(e.center,e.resolution,e.rotation,a.size,n)),this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s)(!this.previousExtent_||!bt(this.previousExtent_)&&!dt(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Mr(wn,this,s)),this.previousExtent_=ut(this.previousExtent_));this.previousExtent_&&!a.viewHints[kn]&&!a.viewHints[jn]&&!dt(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Mr(In,this,a)),it(a.extent,this.previousExtent_))}this.dispatchEvent(new Mr(Rn,this,a)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(Ln.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(Ln.SIZE,t)},e.prototype.setTarget=function(t){this.set(Ln.TARGET,t)},e.prototype.setView=function(t){this.set(Ln.VIEW,t)},e.prototype.skipFeature=function(t){this.skippedFeatureUids_[o(t)]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[o(t)],this.render()},e}(D);var uo=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:I,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){$n(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&$n(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)E(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==I&&this.listenerKeys.push(v(t,Rn,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(D),po="ol-hidden",co="ol-selectable",fo="ol-unselectable",_o="ol-unsupported",go="ol-control",yo="ol-collapsed",vo=function(){var t,e={};return function(i){if(t||(t=document.createElement("div").style),!(i in e)){t.font=i;var r=t.fontFamily;if(t.font="",!r)return null;e[i]=r.split(/,\s?/)}return e[i]}}();function mo(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}var xo=function(t){function e(e){var i=u({},e);delete i.source,t.call(this,i),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),v(this,G(eo.SOURCE),this.handleSourcePropertyChange_,this);var r=e.source?e.source:null;this.setSource(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(eo.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():ro.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(E(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=v(t,M.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(E(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(E(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=v(t,ur.PRECOMPOSE,function(t){var e=t,i=this.getLayerState();i.managed=!1,void 0===this.getZIndex()&&(i.zIndex=1/0),e.frameState.layerStatesArray.push(i),e.frameState.layerStates[o(this)]=i},this),this.mapRenderKey_=v(this,M.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(eo.SOURCE,t)},e}(io);function Eo(t){this.updateElement_(t.frameState)}var So=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||Eo,target:i.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===i.collapsed||i.collapsed,this.overrideCollapsible_=void 0!==i.collapsible,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var r=void 0!==i.className?i.className:"ol-attribution",n=void 0!==i.tipLabel?i.tipLabel:"Attributions",o=void 0!==i.collapseLabel?i.collapseLabel:"";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;var s=void 0!==i.label?i.label:"i";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=n,h.appendChild(a),v(h,M.CLICK,this.handleClick_,this);var l=r+" "+fo+" "+go+(this.collapsed_&&this.collapsible_?" "+yo:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=l,u.appendChild(this.ulElement_),u.appendChild(h),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.collectSourceAttributions_=function(t){for(var e={},i=[],r=t.layerStatesArray,n=t.viewState.resolution,o=0,s=r.length;o<s;++o){var a=r[o];if(mo(a,n)){var h=a.layer.getSource();if(h){var l=h.getAttributions();if(l){var u=l(t);if(u)if(this.overrideCollapsible_||!1!==h.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(u))for(var p=0,c=u.length;p<c;++p)u[p]in e||(i.push(u[p]),e[u[p]]=!0);else u in e||(i.push(u),e[u]=!0)}}}}return i},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Z(e,this.renderedAttributions_)){to(this.ulElement_);for(var r=0,n=e.length;r<n;++r){var o=document.createElement("li");o.innerHTML=e[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(yo),this.collapsed_?Qn(this.collapseLabel_,this.label_):Qn(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(uo);function To(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var r="rotate("+i+"rad)";if(this.autoHide_){var n=this.element.classList.contains(po);n||0!==i?n&&0!==i&&this.element.classList.remove(po):this.element.classList.add(po)}this.label_.style.msTransform=r,this.label_.style.webkitTransform=r,this.label_.style.transform=r}this.rotation_=i}}var Co=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||To,target:i.target});var r=void 0!==i.className?i.className:"ol-rotate",n=void 0!==i.label?i.label:"";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=n):(this.label_=n,this.label_.classList.add("ol-compass"));var o=i.tipLabel?i.tipLabel:"Reset rotation",s=document.createElement("button");s.className=r+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),v(s,M.CLICK,this.handleClick_,this);var a=r+" "+fo+" "+go,h=this.element;h.className=a,h.appendChild(s),this.callResetNorth_=i.resetNorth?i.resetNorth:void 0,this.duration_=void 0!==i.duration?i.duration:250,this.autoHide_=void 0===i.autoHide||i.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(po)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:Xn}):t.setRotation(0))},e}(uo),Ro=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target});var r=void 0!==i.className?i.className:"ol-zoom",n=void 0!==i.delta?i.delta:1,o=void 0!==i.zoomInLabel?i.zoomInLabel:"+",s=void 0!==i.zoomOutLabel?i.zoomOutLabel:"",a=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",h=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=r+"-in",l.setAttribute("type","button"),l.title=a,l.appendChild("string"==typeof o?document.createTextNode(o):o),v(l,M.CLICK,this.handleClick_.bind(this,n));var u=document.createElement("button");u.className=r+"-out",u.setAttribute("type","button"),u.title=h,u.appendChild("string"==typeof s?document.createTextNode(s):s),v(u,M.CLICK,this.handleClick_.bind(this,-n));var p=r+" "+fo+" "+go,c=this.element;c.className=p,c.appendChild(l),c.appendChild(u),this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getResolution();if(i){var r=e.constrainResolution(i,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:r,duration:this.duration_,easing:Xn})):e.setResolution(r)}}},e}(uo);function wo(t){var e=t||{},i=new U;return(void 0===e.zoom||e.zoom)&&i.push(new Ro(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new Co(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new So(e.attributionOptions)),i}var Io={ACTIVE:"active"};function Lo(t,e,i,r){Oo(t,e=t.constrainRotation(e,0),i,r)}function Oo(t,e,i,r){if(void 0!==e){var n=t.getRotation(),o=t.getCenter();void 0!==n&&o&&r>0?t.animate({rotation:e,anchor:i,duration:r,easing:Xn}):t.rotate(e,i)}}function Po(t,e,i,r,n){Mo(t,e=t.constrainResolution(e,0,n),i,r)}function bo(t,e,i,r){var n=t.getResolution(),o=t.constrainResolution(n,e,0);if(void 0!==o){var s=t.getResolutions();o=kt(o,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(i&&void 0!==o&&o!==n){var a=t.getCenter(),h=t.calculateCenterZoom(o,i);h=t.constrainCenter(h),i=[(o*a[0]-n*h[0])/(o-n),(o*a[1]-n*h[1])/(o-n)]}Mo(t,o,i,r)}function Mo(t,e,i,r){if(e){var n=t.getResolution(),o=t.getCenter();if(void 0!==n&&o&&e!==n&&r)t.animate({resolution:e,anchor:i,duration:r,easing:Xn});else{if(i){var s=t.calculateCenterZoom(e,i);t.setCenter(s)}t.setResolution(e)}}}var Fo=function(t){function e(e){t.call(this),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(Io.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Io.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(D);function Ao(t){var e=!1;if(t.type==Ar.DBLCLICK){var i=t.originalEvent,r=t.map,n=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_;bo(r.getView(),o,n,this.duration_),t.preventDefault(),e=!0}return!e}var No=function(t){function e(e){t.call(this,{handleEvent:Ao});var i=e||{};this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Fo),Go=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Do=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ko=function(t){return t.target.getTargetElement()===document.activeElement},jo=R,Uo=function(t){var e=t.originalEvent;return 0==e.button&&!(Ni&&Gi&&e.ctrlKey)},Yo=w,Bo=function(t){return"pointermove"==t.type},Vo=function(t){return t.type==Ar.SINGLECLICK},Xo=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},zo=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Wo=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Ko=function(t){var e=t.pointerEvent;return Y(void 0!==e,56),"mouse"==e.pointerType},Ho=function(t){var e=t.pointerEvent;return Y(void 0!==e,56),e.isPrimary&&0===e.button};function Zo(t){for(var e=t.length,i=0,r=0,n=0;n<e;n++)i+=t[n].clientX,r+=t[n].clientY;return[i/e,r/e]}var qo=function(t){function e(e){var i=e||{};t.call(this,i),i.handleDownEvent&&(this.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(this.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(this.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(this.handleUpEvent=i.handleUpEvent),i.stopDown&&(this.stopDown=i.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Ar.POINTERDRAG)this.handleDragEvent(t);else if(t.type==Ar.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Ar.POINTERDOWN){var r=this.handleDownEvent(t);r&&t.preventDefault(),this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==Ar.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Ar.POINTERDOWN||e===Ar.POINTERDRAG||e===Ar.POINTERUP}(t)){var e=t.pointerEvent,i=e.pointerId.toString();t.type==Ar.POINTERUP?delete this.trackedPointers_[i]:t.type==Ar.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=c(this.trackedPointers_)}},e}(Fo),Jo=function(t){function e(e){t.call(this,{stopDown:w});var i=e||{};this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=i.condition?i.condition:Xo,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(jn,1));var e=this.targetPointers,i=Zo(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var r=this.lastCentroid[0]-i[0],n=i[1]-this.lastCentroid[1],o=t.map.getView(),s=[r,n];tr(s,o.getResolution()),$i(s,o.getRotation()),Hi(s,o.getCenter()),s=o.constrainCenter(s),o.setCenter(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length},e.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),o=i.getCenter(),s=e.getPixelFromCoordinate(o),a=e.getCoordinateFromPixel([s[0]-r*Math.cos(n),s[1]-r*Math.sin(n)]);i.animate({center:i.constrainCenter(a),duration:500,easing:Xn})}return this.panning_&&(this.panning_=!1,i.setHint(jn,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(qo),Qo=function(t){function e(e){var i=e||{};t.call(this,{stopDown:w}),this.condition_=i.condition?i.condition:Do,this.lastAngle_=void 0,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(Ko(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==Gn){var r=e.getSize(),n=t.pixel,o=Math.atan2(r[1]/2-n[1],n[0]-r[0]/2);if(void 0!==this.lastAngle_){var s=o-this.lastAngle_;Oo(i,i.getRotation()-s)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){if(!Ko(t))return!0;var e=t.map.getView();return e.setHint(jn,-1),Lo(e,e.getRotation(),void 0,this.duration_),!1},e.prototype.handleDownEvent=function(t){return!!Ko(t)&&(!(!Uo(t)||!this.condition_(t))&&(t.map.getView().setHint(jn,1),this.lastAngle_=void 0,!0))},e}(qo),$o=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Ii([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(C),ts="boxstart",es="boxdrag",is="boxend",rs=function(t){function e(e,i,r){t.call(this,e),this.coordinate=i,this.mapBrowserEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P),ns=function(t){function e(e){t.call(this);var i=e||{};this.box_=new $o(i.className||"ol-dragbox"),this.minArea_=void 0!==i.minArea?i.minArea:64,this.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:I,this.startPixel_=null,this.condition_=i.condition?i.condition:jo,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:this.defaultBoxEndCondition}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.defaultBoxEndCondition=function(t,e,i){var r=i[0]-e[0],n=i[1]-e[1];return r*r+n*n>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){Ko(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new rs(es,t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!Ko(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new rs(is,t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!!Ko(t)&&(!(!Uo(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new rs(ts,t.coordinate,t)),!0))},e}(qo);function os(){var t=this.getMap(),e=t.getView(),i=t.getSize(),r=this.getGeometry().getExtent();if(this.out_){var n=e.calculateExtent(i),o=function(t,e){return gt(ut(e),t)}([t.getPixelFromCoordinate(Et(r)),t.getPixelFromCoordinate(Lt(r))]);Mt(n,1/e.getResolutionForExtent(o,i)),r=n}var s=e.constrainResolution(e.getResolutionForExtent(r,i)),a=Tt(r);a=e.constrainCenter(a),e.animate({resolution:s,center:a,duration:this.duration_,easing:Xn})}var ss=function(t){function e(e){var i=e||{},r=i.condition?i.condition:zo;t.call(this,{condition:r,className:i.className||"ol-dragzoom",onBoxEnd:os}),this.duration_=void 0!==i.duration?i.duration:200,this.out_=void 0!==i.out&&i.out}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ns),as={LEFT:37,UP:38,RIGHT:39,DOWN:40};function hs(t){var e=!1;if(t.type==M.KEYDOWN){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==as.DOWN||i==as.LEFT||i==as.RIGHT||i==as.UP)){var r=t.map.getView(),n=r.getResolution()*this.pixelDelta_,o=0,s=0;i==as.DOWN?s=-n:i==as.LEFT?o=-n:i==as.RIGHT?o=n:s=n;var a=[o,s];$i(a,r.getRotation()),function(t,e,i){var r=t.getCenter();if(r){var n=t.constrainCenter([r[0]+e[0],r[1]+e[1]]);i?t.animate({duration:i,easing:Wn,center:n}):t.setCenter(n)}}(r,a,this.duration_),t.preventDefault(),e=!0}}return!e}var ls=function(t){function e(e){t.call(this,{handleEvent:hs});var i=e||{};this.defaultCondition_=function(t){return Xo(t)&&Wo(t)},this.condition_=void 0!==i.condition?i.condition:this.defaultCondition_,this.duration_=void 0!==i.duration?i.duration:100,this.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Fo);function us(t){var e=!1;if(t.type==M.KEYDOWN||t.type==M.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var r=t.map,n=i=="+".charCodeAt(0)?this.delta_:-this.delta_;bo(r.getView(),n,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var ps=function(t){function e(e){t.call(this,{handleEvent:us});var i=e||{};this.condition_=i.condition?i.condition:Wo,this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Fo),cs="trackpad",ds="wheel",fs=function(t){function e(e){var i=e||{};t.call(this,i),this.delta_=0,this.duration_=void 0!==i.duration?i.duration:250,this.timeout_=void 0!==i.timeout?i.timeout:80,this.useAnchor_=void 0===i.useAnchor||i.useAnchor,this.constrainResolution_=i.constrainResolution||!1,this.condition_=i.condition?i.condition:jo,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(jn,-1)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==M.WHEEL&&e!==M.MOUSEWHEEL)return!0;t.preventDefault();var i,r=t.map,n=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==M.WHEEL?(i=n.deltaY,Fi&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=Di),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==M.MOUSEWHEEL&&(i=-n.wheelDeltaY,Ai&&(i/=3)),0===i)return!1;var o=Date.now();if(void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?cs:ds),this.mode_===cs){var s=r.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(jn,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var a=s.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),h=s.getMinResolution(),l=s.getMaxResolution(),u=0;if(a<h?(a=Math.max(a,h/this.trackpadZoomBuffer_),u=1):a>l&&(a=Math.min(a,l*this.trackpadZoomBuffer_),u=-1),this.lastAnchor_){var p=s.calculateCenterZoom(a,this.lastAnchor_);s.setCenter(s.constrainCenter(p))}return s.setResolution(a),0===u&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(a,i>0?-1:1),easing:Xn,anchor:this.lastAnchor_,duration:this.duration_}),u>0?s.animate({resolution:h,easing:Xn,anchor:this.lastAnchor_,duration:500}):u<0&&s.animate({resolution:l,easing:Xn,anchor:this.lastAnchor_,duration:500}),this.startTime_=o,!1}this.delta_+=i;var c=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),c),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();bo(e,-kt(this.delta_,-1,1),this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Fo),_s=function(t){function e(e){var i=e||{},r=i;r.stopDown||(r.stopDown=w),t.call(this,r),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==i.threshold?i.threshold:.3,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=0,i=this.targetPointers[0],r=this.targetPointers[1],n=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.lastAngle_){var o=n-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=n;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==Gn){var h=s.getViewport().getBoundingClientRect(),l=Zo(this.targetPointers);if(l[0]-=h.left,l[1]-=h.top,this.anchor_=s.getCoordinateFromPixel(l),this.rotating_){var u=a.getRotation();s.render(),Oo(a,u+e,this.anchor_)}}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(jn,-1),this.rotating_)Lo(e,e.getRotation(),this.anchor_,this.duration_);return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(jn,1),!0}return!1},e}(qo),gs=function(t){function e(e){var i=e||{},r=i;r.stopDown||(r.stopDown=w),t.call(this,r),this.constrainResolution_=i.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==i.duration?i.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],r=this.targetPointers[1],n=i.clientX-r.clientX,o=i.clientY-r.clientY,s=Math.sqrt(n*n+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,h=a.getView(),l=h.getResolution(),u=h.getMaxResolution(),p=h.getMinResolution(),c=l*e;c>u?(e=u/l,c=u):c<p&&(e=p/l,c=p),1!=e&&(this.lastScaleDelta_=e);var d=a.getViewport().getBoundingClientRect(),f=Zo(this.targetPointers);f[0]-=d.left,f[1]-=d.top,this.anchor_=a.getCoordinateFromPixel(f),a.render(),Mo(h,c,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(jn,-1);var i=e.getResolution();if(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution()){var r=this.lastScaleDelta_-1;Po(e,i,this.anchor_,this.duration_,r)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(jn,1),!0}return!1},e}(qo);function ys(t){var e=t||{},i=new U,r=new br(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new Qo),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new No({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new Jo({condition:e.onFocusOnly?ko:void 0,kinetic:r})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new _s),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new gs({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new ls),i.push(new ps({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new fs({condition:e.onFocusOnly?ko:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new ss({duration:e.zoomDuration})),i}var vs=.5,ms=function(t){function e(e,i,r,n){t.call(this),this.extent=e,this.pixelRatio_=r,this.resolution=i,this.state=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(M.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return r()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){r()},e}(b),xs={IDLE:0,LOADING:1,LOADED:2,ERROR:3},Es=function(t){function e(e,i,r,n,o){var s=void 0!==o?xs.IDLE:xs.LOADED;t.call(this,e,i,r,s),this.loader_=void 0!==o?o:null,this.canvas_=n,this.error_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=xs.ERROR):this.state=xs.LOADED,this.changed()},e.prototype.load=function(){this.state==xs.IDLE&&(this.state=xs.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(ms),Ss={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"},Ts={IMAGE:"image",VECTOR:"vector"},Cs=function(t){function e(e,i,r,n,o){t.call(this,e),this.vectorContext=i,this.frameState=r,this.context=n,this.glContext=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P),Rs=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(M.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var i=this.oldest_;i;)t.call(e,i.value_,i.key_,this),i=i.newer},e.prototype.get=function(t){var e=this.entries_[t];return Y(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},e.prototype.remove=function(t){var e=this.entries_[t];return Y(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){Y(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(b),ws=[0,0,0,1],Is=[],Ls=[0,0,0,1],Os=[0,0,0,0],Ps=new Rs,bs={},Ms=null,Fs={},As=function(){var t,e,i=60,r=bs,n="32px ",o=["monospace","serif"],s=o.length,a="wmytzilWMYTZIL@#/&?$%10";function h(t){for(var i=Ns(),r=100;r<=700;r+=300){for(var h=r+" ",l=!0,u=0;u<s;++u){var p=o[u];if(i.font=h+n+p,e=i.measureText(a).width,t!=p){i.font=h+n+t+","+p;var c=i.measureText(a).width;l=l&&c!=e}}if(l)return!0}return!1}function l(){var e=!0;for(var n in r)r[n]<i&&(h(n)?(r[n]=i,p(Fs),Ms=null,Ps.clear()):(++r[n],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var n=vo(e);if(n)for(var o=0,s=n.length;o<s;++o){var a=n[o];a in r||(r[a]=i,h(a)||(r[a]=0,void 0===t&&(t=setInterval(l,32))))}}}();function Ns(){return Ms||(Ms=Jn(1,1)),Ms}var Gs=function(){var t,e=Fs;return function(i){var r=e[i];return void 0==r&&(t||((t=document.createElement("span")).textContent="M",t.style.margin=t.style.padding="0 !important",t.style.position="absolute !important",t.style.left="-99999px !important"),t.style.font=i,document.body.appendChild(t),r=e[i]=t.offsetHeight,document.body.removeChild(t)),r}}();function Ds(t,e){var i=Ns();return t!=i.font&&(i.font=t),i.measureText(e).width}function ks(t,e,i,r){0!==e&&(t.translate(i,r),t.rotate(e),t.translate(-i,-r))}var js=[1,0,0,1,0,0];function Us(t,e,i,r,n,o,s,a,h,l,u){var p;1!=i&&(p=t.globalAlpha,t.globalAlpha=p*i),e&&t.setTransform.apply(t,e),t.drawImage(r,n,o,s,a,h,l,s*u,a*u),p&&(t.globalAlpha=p),e&&t.setTransform.apply(t,js)}function Ys(t){return Array.isArray(t)?yr(t):t}var Bs=function(){};Bs.prototype.drawCustom=function(t,e,i){},Bs.prototype.drawGeometry=function(t){},Bs.prototype.setStyle=function(t){},Bs.prototype.drawCircle=function(t,e){},Bs.prototype.drawFeature=function(t,e){},Bs.prototype.drawGeometryCollection=function(t,e){},Bs.prototype.drawLineString=function(t,e){},Bs.prototype.drawMultiLineString=function(t,e){},Bs.prototype.drawMultiPoint=function(t,e){},Bs.prototype.drawMultiPolygon=function(t,e){},Bs.prototype.drawPoint=function(t,e){},Bs.prototype.drawPolygon=function(t,e){},Bs.prototype.drawText=function(t,e){},Bs.prototype.setFillStrokeStyle=function(t,e){},Bs.prototype.setImageStyle=function(t,e){},Bs.prototype.setTextStyle=function(t,e){};var Vs=Bs,Xs=function(t){function e(e,i,r,n,o){t.call(this),this.context_=e,this.pixelRatio_=i,this.extent_=r,this.transform_=n,this.viewRotation_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawImages_=function(t,e,i,r){if(this.image_){var n=Gt(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var l=0,u=n.length;l<u;l+=2){var p=n[l]-this.imageAnchorX_,c=n[l+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_){var d=p+this.imageAnchorX_,f=c+this.imageAnchorY_;Ye(s,d,f,this.imageScale_,this.imageScale_,h,-d,-f),o.setTransform.apply(o,s)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,c,this.imageWidth_,this.imageHeight_)}0===h&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=a)}},e.prototype.drawText_=function(t,e,i,r){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var n=Gt(t,e,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=r){var a=n[e]+this.textOffsetX_,h=n[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){var l=Ye(this.tmpLocalTransform_,a,h,this.textScale_,this.textScale_,s,-a,-h);o.setTransform.apply(o,l)}this.textStrokeState_&&o.strokeText(this.text_,a,h),this.textFillState_&&o.fillText(this.text_,a,h)}0===s&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,r,n){var o=this.context_,s=Gt(t,e,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;n&&(a-=2);for(var h=2;h<a;h+=2)o.lineTo(s[h],s[h+1]);return n&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,r){for(var n=0,o=i.length;n<o;++n)e=this.moveToLineTo_(t,e,i[n],r,!0);return e},e.prototype.drawCircle=function(t){if(Pt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,i){var r=t.getFlatCoordinates();if(r){var n=t.getStride();return Gt(r,0,r.length,n,e,i)}return null}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],r=e[3]-e[1],n=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case Nt.POINT:this.drawPoint(t);break;case Nt.LINE_STRING:this.drawLineString(t);break;case Nt.POLYGON:this.drawPolygon(t);break;case Nt.MULTI_POINT:this.drawMultiPoint(t);break;case Nt.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Nt.MULTI_POLYGON:this.drawMultiPolygon(t);break;case Nt.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Nt.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&Pt(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,r=e.length;i<r;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(Pt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var r=t.getFlatMidpoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(Pt(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=t.getFlatCoordinates(),n=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var a=0,h=o.length;a<h;++a)n=this.moveToLineTo_(r,n,o[a],s,!1);i.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(Pt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(Pt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),r=0,n=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=n.length;s<a;++s){var h=n[s];r=this.drawRings_(i,r,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),ki&&(Z(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,ki&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:"center";i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=r&&(i.textAlign=e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:Ys(i||ws)}}else this.fillState_=null;if(e){var r=e.getColor(),n=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),h=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==n?n:"round",lineDash:o||Is,lineDashOffset:s||0,lineJoin:void 0!==a?a:"round",lineWidth:this.pixelRatio_*(void 0!==h?h:1),miterLimit:void 0!==l?l:10,strokeStyle:Ys(r||Ls)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),r=t.getOrigin(),n=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=n[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=n[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:Ys(i||ws)}}else this.textFillState_=null;var r=t.getStroke();if(r){var n=r.getColor(),o=r.getLineCap(),s=r.getLineDash(),a=r.getLineDashOffset(),h=r.getLineJoin(),l=r.getWidth(),u=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:"round",lineDash:s||Is,lineDashOffset:a||0,lineJoin:void 0!==h?h:"round",lineWidth:void 0!==l?l:1,miterLimit:void 0!==u?u:10,strokeStyle:Ys(n||Ls)}}else this.textStrokeState_=null;var p=t.getFont(),c=t.getOffsetX(),d=t.getOffsetY(),f=t.getRotateWithView(),_=t.getRotation(),g=t.getScale(),y=t.getText(),v=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==p?p:"10px sans-serif",textAlign:void 0!==v?v:"center",textBaseline:void 0!==m?m:"middle"},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==c?this.pixelRatio_*c:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0!==_?_:0,this.textScale_=this.pixelRatio_*(void 0!==g?g:1)}else this.text_=""},e}(Vs),zs=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function Ws(t,e,i){return e+":"+t+":"+(i?dr(i):"null")}zs.prototype.clear=function(){this.cache_={},this.cacheSize_=0},zs.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},zs.prototype.get=function(t,e,i){var r=Ws(t,e,i);return r in this.cache_?this.cache_[r]:null},zs.prototype.set=function(t,e,i,r){var n=Ws(t,e,i);this.cache_[n]=r,++this.cacheSize_},zs.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var Ks=new zs;function Hs(t,e){Ks.expire()}function Zs(t,e){return t.zIndex-e.zIndex}var qs=function(t){function e(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){r()},e.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Ye(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Be(Ge(r,i))},e.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,s,a){var h,l=e.viewState,u=l.resolution;function p(t,i){var s=e.layerStates[o(i)].managed;if(!(o(t)in e.skippedFeatureUids)||s)return r.call(n,t,s?i:null)}var c=l.projection,d=t;if(c.canWrapX()){var f=c.getExtent(),_=Ot(f),g=t[0];if(g<f[0]||g>f[2])d=[g+_*Math.ceil((f[0]-g)/_),t[1]]}var y,v=e.layerStatesArray;for(y=v.length-1;y>=0;--y){var m=v[y],x=m.layer;if(mo(m,u)&&s.call(a,x)){var E=this.getLayerRenderer(x),S=x.getSource();if(S&&(h=E.forEachFeatureAtCoordinate(S.getWrapX()?d:t,e,i,p)),h)return h}}},e.prototype.forEachLayerAtPixel=function(t,e,i,n,o,s,a){return r()},e.prototype.hasFeatureAtCoordinate=function(t,e,i,r,n){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,R,this,r,n)},e.prototype.getLayerRenderer=function(t){var e=o(t);if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var i,r=0,n=this.layerRendererConstructors_.length;r<n;++r){var s=this.layerRendererConstructors_[r];if(s.handles(t)){i=s.create(this,t);break}}if(!i)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=i,this.layerRendererListeners_[e]=v(i,M.CHANGE,this.handleLayerRendererChange_,this),i},e.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},e.prototype.getLayerRenderers=function(){return this.layerRenderers_},e.prototype.getMap=function(){return this.map_},e.prototype.handleLayerRendererChange_=function(){this.map_.render()},e.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],E(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},e.prototype.removeUnusedLayerRenderers_=function(t,e){for(var i in this.layerRenderers_)e&&i in e.layerStates||this.removeLayerRendererByKey_(i).dispose()},e.prototype.renderFrame=function(t){r()},e.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(Hs)},e.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e}(C),Js=[],Qs=function(t){function e(e){t.call(this,e);var i=e.getViewport();this.context_=Jn(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=fo,i.insertBefore(this.canvas_,i.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap(),r=this.context_;if(i.hasListener(t)){var n=e.extent,o=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),h=new Xs(r,o,n,a,s),l=new Cs(t,h,e,r,null);i.dispatchEvent(l)}},e.prototype.getTransform=function(t){var e=t.viewState,i=this.canvas_.width/2,r=this.canvas_.height/2,n=t.pixelRatio/e.resolution,o=-n,s=-e.rotation,a=-e.center[0],h=-e.center[1];return Ye(this.transform_,i,r,n,o,s,a,h)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,i=t.pixelRatio,r=Math.round(t.size[0]*i),n=Math.round(t.size[1]*i);this.canvas_.width!=r||this.canvas_.height!=n?(this.canvas_.width=r,this.canvas_.height=n):e.clearRect(0,0,r,n);var o=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(ur.PRECOMPOSE,t);var s=t.layerStatesArray;q(s,Zs),o&&(e.save(),ks(e,o,r/2,n/2));var a,h,l=t.viewState.resolution;for(a=0,h=s.length;a<h;++a){var u=s[a],p=u.layer,c=this.getLayerRenderer(p);mo(u,l)&&u.sourceState==ro.READY&&(c.prepareFrame(t,u)&&c.composeFrame(t,u,e))}o&&e.restore(),this.dispatchRenderEvent(ur.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,r,n,o,s){var a,h,l=e.viewState.resolution,u=e.layerStatesArray,p=u.length,c=De(e.pixelToCoordinateTransform,t.slice());for(h=p-1;h>=0;--h){var d=u[h],f=d.layer;if(mo(d,l)&&o.call(s,f))if(a=this.getLayerRenderer(f).forEachLayerAtCoordinate(c,e,i,r,n))return a}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var i=0,r=e.length;i<r;++i){var n=e[i];X(Js,n)||Js.push(n)}},e}(qs),$s=function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLoadedTileFinder=function(t,e,i){return function(r,n){return t.forEachLoadedTile(e,r,n,function(t){i[r]||(i[r]={}),i[r][t.tileCoord.toString()]=t})}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r){},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){t.target.getState()===xs.LOADED&&this.renderIfReadyAndVisible()},e.prototype.hasFeatureAtCoordinate=function(t,e){return!1},e.prototype.loadImage=function(t){var e=t.getState();return e!=xs.LOADED&&e!=xs.ERROR&&v(t,M.CHANGE,this.handleImageChange_,this),e==xs.IDLE&&(t.load(),e=t.getState()),e==xs.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==ro.READY&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var r=o(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i,r){var n=o(e),s=i.toString();n in t?s in t[n]?t[n][s].extend(r):t[n][s]=r:(t[n]={},t[n][s]=r)},e.prototype.manageTilePyramid=function(t,e,i,r,n,s,a,h,l,u){var p=o(e);p in t.wantedTiles||(t.wantedTiles[p]={});var c,d,f,_,g,y,v=t.wantedTiles[p],m=t.tileQueue;for(y=i.getMinZoom();y<=a;++y)for(d=i.getTileRangeForExtentAndZ(s,y,d),f=i.getResolution(y),_=d.minX;_<=d.maxX;++_)for(g=d.minY;g<=d.maxY;++g)a-y<=h?((c=e.getTile(y,_,g,r,n)).getState()==On.IDLE&&(v[c.getKey()]=!0,m.isKeyQueued(c.getKey())||m.enqueue([c,p,i.getTileCoordCenter(c.tileCoord),f])),void 0!==l&&l.call(u,c)):e.useTile(y,_,g,n)},e}(F),ta=function(t){function e(e){t.call(this,e),this.renderedResolution,this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clip=function(t,e,i){var r=e.pixelRatio,n=e.size[0]*r,o=e.size[1]*r,s=e.viewState.rotation,a=It(i),h=Lt(i),l=St(i),u=Et(i);De(e.coordinateToPixelTransform,a),De(e.coordinateToPixelTransform,h),De(e.coordinateToPixelTransform,l),De(e.coordinateToPixelTransform,u),t.save(),ks(t,-s,n/2,o/2),t.beginPath(),t.moveTo(a[0]*r,a[1]*r),t.lineTo(h[0]*r,h[1]*r),t.lineTo(l[0]*r,l[1]*r),t.lineTo(u[0]*r,u[1]*r),t.clip(),ks(t,s,n/2,o/2)},e.prototype.dispatchComposeEvent_=function(t,e,i,r){var n=this.getLayer();if(n.hasListener(t)){var o=i.size[0]*i.pixelRatio,s=i.size[1]*i.pixelRatio,a=i.viewState.rotation;ks(e,-a,o/2,s/2);var h=void 0!==r?r:this.getTransform(i,0),l=new Xs(e,i.pixelRatio,i.extent,h,i.viewState.rotation),u=new Cs(t,l,i,e,null);n.dispatchEvent(u),ks(e,a,o/2,s/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,i,r,n){return this.forEachFeatureAtCoordinate(t,e,i,R)?r.call(n,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,i,r){this.dispatchComposeEvent_(ur.POSTCOMPOSE,t,e,r)},e.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(ur.PRECOMPOSE,t,e,i)},e.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(ur.RENDER,t,e,i)},e.prototype.getTransform=function(t,e){var i=t.viewState,r=t.pixelRatio,n=r*t.size[0]/2,o=r*t.size[1]/2,s=r/i.resolution,a=-s,h=-i.rotation,l=-i.center[0]+e,u=-i.center[1];return Ye(this.transform_,n,o,s,a,h,l,u)},e.prototype.composeFrame=function(t,e,i){r()},e.prototype.prepareFrame=function(t,e){return r()},e}($s),ea=function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=[1,0,0,1,0,0],this.hitCanvasContext_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,i){this.preCompose(i,t);var r=this.getImage();if(r){var n=e.extent,o=void 0!==n&&!ot(n,t.extent)&&Pt(n,t.extent);o&&this.clip(i,t,n);var s=this.getImageTransform(),a=i.globalAlpha;i.globalAlpha=e.opacity;var h=s[4],l=s[5],u=r.width*s[0],p=r.height*s[3];u>=.5&&p>=.5&&i.drawImage(r,0,0,+r.width,+r.height,Math.round(h),Math.round(l),Math.round(u),Math.round(p)),i.globalAlpha=a,o&&i.restore()}this.postCompose(i,t,e)},e.prototype.getImage=function(){return r()},e.prototype.getImageTransform=function(){return r()},e.prototype.forEachLayerAtCoordinate=function(t,e,i,r,n){if(this.getImage()){var o=De(this.coordinateToCanvasPixelTransform,t.slice());tr(o,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Jn(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),o[0],o[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?r.call(n,this.getLayer(),s):void 0}},e}(ta),ia=function(t){function e(i){if(t.call(this,i),this.image_=null,this.imageTransform_=[1,0,0,1,0,0],this.skippedFeatures_=[],this.vectorRenderer_=null,i.getType()===Ss.VECTOR)for(var r=0,n=Js.length;r<n;++r){var o=Js[r];if(o!==e&&o.handles(i)){this.vectorRenderer_=new o(i);break}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var i,r=t.pixelRatio,n=t.size,o=t.viewState,s=o.center,a=o.resolution,h=this.getLayer().getSource(),l=t.viewHints,p=this.vectorRenderer_,c=t.extent;if(p||void 0===e.extent||(c=wt(c,e.extent)),!l[kn]&&!l[jn]&&!bt(c)){var d=o.projection,f=this.skippedFeatures_;if(p){var _=p.context,g=u({},t,{size:[Ot(c)/a,Rt(c)/a],viewState:u({},t.viewState,{rotation:0})}),y=Object.keys(g.skippedFeatureUids).sort();i=new Es(c,a,r,_.canvas,function(t){!p.prepareFrame(g,e)||!p.replayGroupChanged&&Z(f,y)||(_.canvas.width=g.size[0]*r,_.canvas.height=g.size[1]*r,p.compose(_,g,e),f=y,t())})}else i=h.getImage(c,a,r,d);i&&this.loadImage(i)&&(this.image_=i,this.skippedFeatures_=f)}if(this.image_){var v=(i=this.image_).getExtent(),m=i.getResolution(),x=i.getPixelRatio(),E=r*m/(a*x),S=Ye(this.imageTransform_,r*n[0]/2,r*n[1]/2,E,E,0,x*(v[0]-s[0])/m,x*(s[1]-v[3])/m);Ye(this.coordinateToCanvasPixelTransform,r*n[0]/2-S[4],r*n[1]/2-S[5],r/a,-r/a,0,-s[0],-s[1]),this.renderedResolution=m*r/x}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,i,r,n){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,i,r,n):t.prototype.forEachFeatureAtCoordinate.call(this,e,i,r,n)},e}(ea);ia.handles=function(t){return t.getType()===Ss.IMAGE||t.getType()===Ss.VECTOR&&t.getRenderMode()===Ts.IMAGE},ia.create=function(t,e){return new ia(e)};var ra=ia,na=function(t,e,i,r){this.minX=t,this.maxX=e,this.minY=i,this.maxY=r};function oa(t,e,i,r,n){return void 0!==n?(n.minX=t,n.maxX=e,n.minY=i,n.maxY=r,n):new na(t,e,i,r)}na.prototype.contains=function(t){return this.containsXY(t[1],t[2])},na.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},na.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},na.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},na.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},na.prototype.getHeight=function(){return this.maxY-this.minY+1},na.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},na.prototype.getWidth=function(){return this.maxX-this.minX+1},na.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};var sa=na,aa=function(t){function e(e,i){t.call(this,e),this.context=i?null:Jn(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new sa(0,0,0,0),this.imageTransform_=[1,0,0,1,0,0],this.zDirection=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),i=t.getState(),r=e.getUseInterimTilesOnError();return i==On.LOADED||i==On.EMPTY||i==On.ERROR&&!r},e.prototype.getTile=function(t,e,i,r,n){var o=this.getLayer(),s=o.getSource().getTile(t,e,i,r,n);return s.getState()==On.ERROR&&(o.getUseInterimTilesOnError()?o.getPreload()>0&&(this.newTiles_=!0):s.setState(On.LOADED)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},e.prototype.prepareFrame=function(t,e){var i=t.pixelRatio,r=t.size,n=t.viewState,s=n.projection,a=n.resolution,h=n.center,l=this.getLayer(),u=l.getSource(),p=u.getRevision(),c=u.getTileGridForProjection(s),d=c.getZForResolution(a,this.zDirection),f=c.getResolution(d),_=Math.round(a/f)||1,g=t.extent;if(void 0!==e.extent&&(g=wt(g,e.extent)),bt(g))return!1;var y=c.getTileRangeForExtentAndZ(g,d),v=c.getTileRangeExtent(d,y),m=u.getTilePixelRatio(i),x={};x[d]={};var E,S,T,C=this.createLoadedTileFinder(u,s,x),R=t.viewHints,w=R[kn]||R[jn],I=this.tmpExtent,L=this.tmpTileRange_;for(this.newTiles_=!1,S=y.minX;S<=y.maxX;++S)for(T=y.minY;T<=y.maxY;++T)if(!(Date.now()-t.time>16&&w)){if(E=this.getTile(d,S,T,i,s),this.isDrawableTile_(E)){var O=o(this);if(E.getState()==On.LOADED){x[d][E.tileCoord.toString()]=E;var P=E.inTransition(O);this.newTiles_||!P&&-1!==this.renderedTiles.indexOf(E)||(this.newTiles_=!0)}if(1===E.getAlpha(O,t.time))continue}var b=c.getTileCoordChildTileRange(E.tileCoord,L,I),M=!1;b&&(M=C(d+1,b)),M||c.forEachTileCoordParentTileRange(E.tileCoord,C,null,L,I)}var F=f*i/m*_;if(!(this.renderedResolution&&Date.now()-t.time>16&&w)&&(this.newTiles_||!this.renderedExtent_||!ot(this.renderedExtent_,g)||this.renderedRevision!=p||_!=this.oversampling_||!w&&F!=this.renderedResolution)){var A=this.context;if(A){var N=u.getTilePixelSize(d,i,s),G=Math.round(y.getWidth()*N[0]/_),D=Math.round(y.getHeight()*N[1]/_),k=A.canvas;k.width!=G||k.height!=D?(this.oversampling_=_,k.width=G,k.height=D):(this.renderedExtent_&&!dt(v,this.renderedExtent_)&&A.clearRect(0,0,G,D),_=this.oversampling_)}this.renderedTiles.length=0;var j,U,Y,B,V,X,z,W,K,H,Z=Object.keys(x).map(Number);for(Z.sort(function(t,e){return t===d?1:e===d?-1:t>e?1:t<e?-1:0}),B=0,V=Z.length;B<V;++B)for(var q in Y=Z[B],U=u.getTilePixelSize(Y,i,s),j=c.getResolution(Y)/f,z=m*u.getGutterForProjection(s),W=x[Y])E=W[q],S=((X=c.getTileCoordExtent(E.getTileCoord(),I))[0]-v[0])/f*m/_,T=(v[3]-X[3])/f*m/_,K=U[0]*j/_,H=U[1]*j/_,this.drawTileImage(E,t,e,S,T,K,H,z,d===Y),this.renderedTiles.push(E);this.renderedRevision=p,this.renderedResolution=f*i/m*_,this.renderedExtent_=v}var J=this.renderedResolution/a,Q=Ye(this.imageTransform_,i*r[0]/2,i*r[1]/2,J,J,0,(this.renderedExtent_[0]-h[0])/this.renderedResolution*i,(h[1]-this.renderedExtent_[3])/this.renderedResolution*i);return Ye(this.coordinateToCanvasPixelTransform,i*r[0]/2-Q[4],i*r[1]/2-Q[5],i/a,-i/a,0,-h[0],-h[1]),this.updateUsedTiles(t.usedTiles,u,d,y),this.manageTilePyramid(t,u,c,i,s,g,d,l.getPreload()),this.scheduleExpireCache(t,u),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,i,r,n,s,a,h,l){var u=this.getTileImage(t);if(u){var p=o(this),c=l?t.getAlpha(p,e.time):1,d=this.getLayer().getSource();1!==c||d.getOpaque(e.viewState.projection)||this.context.clearRect(r,n,s,a);var f=c!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(u,h,h,u.width-2*h,u.height-2*h,r,n,s,a),f&&this.context.restore(),1!==c?e.animate=!0:l&&t.endTransition(p)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.getTileImage=function(t){return t.getImage()},e}(ea);aa.handles=function(t){return t.getType()===Ss.TILE},aa.create=function(t,e){return new aa(e)},aa.prototype.getLayer;var ha=aa,la=i(0),ua=i.n(la),pa=function(){};pa.prototype.getReplay=function(t,e){return r()},pa.prototype.isEmpty=function(){return r()},pa.prototype.addDeclutter=function(t){return r()};var ca=pa,da={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function fa(t,e,i,r,n,o,s,a){for(var h,l,u,p=[],c=t[e]>t[i-r],d=n.length,f=t[e],_=t[e+1],g=t[e+=r],y=t[e+1],v=0,m=Math.sqrt(Math.pow(g-f,2)+Math.pow(y-_,2)),x="",E=0,S=0;S<d;++S){l=c?d-S-1:S;var T=n.charAt(l),C=o(x=c?T+x:x+T)-E;E+=C;for(var R=s+C/2;e<i-r&&v+m<R;)f=g,_=y,g=t[e+=r],y=t[e+1],v+=m,m=Math.sqrt(Math.pow(g-f,2)+Math.pow(y-_,2));var w=R-v,I=Math.atan2(y-_,g-f);if(c&&(I+=I>0?-Math.PI:Math.PI),void 0!==u){var L=I-u;if(L+=L>Math.PI?-2*Math.PI:L<-Math.PI?2*Math.PI:0,Math.abs(L)>a)return null}var O=w/m,P=zt(f,g,O),b=zt(_,y,O);u==I?(c&&(h[0]=P,h[1]=b,h[2]=C/2),h[4]=x):(E=C,h=[P,b,C/2,I,x=T],c?p.unshift(h):p.push(h),u=I),s+=C}return p}var _a={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ga=[_a.FILL],ya=[_a.STROKE],va=[_a.BEGIN_PATH],ma=[_a.CLOSE_PATH],xa=_a,Ea=[da.POLYGON,da.CIRCLE,da.LINE_STRING,da.IMAGE,da.TEXT,da.DEFAULT],Sa={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Ta=[1/0,1/0,-1/0,-1/0],Ca=[1,0,0,1,0,0],Ra=function(t){function e(e,i,r,n,o,s){t.call(this),this.declutterTree=s,this.tolerance=e,this.maxExtent=i,this.overlaps=o,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=r,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replayTextBackground_=function(t,e,i,r,n,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},e.prototype.replayImage_=function(t,e,i,r,n,o,s,a,h,l,u,p,c,d,f,_,g,y){var v=g||y;e-=n*=c,i-=o*=c;var m,x,E,S,T=f+l>r.width?r.width-l:f,C=a+u>r.height?r.height-u:a,R=_[3]+T*c+_[1],w=_[0]+C*c+_[2],I=e-_[3],L=i-_[0];(v||0!==p)&&(m=[I,L],x=[I+R,L],E=[I+R,L+w],S=[I,L+w]);var O=null;if(0!==p){var P=e+n,b=i+o;O=Ye(Ca,P,b,1,1,p,-P,-b),ut(Ta),_t(Ta,De(Ca,m)),_t(Ta,De(Ca,x)),_t(Ta,De(Ca,E)),_t(Ta,De(Ca,S))}else lt(I,L,I+R,L+w,Ta);var M=t.canvas,F=y?y[2]*c/2:0,A=Ta[0]-F<=M.width&&Ta[2]+F>=0&&Ta[1]-F<=M.height&&Ta[3]+F>=0;if(d&&(e=Math.round(e),i=Math.round(i)),s){if(!A&&1==s[4])return;ft(s,Ta);var N=A?[t,O?O.slice(0):null,h,r,l,u,T,C,e,i,c]:null;N&&v&&N.push(g,y,m,x,E,S),s.push(N)}else A&&(v&&this.replayTextBackground_(t,m,x,E,S,g,y),Us(t,O,h,r,l,u,T,C,e,i,c))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,i,r,n,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=r);var h,l,u,p=[t[e],t[e+1]],c=[NaN,NaN],d=!0;for(h=e+r;h<i;h+=r)c[0]=t[h],c[1]=t[h+1],(u=at(a,c))!==l?(d&&(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1]),this.coordinates[s++]=c[0],this.coordinates[s++]=c[1],d=!1):u===$.INTERSECTING?(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1],d=!1):d=!0,p[0]=c[0],p[1]=c[1],l=u;return(n&&d||h===e+r)&&(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1]),s},e.prototype.drawCustomCoordinates_=function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o],h=this.appendFlatCoordinates(t,e,a,r,!1,!1);n.push(h),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var r,n,o,s,a,h=t.getType(),l=t.getStride(),u=this.coordinates.length;if(h==Nt.MULTI_POLYGON){r=(t=t).getOrientedFlatCoordinates(),s=[];var p=t.getEndss();a=0;for(var c=0,d=p.length;c<d;++c){var f=[];a=this.drawCustomCoordinates_(r,a,p[c],l,f),s.push(f)}this.instructions.push([xa.CUSTOM,u,s,t,i,oi])}else h==Nt.POLYGON||h==Nt.MULTI_LINE_STRING?(o=[],r=h==Nt.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(r,0,t.getEnds(),l,o),this.instructions.push([xa.CUSTOM,u,o,t,i,ni])):h==Nt.LINE_STRING||h==Nt.MULTI_POINT?(r=t.getFlatCoordinates(),n=this.appendFlatCoordinates(r,0,r.length,l,!1,!1),this.instructions.push([xa.CUSTOM,u,n,t,i,ri])):h==Nt.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),n=this.coordinates.length,this.instructions.push([xa.CUSTOM,u,n,t,i]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[xa.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[xa.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){},e.prototype.fill_=function(t){if(this.alignFill_){var e=De(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,js)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],ki&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(r)){this.declutterTree.insert(r);for(var n=5,o=t.length;n<o;++n){var s=t[n];s&&(s.length>11&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),Us.apply(void 0,s))}}t.length=5,ut(t)}}},e.prototype.replay_=function(t,e,i,r,n,s,a){var h;this.pixelCoordinates_&&Z(e,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Gt(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),Ge(this.renderedTransform_,e));for(var l,u,p,c,f,_,g,y,v,m,x,E,S=!d(i),T=0,C=r.length,R=0,w=0,I=0,L=null,O=null,P=this.coordinateCache_,b=this.viewRotation_,M={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:b},F=this.instructions!=r||this.overlaps?0:200;T<C;){var A=r[T];switch(A[0]){case xa.BEGIN_GEOMETRY:m=A[1],S&&i[o(m)]||!m.getGeometry()?T=A[2]:void 0===a||Pt(a,m.getGeometry().getExtent())?++T:T=A[2]+1;break;case xa.BEGIN_PATH:w>F&&(this.fill_(t),w=0),I>F&&(t.stroke(),I=0),w||I||(t.beginPath(),c=f=NaN),++T;break;case xa.CIRCLE:var N=h[R=A[1]],G=h[R+1],D=h[R+2]-N,k=h[R+3]-G,j=Math.sqrt(D*D+k*k);t.moveTo(N+j,G),t.arc(N,G,j,0,2*Math.PI,!0),++T;break;case xa.CLOSE_PATH:t.closePath(),++T;break;case xa.CUSTOM:R=A[1],l=A[2];var U=A[3],Y=A[4],B=6==A.length?A[5]:void 0;M.geometry=U,M.feature=m,T in P||(P[T]=[]);var V=P[T];B?B(h,R,l,2,V):(V[0]=h[R],V[1]=h[R+1],V.length=2),Y(V,M),++T;break;case xa.DRAW_IMAGE:R=A[1],l=A[2],v=A[3],u=A[4],p=A[5],y=s?null:A[6];var X=A[7],z=A[8],W=A[9],K=A[10],H=A[11],q=A[12],J=A[13],Q=A[14],$=void 0,tt=void 0,et=void 0;for(A.length>16?($=A[15],tt=A[16],et=A[17]):($=Os,tt=et=!1),H&&(q+=b);R<l;R+=2)this.replayImage_(t,h[R],h[R+1],v,u,p,y,X,z,W,K,q,J,n,Q,$,tt?L:null,et?O:null);this.renderDeclutter_(y,m),++T;break;case xa.DRAW_CHARS:var it=A[1],rt=A[2],nt=A[3];y=s?null:A[4];var ot=A[5],st=A[6],at=A[7],ht=A[8],lt=A[9],ut=A[10],pt=A[11],ct=A[12],dt=A[13],ft=A[14],_t=ar(h,it,rt,2),gt=ht(ct);if(ot||gt<=_t){var yt=this,vt=yt.textStates[dt].textAlign,mt=fa(h,it,rt,2,ct,ht,(_t-gt)*Sa[vt],at);if(mt){var xt=void 0,Et=void 0,St=void 0,Tt=void 0,Ct=void 0;if(ut)for(xt=0,Et=mt.length;xt<Et;++xt)St=(Ct=mt[xt])[4],Tt=yt.getImage(St,dt,"",ut),u=Ct[2]+pt,p=nt*Tt.height+2*(.5-nt)*pt-lt,this.replayImage_(t,Ct[0],Ct[1],Tt,u,p,y,Tt.height,1,0,0,Ct[3],ft,!1,Tt.width,Os,null,null);if(st)for(xt=0,Et=mt.length;xt<Et;++xt)St=(Ct=mt[xt])[4],Tt=yt.getImage(St,dt,st,""),u=Ct[2],p=nt*Tt.height-lt,this.replayImage_(t,Ct[0],Ct[1],Tt,u,p,y,Tt.height,1,0,0,Ct[3],ft,!1,Tt.width,Os,null,null)}}this.renderDeclutter_(y,m),++T;break;case xa.END_GEOMETRY:if(void 0!==s){var Rt=s(m=A[1]);if(Rt)return Rt}++T;break;case xa.FILL:F?w++:this.fill_(t),++T;break;case xa.MOVE_TO_LINE_TO:for(R=A[1],l=A[2],x=h[R],g=(E=h[R+1])+.5|0,(_=x+.5|0)===c&&g===f||(t.moveTo(x,E),c=_,f=g),R+=2;R<l;R+=2)_=(x=h[R])+.5|0,g=(E=h[R+1])+.5|0,R!=l-2&&_===c&&g===f||(t.lineTo(x,E),c=_,f=g);++T;break;case xa.SET_FILL_STYLE:L=A,this.alignFill_=A[2],w&&(this.fill_(t),w=0,I&&(t.stroke(),I=0)),t.fillStyle=A[1],++T;break;case xa.SET_STROKE_STYLE:O=A,I&&(t.stroke(),I=0),this.setStrokeStyle_(t,A),++T;break;case xa.STROKE:F?I++:t.stroke(),++T;break;default:++T}}w&&this.fill_(t),I&&t.stroke()},e.prototype.replay=function(t,e,i,r,n){this.viewRotation_=i,this.replay_(t,e,r,this.instructions,n,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,i,r,n,o){return this.viewRotation_=i,this.replay_(t,e,r,this.hitDetectionInstructions,!0,n,o)},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,r,n=e.length,o=-1;for(t=0;t<n;++t)(r=(i=e[t])[0])==xa.END_GEOMETRY?o=t:r==xa.BEGIN_GEOMETRY&&(i[2]=t,W(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var r=t.getColor();i.fillStyle=Ys(r||ws)}else i.fillStyle=void 0;if(e){var n=e.getColor();i.strokeStyle=Ys(n||Ls);var o=e.getLineCap();i.lineCap=void 0!==o?o:"round";var s=e.getLineDash();i.lineDash=s?s.slice():Is;var a=e.getLineDashOffset();i.lineDashOffset=a||0;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:"round";var l=e.getWidth();i.lineWidth=void 0!==l?l:1;var u=e.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t,e){var i=t.fillStyle,r=[xa.SET_FILL_STYLE,i];return"string"!=typeof i&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[xa.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,i){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t,i)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,r=t.lineCap,n=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||n!=t.currentLineDash&&!Z(t.currentLineDash,n)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=n,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=h)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[xa.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=it(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;et(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(Vs),wa=function(t){function e(e,i,r,n,o,s){t.call(this,e,i,r,n,o,s),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i,r){return this.appendFlatCoordinates(t,e,i,r,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,r);this.instructions.push([xa.DRAW_IMAGE,n,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([xa.DRAW_IMAGE,n,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,r);this.instructions.push([xa.DRAW_IMAGE,n,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([xa.DRAW_IMAGE,n,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),r=t.getSize(),n=t.getHitDetectionImage(1),o=t.getImage(1),s=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=n,this.image_=o,this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=r[0]},e}(Ra),Ia=function(t){function e(e,i,r,n,o,s){t.call(this,e,i,r,n,o,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,i,r){var n=this.coordinates.length,o=this.appendFlatCoordinates(t,e,i,r,!1,!1),s=[xa.MOVE_TO_LINE_TO,n,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0!==r&&void 0!==n){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([xa.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],va);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(ya),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0!==r&&void 0!==n){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([xa.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],va);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),h=0,l=0,u=o.length;l<u;++l)h=this.drawFlatCoordinates_(s,h,o[l],a);this.hitDetectionInstructions.push(ya),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(ya),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(ya),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(va)},e}(Ra),La=function(t){function e(e,i,r,n,o,s){t.call(this,e,i,r,n,o,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,i,r){var n=this.state,o=void 0!==n.fillStyle,s=void 0!=n.strokeStyle,a=i.length;this.instructions.push(va),this.hitDetectionInstructions.push(va);for(var h=0;h<a;++h){var l=i[h],u=this.coordinates.length,p=this.appendFlatCoordinates(t,e,l,r,!0,!s),c=[xa.MOVE_TO_LINE_TO,u,p];this.instructions.push(c),this.hitDetectionInstructions.push(c),s&&(this.instructions.push(ma),this.hitDetectionInstructions.push(ma)),e=l}return o&&(this.instructions.push(ga),this.hitDetectionInstructions.push(ga)),s&&(this.instructions.push(ya),this.hitDetectionInstructions.push(ya)),e},e.prototype.drawCircle=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([xa.SET_FILL_STYLE,dr(ws)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([xa.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,!1,!1);var h=[xa.CIRCLE,a];this.instructions.push(va,h),this.hitDetectionInstructions.push(va,h),this.hitDetectionInstructions.push(ga),void 0!==i.fillStyle&&this.instructions.push(ga),void 0!==i.strokeStyle&&(this.instructions.push(ya),this.hitDetectionInstructions.push(ya)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([xa.SET_FILL_STYLE,dr(ws)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([xa.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([xa.SET_FILL_STYLE,dr(ws)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([xa.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),h=0,l=0,u=o.length;l<u;++l)h=this.drawFlatCoordinatess_(s,h,o[l],a);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,r=e.length;i<r;++i)e[i]=hi(e[i],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(Ra);function Oa(t,e,i,r,n){var o,s,a,h,l,u,p,c,d,f=i,_=i,g=0,y=0,v=i;for(o=i;o<r;o+=n){var m=e[o],x=e[o+1];void 0!==h&&(c=m-h,d=x-l,a=Math.sqrt(c*c+d*d),void 0!==u&&(y+=s,Math.acos((u*c+p*d)/(s*a))>t&&(y>g&&(g=y,f=v,_=o),y=0,v=o-n)),s=a,u=c,p=d),h=m,l=x}return(y+=a)>g?[v,o]:[f,_]}var Pa={Circle:La,Default:Ra,Image:wa,LineString:Ia,Polygon:La,Text:function(t){function e(e,i,r,n,o,s){t.call(this,e,i,r,n,o,s),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},Ps.prune()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){var i=this.textFillState_,r=this.textStrokeState_,n=this.textState_;if(""!==this.text_&&n&&(i||r)){var o,s,a=this.coordinates.length,h=t.getType(),l=null,u=2,p=2;if(n.placement===Tr){if(!Pt(this.getBufferedMaxExtent(),t.getExtent()))return;var c;if(l=t.getFlatCoordinates(),p=t.getStride(),h==Nt.LINE_STRING)c=[l.length];else if(h==Nt.MULTI_LINE_STRING)c=t.getEnds();else if(h==Nt.POLYGON)c=t.getEnds().slice(0,1);else if(h==Nt.MULTI_POLYGON){var d=t.getEndss();for(c=[],o=0,s=d.length;o<s;++o)c.push(d[o][0])}this.beginGeometry(t,e);for(var f,_=n.textAlign,g=0,y=0,v=c.length;y<v;++y){if(void 0==_){var m=Oa(n.maxAngle,l,g,c[y],p);g=m[0],f=m[1]}else f=c[y];for(o=g;o<f;o+=p)this.coordinates.push(l[o],l[o+1]);u=this.coordinates.length,g=c[y],this.drawChars_(a,u,this.declutterGroup_),a=u}this.endGeometry(t,e)}else{var x=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),E=x.width/this.pixelRatio;switch(h){case Nt.POINT:case Nt.MULTI_POINT:u=(l=t.getFlatCoordinates()).length;break;case Nt.LINE_STRING:l=t.getFlatMidpoint();break;case Nt.CIRCLE:l=t.getCenter();break;case Nt.MULTI_LINE_STRING:u=(l=t.getFlatMidpoints()).length;break;case Nt.POLYGON:if(l=t.getFlatInteriorPoint(),!n.overflow&&l[2]/this.resolution<E)return;p=3;break;case Nt.MULTI_POLYGON:var S=t.getFlatInteriorPoints();for(l=[],o=0,s=S.length;o<s;o+=3)(n.overflow||S[o+2]/this.resolution>=E)&&l.push(S[o],S[o+1]);if(0==(u=l.length))return}u=this.appendFlatCoordinates(l,0,u,p,!1,!1),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(x,a,u),this.endGeometry(t,e)}}},e.prototype.getImage=function(t,e,i,r){var n,o=r+e+t+i+this.pixelRatio;if(!Ps.containsKey(o)){var s=r?this.strokeStates[r]||this.textStrokeState_:null,a=i?this.fillStates[i]||this.textFillState_:null,h=this.textStates[e]||this.textState_,l=this.pixelRatio,u=h.scale*l,p=Sa[h.textAlign||"center"],c=r&&s.lineWidth?s.lineWidth:0,d=t.split("\n"),f=d.length,_=[],g=function(t,e,i){for(var r=e.length,n=0,o=0;o<r;++o){var s=Ds(t,e[o]);n=Math.max(n,s),i.push(s)}return n}(h.font,d,_),y=Gs(h.font),v=y*f,m=g+c,x=Jn(Math.ceil(m*u),Math.ceil((v+c)*u));n=x.canvas,Ps.set(o,n),1!=u&&x.scale(u,u),x.font=h.font,r&&(x.strokeStyle=s.strokeStyle,x.lineWidth=c,x.lineCap=s.lineCap,x.lineJoin=s.lineJoin,x.miterLimit=s.miterLimit,ki&&s.lineDash.length&&(x.setLineDash(s.lineDash),x.lineDashOffset=s.lineDashOffset)),i&&(x.fillStyle=a.fillStyle),x.textBaseline="middle",x.textAlign="center";var E,S=.5-p,T=p*n.width/u+S*c;if(r)for(E=0;E<f;++E)x.strokeText(d[E],T+S*_[E],.5*(c+y)+E*y);if(i)for(E=0;E<f;++E)x.fillText(d[E],T+S*_[E],.5*(c+y)+E*y)}return Ps.get(o)},e.prototype.drawTextImage_=function(t,e,i){var r=this.textState_,n=this.textStrokeState_,o=this.pixelRatio,s=Sa[r.textAlign||"center"],a=Sa[r.textBaseline],h=n&&n.lineWidth?n.lineWidth:0,l=s*t.width/o+2*(.5-s)*h,u=a*t.height/o+2*(.5-a)*h;this.instructions.push([xa.DRAW_IMAGE,e,i,t,(l-this.textOffsetX_)*o,(u-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,r.padding==Os?Os:r.padding.map(function(t){return t*o}),!!r.backgroundFill,!!r.backgroundStroke]),this.hitDetectionInstructions.push([xa.DRAW_IMAGE,e,i,t,(l-this.textOffsetX_)*o,(u-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,t.width,r.padding,!!r.backgroundFill,!!r.backgroundStroke])},e.prototype.drawChars_=function(t,e,i){var r=this.textStrokeState_,n=this.textState_,o=this.textFillState_,s=this.strokeKey_;r&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:r.strokeStyle,lineCap:r.lineCap,lineDashOffset:r.lineDashOffset,lineWidth:r.lineWidth,lineJoin:r.lineJoin,miterLimit:r.miterLimit,lineDash:r.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:n.font,textAlign:n.textAlign||"center",scale:n.scale});var h=this.fillKey_;o&&(h in this.fillStates||(this.fillStates[h]={fillStyle:o.fillStyle}));var l=this.pixelRatio,u=Sa[n.textBaseline],p=this.textOffsetY_*l,c=this.text_,d=n.font,f=n.scale,_=r?r.lineWidth*f/2:0,g=this.widths_[d];g||(this.widths_[d]=g={}),this.instructions.push([xa.DRAW_CHARS,t,e,u,i,n.overflow,h,n.maxAngle,function(t){var e=g[t];return e||(e=g[t]=Ds(d,t)),e*f*l},p,s,_*l,c,a,1]),this.hitDetectionInstructions.push([xa.DRAW_CHARS,t,e,u,i,n.overflow,h,n.maxAngle,function(t){var e=g[t];return e||(e=g[t]=Ds(d,t)),e*f},p,s,_,c,a,1/l])},e.prototype.setTextStyle=function(t,e){var i,r,n;if(t){this.declutterGroup_=e;var s=t.getFill();s?((r=this.textFillState_)||(r=this.textFillState_={}),r.fillStyle=Ys(s.getColor()||ws)):r=this.textFillState_=null;var a=t.getStroke();if(a){(n=this.textStrokeState_)||(n=this.textStrokeState_={});var h=a.getLineDash(),l=a.getLineDashOffset(),u=a.getWidth(),p=a.getMiterLimit();n.lineCap=a.getLineCap()||"round",n.lineDash=h?h.slice():Is,n.lineDashOffset=void 0===l?0:l,n.lineJoin=a.getLineJoin()||"round",n.lineWidth=void 0===u?1:u,n.miterLimit=void 0===p?10:p,n.strokeStyle=Ys(a.getColor()||Ls)}else n=this.textStrokeState_=null;i=this.textState_;var c=t.getFont()||"10px sans-serif";As(c);var d=t.getScale();i.overflow=t.getOverflow(),i.font=c,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||"middle",i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Os,i.scale=void 0===d?1:d;var f=t.getOffsetX(),_=t.getOffsetY(),g=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===_?0:_,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===y?0:y,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:o(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+o(r.fillStyle):""}else this.text_=""},e}(Ra)},ba=function(t){function e(e,i,r,n,o,s,a){t.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=i,this.overlaps_=o,this.pixelRatio_=n,this.resolution_=r,this.renderBuffer_=a,this.replaysByZIndex_={},this.hitDetectionContext_=Jn(1,1),this.hitDetectionTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=[1/0,1/0,-1/0,-1/0]).push(1)),e},e.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var i=this.replaysByZIndex_[e],r=0,n=t.length;r<n;++r)if(t[r]in i)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var i in e)e[i].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,o,s){var a,h=2*(r=Math.round(r))+1,l=Ye(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),u=this.hitDetectionContext_;u.canvas.width!==h||u.canvas.height!==h?(u.canvas.width=h,u.canvas.height=h):u.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(_t(a=[1/0,1/0,-1/0,-1/0],t),et(a,e*(this.renderBuffer_+r),a));var p,c,d=function(t){if(void 0!==Ma[t])return Ma[t];for(var e=2*t+1,i=new Array(e),r=0;r<e;r++)i[r]=new Array(e);var n=t,o=0,s=0;for(;n>=o;)Fa(i,t+n,t+o),Fa(i,t+o,t+n),Fa(i,t-o,t+n),Fa(i,t-n,t+o),Fa(i,t-n,t-o),Fa(i,t-o,t-n),Fa(i,t+o,t-n),Fa(i,t+n,t-o),2*((s+=1+2*++o)-n)+1>0&&(s+=1-2*(n-=1));return Ma[t]=i,i}(r);function f(t){for(var e=u.getImageData(0,0,h,h).data,i=0;i<h;i++)for(var r=0;r<h;r++)if(d[i][r]&&e[4*(r*h+i)+3]>0){var n=void 0;return(!p||c!=da.IMAGE&&c!=da.TEXT||-1!==p.indexOf(t))&&(n=o(t)),n||void u.clearRect(0,0,h,h)}}this.declutterTree_&&(p=this.declutterTree_.all().map(function(t){return t.value}));var _,g,y,v,m,x=Object.keys(this.replaysByZIndex_).map(Number);for(x.sort(V),_=x.length-1;_>=0;--_){var E=x[_].toString();for(y=this.replaysByZIndex_[E],g=Ea.length-1;g>=0;--g)if(void 0!==(v=y[c=Ea[g]]))if(!s||c!=da.IMAGE&&c!=da.TEXT){if(m=v.replayHitDetection(u,l,i,n,f,a))return m}else{var S=s[E];S?S.push(v,l.slice(0)):s[E]=[v,l.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,i=e[0],r=e[1],n=e[2],o=e[3],s=[i,r,i,o,n,o,n,r];return Gt(s,0,8,2,t,s),s},e.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",r=this.replaysByZIndex_[i];void 0===r&&(r={},this.replaysByZIndex_[i]=r);var n=r[e];void 0===n&&(n=new(0,Pa[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),r[e]=n);return n},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return d(this.replaysByZIndex_)},e.prototype.replay=function(t,e,i,r,n,o,s){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(V),t.save(),this.clip(t,e);var h,l,u,p,c,d,f=o||Ea;for(h=0,l=a.length;h<l;++h){var _=a[h].toString();for(c=this.replaysByZIndex_[_],u=0,p=f.length;u<p;++u){var g=f[u];if(d=c[g],void 0!==d)if(!s||g!=da.IMAGE&&g!=da.TEXT)d.replay(t,e,i,r,n);else{var y=s[_];y?y.push(d,e.slice(0)):s[_]=[d,e.slice(0)]}}}t.restore()},e}(ca),Ma={0:[[!0]]};function Fa(t,e,i){var r,n=Math.floor(t.length/2);if(e>=n)for(r=n;r<e;r++)t[r][i]=!0;else if(e<n)for(r=e+1;r<n;r++)t[r][i]=!0}var Aa=ba,Na=.5,Ga={Point:function(t,e,i,r){var n=i.getImage();if(n){if(n.getImageState()!=xs.LOADED)return;var o=t.getReplay(i.getZIndex(),da.IMAGE);o.setImageStyle(n,t.addDeclutter(!1)),o.drawPoint(e,r)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),da.TEXT);a.setTextStyle(s,t.addDeclutter(!!n)),a.drawText(e,r)}},LineString:function(t,e,i,r){var n=i.getStroke();if(n){var o=t.getReplay(i.getZIndex(),da.LINE_STRING);o.setFillStrokeStyle(null,n),o.drawLineString(e,r)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),da.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,r)}},Polygon:function(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(n||o){var s=t.getReplay(i.getZIndex(),da.POLYGON);s.setFillStrokeStyle(n,o),s.drawPolygon(e,r)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),da.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,r)}},MultiPoint:function(t,e,i,r){var n=i.getImage();if(n){if(n.getImageState()!=xs.LOADED)return;var o=t.getReplay(i.getZIndex(),da.IMAGE);o.setImageStyle(n,t.addDeclutter(!1)),o.drawMultiPoint(e,r)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),da.TEXT);a.setTextStyle(s,t.addDeclutter(!!n)),a.drawText(e,r)}},MultiLineString:function(t,e,i,r){var n=i.getStroke();if(n){var o=t.getReplay(i.getZIndex(),da.LINE_STRING);o.setFillStrokeStyle(null,n),o.drawMultiLineString(e,r)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),da.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,r)}},MultiPolygon:function(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(o||n){var s=t.getReplay(i.getZIndex(),da.POLYGON);s.setFillStrokeStyle(n,o),s.drawMultiPolygon(e,r)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),da.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,r)}},GeometryCollection:function(t,e,i,r){var n,o,s=e.getGeometriesArray();for(n=0,o=s.length;n<o;++n){var a=Ga[s[n].getType()];a(t,s[n],i,r)}},Circle:function(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(n||o){var s=t.getReplay(i.getZIndex(),da.CIRCLE);s.setFillStrokeStyle(n,o),s.drawCircle(e,r)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),da.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,r)}}};function Da(t,e){return parseInt(o(t),10)-parseInt(o(e),10)}function ka(t,e){var i=ja(t,e);return i*i}function ja(t,e){return Na*t/e}function Ua(t,e,i,r,n,o){var s=!1,a=i.getImage();if(a){var h=a.getImageState();h==xs.LOADED||h==xs.ERROR?a.unlistenImageChange(n,o):(h==xs.IDLE&&a.load(),h=a.getImageState(),a.listenImageChange(n,o),s=!0)}return function(t,e,i,r){var n=i.getGeometryFunction()(e);if(!n)return;var o=n.getSimplifiedGeometry(r);if(i.getRenderer())!function t(e,i,r,n){if(i.getType()==Nt.GEOMETRY_COLLECTION){for(var o=i.getGeometries(),s=0,a=o.length;s<a;++s)t(e,o[s],r,n);return}var h=e.getReplay(r.getZIndex(),da.DEFAULT);h.drawCustom(i,n,r.getRenderer())}(t,o,i,e);else{var s=Ga[o.getType()];s(t,o,i,e)}}(t,e,i,r),s}var Ya=function(t){function e(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?ua()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Jn(),v(Ps,M.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){x(Ps,M.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.compose=function(t,e,i){var r=e.extent,n=e.pixelRatio,o=i.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,h=s.rotation,l=a.getExtent(),u=this.getLayer().getSource(),p=this.getTransform(e,0),c=i.extent,d=void 0!==c;d&&this.clip(t,e,c);var f=this.replayGroup_;if(f&&!f.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var _,g=this.getLayer(),y=0,v=0,m=1!==i.opacity,x=g.hasListener(ur.RENDER);if(m||x){var E=t.canvas.width,S=t.canvas.height;if(h){var T=Math.round(Math.sqrt(E*E+S*S));y=(T-E)/2,v=(T-S)/2,E=S=T}this.context.canvas.width=E,this.context.canvas.height=S,_=this.context}else _=t;var C=_.globalAlpha;m||(_.globalAlpha=i.opacity),_!=t&&_.translate(y,v);var R=e.viewHints,w=!(R[kn]||R[jn]),I=e.size[0]*n,L=e.size[1]*n;if(ks(_,-h,I/2,L/2),f.replay(_,p,h,o,w),u.getWrapX()&&a.canWrapX()&&!ot(l,r)){for(var O,P=r[0],b=Ot(l),M=0;P<l[0];)O=b*--M,p=this.getTransform(e,O),f.replay(_,p,h,o,w),P+=b;for(M=0,P=r[2];P>l[2];)O=b*++M,p=this.getTransform(e,O),f.replay(_,p,h,o,w),P-=b}if(ks(_,h,I/2,L/2),x&&this.dispatchRenderEvent(_,e,p),_!=t){if(m){var F=t.globalAlpha;t.globalAlpha=i.opacity,t.drawImage(_.canvas,-y,-v),t.globalAlpha=F}else t.drawImage(_.canvas,-y,-v);_.translate(-y,-v)}m||(_.globalAlpha=C)}d&&t.restore()},e.prototype.composeFrame=function(t,e,i){var r=this.getTransform(t,0);this.preCompose(i,t,r),this.compose(i,t,e),this.postCompose(i,t,e,r)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){if(this.replayGroup_){var s=e.viewState.resolution,a=e.viewState.rotation,h=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,s,a,i,{},function(t){var e=o(t);if(!(e in l))return l[e]=!0,r.call(n,t,h)},null)}},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e){var i=this.getLayer(),r=i.getSource(),n=t.viewHints[kn],o=t.viewHints[jn],s=i.getUpdateWhileAnimating(),a=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&n||!a&&o)return!0;var h=t.extent,l=t.viewState,u=l.projection,p=l.resolution,c=t.pixelRatio,d=i.getRevision(),f=i.getRenderBuffer(),_=i.getRenderOrder();void 0===_&&(_=Da);var g=et(h,f*p),y=l.projection.getExtent();if(r.getWrapX()&&l.projection.canWrapX()&&!ot(y,t.extent)){var v=Ot(y),m=Math.max(Ot(g)/2,v);g[0]=y[0]-m,g[2]=y[2]+m}if(!this.dirty_&&this.renderedResolution_==p&&this.renderedRevision_==d&&this.renderedRenderOrder_==_&&ot(this.renderedExtent_,g))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var x=new Aa(ja(p,c),g,p,c,r.getOverlaps(),this.declutterTree_,i.getRenderBuffer());r.loadFeatures(g,p,u);var E=function(t){var e,r=t.getStyleFunction()||i.getStyleFunction();if(r&&(e=r(t,p)),e){var n=this.renderFeature(t,p,c,e,x);this.dirty_=this.dirty_||n}}.bind(this);if(_){var S=[];r.forEachFeatureInExtent(g,function(t){S.push(t)}),S.sort(_);for(var T=0,C=S.length;T<C;++T)E(S[T])}else r.forEachFeatureInExtent(g,E);return x.finish(),this.renderedResolution_=p,this.renderedRevision_=d,this.renderedRenderOrder_=_,this.renderedExtent_=g,this.replayGroup_=x,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,r,n){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var s=0,a=r.length;s<a;++s)o=Ua(n,t,r[s],ka(e,i),this.handleStyleImageChange_,this)||o;else o=Ua(n,t,r,ka(e,i),this.handleStyleImageChange_,this);return o},e}(ta);Ya.handles=function(t){return t.getType()===Ss.VECTOR},Ya.create=function(t,e){return new Ya(e)};var Ba=Ya,Va={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},Xa={image:[da.POLYGON,da.CIRCLE,da.LINE_STRING,da.IMAGE,da.TEXT],hybrid:[da.POLYGON,da.LINE_STRING]},za={image:[da.DEFAULT],hybrid:[da.IMAGE,da.TEXT,da.DEFAULT],vector:Ea},Wa=function(t){function e(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?ua()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=[1,0,0,1,0,0];var i=e.getRenderMode();this.zDirection=i===Va.VECTOR?1:0,i!==Va.VECTOR&&(this.context=Jn()),v(Ps,M.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){x(Ps,M.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.getTile=function(e,i,r,n,o){var s=t.prototype.getTile.call(this,e,i,r,n,o);return s.getState()===On.LOADED&&(this.createReplayGroup_(s,n,o),this.context&&this.renderTileImage_(s,n,o)),s},e.prototype.getTileImage=function(t){var e=this.getLayer();return t.getImage(e)},e.prototype.prepareFrame=function(e,i){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,t.prototype.prepareFrame.call(this,e,i)},e.prototype.createReplayGroup_=function(t,e,i){var r=this,n=this.getLayer(),o=n.getRevision(),s=n.getRenderOrder()||null,a=t.getReplayState(n);if(a.dirty||a.renderedRevision!=o||a.renderedRenderOrder!=s){for(var h=n.getSource(),l=h.getTileGrid(),u=h.getTileGridForProjection(i).getResolution(t.tileCoord[0]),p=t.extent,c=function(o,c){var d=t.getTile(t.tileKeys[o]);if(d.getState()==On.LOADED){var f=d.tileCoord,_=l.getTileCoordExtent(f),g=wt(p,_),y=dt(_,g)?null:et(g,n.getRenderBuffer()*u,r.tmpExtent),v=d.getProjection(),m=!1;Ie(i,v)||(m=!0,d.setProjection(i)),a.dirty=!1;var x=new Aa(0,g,u,e,h.getOverlaps(),r.declutterTree_,n.getRenderBuffer()),E=ka(u,e),S=function(t){var e,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,u)),e){var r=this.renderFeature(t,E,e,x);this.dirty_=this.dirty_||r,a.dirty=a.dirty||r}},T=d.getFeatures();s&&s!==a.renderedRenderOrder&&T.sort(s);for(var C=0,R=T.length;C<R;++C){var w=T[C];m&&(v.getUnits()==$t.TILE_PIXELS&&(v.setWorldExtent(_),v.setExtent(d.getExtent())),w.getGeometry().transform(v,i)),y&&!Pt(y,w.getGeometry().getExtent())||S.call(r,w)}x.finish(),d.setReplayGroup(n,t.tileCoord.toString(),x)}},d=0,f=t.tileKeys.length;d<f;++d)c(d);a.renderedRevision=o,a.renderedRenderOrder=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){var s=e.viewState.resolution,a=e.viewState.rotation;i=void 0==i?0:i;var h,l,u,p,c=this.getLayer(),d={},f=this.renderedTiles;for(u=0,p=f.length;u<p;++u){var _=f[u];if(nt(h=et(_.extent,i*s,h),t))for(var g=0,y=_.tileKeys.length;g<y;++g){var v=_.getTile(_.tileKeys[g]);if(v.getState()==On.LOADED){var m=v.getReplayGroup(c,_.tileCoord.toString());l=l||m.forEachFeatureAtCoordinate(t,s,a,i,{},function(t){var e=o(t);if(!(e in d))return d[e]=!0,r.call(n,t,c)},null)}}}return l},e.prototype.getReplayTransform_=function(t,e){var i=this.getLayer().getSource().getTileGrid(),r=t.tileCoord,n=i.getResolution(r[0]),o=e.viewState,s=e.pixelRatio,a=o.resolution/s,h=i.getTileCoordExtent(r,this.tmpExtent),l=o.center,u=It(h),p=e.size,c=Math.round(s*p[0]/2),d=Math.round(s*p[1]/2);return Ye(this.tmpTransform_,c,d,n/a,n/a,o.rotation,(u[0]-l[0])/n,(l[1]-u[1])/n)},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.postCompose=function(e,i,r){var n=this.getLayer(),o=n.getRenderMode();if(o!=Va.IMAGE){var s,a,h=n.getDeclutter()?{}:null,l=n.getSource(),u=za[o],p=i.pixelRatio,c=i.viewState.rotation,d=i.size;c&&ks(e,-c,s=Math.round(p*d[0]/2),a=Math.round(p*d[1]/2)),h&&this.declutterTree_.clear();for(var f=i.viewHints,_=!(f[kn]||f[jn]),g=this.renderedTiles,y=l.getTileGridForProjection(i.viewState.projection),v=[],m=[],x=g.length-1;x>=0;--x){var E=g[x];if(E.getState()!=On.ABORT)for(var S=E.tileCoord,T=y.getTileCoordExtent(S,this.tmpExtent)[0]-E.extent[0],C=void 0,R=0,w=E.tileKeys.length;R<w;++R){var I=E.getTile(E.tileKeys[R]);if(I.getState()==On.LOADED){var L=I.getReplayGroup(n,S.toString());if(L&&L.hasReplays(u)){C||(C=this.getTransform(i,T));var O=I.tileCoord[0],P=L.getClipCoords(C);e.save(),e.globalAlpha=r.opacity;for(var b=0,M=v.length;b<M;++b){var F=v[b];O<m[b]&&(e.beginPath(),e.moveTo(P[0],P[1]),e.lineTo(P[2],P[3]),e.lineTo(P[4],P[5]),e.lineTo(P[6],P[7]),e.moveTo(F[6],F[7]),e.lineTo(F[4],F[5]),e.lineTo(F[2],F[3]),e.lineTo(F[0],F[1]),e.clip())}L.replay(e,C,c,{},_,u,h),e.restore(),v.push(P),m.push(O)}}}}h&&function(t,e,i,r){for(var n=Object.keys(t).map(Number).sort(V),o={},s=0,a=n.length;s<a;++s)for(var h=t[n[s].toString()],l=0,u=h.length;l<u;){var p=h[l++],c=h[l++];p.replay(e,c,i,o,r)}}(h,e,c,_),c&&ks(e,c,s,a)}t.prototype.postCompose.call(this,e,i,r)},e.prototype.renderFeature=function(t,e,i,r){if(!i)return!1;var n=!1;if(Array.isArray(i))for(var o=0,s=i.length;o<s;++o)n=Ua(r,t,i[o],e,this.handleStyleImageChange_,this)||n;else n=Ua(r,t,i,e,this.handleStyleImageChange_,this);return n},e.prototype.renderTileImage_=function(t,e,i){var r=this.getLayer(),n=t.getReplayState(r),o=r.getRevision(),s=Xa[r.getRenderMode()];if(s&&n.renderedTileRevision!==o){n.renderedTileRevision=o;var a=t.wrappedTileCoord,h=a[0],l=r.getSource(),u=l.getTileGridForProjection(i),p=u.getResolution(h),c=t.getContext(r),d=l.getTilePixelSize(h,e,i);c.canvas.width=d[0],c.canvas.height=d[1];for(var f=u.getTileCoordExtent(a,this.tmpExtent),_=0,g=t.tileKeys.length;_<g;++_){var y=t.getTile(t.tileKeys[_]);if(y.getState()==On.LOADED){var v=e/p,m=Fe(this.tmpTransform_);je(m,v,-v),Ue(m,-f[0],-f[3]),y.getReplayGroup(r,t.tileCoord.toString()).replay(c,m,0,{},!0,s)}}}},e}(ha);Wa.handles=function(t){return t.getType()===Ss.VECTOR_TILE},Wa.create=function(t,e){return new Wa(e)};var Ka=Wa,Ha=function(t){function e(e){(e=u({},e)).controls||(e.controls=wo()),e.interactions||(e.interactions=ys()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new Qs(this);return t.registerLayerRenderers([ra,ha,Ba,Ka]),t},e}(lo),Za={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},qa={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},Ja=function(t){function e(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+co,this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,v(this,G(qa.ELEMENT),this.handleElementChanged,this),v(this,G(qa.MAP),this.handleMapChanged,this),v(this,G(qa.OFFSET),this.handleOffsetChanged,this),v(this,G(qa.POSITION),this.handlePositionChanged,this),v(this,G(qa.POSITIONING),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:Za.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){return this.get(qa.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(qa.MAP)},e.prototype.getOffset=function(){return this.get(qa.OFFSET)},e.prototype.getPosition=function(){return this.get(qa.POSITION)},e.prototype.getPositioning=function(){return this.get(qa.POSITIONING)},e.prototype.handleElementChanged=function(){to(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&($n(this.element),E(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=v(t,Rn,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(qa.POSITION)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(qa.ELEMENT,t)},e.prototype.setMap=function(t){this.set(qa.MAP,t)},e.prototype.setOffset=function(t){this.set(qa.OFFSET,t)},e.prototype.setPosition=function(t){this.set(qa.POSITION,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),r=this.getRect(i,[function(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}(i),function(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}(i)]),n=this.autoPanMargin;if(!ot(e,r)){var o=r[0]-e[0],s=e[2]-r[2],a=r[1]-e[1],h=e[3]-r[3],l=[0,0];if(o<0?l[0]=o-n:s<0&&(l[0]=Math.abs(s)+n),a<0?l[1]=a-n:h<0&&(l[1]=Math.abs(h)+n),0!==l[0]||0!==l[1]){var u=t.getView().getCenter(),p=t.getPixelFromCoordinate(u),c=[p[0]+l[0],p[1]+l[1]];t.getView().animate({center:t.getCoordinateFromPixel(c),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,n=i.top+window.pageYOffset;return[r,n,r+e[0],n+e[1]]},e.prototype.setPositioning=function(t){this.set(qa.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),r=t.getSize();this.updateRenderedPosition(i,r)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,r=this.getOffset(),n=this.getPositioning();this.setVisible(!0);var o=r[0],s=r[1];if(n==Za.BOTTOM_RIGHT||n==Za.CENTER_RIGHT||n==Za.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var a=Math.round(e[0]-t[0]-o)+"px";this.rendered.right_!=a&&(this.rendered.right_=i.right=a)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),n!=Za.BOTTOM_CENTER&&n!=Za.CENTER_CENTER&&n!=Za.TOP_CENTER||(o-=this.element.offsetWidth/2);var h=Math.round(t[0]+o)+"px";this.rendered.left_!=h&&(this.rendered.left_=i.left=h)}if(n==Za.BOTTOM_LEFT||n==Za.BOTTOM_CENTER||n==Za.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var l=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=l&&(this.rendered.bottom_=i.bottom=l)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),n!=Za.CENTER_LEFT&&n!=Za.CENTER_CENTER&&n!=Za.CENTER_RIGHT||(s-=this.element.offsetHeight/2);var u=Math.round(t[1]+s)+"px";this.rendered.top_!=u&&(this.rendered.top_=i.top=u)}},e.prototype.getOptions=function(){return this.options},e}(D),Qa=9729,$a=10242,th=10243,eh=3553,ih=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function rh(t,e){for(var i=ih.length,r=0;r<i;++r)try{var n=t.getContext(ih[r],e);if(n)return n}catch(t){}return null}var nh,oh;if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{var sh=rh(document.createElement("canvas"),{failIfMajorPerformanceCaveat:!0});sh&&(!0,nh=sh.getParameter(sh.MAX_TEXTURE_SIZE),oh=sh.getSupportedExtensions())}catch(t){}var ah=function(t){this.source_=t};ah.prototype.isAnimated=function(){return!1},ah.prototype.getType=function(){return r()},ah.prototype.getSource=function(){return this.source_};var hh=ah,lh=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return 35632},e}(hh),uh=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return 35633},e}(hh),ph=new lh("precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n"),ch=new uh("varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n"),dh=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_lineWidth=t.getUniformLocation(e,"u_lineWidth"),this.u_pixelRatio=t.getUniformLocation(e,"u_pixelRatio"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_fillColor=t.getUniformLocation(e,"u_fillColor"),this.u_strokeColor=t.getUniformLocation(e,"u_strokeColor"),this.u_size=t.getUniformLocation(e,"u_size"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_instruction=t.getAttribLocation(e,"a_instruction"),this.a_radius=t.getAttribLocation(e,"a_radius")};function fh(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var _h=function(t){function e(e,i){t.call(this),this.tolerance=e,this.maxExtent=i,this.origin=Tt(i),this.projectionMatrix_=[1,0,0,1,0,0],this.offsetRotateMatrix_=[1,0,0,1,0,0],this.offsetScaleMatrix_=[1,0,0,1,0,0],this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeleteResourcesFunction=function(t){return r()},e.prototype.finish=function(t){r()},e.prototype.setUpProgram=function(t,e,i,n){return r()},e.prototype.shutDownProgram=function(t,e){r()},e.prototype.drawReplay=function(t,e,i,n){r()},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,n,o){return r()},e.prototype.drawHitDetectionReplay=function(t,e,i,r,n,o){return n?this.drawHitDetectionReplayOneByOne(t,e,i,r,o):this.drawHitDetectionReplayAll(t,e,i,r)},e.prototype.drawHitDetectionReplayAll=function(t,e,i,r){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawReplay(t,e,i,!0);var n=r(null);return n||void 0},e.prototype.replay=function(t,e,i,r,n,o,s,a,h,l,u){var p,c,d,f,_,g,y,v,m=t.getGL();this.lineStringReplay&&(p=m.isEnabled(m.STENCIL_TEST),c=m.getParameter(m.STENCIL_FUNC),d=m.getParameter(m.STENCIL_VALUE_MASK),f=m.getParameter(m.STENCIL_REF),_=m.getParameter(m.STENCIL_WRITEMASK),g=m.getParameter(m.STENCIL_FAIL),y=m.getParameter(m.STENCIL_PASS_DEPTH_PASS),v=m.getParameter(m.STENCIL_PASS_DEPTH_FAIL),m.enable(m.STENCIL_TEST),m.clear(m.STENCIL_BUFFER_BIT),m.stencilMask(255),m.stencilFunc(m.ALWAYS,1,255),m.stencilOp(m.KEEP,m.KEEP,m.REPLACE),this.lineStringReplay.replay(t,e,i,r,n,o,s,a,h,l,u),m.stencilMask(0),m.stencilFunc(m.NOTEQUAL,1,255)),t.bindBuffer(34962,this.verticesBuffer),t.bindBuffer(34963,this.indicesBuffer);var x=this.setUpProgram(m,t,n,o),E=Fe(this.projectionMatrix_);je(E,2/(i*n[0]),2/(i*n[1])),ke(E,-r),Ue(E,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]));var S=Fe(this.offsetScaleMatrix_);je(S,2/n[0],2/n[1]);var T,C=Fe(this.offsetRotateMatrix_);return 0!==r&&ke(C,-r),m.uniformMatrix4fv(x.u_projectionMatrix,!1,fh(this.tmpMat4_,E)),m.uniformMatrix4fv(x.u_offsetScaleMatrix,!1,fh(this.tmpMat4_,S)),m.uniformMatrix4fv(x.u_offsetRotateMatrix,!1,fh(this.tmpMat4_,C)),m.uniform1f(x.u_opacity,s),void 0===h?this.drawReplay(m,t,a,!1):T=this.drawHitDetectionReplay(m,t,a,h,l,u),this.shutDownProgram(m,x),this.lineStringReplay&&(p||m.disable(m.STENCIL_TEST),m.clear(m.STENCIL_BUFFER_BIT),m.stencilFunc(c,f,d),m.stencilMask(_),m.stencilOp(g,v,y)),T},e.prototype.drawElements=function(t,e,i,r){var n=e.hasOESElementIndexUint?5125:5123,o=r-i,s=i*(e.hasOESElementIndexUint?4:2);t.drawElements(4,o,n,s)},e}(Vs),gh=[0,0,0,1],yh=[],vh=[0,0,0,1],mh=Number.EPSILON||2.220446049250313e-16,xh=function(t,e,i,r,n,o){var s=(i-t)*(o-e)-(n-t)*(r-e);return s<=mh&&s>=-mh?void 0:s>0},Eh=35044,Sh=function(t,e){this.arr_=void 0!==t?t:[],this.usage_=void 0!==e?e:Eh};Sh.prototype.getArray=function(){return this.arr_},Sh.prototype.getUsage=function(){return this.usage_};var Th=Sh,Ch=function(t){function e(e,i){t.call(this,e,i),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i,r){var n,o,s=this.vertices.length,a=this.indices.length,h=s/4;for(n=e,o=i;n<o;n+=r)this.vertices[s++]=t[n],this.vertices[s++]=t[n+1],this.vertices[s++]=0,this.vertices[s++]=this.radius_,this.vertices[s++]=t[n],this.vertices[s++]=t[n+1],this.vertices[s++]=1,this.vertices[s++]=this.radius_,this.vertices[s++]=t[n],this.vertices[s++]=t[n+1],this.vertices[s++]=2,this.vertices[s++]=this.radius_,this.vertices[s++]=t[n],this.vertices[s++]=t[n+1],this.vertices[s++]=3,this.vertices[s++]=this.radius_,this.indices[a++]=h,this.indices[a++]=h+1,this.indices[a++]=h+2,this.indices[a++]=h+2,this.indices[a++]=h+3,this.indices[a++]=h,h+=4},e.prototype.drawCircle=function(t,e){var i=t.getRadius(),r=t.getStride();if(i){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=i;var n=t.getFlatCoordinates();n=Dt(n,0,2,r,-this.origin[0],-this.origin[1]),this.drawCoordinates_(n,0,2,r)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){var o=this.styles_[this.styles_.length-1];this.state_.fillColor=o[0],this.state_.strokeColor=o[1],this.state_.lineWidth=o[2],this.state_.changed=!1}},e.prototype.finish=function(t){this.verticesBuffer=new Th(this.vertices),this.indicesBuffer=new Th(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},e.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},e.prototype.setUpProgram=function(t,e,i,r){var n,o=e.getProgram(ph,ch);return this.defaultLocations_?n=this.defaultLocations_:(n=new dh(t,o),this.defaultLocations_=n),e.useProgram(o),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,5126,!1,16,0),t.enableVertexAttribArray(n.a_instruction),t.vertexAttribPointer(n.a_instruction,1,5126,!1,16,8),t.enableVertexAttribArray(n.a_radius),t.vertexAttribPointer(n.a_radius,1,5126,!1,16,12),t.uniform2fv(n.u_size,i),t.uniform1f(n.u_pixelRatio,r),n},e.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_instruction),t.disableVertexAttribArray(e.a_radius)},e.prototype.drawReplay=function(t,e,i,r){var n,o,s,a;if(d(i))for(s=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)o=this.styleIndices_[n],a=this.styles_[n],this.setFillStyle_(t,a[0]),this.setStrokeStyle_(t,a[1],a[2]),this.drawElements(t,e,o,s),s=o;else this.drawReplaySkipping_(t,e,i)},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,n){var s,a,h,l,u,p,c;for(c=this.startIndices.length-2,h=this.startIndices[c+1],s=this.styleIndices_.length-1;s>=0;--s)for(l=this.styles_[s],this.setFillStyle_(t,l[0]),this.setStrokeStyle_(t,l[1],l[2]),u=this.styleIndices_[s];c>=0&&this.startIndices[c]>=u;){if(a=this.startIndices[c],void 0===i[o(p=this.startIndicesFeature[c])]&&p.getGeometry()&&(void 0===n||Pt(n,p.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,a,h);var d=r(p);if(d)return d}c--,h=a}},e.prototype.drawReplaySkipping_=function(t,e,i){var r,n,s,a,h,l,u;for(l=this.startIndices.length-2,s=n=this.startIndices[l+1],r=this.styleIndices_.length-1;r>=0;--r){for(a=this.styles_[r],this.setFillStyle_(t,a[0]),this.setStrokeStyle_(t,a[1],a[2]),h=this.styleIndices_[r];l>=0&&this.startIndices[l]>=h;)u=this.startIndices[l],i[o(this.startIndicesFeature[l])]&&(n!==s&&this.drawElements(t,e,n,s),s=u),l--,n=u;n!==s&&this.drawElements(t,e,n,s),n=s=h}},e.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_fillColor,e)},e.prototype.setStrokeStyle_=function(t,e,i){t.uniform4fv(this.defaultLocations_.u_strokeColor,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i)},e.prototype.setFillStrokeStyle=function(t,e){var i,r;if(e){var n=e.getLineDash();this.state_.lineDash=n||yh;var o=e.getLineDashOffset();this.state_.lineDashOffset=o||0,i=(i=e.getColor())instanceof CanvasGradient||i instanceof CanvasPattern?vh:_r(i).map(function(t,e){return 3!=e?t/255:t})||vh,r=void 0!==(r=e.getWidth())?r:1}else i=[0,0,0,0],r=0;var s=t?t.getColor():[0,0,0,0];s=s instanceof CanvasGradient||s instanceof CanvasPattern?gh:_r(s).map(function(t,e){return 3!=e?t/255:t})||gh,this.state_.strokeColor&&Z(this.state_.strokeColor,i)&&this.state_.fillColor&&Z(this.state_.fillColor,s)&&this.state_.lineWidth===r||(this.state_.changed=!0,this.state_.fillColor=s,this.state_.strokeColor=i,this.state_.lineWidth=r,this.styles_.push([s,i,r]))},e}(_h),Rh=new lh("precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),wh=new uh("varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n"),Ih=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_image=t.getUniformLocation(e,"u_image"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_texCoord=t.getAttribLocation(e,"a_texCoord"),this.a_offsets=t.getAttribLocation(e,"a_offsets"),this.a_opacity=t.getAttribLocation(e,"a_opacity"),this.a_rotateWithView=t.getAttribLocation(e,"a_rotateWithView")},Lh={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};function Oh(t,e,i){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(eh,$a,e),void 0!==i&&t.texParameteri(eh,th,i),r}function Ph(t,e,i,r,n){var o=Oh(t,r,n);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),o}function bh(t,e,i,r){var n=Oh(t,i,r);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),n}var Mh=function(t){function e(e,i){t.call(this),this.canvas_=e,this.gl_=i,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=X(oh,"OES_element_index_uint"),this.hasOESElementIndexUint&&i.getExtension("OES_element_index_uint"),v(this.canvas_,Lh.LOST,this.handleWebGLContextLost,this),v(this.canvas_,Lh.RESTORED,this.handleWebGLContextRestored,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bindBuffer=function(t,e){var i=this.getGL(),r=e.getArray(),n=o(e);if(n in this.bufferCache_){var s=this.bufferCache_[n];i.bindBuffer(t,s.buffer)}else{var a,h=i.createBuffer();i.bindBuffer(t,h),34962==t?a=new Float32Array(r):34963==t&&(a=this.hasOESElementIndexUint?new Uint32Array(r):new Uint16Array(r)),i.bufferData(t,a,e.getUsage()),this.bufferCache_[n]={buf:e,buffer:h}}},e.prototype.deleteBuffer=function(t){var e=this.getGL(),i=o(t),r=this.bufferCache_[i];e.isContextLost()||e.deleteBuffer(r.buffer),delete this.bufferCache_[i]},e.prototype.disposeInternal=function(){S(this.canvas_);var t=this.getGL();if(!t.isContextLost()){for(var e in this.bufferCache_)t.deleteBuffer(this.bufferCache_[e].buffer);for(var i in this.programCache_)t.deleteProgram(this.programCache_[i]);for(var r in this.shaderCache_)t.deleteShader(this.shaderCache_[r]);t.deleteFramebuffer(this.hitDetectionFramebuffer_),t.deleteRenderbuffer(this.hitDetectionRenderbuffer_),t.deleteTexture(this.hitDetectionTexture_)}},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},e.prototype.getShader=function(t){var e=o(t);if(e in this.shaderCache_)return this.shaderCache_[e];var i=this.getGL(),r=i.createShader(t.getType());return i.shaderSource(r,t.getSource()),i.compileShader(r),this.shaderCache_[e]=r,r},e.prototype.getProgram=function(t,e){var i=o(t)+"/"+o(e);if(i in this.programCache_)return this.programCache_[i];var r=this.getGL(),n=r.createProgram();return r.attachShader(n,this.getShader(t)),r.attachShader(n,this.getShader(e)),r.linkProgram(n),this.programCache_[i]=n,n},e.prototype.handleWebGLContextLost=function(){p(this.bufferCache_),p(this.shaderCache_),p(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.initHitDetectionFramebuffer_=function(){var t=this.gl_,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var i=Ph(t,1,1),r=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,r),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,1,1),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,r),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=e,this.hitDetectionTexture_=i,this.hitDetectionRenderbuffer_=r},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,!0)},e}(C),Fh=function(t){function e(e,i){t.call(this,e,i),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,r=this.getTextures(!0),n=t.getGL();return function(){var o,s;if(!n.isContextLost())for(o=0,s=r.length;o<s;++o)n.deleteTexture(r[o]);t.deleteBuffer(e),t.deleteBuffer(i)}},e.prototype.drawCoordinates=function(t,e,i,r){var n,o,s,a,h,l,u=this.anchorX,p=this.anchorY,c=this.height,d=this.imageHeight,f=this.imageWidth,_=this.opacity,g=this.originX,y=this.originY,v=this.rotateWithView?1:0,m=-this.rotation,x=this.scale,E=this.width,S=Math.cos(m),T=Math.sin(m),C=this.indices.length,R=this.vertices.length;for(n=e;n<i;n+=r)h=t[n]-this.origin[0],l=t[n+1]-this.origin[1],o=R/8,s=-x*u,a=-x*(c-p),this.vertices[R++]=h,this.vertices[R++]=l,this.vertices[R++]=s*S-a*T,this.vertices[R++]=s*T+a*S,this.vertices[R++]=g/f,this.vertices[R++]=(y+c)/d,this.vertices[R++]=_,this.vertices[R++]=v,s=x*(E-u),a=-x*(c-p),this.vertices[R++]=h,this.vertices[R++]=l,this.vertices[R++]=s*S-a*T,this.vertices[R++]=s*T+a*S,this.vertices[R++]=(g+E)/f,this.vertices[R++]=(y+c)/d,this.vertices[R++]=_,this.vertices[R++]=v,s=x*(E-u),a=x*p,this.vertices[R++]=h,this.vertices[R++]=l,this.vertices[R++]=s*S-a*T,this.vertices[R++]=s*T+a*S,this.vertices[R++]=(g+E)/f,this.vertices[R++]=y/d,this.vertices[R++]=_,this.vertices[R++]=v,s=-x*u,a=x*p,this.vertices[R++]=h,this.vertices[R++]=l,this.vertices[R++]=s*S-a*T,this.vertices[R++]=s*T+a*S,this.vertices[R++]=g/f,this.vertices[R++]=y/d,this.vertices[R++]=_,this.vertices[R++]=v,this.indices[C++]=o,this.indices[C++]=o+1,this.indices[C++]=o+2,this.indices[C++]=o,this.indices[C++]=o+2,this.indices[C++]=o+3;return R},e.prototype.createTextures=function(t,e,i,r){var n,s,a,h,l=e.length;for(h=0;h<l;++h)(a=o(s=e[h]))in i?n=i[a]:(n=bh(r,s,33071,33071),i[a]=n),t[h]=n},e.prototype.setUpProgram=function(t,e,i,r){var n,o=e.getProgram(Rh,wh);return this.defaultLocations?n=this.defaultLocations:(n=new Ih(t,o),this.defaultLocations=n),e.useProgram(o),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,5126,!1,32,0),t.enableVertexAttribArray(n.a_offsets),t.vertexAttribPointer(n.a_offsets,2,5126,!1,32,8),t.enableVertexAttribArray(n.a_texCoord),t.vertexAttribPointer(n.a_texCoord,2,5126,!1,32,16),t.enableVertexAttribArray(n.a_opacity),t.vertexAttribPointer(n.a_opacity,1,5126,!1,32,24),t.enableVertexAttribArray(n.a_rotateWithView),t.vertexAttribPointer(n.a_rotateWithView,1,5126,!1,32,28),n},e.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_offsets),t.disableVertexAttribArray(e.a_texCoord),t.disableVertexAttribArray(e.a_opacity),t.disableVertexAttribArray(e.a_rotateWithView)},e.prototype.drawReplay=function(t,e,i,r){var n,o,s,a=r?this.getHitDetectionTextures():this.getTextures(),h=r?this.hitDetectionGroupIndices:this.groupIndices;if(d(i))for(n=0,o=a.length,s=0;n<o;++n){t.bindTexture(eh,a[n]);var l=h[n];this.drawElements(t,e,s,l),s=l}else this.drawReplaySkipping(t,e,i,a,h)},e.prototype.drawReplaySkipping=function(t,e,i,r,n){var s,a,h=0;for(s=0,a=r.length;s<a;++s){t.bindTexture(eh,r[s]);for(var l=s>0?n[s-1]:0,u=n[s],p=l,c=l;h<this.startIndices.length&&this.startIndices[h]<=u;){void 0!==i[o(this.startIndicesFeature[h])]?(p!==c&&this.drawElements(t,e,p,c),c=p=h===this.startIndices.length-1?u:this.startIndices[h+1]):c=h===this.startIndices.length-1?u:this.startIndices[h+1],h++}p!==c&&this.drawElements(t,e,p,c)}},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,n){var s,a,h,l,u,p=this.startIndices.length-1,c=this.getHitDetectionTextures();for(s=c.length-1;s>=0;--s)for(t.bindTexture(eh,c[s]),a=s>0?this.hitDetectionGroupIndices[s-1]:0,l=this.hitDetectionGroupIndices[s];p>=0&&this.startIndices[p]>=a;){if(h=this.startIndices[p],void 0===i[o(u=this.startIndicesFeature[p])]&&u.getGeometry()&&(void 0===n||Pt(n,u.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,h,l);var d=r(u);if(d)return d}l=h,p--}},e.prototype.finish=function(t){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},e.prototype.getTextures=function(t){return r()},e.prototype.getHitDetectionTextures=function(){return r()},e}(_h),Ah=function(t){function e(e,i){t.call(this,e,i),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawMultiPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),r=t.getStride();this.drawCoordinates(i,0,i.length,r)},e.prototype.drawPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),r=t.getStride();this.drawCoordinates(i,0,i.length,r)},e.prototype.finish=function(e){var i=e.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new Th(this.vertices);var r=this.indices;this.indicesBuffer=new Th(r);var n={};this.createTextures(this.textures_,this.images_,n,i),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,n,i),this.images_=null,this.hitDetectionImages_=null,t.prototype.finish.call(this,e)},e.prototype.setImageStyle=function(t){var e=t.getAnchor(),i=t.getImage(1),r=t.getImageSize(),n=t.getHitDetectionImage(1),s=t.getOpacity(),a=t.getOrigin(),h=t.getRotateWithView(),l=t.getRotation(),u=t.getSize(),p=t.getScale();0===this.images_.length?this.images_.push(i):o(this.images_[this.images_.length-1])!=o(i)&&(this.groupIndices.push(this.indices.length),this.images_.push(i)),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(n):o(this.hitDetectionImages_[this.hitDetectionImages_.length-1])!=o(n)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(n)),this.anchorX=e[0],this.anchorY=e[1],this.height=u[1],this.imageHeight=r[1],this.imageWidth=r[0],this.opacity=s,this.originX=a[0],this.originY=a[1],this.rotation=l,this.rotateWithView=h,this.scale=p,this.width=u[0]},e.prototype.getTextures=function(t){return t?this.textures_.concat(this.hitDetectionTextures_):this.textures_},e.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_},e}(Fh);function Nh(t,e,i,r){var n=i-r;return t[e]===t[n]&&t[e+1]===t[n+1]&&(i-e)/r>3&&!!Ke(t,e,i,r)}var Gh=new lh("precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),Dh=new uh("varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n"),kh=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_lineWidth=t.getUniformLocation(e,"u_lineWidth"),this.u_miterLimit=t.getUniformLocation(e,"u_miterLimit"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_color=t.getUniformLocation(e,"u_color"),this.u_size=t.getUniformLocation(e,"u_size"),this.u_pixelRatio=t.getUniformLocation(e,"u_pixelRatio"),this.a_lastPos=t.getAttribLocation(e,"a_lastPos"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_nextPos=t.getAttribLocation(e,"a_nextPos"),this.a_direction=t.getAttribLocation(e,"a_direction")},jh=3,Uh=5,Yh=7,Bh=11,Vh=13,Xh=17,zh=19,Wh=23,Kh=function(t){function e(e,i){t.call(this,e,i),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i,r){var n,o,s,a,h,l,u,p,c=this.vertices.length,d=this.indices.length,f="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,_="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,g=Nh(t,e,i,r),y=d,v=1;for(n=e,o=i;n<o;n+=r){if(h=c/7,l=u,u=p||[t[n],t[n+1]],n===e){if(p=[t[n+r],t[n+r+1]],i-e==2*r&&Z(u,p))break;if(!g){_&&(c=this.addVertices_([0,0],u,p,v*Yh*_,c),c=this.addVertices_([0,0],u,p,-v*Yh*_,c),this.indices[d++]=h+2,this.indices[d++]=h,this.indices[d++]=h+1,this.indices[d++]=h+1,this.indices[d++]=h+3,this.indices[d++]=h+2),c=this.addVertices_([0,0],u,p,v*jh*(_||1),c),y=(c=this.addVertices_([0,0],u,p,-v*jh*(_||1),c))/7-1;continue}l=[t[i-2*r],t[i-2*r+1]],s=p}else{if(n===i-r){if(g){p=s;break}l=l||[0,0],c=this.addVertices_(l,u,[0,0],v*Uh*(_||1),c),c=this.addVertices_(l,u,[0,0],-v*Uh*(_||1),c),this.indices[d++]=h,this.indices[d++]=y-1,this.indices[d++]=y,this.indices[d++]=y,this.indices[d++]=h+1,this.indices[d++]=h,_&&(c=this.addVertices_(l,u,[0,0],v*Bh*_,c),c=this.addVertices_(l,u,[0,0],-v*Bh*_,c),this.indices[d++]=h+2,this.indices[d++]=h,this.indices[d++]=h+1,this.indices[d++]=h+1,this.indices[d++]=h+3,this.indices[d++]=h+2);break}p=[t[n+r],t[n+r+1]]}a=xh(l[0],l[1],u[0],u[1],p[0],p[1])?-1:1,c=this.addVertices_(l,u,p,a*Vh*(f||1),c),c=this.addVertices_(l,u,p,a*Xh*(f||1),c),c=this.addVertices_(l,u,p,-a*zh*(f||1),c),n>e&&(this.indices[d++]=h,this.indices[d++]=y-1,this.indices[d++]=y,this.indices[d++]=h+2,this.indices[d++]=h,this.indices[d++]=v*a>0?y:y-1),this.indices[d++]=h,this.indices[d++]=h+2,this.indices[d++]=h+1,y=h+2,v=a,f&&(c=this.addVertices_(l,u,p,a*Wh*f,c),this.indices[d++]=h+1,this.indices[d++]=h+3,this.indices[d++]=h)}g&&(h=h||c/7,a=Si([l[0],l[1],u[0],u[1],p[0],p[1]],0,6,2)?1:-1,c=this.addVertices_(l,u,p,a*Vh*(f||1),c),c=this.addVertices_(l,u,p,-a*zh*(f||1),c),this.indices[d++]=h,this.indices[d++]=y-1,this.indices[d++]=y,this.indices[d++]=h+1,this.indices[d++]=h,this.indices[d++]=v*a>0?y:y-1)},e.prototype.addVertices_=function(t,e,i,r,n){return this.vertices[n++]=t[0],this.vertices[n++]=t[1],this.vertices[n++]=e[0],this.vertices[n++]=e[1],this.vertices[n++]=i[0],this.vertices[n++]=i[1],this.vertices[n++]=r,n},e.prototype.isValid_=function(t,e,i,r){var n=i-e;return!(n<2*r)&&(n!==2*r||!Z([t[e],t[e+1]],[t[e+r],t[e+r+1]]))},e.prototype.drawLineString=function(t,e){var i=t.getFlatCoordinates(),r=t.getStride();this.isValid_(i,0,i.length,r)&&(i=Dt(i,0,i.length,r,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.drawCoordinates_(i,0,i.length,r))},e.prototype.drawMultiLineString=function(t,e){var i=this.indices.length,r=t.getEnds();r.unshift(0);var n,o,s=t.getFlatCoordinates(),a=t.getStride();if(r.length>1)for(n=1,o=r.length;n<o;++n)if(this.isValid_(s,r[n-1],r[n],a)){var h=Dt(s,r[n-1],r[n],a,-this.origin[0],-this.origin[1]);this.drawCoordinates_(h,0,h.length,a)}this.indices.length>i&&(this.startIndices.push(i),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1))},e.prototype.drawPolygonCoordinates=function(t,e,i){var r,n;if(Nh(t,0,t.length,i)||(t.push(t[0]),t.push(t[1])),this.drawCoordinates_(t,0,t.length,i),e.length)for(r=0,n=e.length;r<n;++r)Nh(e[r],0,e[r].length,i)||(e[r].push(e[r][0]),e[r].push(e[r][1])),this.drawCoordinates_(e[r],0,e[r].length,i)},e.prototype.setPolygonStyle=function(t,e){var i=void 0===e?this.indices.length:e;this.startIndices.push(i),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1)},e.prototype.getCurrentIndex=function(){return this.indices.length},e.prototype.finish=function(t){this.verticesBuffer=new Th(this.vertices),this.indicesBuffer=new Th(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},e.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},e.prototype.setUpProgram=function(t,e,i,r){var n,o=e.getProgram(Gh,Dh);return this.defaultLocations_?n=this.defaultLocations_:(n=new kh(t,o),this.defaultLocations_=n),e.useProgram(o),t.enableVertexAttribArray(n.a_lastPos),t.vertexAttribPointer(n.a_lastPos,2,5126,!1,28,0),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,5126,!1,28,8),t.enableVertexAttribArray(n.a_nextPos),t.vertexAttribPointer(n.a_nextPos,2,5126,!1,28,16),t.enableVertexAttribArray(n.a_direction),t.vertexAttribPointer(n.a_direction,1,5126,!1,28,24),t.uniform2fv(n.u_size,i),t.uniform1f(n.u_pixelRatio,r),n},e.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_lastPos),t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_nextPos),t.disableVertexAttribArray(e.a_direction)},e.prototype.drawReplay=function(t,e,i,r){var n,o,s,a,h=t.getParameter(t.DEPTH_FUNC),l=t.getParameter(t.DEPTH_WRITEMASK);if(r||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),d(i))for(s=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)o=this.styleIndices_[n],a=this.styles_[n],this.setStrokeStyle_(t,a[0],a[1],a[2]),this.drawElements(t,e,o,s),t.clear(t.DEPTH_BUFFER_BIT),s=o;else this.drawReplaySkipping_(t,e,i);r||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(l),t.depthFunc(h))},e.prototype.drawReplaySkipping_=function(t,e,i){var r,n,s,a,h,l,u;for(l=this.startIndices.length-2,s=n=this.startIndices[l+1],r=this.styleIndices_.length-1;r>=0;--r){for(a=this.styles_[r],this.setStrokeStyle_(t,a[0],a[1],a[2]),h=this.styleIndices_[r];l>=0&&this.startIndices[l]>=h;)u=this.startIndices[l],i[o(this.startIndicesFeature[l])]&&(n!==s&&(this.drawElements(t,e,n,s),t.clear(t.DEPTH_BUFFER_BIT)),s=u),l--,n=u;n!==s&&(this.drawElements(t,e,n,s),t.clear(t.DEPTH_BUFFER_BIT)),n=s=h}},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,n){var s,a,h,l,u,p,c;for(c=this.startIndices.length-2,h=this.startIndices[c+1],s=this.styleIndices_.length-1;s>=0;--s)for(l=this.styles_[s],this.setStrokeStyle_(t,l[0],l[1],l[2]),u=this.styleIndices_[s];c>=0&&this.startIndices[c]>=u;){if(a=this.startIndices[c],void 0===i[o(p=this.startIndicesFeature[c])]&&p.getGeometry()&&(void 0===n||Pt(n,p.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,a,h);var d=r(p);if(d)return d}c--,h=a}},e.prototype.setStrokeStyle_=function(t,e,i,r){t.uniform4fv(this.defaultLocations_.u_color,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i),t.uniform1f(this.defaultLocations_.u_miterLimit,r)},e.prototype.setFillStrokeStyle=function(t,e){var i=e.getLineCap();this.state_.lineCap=void 0!==i?i:"round";var r=e.getLineDash();this.state_.lineDash=r||yh;var n=e.getLineDashOffset();this.state_.lineDashOffset=n||0;var o=e.getLineJoin();this.state_.lineJoin=void 0!==o?o:"round";var s=e.getColor();s=s instanceof CanvasGradient||s instanceof CanvasPattern?vh:_r(s).map(function(t,e){return 3!=e?t/255:t})||vh;var a=e.getWidth();a=void 0!==a?a:1;var h=e.getMiterLimit();h=void 0!==h?h:10,this.state_.strokeColor&&Z(this.state_.strokeColor,s)&&this.state_.lineWidth===a&&this.state_.miterLimit===h||(this.state_.changed=!0,this.state_.strokeColor=s,this.state_.lineWidth=a,this.state_.miterLimit=h,this.styles_.push([s,a,h]))},e}(_h),Hh=new lh("precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),Zh=new uh("\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n"),qh=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_color=t.getUniformLocation(e,"u_color"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.a_position=t.getAttribLocation(e,"a_position")},Jh=function(t){this.first_,this.last_,this.head_,this.circular_=void 0===t||t,this.length_=0};Jh.prototype.insertItem=function(t){var e={prev:void 0,next:void 0,data:t},i=this.head_;if(i){var r=i.next;e.prev=i,e.next=r,i.next=e,r&&(r.prev=e),i===this.last_&&(this.last_=e)}else this.first_=e,this.last_=e,this.circular_&&(e.next=e,e.prev=e);this.head_=e,this.length_++},Jh.prototype.removeItem=function(){var t=this.head_;if(t){var e=t.next,i=t.prev;e&&(e.prev=i),i&&(i.next=e),this.head_=e||i,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===t?this.first_=this.head_:this.last_===t&&(this.last_=i?this.head_.prev:this.head_),this.length_--}},Jh.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},Jh.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},Jh.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},Jh.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},Jh.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},Jh.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},Jh.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},Jh.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},Jh.prototype.concat=function(t){if(t.head_){if(this.head_){var e=this.head_.next;this.head_.next=t.first_,t.first_.prev=this.head_,e.prev=t.last_,t.last_.next=e,this.length_+=t.length_}else this.head_=t.head_,this.first_=t.first_,this.last_=t.last_,this.length_=t.length_;t.head_=void 0,t.first_=void 0,t.last_=void 0,t.length_=0}},Jh.prototype.getLength=function(){return this.length_};var Qh=Jh,$h=function(t){this.rbush_=ua()(t,void 0),this.items_={}};$h.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[o(e)]=i},$h.prototype.load=function(t,e){for(var i=new Array(e.length),r=0,n=e.length;r<n;r++){var s=t[r],a=e[r],h={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[r]=h,this.items_[o(a)]=h}this.rbush_.load(i)},$h.prototype.remove=function(t){var e=o(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},$h.prototype.update=function(t,e){var i=this.items_[o(e)];dt([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))},$h.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},$h.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},$h.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},$h.prototype.forEachInExtent=function(t,e,i){return this.forEach_(this.getInExtent(t),e,i)},$h.prototype.forEach_=function(t,e,i){for(var r,n=0,o=t.length;n<o;n++)if(r=e.call(i,t[n]))return r;return r},$h.prototype.isEmpty=function(){return d(this.items_)},$h.prototype.clear=function(){this.rbush_.clear(),this.items_={}},$h.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return lt(e.minX,e.minY,e.maxX,e.maxY,t)},$h.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]};var tl=$h,el=function(t){function e(e,i){t.call(this,e,i),this.lineStringReplay=new Kh(e,i),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i){var r=new Qh,n=new tl;this.processFlatCoordinates_(t,i,r,n,!0);var o=this.getMaxCoords_(r);if(e.length){var s,a,h=[];for(s=0,a=e.length;s<a;++s){var l={list:new Qh,maxCoords:void 0,rtree:new tl};h.push(l),this.processFlatCoordinates_(e[s],i,l.list,l.rtree,!1),this.classifyPoints_(l.list,l.rtree,!0),l.maxCoords=this.getMaxCoords_(l.list)}for(h.sort(function(t,e){return e.maxCoords[0]===t.maxCoords[0]?t.maxCoords[1]-e.maxCoords[1]:e.maxCoords[0]-t.maxCoords[0]}),s=0;s<h.length;++s){var u=h[s].list,p=u.firstItem(),c=p,d=void 0;do{if(this.getIntersections_(c,n).length){d=!0;break}c=u.nextItem()}while(p!==c);d||this.bridgeHole_(u,h[s].maxCoords[0],r,o[0],n)&&(n.concat(h[s].rtree),this.classifyPoints_(r,n,!1))}}else this.classifyPoints_(r,n,!1);this.triangulate_(r,n)},e.prototype.processFlatCoordinates_=function(t,e,i,r,n){var o,s,a,h,l,u=Si(t,0,t.length,e),p=this.vertices.length/2,c=[],d=[];if(n===u){for(h=a=this.createPoint_(t[0],t[1],p++),o=e,s=t.length;o<s;o+=e)l=this.createPoint_(t[o],t[o+1],p++),d.push(this.insertItem_(h,l,i)),c.push([Math.min(h.x,l.x),Math.min(h.y,l.y),Math.max(h.x,l.x),Math.max(h.y,l.y)]),h=l;d.push(this.insertItem_(l,a,i)),c.push([Math.min(h.x,l.x),Math.min(h.y,l.y),Math.max(h.x,l.x),Math.max(h.y,l.y)])}else{var f=t.length-e;for(h=a=this.createPoint_(t[f],t[f+1],p++),o=f-e,s=0;o>=s;o-=e)l=this.createPoint_(t[o],t[o+1],p++),d.push(this.insertItem_(h,l,i)),c.push([Math.min(h.x,l.x),Math.min(h.y,l.y),Math.max(h.x,l.x),Math.max(h.y,l.y)]),h=l;d.push(this.insertItem_(l,a,i)),c.push([Math.min(h.x,l.x),Math.min(h.y,l.y),Math.max(h.x,l.x),Math.max(h.y,l.y)])}r.load(c,d)},e.prototype.getMaxCoords_=function(t){var e=t.firstItem(),i=e,r=[i.p0.x,i.p0.y];do{(i=t.nextItem()).p0.x>r[0]&&(r=[i.p0.x,i.p0.y])}while(i!==e);return r},e.prototype.classifyPoints_=function(t,e,i){var r=t.firstItem(),n=r,o=t.nextItem(),s=!1;do{var a=i?xh(o.p1.x,o.p1.y,n.p1.x,n.p1.y,n.p0.x,n.p0.y):xh(n.p0.x,n.p0.y,n.p1.x,n.p1.y,o.p1.x,o.p1.y);void 0===a?(this.removeItem_(n,o,t,e),s=!0,o===r&&(r=t.getNextItem()),o=n,t.prevItem()):n.p1.reflex!==a&&(n.p1.reflex=a,s=!0),n=o,o=t.nextItem()}while(n!==r);return s},e.prototype.bridgeHole_=function(t,e,i,r,n){for(var o=t.firstItem();o.p1.x!==e;)o=t.nextItem();var s,a,h,l,u=o.p1,p={x:r,y:u.y,i:-1},c=1/0,d=this.getIntersections_({p0:u,p1:p},n,!0);for(s=0,a=d.length;s<a;++s){var f=d[s],_=this.calculateIntersection_(u,p,f.p0,f.p1,!0),g=Math.abs(u.x-_[0]);g<c&&void 0!==xh(u.x,u.y,f.p0.x,f.p0.y,f.p1.x,f.p1.y)&&(c=g,l={x:_[0],y:_[1],i:-1},o=f)}if(c===1/0)return!1;if(h=o.p1,c>0){var y=this.getPointsInTriangle_(u,l,o.p1,n);if(y.length){var v=1/0;for(s=0,a=y.length;s<a;++s){var m=y[s],x=Math.atan2(u.y-m.y,p.x-m.x);(x<v||x===v&&m.x<h.x)&&(v=x,h=m)}}}for(o=i.firstItem();o.p1.x!==h.x||o.p1.y!==h.y;)o=i.nextItem();var E={x:u.x,y:u.y,i:u.i,reflex:void 0},S={x:o.p1.x,y:o.p1.y,i:o.p1.i,reflex:void 0};return t.getNextItem().p0=E,this.insertItem_(u,o.p1,t,n),this.insertItem_(S,E,t,n),o.p1=S,t.setFirstItem(),i.concat(t),!0},e.prototype.triangulate_=function(t,e){for(var i=!1,r=this.isSimple_(t,e);t.getLength()>3;)if(r){if(!this.clipEars_(t,e,r,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e,!0))break}else if(!this.clipEars_(t,e,r,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e)){if(!(r=this.isSimple_(t,e))){this.splitPolygon_(t,e);break}i=!this.isClockwise_(t),this.classifyPoints_(t,e,i)}if(3===t.getLength()){var n=this.indices.length;this.indices[n++]=t.getPrevItem().p0.i,this.indices[n++]=t.getCurrItem().p0.i,this.indices[n++]=t.getNextItem().p0.i}},e.prototype.clipEars_=function(t,e,i,r){var n,o,s,a=this.indices.length,h=t.firstItem(),l=t.getPrevItem(),u=h,p=t.nextItem(),c=t.getNextItem(),d=!1;do{if(n=u.p0,o=u.p1,s=p.p1,!1===o.reflex){var f=void 0;f=i?0===this.getPointsInTriangle_(n,o,s,e,!0).length:r?this.diagonalIsInside_(c.p1,s,o,n,l.p0):this.diagonalIsInside_(l.p0,n,o,s,c.p1),(i||0===this.getIntersections_({p0:n,p1:s},e).length)&&f&&(i||!1===n.reflex||!1===s.reflex||Si([l.p0.x,l.p0.y,n.x,n.y,o.x,o.y,s.x,s.y,c.p1.x,c.p1.y],0,10,2)===!r)&&(this.indices[a++]=n.i,this.indices[a++]=o.i,this.indices[a++]=s.i,this.removeItem_(u,p,t,e),p===h&&(h=c),d=!0)}l=t.getPrevItem(),u=t.getCurrItem(),p=t.nextItem(),c=t.getNextItem()}while(u!==h&&t.getLength()>3);return d},e.prototype.resolveSelfIntersections_=function(t,e,i){var r=t.firstItem();t.nextItem();var n=r,o=t.nextItem(),s=!1;do{var a=this.calculateIntersection_(n.p0,n.p1,o.p0,o.p1,i);if(a){var h=!1,l=this.vertices.length,u=this.indices.length,p=l/2,c=t.prevItem();t.removeItem(),e.remove(c),h=c===r;var d=void 0;if(i?(a[0]===n.p0.x&&a[1]===n.p0.y?(t.prevItem(),d=n.p0,o.p0=d,e.remove(n),h=h||n===r):(d=o.p1,n.p1=d,e.remove(o),h=h||o===r),t.removeItem()):(d=this.createPoint_(a[0],a[1],p),n.p1=d,o.p0=d,e.update([Math.min(n.p0.x,n.p1.x),Math.min(n.p0.y,n.p1.y),Math.max(n.p0.x,n.p1.x),Math.max(n.p0.y,n.p1.y)],n),e.update([Math.min(o.p0.x,o.p1.x),Math.min(o.p0.y,o.p1.y),Math.max(o.p0.x,o.p1.x),Math.max(o.p0.y,o.p1.y)],o)),this.indices[u++]=c.p0.i,this.indices[u++]=c.p1.i,this.indices[u++]=d.i,s=!0,h)break}n=t.getPrevItem(),o=t.nextItem()}while(n!==r);return s},e.prototype.isSimple_=function(t,e){var i=t.firstItem(),r=i;do{if(this.getIntersections_(r,e).length)return!1;r=t.nextItem()}while(r!==i);return!0},e.prototype.isClockwise_=function(t){var e=2*t.getLength(),i=new Array(e),r=t.firstItem(),n=r,o=0;do{i[o++]=n.p0.x,i[o++]=n.p0.y,n=t.nextItem()}while(n!==r);return Si(i,0,e,2)},e.prototype.splitPolygon_=function(t,e){var i=t.firstItem(),r=i;do{var n=this.getIntersections_(r,e);if(n.length){var o=n[0],s=this.vertices.length/2,a=this.calculateIntersection_(r.p0,r.p1,o.p0,o.p1),h=this.createPoint_(a[0],a[1],s),l=new Qh,u=new tl;this.insertItem_(h,r.p1,l,u),r.p1=h,e.update([Math.min(r.p0.x,h.x),Math.min(r.p0.y,h.y),Math.max(r.p0.x,h.x),Math.max(r.p0.y,h.y)],r);for(var p=t.nextItem();p!==o;)this.insertItem_(p.p0,p.p1,l,u),e.remove(p),t.removeItem(),p=t.getCurrItem();this.insertItem_(o.p0,h,l,u),o.p0=h,e.update([Math.min(o.p1.x,h.x),Math.min(o.p1.y,h.y),Math.max(o.p1.x,h.x),Math.max(o.p1.y,h.y)],o),this.classifyPoints_(t,e,!1),this.triangulate_(t,e),this.classifyPoints_(l,u,!1),this.triangulate_(l,u);break}r=t.nextItem()}while(r!==i)},e.prototype.createPoint_=function(t,e,i){var r=this.vertices.length;return this.vertices[r++]=t,this.vertices[r++]=e,{x:t,y:e,i:i,reflex:void 0}},e.prototype.insertItem_=function(t,e,i,r){var n={p0:t,p1:e};return i.insertItem(n),r&&r.insert([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],n),n},e.prototype.removeItem_=function(t,e,i,r){i.getCurrItem()===e&&(i.removeItem(),t.p1=e.p1,r.remove(e),r.update([Math.min(t.p0.x,t.p1.x),Math.min(t.p0.y,t.p1.y),Math.max(t.p0.x,t.p1.x),Math.max(t.p0.y,t.p1.y)],t))},e.prototype.getPointsInTriangle_=function(t,e,i,r,n){for(var o=[],s=r.getInExtent([Math.min(t.x,e.x,i.x),Math.min(t.y,e.y,i.y),Math.max(t.x,e.x,i.x),Math.max(t.y,e.y,i.y)]),a=0,h=s.length;a<h;++a)for(var l in s[a]){var u=s[a][l];"object"!=typeof u||n&&!u.reflex||u.x===t.x&&u.y===t.y||u.x===e.x&&u.y===e.y||u.x===i.x&&u.y===i.y||-1!==o.indexOf(u)||!fi([t.x,t.y,e.x,e.y,i.x,i.y],0,6,2,u.x,u.y)||o.push(u)}return o},e.prototype.getIntersections_=function(t,e,i){for(var r=t.p0,n=t.p1,o=e.getInExtent([Math.min(r.x,n.x),Math.min(r.y,n.y),Math.max(r.x,n.x),Math.max(r.y,n.y)]),s=[],a=0,h=o.length;a<h;++a){var l=o[a];t!==l&&(i||l.p0!==n||l.p1!==r)&&this.calculateIntersection_(r,n,l.p0,l.p1,i)&&s.push(l)}return s},e.prototype.calculateIntersection_=function(t,e,i,r,n){var o=(r.y-i.y)*(e.x-t.x)-(r.x-i.x)*(e.y-t.y);if(0!==o){var s=((r.x-i.x)*(t.y-i.y)-(r.y-i.y)*(t.x-i.x))/o,a=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/o;if(!n&&s>mh&&s<1-mh&&a>mh&&a<1-mh||n&&s>=0&&s<=1&&a>=0&&a<=1)return[t.x+s*(e.x-t.x),t.y+s*(e.y-t.y)]}},e.prototype.diagonalIsInside_=function(t,e,i,r,n){if(void 0===e.reflex||void 0===r.reflex)return!1;var o=(i.x-r.x)*(e.y-r.y)>(i.y-r.y)*(e.x-r.x),s=(n.x-r.x)*(e.y-r.y)<(n.y-r.y)*(e.x-r.x),a=(t.x-e.x)*(r.y-e.y)>(t.y-e.y)*(r.x-e.x),h=(i.x-e.x)*(r.y-e.y)<(i.y-e.y)*(r.x-e.x),l=r.reflex?s||o:s&&o,u=e.reflex?h||a:h&&a;return l&&u},e.prototype.drawMultiPolygon=function(t,e){var i,r,n,o,s=t.getEndss(),a=t.getStride(),h=this.indices.length,l=this.lineStringReplay.getCurrentIndex(),u=t.getFlatCoordinates(),p=0;for(i=0,r=s.length;i<r;++i){var c=s[i];if(c.length>0){var d=Dt(u,p,c[0],a,-this.origin[0],-this.origin[1]);if(d.length){var f=[],_=void 0;for(n=1,o=c.length;n<o;++n)c[n]!==c[n-1]&&(_=Dt(u,c[n-1],c[n],a,-this.origin[0],-this.origin[1]),f.push(_));this.lineStringReplay.drawPolygonCoordinates(d,f,a),this.drawCoordinates_(d,f,a)}}p=c[c.length-1]}this.indices.length>h&&(this.startIndices.push(h),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(h),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>l&&this.lineStringReplay.setPolygonStyle(e,l)},e.prototype.drawPolygon=function(t,e){var i=t.getEnds(),r=t.getStride();if(i.length>0){var n=t.getFlatCoordinates().map(Number),o=Dt(n,0,i[0],r,-this.origin[0],-this.origin[1]);if(o.length){var s,a,h,l=[];for(s=1,a=i.length;s<a;++s)i[s]!==i[s-1]&&(h=Dt(n,i[s-1],i[s],r,-this.origin[0],-this.origin[1]),l.push(h));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(e),this.lineStringReplay.drawPolygonCoordinates(o,l,r),this.drawCoordinates_(o,l,r)}}},e.prototype.finish=function(t){this.verticesBuffer=new Th(this.vertices),this.indicesBuffer=new Th(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(t),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},e.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,r=this.lineStringReplay.getDeleteResourcesFunction(t);return function(){t.deleteBuffer(e),t.deleteBuffer(i),r()}},e.prototype.setUpProgram=function(t,e,i,r){var n,o=e.getProgram(Hh,Zh);return this.defaultLocations_?n=this.defaultLocations_:(n=new qh(t,o),this.defaultLocations_=n),e.useProgram(o),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,5126,!1,8,0),n},e.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position)},e.prototype.drawReplay=function(t,e,i,r){var n,o,s,a,h=t.getParameter(t.DEPTH_FUNC),l=t.getParameter(t.DEPTH_WRITEMASK);if(r||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),d(i))for(s=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)o=this.styleIndices_[n],a=this.styles_[n],this.setFillStyle_(t,a),this.drawElements(t,e,o,s),s=o;else this.drawReplaySkipping_(t,e,i);r||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(l),t.depthFunc(h))},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,n){var s,a,h,l,u,p,c;for(c=this.startIndices.length-2,h=this.startIndices[c+1],s=this.styleIndices_.length-1;s>=0;--s)for(l=this.styles_[s],this.setFillStyle_(t,l),u=this.styleIndices_[s];c>=0&&this.startIndices[c]>=u;){if(a=this.startIndices[c],void 0===i[o(p=this.startIndicesFeature[c])]&&p.getGeometry()&&(void 0===n||Pt(n,p.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,a,h);var d=r(p);if(d)return d}c--,h=a}},e.prototype.drawReplaySkipping_=function(t,e,i){var r,n,s,a,h,l,u;for(l=this.startIndices.length-2,s=n=this.startIndices[l+1],r=this.styleIndices_.length-1;r>=0;--r){for(a=this.styles_[r],this.setFillStyle_(t,a),h=this.styleIndices_[r];l>=0&&this.startIndices[l]>=h;)u=this.startIndices[l],i[o(this.startIndicesFeature[l])]&&(n!==s&&(this.drawElements(t,e,n,s),t.clear(t.DEPTH_BUFFER_BIT)),s=u),l--,n=u;n!==s&&(this.drawElements(t,e,n,s),t.clear(t.DEPTH_BUFFER_BIT)),n=s=h}},e.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_color,e)},e.prototype.setFillStrokeStyle=function(t,e){var i=t?t.getColor():[0,0,0,0];if(i=i instanceof CanvasGradient||i instanceof CanvasPattern?gh:_r(i).map(function(t,e){return 3!=e?t/255:t})||gh,this.state_.fillColor&&Z(i,this.state_.fillColor)||(this.state_.fillColor=i,this.state_.changed=!0,this.styles_.push(i)),e)this.lineStringReplay.setFillStrokeStyle(null,e);else{var r=new Er({color:[0,0,0,0],width:0});this.lineStringReplay.setFillStrokeStyle(null,r)}},e}(_h),il=function(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=Jn(t,t),this.canvas_=this.context_.canvas};il.prototype.get=function(t){return this.entries_[t]||null},il.prototype.add=function(t,e,i,r,n){for(var o=0,s=this.emptyBlocks_.length;o<s;++o){var a=this.emptyBlocks_[o];if(a.width>=e+this.space_&&a.height>=i+this.space_){var h={offsetX:a.x+this.space_,offsetY:a.y+this.space_,image:this.canvas_};return this.entries_[t]=h,r.call(n,this.context_,a.x+this.space_,a.y+this.space_),this.split_(o,a,e+this.space_,i+this.space_),h}}return null},il.prototype.split_=function(t,e,i,r){var n,o;e.width-i>e.height-r?(n={x:e.x+i,y:e.y,width:e.width-i,height:e.height},o={x:e.x,y:e.y+r,width:i,height:e.height-r},this.updateBlocks_(t,n,o)):(n={x:e.x+i,y:e.y,width:e.width-i,height:r},o={x:e.x,y:e.y+r,width:e.width,height:e.height-r},this.updateBlocks_(t,n,o))},il.prototype.updateBlocks_=function(t,e,i){var r=[t,1];e.width>0&&e.height>0&&r.push(e),i.width>0&&i.height>0&&r.push(i),this.emptyBlocks_.splice.apply(this.emptyBlocks_,r)};var rl=il,nl=function(t){var e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:256,this.maxSize_=void 0!==e.maxSize?e.maxSize:void 0!==nh?nh:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new rl(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new rl(this.currentHitSize_,this.space_)]};nl.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var i=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,i)},nl.prototype.getInfo_=function(t,e){for(var i=0,r=t.length;i<r;++i){var n=t[i].get(e);if(n)return n}return null},nl.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},nl.prototype.add=function(t,e,i,r,n,o){if(e+this.space_>this.maxSize_||i+this.space_>this.maxSize_)return null;var s=this.add_(!1,t,e,i,r,o);if(!s)return null;var a=void 0!==n?n:I,h=this.add_(!0,t,e,i,a,o);return this.mergeInfos_(s,h)},nl.prototype.add_=function(t,e,i,r,n,o){var s,a,h,l,u=t?this.hitAtlases_:this.atlases_;for(h=0,l=u.length;h<l;++h){if(a=(s=u[h]).add(e,i,r,n,o))return a;if(!a&&h===l-1){var p=void 0;t?(p=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=p):(p=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=p),s=new rl(p,this.space_),u.push(s),++l}}return null};var ol=nl,sl=function(t){function e(e,i){t.call(this,e,i),this.images_=[],this.textures_=[],this.measureCanvas_=Jn(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){if(this.text_){var i=null,r=2,n=2;switch(t.getType()){case Nt.POINT:case Nt.MULTI_POINT:r=(i=t.getFlatCoordinates()).length,n=t.getStride();break;case Nt.CIRCLE:i=t.getCenter();break;case Nt.LINE_STRING:i=t.getFlatMidpoint();break;case Nt.MULTI_LINE_STRING:r=(i=t.getFlatMidpoints()).length;break;case Nt.POLYGON:i=t.getFlatInteriorPoint();break;case Nt.MULTI_POLYGON:r=(i=t.getFlatInteriorPoints()).length}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var s,a,h,l,u,p,c,d,f=this.currAtlas_,_=this.text_.split("\n"),g=this.getTextSize_(_),y=Math.round(g[0]*this.textAlign_-this.offsetX_),v=Math.round(g[1]*this.textBaseline_-this.offsetY_),m=this.state_.lineWidth/2*this.state_.scale;for(s=0,a=_.length;s<a;++s)for(u=0,p=f.height*s,h=0,l=(c=_[s].split("")).length;h<l;++h){if(d=f.atlas.getInfo(c[h])){var x=d.image;if(this.anchorX=y-u,this.anchorY=v-p,this.originX=0===h?d.offsetX-m:d.offsetX,this.originY=d.offsetY,this.height=f.height,this.width=0===h||h===c.length-1?f.width[c[h]]+m:f.width[c[h]],this.imageHeight=x.height,this.imageWidth=x.width,0===this.images_.length)this.images_.push(x);else o(this.images_[this.images_.length-1])!=o(x)&&(this.groupIndices.push(this.indices.length),this.images_.push(x));this.drawText_(i,0,r,n)}u+=this.width}}},e.prototype.getTextSize_=function(t){var e=this,i=this.currAtlas_,r=t.length*i.height;return[t.map(function(t){for(var r=0,n=0,o=t.length;n<o;++n){var s=t[n];i.width[s]||e.addCharToAtlas_(s),r+=i.width[s]?i.width[s]:0}return r}).reduce(function(t,e){return Math.max(t,e)}),r]},e.prototype.drawText_=function(t,e,i,r){for(var n=e,o=i;n<o;n+=r)this.drawCoordinates(t,e,i,r)},e.prototype.addCharToAtlas_=function(t){if(1===t.length){var e=this.currAtlas_,i=this.state_,r=this.measureCanvas_.getContext("2d");r.font=i.font;var n=Math.ceil(r.measureText(t).width*i.scale);e.atlas.add(t,n,e.height,function(e,r,n){e.font=i.font,e.fillStyle=i.fillColor,e.strokeStyle=i.strokeColor,e.lineWidth=i.lineWidth,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.miterLimit=i.miterLimit,e.textAlign="left",e.textBaseline="top",ki&&i.lineDash&&(e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset),1!==i.scale&&e.setTransform(i.scale,0,0,i.scale,0,0),i.strokeColor&&e.strokeText(t,r,n),i.fillColor&&e.fillText(t,r,n)})&&(e.width[t]=n)}},e.prototype.finish=function(e){var i=e.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new Th(this.vertices),this.indicesBuffer=new Th(this.indices);this.createTextures(this.textures_,this.images_,{},i),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,t.prototype.finish.call(this,e)},e.prototype.setTextStyle=function(t){var e=this.state_,i=t.getFill(),r=t.getStroke();if(t&&t.getText()&&(i||r)){if(i){var n=i.getColor();e.fillColor=Ys(n||gh)}else e.fillColor=null;if(r){var o=r.getColor();e.strokeColor=Ys(o||vh),e.lineWidth=r.getWidth()||1,e.lineCap=r.getLineCap()||"round",e.lineDashOffset=r.getLineDashOffset()||0,e.lineJoin=r.getLineJoin()||"round",e.miterLimit=r.getMiterLimit()||10;var s=r.getLineDash();e.lineDash=s?s.slice():yh}else e.strokeColor=null,e.lineWidth=0;e.font=t.getFont()||"10px sans-serif",e.scale=t.getScale()||1,this.text_=t.getText();var a=Sa[t.getTextAlign()],h=Sa[t.getTextBaseline()];this.textAlign_=void 0===a?.5:a,this.textBaseline_=void 0===h?.5:h,this.offsetX_=t.getOffsetX()||0,this.offsetY_=t.getOffsetY()||0,this.rotateWithView=!!t.getRotateWithView(),this.rotation=t.getRotation()||0,this.currAtlas_=this.getAtlas_(e)}else this.text_=""},e.prototype.getAtlas_=function(t){var e=[];for(var i in t)(t[i]||0===t[i])&&(Array.isArray(t[i])?e=e.concat(t[i]):e.push(t[i]));var r=this.calculateHash_(e);if(!this.atlases_[r]){var n=this.measureCanvas_.getContext("2d");n.font=t.font;var o=Math.ceil((1.5*n.measureText("M").width+t.lineWidth/2)*t.scale);this.atlases_[r]={atlas:new ol({space:t.lineWidth+1}),width:{},height:o}}return this.atlases_[r]},e.prototype.calculateHash_=function(t){for(var e="",i=0,r=t.length;i<r;++i)e+=t[i];return e},e.prototype.getTextures=function(t){return this.textures_},e.prototype.getHitDetectionTextures=function(){return this.textures_},e}(Fh),al=[1,1],hl={Circle:Ch,Image:Ah,LineString:Kh,Polygon:el,Text:sl},ll=function(t){function e(e,i,r){t.call(this),this.maxExtent_=i,this.tolerance_=e,this.renderBuffer_=r,this.replaysByZIndex_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){return[]},e.prototype.getDeleteResourcesFunction=function(t){var e,i=[];for(e in this.replaysByZIndex_){var r=this.replaysByZIndex_[e];for(var n in r)i.push(r[n].getDeleteResourcesFunction(t))}return function(){for(var t,e=arguments,r=i.length,n=0;n<r;n++)t=i[n].apply(this,e);return t}},e.prototype.finish=function(t){var e;for(e in this.replaysByZIndex_){var i=this.replaysByZIndex_[e];for(var r in i)i[r].finish(t)}},e.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",r=this.replaysByZIndex_[i];void 0===r&&(r={},this.replaysByZIndex_[i]=r);var n=r[e];void 0===n&&(n=new(0,hl[e])(this.tolerance_,this.maxExtent_),r[e]=n);return n},e.prototype.isEmpty=function(){return d(this.replaysByZIndex_)},e.prototype.replay=function(t,e,i,r,n,o,s,a){var h,l,u,p,c,d,f=Object.keys(this.replaysByZIndex_).map(Number);for(f.sort(V),h=0,l=f.length;h<l;++h)for(c=this.replaysByZIndex_[f[h].toString()],u=0,p=Ea.length;u<p;++u)d=c[Ea[u]],void 0!==d&&d.replay(t,e,i,r,n,o,s,a,void 0,!1)},e.prototype.replayHitDetection_=function(t,e,i,r,n,o,s,a,h,l,u){var p,c,d,f,_,g,y=Object.keys(this.replaysByZIndex_).map(Number);for(y.sort(function(t,e){return e-t}),p=0,c=y.length;p<c;++p)for(f=this.replaysByZIndex_[y[p].toString()],d=Ea.length-1;d>=0;--d)if(void 0!==(_=f[Ea[d]])&&(g=_.replay(t,e,i,r,n,o,s,a,h,l,u)))return g},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,o,s,a,h,l){var u,p=e.getGL();return p.bindFramebuffer(p.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.renderBuffer_&&(u=et(pt(t),r*this.renderBuffer_)),this.replayHitDetection_(e,t,r,n,al,s,a,h,function(t){var e=new Uint8Array(4);if(p.readPixels(0,0,1,1,p.RGBA,p.UNSIGNED_BYTE,e),e[3]>0){var i=l(t);if(i)return i}},!0,u)},e.prototype.hasFeatureAtCoordinate=function(t,e,i,r,n,o,s,a,h){var l=e.getGL();return l.bindFramebuffer(l.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.replayHitDetection_(e,t,r,n,al,s,a,h,function(t){var e=new Uint8Array(4);return l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,e),e[3]>0},!1)},e}(ca),ul=function(t){function e(e,i,r,n,o,s,a){t.call(this),this.context_=e,this.center_=i,this.extent_=s,this.pixelRatio_=a,this.size_=o,this.rotation_=n,this.resolution_=r,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText_=function(t,e){var i=this.context_,r=t.getReplay(0,da.TEXT);r.setTextStyle(this.textStyle_),r.drawText(e,null),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)()},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case Nt.POINT:this.drawPoint(t,null);break;case Nt.LINE_STRING:this.drawLineString(t,null);break;case Nt.POLYGON:this.drawPolygon(t,null);break;case Nt.MULTI_POINT:this.drawMultiPoint(t,null);break;case Nt.MULTI_LINE_STRING:this.drawMultiLineString(t,null);break;case Nt.MULTI_POLYGON:this.drawMultiPolygon(t,null);break;case Nt.GEOMETRY_COLLECTION:this.drawGeometryCollection(t,null);break;case Nt.CIRCLE:this.drawCircle(t,null)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&Pt(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t,e){var i,r,n=t.getGeometriesArray();for(i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])},e.prototype.drawPoint=function(t,e){var i=this.context_,r=new ll(1,this.extent_),n=r.getReplay(0,da.IMAGE);n.setImageStyle(this.imageStyle_),n.drawPoint(t,e),n.finish(i);n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawMultiPoint=function(t,e){var i=this.context_,r=new ll(1,this.extent_),n=r.getReplay(0,da.IMAGE);n.setImageStyle(this.imageStyle_),n.drawMultiPoint(t,e),n.finish(i);n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawLineString=function(t,e){var i=this.context_,r=new ll(1,this.extent_),n=r.getReplay(0,da.LINE_STRING);n.setFillStrokeStyle(null,this.strokeStyle_),n.drawLineString(t,e),n.finish(i);n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawMultiLineString=function(t,e){var i=this.context_,r=new ll(1,this.extent_),n=r.getReplay(0,da.LINE_STRING);n.setFillStrokeStyle(null,this.strokeStyle_),n.drawMultiLineString(t,e),n.finish(i);n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawPolygon=function(t,e){var i=this.context_,r=new ll(1,this.extent_),n=r.getReplay(0,da.POLYGON);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawPolygon(t,e),n.finish(i);n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawMultiPolygon=function(t,e){var i=this.context_,r=new ll(1,this.extent_),n=r.getReplay(0,da.POLYGON);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawMultiPolygon(t,e),n.finish(i);n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawCircle=function(t,e){var i=this.context_,r=new ll(1,this.extent_),n=r.getReplay(0,da.CIRCLE);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawCircle(t,e),n.finish(i);n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.setImageStyle=function(t){this.imageStyle_=t},e.prototype.setFillStrokeStyle=function(t,e){this.fillStyle_=t,this.strokeStyle_=e},e.prototype.setTextStyle=function(t){this.textStyle_=t},e}(Vs),pl=new lh("precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n"),cl=new uh("varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n"),dl=function(t,e){this.u_texCoordMatrix=t.getUniformLocation(e,"u_texCoordMatrix"),this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_texture=t.getUniformLocation(e,"u_texture"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_texCoord=t.getAttribLocation(e,"a_texCoord")},fl=function(t){function e(e,i){t.call(this,i),this.mapRenderer=e,this.arrayBuffer_=new Th([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=[1,0,0,1,0,0],this.projectionMatrix=[1,0,0,1,0,0],this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.defaultLocations_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bindFramebuffer=function(t,e){var i=this.mapRenderer.getGL();if(void 0===this.framebufferDimension||this.framebufferDimension!=e){var r=function(t,e,i){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(i))}.bind(null,i,this.framebuffer,this.texture);t.postRenderFunctions.push(r);var n=Ph(i,e,e),o=i.createFramebuffer();i.bindFramebuffer(36160,o),i.framebufferTexture2D(36160,36064,eh,n,0),this.texture=n,this.framebuffer=o,this.framebufferDimension=e}else i.bindFramebuffer(36160,this.framebuffer)},e.prototype.composeFrame=function(t,e,i){this.dispatchComposeEvent_(ur.PRECOMPOSE,i,t),i.bindBuffer(34962,this.arrayBuffer_);var r,n=i.getGL(),o=i.getProgram(pl,cl);this.defaultLocations_?r=this.defaultLocations_:(r=new dl(n,o),this.defaultLocations_=r),i.useProgram(o)&&(n.enableVertexAttribArray(r.a_position),n.vertexAttribPointer(r.a_position,2,5126,!1,16,0),n.enableVertexAttribArray(r.a_texCoord),n.vertexAttribPointer(r.a_texCoord,2,5126,!1,16,8),n.uniform1i(r.u_texture,0)),n.uniformMatrix4fv(r.u_texCoordMatrix,!1,fh(this.tmpMat4_,this.getTexCoordMatrix())),n.uniformMatrix4fv(r.u_projectionMatrix,!1,fh(this.tmpMat4_,this.getProjectionMatrix())),n.uniform1f(r.u_opacity,e.opacity),n.bindTexture(eh,this.getTexture()),n.drawArrays(5,0,4),this.dispatchComposeEvent_(ur.POSTCOMPOSE,i,t)},e.prototype.dispatchComposeEvent_=function(t,e,i){var r=this.getLayer();if(r.hasListener(t)){var n=i.viewState,o=n.resolution,s=i.pixelRatio,a=i.extent,h=n.center,l=n.rotation,u=i.size,p=new ul(e,h,o,l,u,a,s),c=new Cs(t,p,i,null,e);r.dispatchEvent(c)}},e.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},e.prototype.getTexture=function(){return this.texture},e.prototype.getProjectionMatrix=function(){return this.projectionMatrix},e.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},e.prototype.prepareFrame=function(t,e,i){return r()},e.prototype.forEachLayerAtPixel=function(t,e,i,n){return r()},e}($s),_l=function(t){function e(e,i){t.call(this,e,i),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createTexture_=function(t){var e=t.getImage();return bh(this.mapRenderer.getGL(),e,33071,33071)},e.prototype.prepareFrame=function(t,e,i){var r=this.mapRenderer.getGL(),n=t.pixelRatio,o=t.viewState,s=o.center,a=o.resolution,h=o.rotation,l=this.image_,u=this.texture,p=this.getLayer().getSource(),c=t.viewHints,d=t.extent;if(void 0!==e.extent&&(d=wt(d,e.extent)),!c[kn]&&!c[jn]&&!bt(d)){var f=o.projection,_=p.getImage(d,a,n,f);if(_)if(this.loadImage(_)&&(l=_,u=this.createTexture_(_),this.texture)){var g=function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,r,this.texture);t.postRenderFunctions.push(g)}}if(l){var y=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(y.width,y.height,n,s,a,h,l.getExtent()),this.hitTransformationMatrix_=null;var v=this.texCoordMatrix;Fe(v),je(v,1,-1),Ue(v,0,-1),this.image_=l,this.texture=u}return!!l},e.prototype.updateProjectionMatrix_=function(t,e,i,r,n,o,s){var a=t*n,h=e*n,l=this.projectionMatrix;Fe(l),je(l,2*i/a,2*i/h),ke(l,-o),Ue(l,s[0]-r[0],s[1]-r[1]),je(l,(s[2]-s[0])/2,(s[3]-s[1])/2),Ue(l,1,1)},e.prototype.forEachLayerAtPixel=function(t,e,i,r){if(this.image_&&this.image_.getImage()){var n=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(e.size,n));var o=De(this.hitTransformationMatrix_,t.slice());if(!(o[0]<0||o[0]>n[0]||o[1]<0||o[1]>n[1])){this.hitCanvasContext_||(this.hitCanvasContext_=Jn(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),o[0],o[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?i.call(r,this.getLayer(),s):void 0}}},e.prototype.getHitTransformationMatrix_=function(t,e){var i=[1,0,0,1,0,0];Ue(i,-1,-1),je(i,2/t[0],2/t[1]),Ue(i,0,t[1]),je(i,1,-1);var r=Be(this.projectionMatrix.slice()),n=[1,0,0,1,0,0];return Ue(n,0,e[1]),je(n,1,-1),je(n,e[0]/2,e[1]/2),Ue(n,1,1),Ae(n,r),Ae(n,i),n},e}(fl);_l.handles=function(t){return t.getType()===Ss.IMAGE},_l.create=function(t,e){return new _l(t,e)};var gl=_l,yl=function(t){function e(e){t.call(this,e);var i=e.getViewport();this.canvas_=document.createElement("canvas"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=fo,i.insertBefore(this.canvas_,i.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=Jn(),this.renderedVisible_=!0,this.gl_=rh(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new Mh(this.canvas_,this.gl_),v(this.canvas_,Lh.LOST,this.handleWebGLContextLost,this),v(this.canvas_,Lh.RESTORED,this.handleWebGLContextRestored,this),this.textureCache_=new Rs,this.focus_=null,this.tileTextureQueue_=new bn(function(t){var e=t[1],i=t[2],r=e[0]-this.focus_[0],n=e[1]-this.focus_[1];return 65536*Math.log(i)+Math.sqrt(r*r+n*n)/i}.bind(this),function(t){return t[0].getKey()}),this.loadNextTileTexture_=function(t,e){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var i=this.tileTextureQueue_.dequeue(),r=i[0],n=i[3],o=i[4];this.bindTileTexture(r,n,o,Qa,Qa)}return!1}.bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bindTileTexture=function(t,e,i,r,n){var o=this.getGL(),s=t.getKey();if(this.textureCache_.containsKey(s)){var a=this.textureCache_.get(s);o.bindTexture(eh,a.texture),a.magFilter!=r&&(o.texParameteri(eh,10240,r),a.magFilter=r),a.minFilter!=n&&(o.texParameteri(eh,10241,n),a.minFilter=n)}else{var h=o.createTexture(),l=t;if(o.bindTexture(eh,h),i>0){var u=this.clipTileContext_.canvas,p=this.clipTileContext_;this.clipTileCanvasWidth_!==e[0]||this.clipTileCanvasHeight_!==e[1]?(u.width=e[0],u.height=e[1],this.clipTileCanvasWidth_=e[0],this.clipTileCanvasHeight_=e[1]):p.clearRect(0,0,e[0],e[1]),p.drawImage(l.getImage(),i,i,e[0],e[1],0,0,e[0],e[1]),o.texImage2D(eh,0,6408,6408,5121,u)}else o.texImage2D(eh,0,6408,6408,5121,l.getImage());o.texParameteri(eh,10240,r),o.texParameteri(eh,10241,n),o.texParameteri(eh,$a,33071),o.texParameteri(eh,th,33071),this.textureCache_.set(s,{texture:h,magFilter:r,minFilter:n})}},e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap();if(i.hasListener(t)){var r=this.context_,n=e.extent,o=e.size,s=e.viewState,a=e.pixelRatio,h=s.resolution,l=s.center,u=s.rotation,p=new ul(r,l,h,u,o,n,a),c=new Cs(t,p,e,null,r);i.dispatchEvent(c)}},e.prototype.disposeInternal=function(){var e=this.getGL();e.isContextLost()||this.textureCache_.forEach(function(t){t&&e.deleteTexture(t.texture)}),this.context_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.expireCache_=function(t,e){for(var i,r=this.getGL();this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>1024;){if(i=this.textureCache_.peekLast())r.deleteTexture(i.texture);else{if(+this.textureCache_.peekLastKey()==e.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},e.prototype.getContext=function(){return this.context_},e.prototype.getGL=function(){return this.gl_},e.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},e.prototype.handleWebGLContextLost=function(t){t.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;var e=this.getLayerRenderers();for(var i in e){e[i].handleWebGLContextLost()}},e.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},e.prototype.initializeGL_=function(){var t=this.gl_;t.activeTexture(33984),t.blendFuncSeparate(770,771,1,771),t.disable(2884),t.disable(2929),t.disable(3089),t.disable(2960)},e.prototype.isTileTextureLoaded=function(t){return this.textureCache_.containsKey(t.getKey())},e.prototype.renderFrame=function(t){var e=this.getContext(),i=this.getGL();if(i.isContextLost())return!1;if(!t)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=t.focus,this.textureCache_.set((-t.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchRenderEvent(ur.PRECOMPOSE,t);var r=[],n=t.layerStatesArray;q(n,Zs);var o,s,a=t.viewState.resolution;for(o=0,s=n.length;o<s;++o){var h=n[o];if(mo(h,a)&&h.sourceState==ro.READY)this.getLayerRenderer(h.layer).prepareFrame(t,h,e)&&r.push(h)}var l=t.size[0]*t.pixelRatio,u=t.size[1]*t.pixelRatio;for(this.canvas_.width==l&&this.canvas_.height==u||(this.canvas_.width=l,this.canvas_.height=u),i.bindFramebuffer(36160,null),i.clearColor(0,0,0,0),i.clear(16384),i.enable(3042),i.viewport(0,0,this.canvas_.width,this.canvas_.height),o=0,s=r.length;o<s;++o){var p=r[o];this.getLayerRenderer(p.layer).composeFrame(t,p,e)}this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(t),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>1024&&t.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(t.postRenderFunctions.push(this.loadNextTileTexture_),t.animate=!0),this.dispatchRenderEvent(ur.POSTCOMPOSE,t),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,o,s){var a;if(this.getGL().isContextLost())return!1;var h,l=e.viewState,u=e.layerStatesArray;for(h=u.length-1;h>=0;--h){var p=u[h],c=p.layer;if(mo(p,l.resolution)&&o.call(s,c))if(a=this.getLayerRenderer(c).forEachFeatureAtCoordinate(t,e,i,r))return a}},e.prototype.hasFeatureAtCoordinate=function(t,e,i,r,n){var o=!1;if(this.getGL().isContextLost())return!1;var s,a=e.viewState,h=e.layerStatesArray;for(s=h.length-1;s>=0;--s){var l=h[s],u=l.layer;if(mo(l,a.resolution)&&r.call(n,u))if(o=this.getLayerRenderer(u).hasFeatureAtCoordinate(t,e))return!0}return o},e.prototype.forEachLayerAtPixel=function(t,e,i,r,n,o,s){if(this.getGL().isContextLost())return!1;var a,h,l=e.viewState,u=e.layerStatesArray;for(h=u.length-1;h>=0;--h){var p=u[h],c=p.layer;if(mo(p,l.resolution)&&o.call(n,c))if(a=this.getLayerRenderer(c).forEachLayerAtPixel(t,e,r,n))return a}},e}(qs),vl=function(t){function e(e,i,r){t.call(this);var n=r||{};this.tileCoord=e,this.state=i,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(M.CHANGE)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==On.LOADED)return t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==On.LOADED){t.interimTile=null;break}t.getState()==On.LOADING?e=t:t.getState()==On.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var r=e-i+1e3/60;return r>=this.transition_?1:Vn(r/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(b);function ml(){var t=Jn(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var xl=function(t){function e(e,i,r,n,o,s){t.call(this,e,i,s),this.crossOrigin_=n,this.src_=r,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.imageListenerKeys_=null,this.tileLoadFunction_=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==On.LOADING&&(this.unlistenImage_(),this.image_=ml()),this.interimTile&&this.interimTile.dispose(),this.state=On.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=On.ERROR,this.unlistenImage_(),this.image_=ml(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=On.LOADED:this.state=On.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==On.ERROR&&(this.state=On.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==On.IDLE&&(this.state=On.LOADING,this.changed(),this.imageListenerKeys_=[m(this.image_,M.ERROR,this.handleImageError_,this),m(this.image_,M.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(E),this.imageListenerKeys_=null},e}(vl);function El(t,e,i,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=i,r):[t,e,i]}function Sl(t,e,i){return t+"/"+e+"/"+i}function Tl(t){return Sl(t[0],t[1],t[2])}function Cl(t){return(t[1]<<t[0])+t[2]}var Rl=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),i=e.tileCoord[0].toString();if(i in t&&t[i].contains(e.tileCoord))break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Tl(e.tileCoord)),e.dispose())},this)}},e}(Rs);function wl(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var Il=function(t){function e(e){t.call(this),this.projection_=Ee(e.projection),this.attributions_=wl(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:ro.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return r()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=wl(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(D),Ll=[0,0,0],Ol=function(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Y(function(t,e,i){var r=e||V;return t.every(function(e,n){if(0===n)return!0;var o=r(t[n-1],e);return!(o>0||i&&0===o)})}(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(var i=0,r=this.resolutions_.length-1;i<r;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Y(this.origins_.length==this.resolutions_.length,20));var n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=It(n)),Y(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Y(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:An,Y(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new sa(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):n&&this.calculateTileRanges_(n)};Ol.prototype.forEachTileCoord=function(t,e,i){for(var r=this.getTileRangeForExtentAndZ(t,e),n=r.minX,o=r.maxX;n<=o;++n)for(var s=r.minY,a=r.maxY;s<=a;++s)i([e,n,s])},Ol.prototype.forEachTileCoordParentTileRange=function(t,e,i,r,n){var o,s,a,h=null,l=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):h=this.getTileCoordExtent(t,n);l>=this.minZoom;){if(o=2===this.zoomFactor_?oa(s=Math.floor(s/2),s,a=Math.floor(a/2),a,r):this.getTileRangeForExtentAndZ(h,l,r),e.call(i,l,o))return!0;--l}return!1},Ol.prototype.getExtent=function(){return this.extent_},Ol.prototype.getMaxZoom=function(){return this.maxZoom},Ol.prototype.getMinZoom=function(){return this.minZoom},Ol.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},Ol.prototype.getResolution=function(t){return this.resolutions_[t]},Ol.prototype.getResolutions=function(){return this.resolutions_},Ol.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],n=2*t[2];return oa(r,r+1,n,n+1,e)}var o=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},Ol.prototype.getTileRangeExtent=function(t,e,i){var r=this.getOrigin(t),n=this.getResolution(t),o=ho(this.getTileSize(t),this.tmpSize_),s=r[0]+e.minX*o[0]*n,a=r[0]+(e.maxX+1)*o[0]*n;return lt(s,r[1]+e.minY*o[1]*n,a,r[1]+(e.maxY+1)*o[1]*n,i)},Ol.prototype.getTileRangeForExtentAndZ=function(t,e,i){var r=Ll;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r);var n=r[1],o=r[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,r),oa(n,r[1],o,r[2],i)},Ol.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=ho(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]+(t[2]+.5)*r[1]*i]},Ol.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=ho(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*n[0]*r,s=i[1]+t[2]*n[1]*r;return lt(o,s,o+n[0]*r,s+n[1]*r,e)},Ol.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},Ol.prototype.getTileCoordForXYAndResolution_=function(t,e,i,r,n){var o=this.getZForResolution(i),s=i/this.getResolution(o),a=this.getOrigin(o),h=ho(this.getTileSize(o),this.tmpSize_),l=r?.5:0,u=r?0:.5,p=Math.floor((t-a[0])/i+l),c=Math.floor((e-a[1])/i+u),d=s*p/h[0],f=s*c/h[1];return r?(d=Math.ceil(d)-1,f=Math.ceil(f)-1):(d=Math.floor(d),f=Math.floor(f)),El(o,d,f,n)},Ol.prototype.getTileCoordForXYAndZ_=function(t,e,i,r,n){var o=this.getOrigin(i),s=this.getResolution(i),a=ho(this.getTileSize(i),this.tmpSize_),h=r?.5:0,l=r?0:.5,u=Math.floor((t-o[0])/s+h),p=Math.floor((e-o[1])/s+l),c=u/a[0],d=p/a[1];return r?(c=Math.ceil(c)-1,d=Math.ceil(d)-1):(c=Math.floor(c),d=Math.floor(d)),El(i,c,d,n)},Ol.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},Ol.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},Ol.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},Ol.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},Ol.prototype.getZForResolution=function(t,e){return kt(z(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},Ol.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i};var Pl=Ol;function bl(t){var e=t.getDefaultTileGrid();return e||(e=Nl(t),t.setDefaultTileGrid(e)),e}function Ml(t,e,i,r){var n=void 0!==r?r:Q.TOP_LEFT,o=Al(t,e,i);return new Pl({extent:t,origin:function(t,e){var i;return e===Q.BOTTOM_LEFT?i=Et(t):e===Q.BOTTOM_RIGHT?i=St(t):e===Q.TOP_LEFT?i=It(t):e===Q.TOP_RIGHT?i=Lt(t):Y(!1,13),i}(t,n),resolutions:o,tileSize:i})}function Fl(t){var e=t||{},i=e.extent||Ee("EPSG:3857").getExtent(),r={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Al(i,e.maxZoom,e.tileSize)};return new Pl(r)}function Al(t,e,i){for(var r=void 0!==e?e:Fn,n=Rt(t),o=Ot(t),s=ho(void 0!==i?i:An),a=Math.max(o/s[0],n/s[1]),h=r+1,l=new Array(h),u=0;u<h;++u)l[u]=a/Math.pow(2,u);return l}function Nl(t,e,i,r){return Ml(Gl(t),e,i,r)}function Gl(t){var e=(t=Ee(t)).getExtent();if(!e){var i=180*Qt[$t.DEGREES]/t.getMetersPerUnit();e=lt(-i,-i,i,i)}return e}var Dl=function(t){function e(e){t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new Rl(e.cacheSize),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,r){var n=this.getTileCacheForProjection(t);if(!n)return!1;for(var o,s,a,h=!0,l=i.minX;l<=i.maxX;++l)for(var u=i.minY;u<=i.maxY;++u)s=Sl(e,l,u),a=!1,n.containsKey(s)&&(a=(o=n.get(s)).getState()===On.LOADED)&&(a=!1!==r(o)),a||(h=!1);return h},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,n,o){return r()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:bl(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Ie(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var r=this.getTileGridForProjection(i),n=this.getTilePixelRatio(e),o=ho(r.getTileSize(t),this.tmpSize);return 1==n?o:ao(o,n,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(t,e,i){var r=e[0],n=t.getTileCoordCenter(e),o=Gl(i);if(nt(o,n))return e;var s=Ot(o),a=Math.ceil((o[0]-n[0])/s);return n[0]+=s*a,t.getTileCoordForCoordAndZ(n,r)}(r,t,i)),function(t,e){var i=t[0],r=t[1],n=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var o,s=e.getExtent();return!(o=s?e.getTileRangeForExtentAndZ(s,i):e.getFullTileRange(i))||o.containsXY(r,n)}(t,r)?t:null},e.prototype.refresh=function(){this.tileCache.clear(),this.changed()},e.prototype.useTile=function(t,e,i,r){},e}(Il),kl=function(t){function e(e,i){t.call(this,e),this.tile=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P),jl=Dl,Ul=new lh("precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n"),Yl=new uh("varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n"),Bl=function(t,e){this.u_tileOffset=t.getUniformLocation(e,"u_tileOffset"),this.u_texture=t.getUniformLocation(e,"u_texture"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_texCoord=t.getAttribLocation(e,"a_texCoord")},Vl=function(t){function e(e,i){t.call(this,e,i),this.fragmentShader_=Ul,this.vertexShader_=Yl,this.locations_=null,this.renderArrayBuffer_=new Th([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_),t.prototype.disposeInternal.call(this)},e.prototype.createLoadedTileFinder=function(t,e,i){var r=this.mapRenderer;return function(n,o){return t.forEachLoadedTile(e,n,o,function(t){var e=r.isTileTextureLoaded(t);return e&&(i[n]||(i[n]={}),i[n][t.tileCoord.toString()]=t),e})}},e.prototype.handleWebGLContextLost=function(){t.prototype.handleWebGLContextLost.call(this),this.locations_=null},e.prototype.prepareFrame=function(t,e,i){var r=this.mapRenderer,n=i.getGL(),o=t.viewState,s=o.projection,a=this.getLayer(),h=a.getSource();if(!(h instanceof jl))return!0;var l,u=h.getTileGridForProjection(s),p=u.getZForResolution(o.resolution),c=u.getResolution(p),d=h.getTilePixelSize(p,t.pixelRatio,s),f=d[0]/ho(u.getTileSize(p),this.tmpSize_)[0],_=c/f,g=h.getTilePixelRatio(f)*h.getGutterForProjection(s),y=o.center,v=t.extent,m=u.getTileRangeForExtentAndZ(v,p);if(this.renderedTileRange_&&this.renderedTileRange_.equals(m)&&this.renderedRevision_==h.getRevision())l=this.renderedFramebufferExtent_;else{var x=m.getSize(),E=function(t){return Y(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}(Math.max(x[0]*d[0],x[1]*d[1])),S=_*E,T=u.getOrigin(p),C=T[0]+m.minX*d[0]*_,R=T[1]+m.minY*d[1]*_;l=[C,R,C+S,R+S],this.bindFramebuffer(t,E),n.viewport(0,0,E,E),n.clearColor(0,0,0,0),n.clear(16384),n.disable(3042);var w=i.getProgram(this.fragmentShader_,this.vertexShader_);i.useProgram(w),this.locations_||(this.locations_=new Bl(n,w)),i.bindBuffer(34962,this.renderArrayBuffer_),n.enableVertexAttribArray(this.locations_.a_position),n.vertexAttribPointer(this.locations_.a_position,2,5126,!1,16,0),n.enableVertexAttribArray(this.locations_.a_texCoord),n.vertexAttribPointer(this.locations_.a_texCoord,2,5126,!1,16,8),n.uniform1i(this.locations_.u_texture,0);var I={};I[p]={};var L,O,P,b,M,F,A=this.createLoadedTileFinder(h,s,I),N=a.getUseInterimTilesOnError(),G=!0,D=[1/0,1/0,-1/0,-1/0],k=new sa(0,0,0,0);for(b=m.minX;b<=m.maxX;++b)for(M=m.minY;M<=m.maxY;++M)if(O=h.getTile(p,b,M,f,s),void 0===e.extent||Pt(F=u.getTileCoordExtent(O.tileCoord,D),e.extent)){if((P=O.getState())==On.LOADED||P==On.EMPTY||P==On.ERROR&&!N||(O=O.getInterimTile()),(P=O.getState())==On.LOADED){if(r.isTileTextureLoaded(O)){I[p][O.tileCoord.toString()]=O;continue}}else if(P==On.EMPTY||P==On.ERROR&&!N)continue;G=!1,u.forEachTileCoordParentTileRange(O.tileCoord,A,null,k,D)||(L=u.getTileCoordChildTileRange(O.tileCoord,k,D))&&A(p+1,L)}var j=Object.keys(I).map(Number);j.sort(V);for(var U=new Float32Array(4),B=0,X=j.length;B<X;++B){var z=I[j[B]];for(var W in z)(O=z[W])instanceof xl&&(F=u.getTileCoordExtent(O.tileCoord,D),U[0]=2*(F[2]-F[0])/S,U[1]=2*(F[3]-F[1])/S,U[2]=2*(F[0]-l[0])/S-1,U[3]=2*(F[1]-l[1])/S-1,n.uniform4fv(this.locations_.u_tileOffset,U),r.bindTileTexture(O,d,g*f,Qa,Qa),n.drawArrays(5,0,4))}G?(this.renderedTileRange_=m,this.renderedFramebufferExtent_=l,this.renderedRevision_=h.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,t.animate=!0)}this.updateUsedTiles(t.usedTiles,h,p,m);var K=r.getTileTextureQueue();this.manageTilePyramid(t,h,u,f,s,v,p,a.getPreload(),function(t){t.getState()!=On.LOADED||r.isTileTextureLoaded(t)||K.isKeyQueued(t.getKey())||K.enqueue([t,u.getTileCoordCenter(t.tileCoord),u.getResolution(t.tileCoord[0]),d,g*f])},this),this.scheduleExpireCache(t,h);var H=this.texCoordMatrix;return Fe(H),Ue(H,(Math.round(y[0]/c)*c-l[0])/(l[2]-l[0]),(Math.round(y[1]/c)*c-l[1])/(l[3]-l[1])),0!==o.rotation&&ke(H,o.rotation),je(H,t.size[0]*o.resolution/(l[2]-l[0]),t.size[1]*o.resolution/(l[3]-l[1])),Ue(H,-.5,-.5),!0},e.prototype.forEachLayerAtPixel=function(t,e,i,r){if(this.framebuffer){var n=[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]],o=De(this.texCoordMatrix,n.slice()),s=[o[0]*this.framebufferDimension,o[1]*this.framebufferDimension],a=this.mapRenderer.getContext().getGL();a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer);var h=new Uint8Array(4);return a.readPixels(s[0],s[1],1,1,a.RGBA,a.UNSIGNED_BYTE,h),h[3]>0?i.call(r,this.getLayer(),h):void 0}},e}(fl);Vl.handles=function(t){return t.getType()===Ss.TILE},Vl.create=function(t,e){return new Vl(t,e)};var Xl=Vl,zl=function(t){function e(e,i){t.call(this,e,i),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,i){this.layerState_=e;var r=t.viewState,n=this.replayGroup_,o=t.size,s=t.pixelRatio,a=this.mapRenderer.getGL();n&&!n.isEmpty()&&(a.enable(a.SCISSOR_TEST),a.scissor(0,0,o[0]*s,o[1]*s),n.replay(i,r.center,r.resolution,r.rotation,o,s,e.opacity,e.managed?t.skippedFeatureUids:{}),a.disable(a.SCISSOR_TEST))},e.prototype.disposeInternal=function(){var e=this.replayGroup_;if(e){var i=this.mapRenderer.getContext();e.getDeleteResourcesFunction(i)(),this.replayGroup_=null}t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){if(this.replayGroup_&&this.layerState_){var s=this.mapRenderer.getContext(),a=e.viewState,h=this.getLayer(),l=this.layerState_,u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,s,a.center,a.resolution,a.rotation,e.size,e.pixelRatio,l.opacity,{},function(t){var e=o(t);if(!(e in u))return u[e]=!0,r.call(n,t,h)})}},e.prototype.hasFeatureAtCoordinate=function(t,e){if(this.replayGroup_&&this.layerState_){var i=this.mapRenderer.getContext(),r=e.viewState,n=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(t,i,r.center,r.resolution,r.rotation,e.size,e.pixelRatio,n.opacity,e.skippedFeatureUids)}return!1},e.prototype.forEachLayerAtPixel=function(t,e,i,r){var n=De(e.pixelToCoordinateTransform,t.slice());return this.hasFeatureAtCoordinate(n,e)?i.call(r,this.getLayer(),null):void 0},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e,i){var r=this.getLayer(),n=r.getSource(),o=t.viewHints[kn],s=t.viewHints[jn],a=r.getUpdateWhileAnimating(),h=r.getUpdateWhileInteracting();if(!this.dirty_&&!a&&o||!h&&s)return!0;var l=t.extent,u=t.viewState,p=u.projection,c=u.resolution,d=t.pixelRatio,f=r.getRevision(),_=r.getRenderBuffer(),g=r.getRenderOrder();void 0===g&&(g=Da);var y=et(l,_*c);if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==f&&this.renderedRenderOrder_==g&&ot(this.renderedExtent_,y))return!0;this.replayGroup_&&t.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(i)),this.dirty_=!1;var v=new ll(ja(c,d),y,r.getRenderBuffer());n.loadFeatures(y,c,p);var m=function(t){var e,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(e=i(t,c)),e){var n=this.renderFeature(t,c,d,e,v);this.dirty_=this.dirty_||n}}.bind(this);if(g){var x=[];n.forEachFeatureInExtent(y,function(t){x.push(t)}),x.sort(g),x.forEach(m.bind(this))}else n.forEachFeatureInExtent(y,m);return v.finish(i),this.renderedResolution_=c,this.renderedRevision_=f,this.renderedRenderOrder_=g,this.renderedExtent_=y,this.replayGroup_=v,!0},e.prototype.renderFeature=function(t,e,i,r,n){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var s=r.length-1;s>=0;--s)o=Ua(n,t,r[s],ka(e,i),this.handleStyleImageChange_,this)||o;else o=Ua(n,t,r,ka(e,i),this.handleStyleImageChange_,this)||o;return o},e}(fl);zl.handles=function(t){return t.getType()===Ss.VECTOR},zl.create=function(t,e){return new zl(t,e)};var Wl=zl,Kl=function(t){function e(e){(e=u({},e)).controls||(e.controls=wo()),e.interactions||(e.interactions=ys()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new yl(this);return t.registerLayerRenderers([gl,Xl,Wl]),t},e}(lo),Hl={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};function Zl(t,e,i,r){return function(n,o,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(n,o,s):t,!0),e.getType()==Hl.ARRAY_BUFFER&&(a.responseType="arraybuffer"),a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var n,o=e.getType();o==Hl.JSON||o==Hl.TEXT?n=a.responseText:o==Hl.XML?(n=a.responseXML)||(n=(new DOMParser).parseFromString(a.responseText,"application/xml")):o==Hl.ARRAY_BUFFER&&(n=a.response),n?i.call(this,e.readFeatures(n,{featureProjection:s}),e.readProjection(n),e.getLastExtent()):r.call(this)}else r.call(this)}.bind(this),a.onerror=function(){r.call(this)}.bind(this),a.send()}}function ql(t,e){return Zl(t,e,function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)},I)}function Jl(t,e){return[[-1/0,-1/0,1/0,1/0]]}var Ql=document.implementation.createDocument("","",null),$l="http://www.w3.org/2001/XMLSchema-instance";function tu(t,e){return Ql.createElementNS(t,e)}function eu(t,e){return function t(e,i,r){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)i?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)t(n,i,r)}return r}(t,e,[]).join("")}function iu(t){return"documentElement"in t}function ru(t){return(new DOMParser).parseFromString(t,"application/xml")}function nu(t,e){return function(i,r){var n=t.call(void 0!==e?e:this,i,r);void 0!==n&&K(r[r.length-1],n)}}function ou(t,e){return function(i,r){var n=t.call(void 0!==e?e:this,i,r);void 0!==n&&r[r.length-1].push(n)}}function su(t,e){return function(i,r){var n=t.call(void 0!==e?e:this,i,r);void 0!==n&&(r[r.length-1]=n)}}function au(t,e,i){return function(r,n){var o=t.call(void 0!==i?i:this,r,n);if(void 0!==o){var s=n[n.length-1],a=void 0!==e?e:r.localName;(a in s?s[a]:s[a]=[]).push(o)}}}function hu(t,e,i){return function(r,n){var o=t.call(void 0!==i?i:this,r,n);void 0!==o&&(n[n.length-1][void 0!==e?e:r.localName]=o)}}function lu(t,e){return function(i,r,n){t.call(void 0!==e?e:this,i,r,n),n[n.length-1].node.appendChild(i)}}function uu(t,e){var i,r;return function(e,n,o){if(void 0===i){i={};var s={};s[e.localName]=t,i[e.namespaceURI]=s,r=pu(e.localName)}yu(i,r,n,o)}}function pu(t,e){var i=t;return function(t,r,n){var o=r[r.length-1].node,s=i;return void 0===s&&(s=n),tu(void 0!==e?e:o.namespaceURI,s)}}var cu=pu();function du(t,e){for(var i=e.length,r=new Array(i),n=0;n<i;++n)r[n]=t[e[n]];return r}function fu(t,e,i){var r,n,o=void 0!==i?i:{};for(r=0,n=t.length;r<n;++r)o[t[r]]=e;return o}function _u(t,e,i,r){var n;for(n=e.firstElementChild;n;n=n.nextElementSibling){var o=t[n.namespaceURI];if(void 0!==o){var s=o[n.localName];void 0!==s&&s.call(r,n,i)}}}function gu(t,e,i,r,n){return r.push(t),_u(e,i,r,n),r.pop()}function yu(t,e,i,r,n,o){for(var s,a,h=(void 0!==n?n:i).length,l=0;l<h;++l)void 0!==(s=i[l])&&void 0!==(a=e.call(void 0!==o?o:this,s,r,void 0!==n?n[l]:void 0))&&t[a.namespaceURI][a.localName].call(o,a,s,r)}function vu(t,e,i,r,n,o,s){return n.push(t),yu(e,i,r,n,o,s),n.pop()}var mu=function(t){function e(e){t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(Pl),xu=mu;function Eu(t,e,i){var r=[],n=[],o=[],s=[],a=[],h=void 0!==i?i:[],l=t.SupportedCRS,u=Ee(l.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Ee(l),p=u.getMetersPerUnit(),c="ne"==u.getAxisOrientation().substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(e){if(!(h.length>0)||H(h,function(i){return e.Identifier==i.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===i.TileMatrix})){n.push(e.Identifier);var i=28e-5*e.ScaleDenominator/p,l=e.TileWidth,u=e.TileHeight;c?o.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):o.push(e.TopLeftCorner),r.push(i),s.push(l==u?l:[l,u]),a.push([e.MatrixWidth,-e.MatrixHeight])}}),new mu({extent:e,origins:o,resolutions:r,matrixIds:n,tileSizes:s,sizes:a})}var Su=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};Su.prototype.clone=function(){return new Su({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},Su.prototype.getOpacity=function(){return this.opacity_},Su.prototype.getRotateWithView=function(){return this.rotateWithView_},Su.prototype.getRotation=function(){return this.rotation_},Su.prototype.getScale=function(){return this.scale_},Su.prototype.getSnapToPixel=function(){return!1},Su.prototype.getAnchor=function(){return r()},Su.prototype.getImage=function(t){return r()},Su.prototype.getHitDetectionImage=function(t){return r()},Su.prototype.getImageState=function(){return r()},Su.prototype.getImageSize=function(){return r()},Su.prototype.getHitDetectionImageSize=function(){return r()},Su.prototype.getOrigin=function(){return r()},Su.prototype.getSize=function(){return r()},Su.prototype.setOpacity=function(t){this.opacity_=t},Su.prototype.setRotateWithView=function(t){this.rotateWithView_=t},Su.prototype.setRotation=function(t){this.rotation_=t},Su.prototype.setScale=function(t){this.scale_=t},Su.prototype.setSnapToPixel=function(t){},Su.prototype.listenImageChange=function(t,e){return r()},Su.prototype.load=function(){r()},Su.prototype.unlistenImageChange=function(t,e){r()};var Tu=Su,Cu=function(t){function e(e){var i=void 0!==e.rotateWithView&&e.rotateWithView;t.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==e.rotation?e.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return xs.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,i,r="",n="",o=0,s=null,a=0,h=0;this.stroke_&&(null===(i=this.stroke_.getColor())&&(i=Ls),i=Ys(i),void 0===(h=this.stroke_.getWidth())&&(h=1),s=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),ki||(s=null,a=0),void 0===(n=this.stroke_.getLineJoin())&&(n="round"),void 0===(r=this.stroke_.getLineCap())&&(r="round"),void 0===(o=this.stroke_.getMiterLimit())&&(o=10));var l=2*(this.radius_+h)+1,u={strokeStyle:i,strokeWidth:h,size:l,lineCap:r,lineDash:s,lineDashOffset:a,lineJoin:n,miterLimit:o};if(void 0===t){var p=Jn(l,l);this.canvas_=p.canvas,e=l=this.canvas_.width,this.draw_(u,p,0,0),this.createHitDetectionCanvas_(u)}else{l=Math.round(l);var c,d=!this.fill_;d&&(c=this.drawHitDetectionCanvas_.bind(this,u));var f=this.getChecksum(),_=t.add(f,l,l,this.draw_.bind(this,u),c);this.canvas_=_.image,this.origin_=[_.offsetX,_.offsetY],e=_.image.width,d?(this.hitDetectionCanvas_=_.hitImage,this.hitDetectionImageSize_=[_.hitImage.width,_.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[l/2,l/2],this.size_=[l,l],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,i,r){var n,o,s;e.setTransform(1,0,0,1,0,0),e.translate(i,r),e.beginPath();var a=this.points_;if(a===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(a*=2),n=0;n<=a;n++)o=2*n*Math.PI/a-Math.PI/2+this.angle_,s=n%2==0?this.radius_:h,e.lineTo(t.size/2+s*Math.cos(o),t.size/2+s*Math.sin(o))}if(this.fill_){var l=this.fill_.getColor();null===l&&(l=ws),e.fillStyle=Ys(l),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=Jn(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,r){e.setTransform(1,0,0,1,0,0),e.translate(i,r),e.beginPath();var n=this.points_;if(n===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o,s,a,h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(n*=2),o=0;o<=n;o++)a=2*o*Math.PI/n-Math.PI/2+this.angle_,s=o%2==0?this.radius_:h,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}e.fillStyle=dr(ws),e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var i="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(Tu),Ru=function(t){function e(e){var i=e||{};t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,atlasManager:i.atlasManager})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(Cu),wu={FRACTION:"fraction",PIXELS:"pixels"},Iu=function(t){function e(e,i,r,n,o,s){t.call(this),this.hitDetectionImage_=null,this.image_=e||new Image,null!==n&&(this.image_.crossOrigin=n),this.canvas_=s?document.createElement("canvas"):null,this.color_=s,this.imageListenerKeys_=null,this.imageState_=o,this.size_=r,this.src_=i,this.tainted_}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===xs.LOADED){this.tainted_=!1;var t=Jn(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(M.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=xs.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=xs.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],r=Jn(e,i);r.fillRect(0,0,e,i),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==xs.IDLE){this.imageState_=xs.LOADING,this.imageListenerKeys_=[m(this.image_,M.ERROR,this.handleImageError_,this),m(this.image_,M.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,r=this.color_[0]/255,n=this.color_[1]/255,o=this.color_[2]/255,s=0,a=i.length;s<a;s+=4)i[s]*=r,i[s+1]*=n,i[s+2]*=o;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(E),this.imageListenerKeys_=null},e}(b);var Lu={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Ou=function(t){function e(e){var i=e||{},r=void 0!==i.opacity?i.opacity:1,n=void 0!==i.rotation?i.rotation:0,s=void 0!==i.scale?i.scale:1,a=void 0!==i.rotateWithView&&i.rotateWithView;t.call(this,{opacity:r,rotation:n,scale:s,rotateWithView:a}),this.anchor_=void 0!==i.anchor?i.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:Lu.TOP_LEFT,this.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:wu.FRACTION,this.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:wu.FRACTION,this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var h=void 0!==i.img?i.img:null,l=void 0!==i.imgSize?i.imgSize:null,u=i.src;Y(!(void 0!==u&&h),4),Y(!h||h&&l,5),void 0!==u&&0!==u.length||!h||(u=h.src||o(h)),Y(void 0!==u&&u.length>0,6);var p=void 0!==i.src?xs.IDLE:xs.LOADED;this.color_=void 0!==i.color?_r(i.color):null,this.iconImage_=function(t,e,i,r,n,o){var s=Ks.get(e,r,o);return s||(s=new Iu(t,e,i,r,n,o),Ks.set(e,r,o,s)),s}(h,u,l,this.crossOrigin_,p,this.color_),this.offset_=void 0!==i.offset?i.offset:[0,0],this.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:Lu.TOP_LEFT,this.origin_=null,this.size_=void 0!==i.size?i.size:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==wu.FRACTION||this.anchorYUnits_==wu.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==wu.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==wu.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=Lu.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=Lu.TOP_RIGHT&&this.anchorOrigin_!=Lu.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=Lu.BOTTOM_LEFT&&this.anchorOrigin_!=Lu.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=Lu.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=Lu.TOP_RIGHT&&this.offsetOrigin_!=Lu.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=Lu.BOTTOM_LEFT&&this.offsetOrigin_!=Lu.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return v(this.iconImage_,M.CHANGE,t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){x(this.iconImage_,M.CHANGE,t,e)},e}(Tu),Pu=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Au,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};Pu.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new Pu({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},Pu.prototype.getRenderer=function(){return this.renderer_},Pu.prototype.setRenderer=function(t){this.renderer_=t},Pu.prototype.getGeometry=function(){return this.geometry_},Pu.prototype.getGeometryFunction=function(){return this.geometryFunction_},Pu.prototype.getFill=function(){return this.fill_},Pu.prototype.setFill=function(t){this.fill_=t},Pu.prototype.getImage=function(){return this.image_},Pu.prototype.setImage=function(t){this.image_=t},Pu.prototype.getStroke=function(){return this.stroke_},Pu.prototype.setStroke=function(t){this.stroke_=t},Pu.prototype.getText=function(){return this.text_},Pu.prototype.setText=function(t){this.text_=t},Pu.prototype.getZIndex=function(){return this.zIndex_},Pu.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Au,this.geometry_=t},Pu.prototype.setZIndex=function(t){this.zIndex_=t};var bu=null;function Mu(t,e){if(!bu){var i=new mr({color:"rgba(255,255,255,0.4)"}),r=new Er({color:"#3399CC",width:1.25});bu=[new Pu({image:new Ru({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return bu}function Fu(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[Nt.POLYGON]=[new Pu({fill:new mr({color:[255,255,255,.5]})})],t[Nt.MULTI_POLYGON]=t[Nt.POLYGON],t[Nt.LINE_STRING]=[new Pu({stroke:new Er({color:e,width:5})}),new Pu({stroke:new Er({color:i,width:3})})],t[Nt.MULTI_LINE_STRING]=t[Nt.LINE_STRING],t[Nt.CIRCLE]=t[Nt.POLYGON].concat(t[Nt.LINE_STRING]),t[Nt.POINT]=[new Pu({image:new Ru({radius:6,fill:new mr({color:i}),stroke:new Er({color:e,width:1.5})}),zIndex:1/0})],t[Nt.MULTI_POINT]=t[Nt.POINT],t[Nt.GEOMETRY_COLLECTION]=t[Nt.POLYGON].concat(t[Nt.LINE_STRING],t[Nt.POINT]),t}function Au(t){return t.getGeometry()}var Nu=Pu;function Gu(t,e){var i=/\{z\}/g,r=/\{x\}/g,n=/\{y\}/g,o=/\{-y\}/g;return function(s,a,h){return s?t.replace(i,s[0].toString()).replace(r,s[1].toString()).replace(n,function(){return(-s[2]-1).toString()}).replace(o,function(){var t=s[0],i=e.getFullTileRange(t);return Y(i,55),(i.getHeight()+s[2]).toString()}):void 0}}function Du(t,e){for(var i=t.length,r=new Array(i),n=0;n<i;++n)r[n]=Gu(t[n],e);return ku(r)}function ku(t){return 1===t.length?t[0]:function(e,i,r){if(e){var n=Xt(Cl(e),t.length);return t[n](e,i,r)}}}function ju(t,e,i){}function Uu(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r,n=i[1].charCodeAt(0),o=i[2].charCodeAt(0);for(r=n;r<=o;++r)e.push(t.replace(i[0],String.fromCharCode(r)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),a=parseInt(i[1],10);a<=s;a++)e.push(t.replace(i[0],a.toString()));return e}return e.push(t),e}function Yu(t,e,i,r){var n=document.createElement("script"),s="olc_"+o(e);function a(){delete window[s],n.parentNode.removeChild(n)}n.async=!0,n.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+s;var h=setTimeout(function(){a(),i&&i()},1e4);window[s]=function(t){clearTimeout(h),a(),e(t)},document.getElementsByTagName("head")[0].appendChild(n)}function Bu(t,e,i,r){var n=Pe(i,e,t),o=Se(e,r,i),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var a=t.getMetersPerUnit();void 0!==a&&(o/=a);var h=t.getExtent();if(!h||nt(h,n)){var l=Se(t,o,n)/o;isFinite(l)&&l>0&&(o/=l)}return o}function Vu(t,e,i,r){var n=i-t,o=r-e,s=Math.sqrt(n*n+o*o);return[Math.round(i+n/s),Math.round(r+o/s)]}function Xu(t,e,i,r,n,o,s,a,h,l,u){var p=Jn(Math.round(i*t),Math.round(i*e));if(0===h.length)return p.canvas;p.scale(i,i);var c=[1/0,1/0,-1/0,-1/0];h.forEach(function(t,e,i){ft(c,t.extent)});var d=Ot(c),f=Rt(c),_=Jn(Math.round(i*d/r),Math.round(i*f/r)),g=i/r;h.forEach(function(t,e,i){var r=t.extent[0]-c[0],n=-(t.extent[3]-c[3]),o=Ot(t.extent),s=Rt(t.extent);_.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,r*g,n*g,o*g,s*g)});var y=It(s);return a.getTriangles().forEach(function(t,e,n){var s=t.source,a=t.target,h=s[0][0],l=s[0][1],u=s[1][0],d=s[1][1],f=s[2][0],g=s[2][1],v=(a[0][0]-y[0])/o,m=-(a[0][1]-y[1])/o,x=(a[1][0]-y[0])/o,E=-(a[1][1]-y[1])/o,S=(a[2][0]-y[0])/o,T=-(a[2][1]-y[1])/o,C=h,R=l;h=0,l=0;var w=function(t){for(var e=t.length,i=0;i<e;i++){for(var r=i,n=Math.abs(t[i][i]),o=i+1;o<e;o++){var s=Math.abs(t[o][i]);s>n&&(n=s,r=o)}if(0===n)return null;var a=t[r];t[r]=t[i],t[i]=a;for(var h=i+1;h<e;h++)for(var l=-t[h][i]/t[i][i],u=i;u<e+1;u++)i==u?t[h][u]=0:t[h][u]+=l*t[i][u]}for(var p=new Array(e),c=e-1;c>=0;c--){p[c]=t[c][e]/t[c][c];for(var d=c-1;d>=0;d--)t[d][e]-=t[d][c]*p[c]}return p}([[u-=C,d-=R,0,0,x-v],[f-=C,g-=R,0,0,S-v],[0,0,u,d,E-m],[0,0,f,g,T-m]]);if(w){p.save(),p.beginPath();var I=(v+x+S)/3,L=(m+E+T)/3,O=Vu(I,L,v,m),P=Vu(I,L,x,E),b=Vu(I,L,S,T);p.moveTo(P[0],P[1]),p.lineTo(O[0],O[1]),p.lineTo(b[0],b[1]),p.clip(),p.transform(w[0],w[2],w[1],w[3],v,m),p.translate(c[0]-C,c[3]-R),p.scale(r/i,-r/i),p.drawImage(_.canvas,0,0),p.restore()}}),u&&(p.save(),p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(t,e,i){var r=t.target,n=(r[0][0]-y[0])/o,s=-(r[0][1]-y[1])/o,a=(r[1][0]-y[0])/o,h=-(r[1][1]-y[1])/o,l=(r[2][0]-y[0])/o,u=-(r[2][1]-y[1])/o;p.beginPath(),p.moveTo(a,h),p.lineTo(n,s),p.lineTo(l,u),p.closePath(),p.stroke()}),p.restore()),p.canvas}var zu=function(t,e,i,r,n){this.sourceProj_=t,this.targetProj_=e;var o={},s=Oe(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=s(t)),o[e]},this.maxSourceExtent_=r,this.errorThresholdSquared_=n*n,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Ot(r)==Ot(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ot(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ot(this.targetProj_.getExtent()):null;var a=It(i),h=Lt(i),l=St(i),u=Et(i),p=this.transformInv_(a),c=this.transformInv_(h),d=this.transformInv_(l),f=this.transformInv_(u);if(this.addQuad_(a,h,l,u,p,c,d,f,10),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach(function(t,e,i){_=Math.min(_,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-_>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-_>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-_>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-_>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}o={}};zu.prototype.addTriangle_=function(t,e,i,r,n,o){this.triangles_.push({source:[r,n,o],target:[t,e,i]})},zu.prototype.addQuad_=function(t,e,i,r,n,o,s,a,h){var l=tt([n,o,s,a]),u=this.sourceWorldWidth_?Ot(l)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,c=this.sourceProj_.canWrapX()&&u>.5&&u<1,d=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)d=Ot(tt([t,e,i,r]))/this.targetWorldWidth_>.25||d;!c&&this.sourceProj_.isGlobal()&&u&&(d=u>.25||d)}if(d||!this.maxSourceExtent_||Pt(l,this.maxSourceExtent_)){if(!(d||isFinite(n[0])&&isFinite(n[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(h>0))return;d=!0}if(h>0){if(!d){var f,_=[(t[0]+i[0])/2,(t[1]+i[1])/2],g=this.transformInv_(_);if(c)f=(Xt(n[0],p)+Xt(s[0],p))/2-Xt(g[0],p);else f=(n[0]+s[0])/2-g[0];var y=(n[1]+s[1])/2-g[1];d=f*f+y*y>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var v=[(e[0]+i[0])/2,(e[1]+i[1])/2],m=this.transformInv_(v),x=[(r[0]+t[0])/2,(r[1]+t[1])/2],E=this.transformInv_(x);this.addQuad_(t,e,v,x,n,o,m,E,h-1),this.addQuad_(x,v,i,r,E,m,s,a,h-1)}else{var S=[(t[0]+e[0])/2,(t[1]+e[1])/2],T=this.transformInv_(S),C=[(i[0]+r[0])/2,(i[1]+r[1])/2],R=this.transformInv_(C);this.addQuad_(t,S,C,r,n,T,R,a,h-1),this.addQuad_(S,e,i,C,T,o,s,R,h-1)}return}}if(c){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,r,n,s,a),this.addTriangle_(t,e,i,n,o,s)}},zu.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,i,r){var n=e.source;_t(t,n[0]),_t(t,n[1]),_t(t,n[2])}),t},zu.prototype.getTriangles=function(){return this.triangles_};var Wu=zu,Ku=function(t){function e(e,i,r,n,o,s,a,h,l,u,p){t.call(this,o,On.IDLE),this.renderEdges_=void 0!==p&&p,this.pixelRatio_=a,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=n,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var c=n.getTileCoordExtent(this.wrappedTileCoord_),d=this.targetTileGrid_.getExtent(),f=this.sourceTileGrid_.getExtent(),_=d?wt(c,d):c;if(0!==xt(_)){var g=e.getExtent();g&&(f=f?wt(f,g):g);var y=n.getResolution(this.wrappedTileCoord_[0]),v=Bu(e,r,Tt(_),y);if(!isFinite(v)||v<=0)this.state=On.EMPTY;else{var m=void 0!==u?u:vs;if(this.triangulation_=new Wu(e,r,_,f,v*m),0!==this.triangulation_.getTriangles().length){this.sourceZ_=i.getZForResolution(v);var x=this.triangulation_.calculateSourceExtent();if(f&&(e.canWrapX()?(x[1]=kt(x[1],f[1],f[3]),x[3]=kt(x[3],f[1],f[3])):x=wt(x,f)),xt(x)){for(var E=i.getTileRangeForExtentAndZ(x,this.sourceZ_),S=E.minX;S<=E.maxX;S++)for(var T=E.minY;T<=E.maxY;T++){var C=l(this.sourceZ_,S,T,a);C&&this.sourceTiles_.push(C)}0===this.sourceTiles_.length&&(this.state=On.EMPTY)}else this.state=On.EMPTY}else this.state=On.EMPTY}}else this.state=On.EMPTY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==On.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,r){e&&e.getState()==On.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=On.ERROR;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),r="number"==typeof i?i:i[0],n="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Xu(r,n,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=On.LOADED}this.changed()},e.prototype.load=function(){if(this.state==On.IDLE){this.state=On.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,r){var n=e.getState();if(n==On.IDLE||n==On.LOADING){t++;var o=v(e,M.CHANGE,function(i){var r=e.getState();r!=On.LOADED&&r!=On.ERROR&&r!=On.EMPTY||(E(o),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,i){t.getState()==On.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(E),this.sourcesListenerKeys_=null},e}(vl),Hu="tileloadstart",Zu="tileloadend",qu="tileloaderror",Ju=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.generateTileUrlFunction_=!e.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(this):ju,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction,this.key_),this.tileLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,r=o(i),n=i.getState();n==On.LOADING?(this.tileLoadingKeys_[r]=!0,e=Hu):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],e=n==On.ERROR?qu:n==On.LOADED||n==On.ABORT?Zu:void 0),void 0!=e&&this.dispatchEvent(new kl(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=this.urls=Uu(t);this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Du(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,i){var r=Sl(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(jl);function Qu(t,e){t.getImage().src=e}var $u=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Qu,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:xl,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var n=this.tileCacheForProjection[r];n.expireCache(n==i?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Ie(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Ie(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Ie(e,t)){var i=o(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=bl(t)),this.tileGridForProjection[i]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Ie(e,t))return this.tileCache;var i=o(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Rl(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,e,i,r,n,o){var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,n),h=a?this.tileUrlFunction(a,r,n):void 0,l=new this.tileClass(s,void 0!==h?On.IDLE:On.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,v(l,M.CHANGE,this.handleTileChange,this),l},e.prototype.getTile=function(t,e,i,r,n){var o=this.getProjection();if(o&&n&&!Ie(o,n)){var s,a=this.getTileCacheForProjection(n),h=[t,e,i],l=Tl(h);a.containsKey(l)&&(s=a.get(l));var u=this.getKey();if(s&&s.key==u)return s;var p=this.getTileGridForProjection(o),c=this.getTileGridForProjection(n),d=this.getTileCoordForTileUrlFunction(h,n),f=new Ku(o,p,n,c,h,d,this.getTilePixelRatio(r),this.getGutter(),function(t,e,i,r){return this.getTileInternal(t,e,i,r,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return f.key=u,s?(f.interimTile=s,f.refreshInterimChain(),a.replace(l,f)):a.set(l,f),f}return this.getTileInternal(t,e,i,r,o||n)},e.prototype.getTileInternal=function(t,e,i,r,n){var o=null,s=Sl(t,e,i),a=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=a){var h=o;o=this.createTile_(t,e,i,r,n,a),h.getState()==On.IDLE?o.interimTile=h.interimTile:o.interimTile=h,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,i,r,n,a),this.tileCache.set(s,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var i=Ee(t);if(i){var r=o(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}},e}(Ju),tp=function(t){function e(e){var i=void 0!==e.hidpi&&e.hidpi;t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:Ee("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:ro.LOADING,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:i?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.hidpi_=i,this.culture_=void 0!==e.culture?e.culture:"en-us",this.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet,Yu("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_,this.handleImageryMetadataResponse.bind(this),void 0,"jsonp")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],i=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,r=Gl(this.getProjection()),n=this.hidpi_?2:1,o=e.imageWidth==e.imageHeight?e.imageWidth/n:[e.imageWidth/n,e.imageHeight/n],s=Fl({extent:r,minZoom:e.zoomMin,maxZoom:i,tileSize:o});this.tileGrid=s;var a=this.culture_,h=this.hidpi_;if(this.tileUrlFunction=ku(e.imageUrlSubdomains.map(function(t){var i=[0,0,0],r=e.imageUrl.replace("{subdomain}",t).replace("{culture}",a);return function(t,e,n){if(t){El(t[0],t[1],-t[2]-1,i);var o=r;return h&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",function(t){var e,i,r=t[0],n=new Array(r),o=1<<r-1;for(e=0;e<r;++e)i=48,t[1]&o&&(i+=1),t[2]&o&&(i+=2),n[e]=String.fromCharCode(i),o>>=1;return n.join("")}(i))}}})),e.imageryProviders){var l=Le(Ee("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var i=[],r=t.viewState,n=this.getTileGrid().getTileCoordForCoordAndResolution(r.center,r.resolution)[0];return e.imageryProviders.map(function(e){for(var r=!1,o=e.coverageAreas,s=0,a=o.length;s<a;++s){var h=o[s];if(n>=h.zoomMin&&n<=h.zoomMax){var u=h.bbox;if(Pt(Ft([u[1],u[0],u[3],u[2]],l),t.extent)){r=!0;break}}}r&&i.push(e.attribution)}),i.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'),i}.bind(this))}this.setState(ro.READY)}else this.setState(ro.ERROR)},e}($u),ep=function(t){function e(e){var i=e||{},r=void 0!==i.projection?i.projection:"EPSG:3857",n=void 0!==i.tileGrid?i.tileGrid:Fl({extent:Gl(r),maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:r,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}($u),ip=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,wrapX:e.wrapX}),this.account_=e.account,this.mapId_=e.map||"",this.config_=e.config||{},this.templateCache_={},this.initializeMap_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){u(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var i=new XMLHttpRequest;i.addEventListener("load",this.handleInitResponse_.bind(this,t)),i.addEventListener("error",this.handleInitError_.bind(this)),i.open("POST",e),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var i=e.target;if(!i.status||i.status>=200&&i.status<300){var r;try{r=JSON.parse(i.responseText)}catch(t){return void this.setState(ro.ERROR)}this.applyTemplate_(r),this.templateCache_[t]=r,this.setState(ro.READY)}else this.setState(ro.ERROR)},e.prototype.handleInitError_=function(t){this.setState(ro.ERROR)},e.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e}(ep),rp={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"},np=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P),op=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:void 0,state:ro.READY,wrapX:void 0===i.wrapX||i.wrapX}),this.loader_=I,this.format_=i.format,this.overlaps_=void 0==i.overlaps||i.overlaps,this.url_=i.url,void 0!==i.loader?this.loader_=i.loader:void 0!==this.url_&&(Y(this.format_,7),this.loader_=ql(this.url_,this.format_)),this.strategy_=void 0!==i.strategy?i.strategy:Jl;var r,n,o=void 0===i.useSpatialIndex||i.useSpatialIndex;this.featuresRtree_=o?new tl:null,this.loadedExtentsRtree_=new tl,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(i.features)?n=i.features:i.features&&(n=(r=i.features).getArray()),o||void 0!==r||(r=new U(n)),void 0!==n&&this.addFeaturesInternal(n),void 0!==r&&this.bindFeaturesCollection_(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=o(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new np(rp.ADDFEATURE,t))}},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[v(e,M.CHANGE,this.handleFeatureChange_,this),v(e,l,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,r=e.getId();return void 0!==r?r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=e:(Y(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],r=[],n=0,s=t.length;n<s;n++){var a=t[n],h=o(a);this.addToIndex_(h,a)&&i.push(a)}for(var l=0,u=i.length;l<u;l++){var p=i[l],c=o(p);this.setupChangeEvents_(c,p);var d=p.getGeometry();if(d){var f=d.getExtent();e.push(f),r.push(p)}else this.nullGeometryFeatures_[c]=p}this.featuresRtree_&&this.featuresRtree_.load(e,r);for(var _=0,g=i.length;_<g;_++)this.dispatchEvent(new np(rp.ADDFEATURE,i[_]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;v(this,rp.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),v(this,rp.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),v(t,h.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),v(t,h.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(E)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var r=new np(rp.CLEAR);this.dispatchEvent(r),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){var r=e(i);if(r)return r}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),d(this.nullGeometryFeatures_)||K(t,c(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],r=t[1],n=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],h=e||R;return this.featuresRtree_.forEachInExtent(a,function(t){if(h(t)){var e=t.getGeometry(),l=s;if((s=e.closestPointXY(i,r,o,s))<l){n=t;var u=Math.sqrt(s);a[0]=i-u,a[1]=r-u,a[2]=i+u,a[3]=r+u}}}),n},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=o(e),r=e.getGeometry();if(r){var n=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(n,e)):this.featuresRtree_&&this.featuresRtree_.update(n,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var s=e.getId();if(void 0!==s){var a=s.toString();i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[a]=e):this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else i in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[i]=e);this.changed(),this.dispatchEvent(new np(rp.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:o(t)in this.undefIdIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&d(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var r=this,n=this.loadedExtentsRtree_,o=this.strategy_(t,e);this.loading=!1;for(var s=function(t,s){var a=o[t];n.forEachInExtent(a,function(t){return ot(t.extent,a)})||(r.loader_.call(r,a,e,i),n.insert(a,{extent:a.slice()}),r.loading=r.loader_!==I)},a=0,h=o.length;a<h;++a)s(a)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(dt(i.extent,t))return e=i,!0}),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=o(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=o(t);this.featureChangeKeys_[e].forEach(E),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i?delete this.idIndex_[i.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new np(rp.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e}(Il),sp=function(t){function e(e){t.call(this,{attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=void 0!==e.distance?e.distance:20,this.features=[],this.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return Y(e.getType()==Nt.POINT,10),e},this.source=e.source,v(this.source,M.CHANGE,this.refresh,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features),t.prototype.refresh.call(this)},e.prototype.cluster=function(){if(void 0!==this.resolution){this.features.length=0;for(var t=[1/0,1/0,-1/0,-1/0],e=this.distance*this.resolution,i=this.source.getFeatures(),r={},n=0,s=i.length;n<s;n++){var a=i[n];if(!(o(a)in r)){var h=this.geometryFunction(a);if(h){pt(h.getCoordinates(),t),et(t,e,t);var l=this.source.getFeaturesInExtent(t);l=l.filter(function(t){var e=o(t);return!(e in r)&&(r[e]=!0,!0)}),this.features.push(this.createCluster(l))}}}}},e.prototype.createCluster=function(t){for(var e=[0,0],i=t.length-1;i>=0;--i){var r=this.geometryFunction(t[i]);r?Hi(e,r.getCoordinates()):t.splice(i,1)}tr(e,1/t.length);var n=new B(new ci(e));return n.set("features",t),n},e}(op),ap=function(t){function e(e,i,r,n,o,s){var a=e.getExtent(),h=i.getExtent(),l=h?wt(r,h):r,u=Bu(e,i,Tt(l),n),p=new Wu(e,i,l,a,u*vs),c=s(p.calculateSourceExtent(),u,o),d=xs.LOADED;c&&(d=xs.IDLE);var f=c?c.getPixelRatio():1;t.call(this,r,n,f,d),this.targetProj_=i,this.maxSourceExtent_=a,this.triangulation_=p,this.targetResolution_=n,this.targetExtent_=r,this.sourceImage_=c,this.sourcePixelRatio_=f,this.canvas_=null,this.sourceListenerKey_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==xs.LOADING&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==xs.LOADED){var e=Ot(this.targetExtent_)/this.targetResolution_,i=Rt(this.targetExtent_)/this.targetResolution_;this.canvas_=Xu(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==xs.IDLE){this.state=xs.LOADING,this.changed();var t=this.sourceImage_.getState();t==xs.LOADED||t==xs.ERROR?this.reproject_():(this.sourceListenerKey_=v(this.sourceImage_,M.CHANGE,function(t){var e=this.sourceImage_.getState();e!=xs.LOADED&&e!=xs.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){E(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(ms),hp="imageloadstart",lp="imageloadend",up="imageloaderror",pp=function(t){function e(e,i){t.call(this,e),this.image=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P);function cp(t,e){t.getImage().src=e}var dp=function(t){function e(e){t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state}),this.resolutions_=void 0!==e.resolutions?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=z(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,i,r){var n=this.getProjection();if(n&&r&&!Ie(n,r)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Ie(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&dt(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new ap(n,r,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,n)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return n&&(r=n),this.getImageInternal(t,e,i,r)},e.prototype.getImageInternal=function(t,e,i,n){return r()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case xs.LOADING:this.loading=!0,this.dispatchEvent(new pp(hp,e));break;case xs.LOADED:this.loading=!1,this.dispatchEvent(new pp(lp,e));break;case xs.ERROR:this.loading=!1,this.dispatchEvent(new pp(up,e))}},e}(Il),fp=function(t){function e(e,i,r,n,o,s){t.call(this,e,i,r,xs.IDLE),this.src_=n,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.state=xs.IDLE,this.imageLoadFunction_=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=xs.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Rt(this.extent)/this.image_.height),this.state=xs.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=xs.IDLE&&this.state!=xs.ERROR||(this.state=xs.LOADING,this.changed(),this.imageListenerKeys_=[m(this.image_,M.ERROR,this.handleImageError_,this),m(this.image_,M.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(E),this.imageListenerKeys_=null},e}(ms);function _p(t,e){var i=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))});var r=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var gp=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,this.hidpi_=void 0===i.hidpi||i.hidpi,this.url_=i.url,this.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:cp,this.params_=i.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,r){if(void 0===this.url_)return null;e=this.findNearestResolution(e),i=this.hidpi_?i:1;var n=this.image_;if(n&&this.renderedRevision_==this.getRevision()&&n.getResolution()==e&&n.getPixelRatio()==i&&ot(n.getExtent(),t))return n;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};u(o,this.params_);var s=((t=t.slice())[0]+t[2])/2,a=(t[1]+t[3])/2;if(1!=this.ratio_){var h=this.ratio_*Ot(t)/2,l=this.ratio_*Rt(t)/2;t[0]=s-h,t[1]=a-l,t[2]=s+h,t[3]=a+l}var p=e/i,c=Math.ceil(Ot(t)/p),d=Math.ceil(Rt(t)/p);t[0]=s-p*c/2,t[2]=s+p*c/2,t[1]=a-p*d/2,t[3]=a+p*d/2,this.imageSize_[0]=c,this.imageSize_[1]=d;var f=this.getRequestUrl_(t,this.imageSize_,i,r,o);return this.image_=new fp(t,e,i,f,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),v(this.image_,M.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,r,n){var o=r.getCode().split(":").pop();n.SIZE=e[0]+","+e[1],n.BBOX=t.join(","),n.BBOXSR=o,n.IMAGESR=o,n.DPI=Math.round(90*i);var s=this.url_,a=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return a==s&&Y(!1,50),_p(a,n)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){u(this.params_,t),this.image_=null,this.changed()},e}(dp),yp=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions,state:i.state}),this.canvasFunction_=i.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImageInternal=function(t,e,i,r){e=this.findNearestResolution(e);var n=this.canvas_;if(n&&this.renderedRevision_==this.getRevision()&&n.getResolution()==e&&n.getPixelRatio()==i&&ot(n.getExtent(),t))return n;Mt(t=t.slice(),this.ratio_);var o=[Ot(t)/e*i,Rt(t)/e*i],s=this.canvasFunction_.call(this,t,e,i,o,r);return s&&(n=new Es(t,e,i,s)),this.canvas_=n,this.renderedRevision_=this.getRevision(),n},e}(dp);var vp=function(t){function e(e){t.call(this,{projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,this.params_=e.params||{},this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:cp,this.hidpi_=void 0===e.hidpi||e.hidpi,this.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,this.ratio_=void 0!==e.ratio?e.ratio:1,this.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,this.image_=null,this.renderedRevision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,r){e=this.findNearestResolution(e),i=this.hidpi_?i:1;var n=this.image_;if(n&&this.renderedRevision_==this.getRevision()&&n.getResolution()==e&&n.getPixelRatio()==i&&ot(n.getExtent(),t))return n;1!=this.ratio_&&Mt(t=t.slice(),this.ratio_);var o=[Ot(t)/e*i,Rt(t)/e*i];if(void 0!==this.url_){var s=this.getUrl(this.url_,this.params_,t,o,r);v(n=new fp(t,e,i,s,this.crossOrigin_,this.imageLoadFunction_),M.CHANGE,this.handleImageChange,this)}else n=null;return this.image_=n,this.renderedRevision_=this.getRevision(),n},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){u(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,i,r,n){var o=function(t,e,i,r){var n=Ot(t),o=Rt(t),s=e[0],a=e[1],h=.0254/r;return a*n>s*o?n*i/(s*h):o*i/(a*h)}(i,r,this.metersPerUnit_,this.displayDpi_),s=Tt(i),a={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:o,SETVIEWCENTERX:s[0],SETVIEWCENTERY:s[1]};return u(a,e),_p(t,a)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(dp),mp=function(t){function e(e){var i=void 0!==e.crossOrigin?e.crossOrigin:null,r=void 0!==e.imageLoadFunction?e.imageLoadFunction:cp;t.call(this,{attributions:e.attributions,projection:Ee(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image_=new fp(this.imageExtent_,void 0,1,this.url_,i,r),this.imageSize_=e.imageSize?e.imageSize:null,v(this.image_,M.CHANGE,this.handleImageChange,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,i,r){return Pt(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==xs.LOADED){var i,r,n=this.image_.getExtent(),o=this.image_.getImage();this.imageSize_?(i=this.imageSize_[0],r=this.imageSize_[1]):(i=o.width,r=o.height);var s=Rt(n)/r,a=Math.ceil(Ot(n)/s);if(a!=i){var h=Jn(a,r),l=h.canvas;h.drawImage(o,0,0,i,r,0,0,l.width,l.height),this.image_.setImage(l)}}t.prototype.handleImageChange.call(this,e)},e}(dp),xp="1.3.0",Ep="carmentaserver",Sp="geoserver",Tp="mapserver",Cp="qgis",Rp=[101,101],wp=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,this.url_=i.url,this.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:cp,this.params_=i.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=i.serverType,this.hidpi_=void 0===i.hidpi||i.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getGetFeatureInfoUrl=function(t,e,i,r){if(void 0!==this.url_){var n=Ee(i),o=this.getProjection();o&&o!==n&&(e=Bu(o,n,t,e),t=Pe(t,n,o));var s=Ct(t,e,0,Rp),a={SERVICE:"WMS",VERSION:xp,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};u(a,this.params_,r);var h=Math.floor((t[0]-s[0])/e),l=Math.floor((s[3]-t[1])/e);return a[this.v13_?"I":"X"]=h,a[this.v13_?"J":"Y"]=l,this.getRequestUrl_(s,Rp,1,o||n,a)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,r){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var n=e/i,o=Tt(t),s=Ct(o,n,0,[Math.ceil(Ot(t)/n),Math.ceil(Rt(t)/n)]),a=Ct(o,n,0,[Math.ceil(this.ratio_*Ot(t)/n),Math.ceil(this.ratio_*Rt(t)/n)]),h=this.image_;if(h&&this.renderedRevision_==this.getRevision()&&h.getResolution()==e&&h.getPixelRatio()==i&&ot(h.getExtent(),s))return h;var l={SERVICE:"WMS",VERSION:xp,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};u(l,this.params_),this.imageSize_[0]=Math.round(Ot(a)/n),this.imageSize_[1]=Math.round(Rt(a)/n);var p=this.getRequestUrl_(a,this.imageSize_,i,r,l);return this.image_=new fp(a,e,i,p,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),v(this.image_,M.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,r,n){if(Y(void 0!==this.url_,9),n[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(n.STYLES=""),1!=i)switch(this.serverType_){case Sp:var o=90*i+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+o:n.FORMAT_OPTIONS="dpi:"+o;break;case Tp:n.MAP_RESOLUTION=90*i;break;case Ep:case Cp:n.DPI=90*i;break;default:Y(!1,8)}n.WIDTH=e[0],n.HEIGHT=e[1];var s,a=r.getAxisOrientation();return s=this.v13_&&"ne"==a.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,n.BBOX=s.join(","),_p(this.url_,n)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){u(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||xp;this.v13_=Ki(t,"1.3")>=0},e}(dp),Ip='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',Lp=function(t){function e(e){var i,r=e||{};i=void 0!==r.attributions?r.attributions:[Ip];var n=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",o=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";t.call(this,{attributions:i,cacheSize:r.cacheSize,crossOrigin:n,opaque:void 0===r.opaque||r.opaque,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,url:o,wrapX:r.wrapX,attributionsCollapsible:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ep),Op=i(2),Pp=function(t){function e(e){var i=e||{};t.call(this,i),this.type=Ss.IMAGE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(xo);Pp.prototype.getSource;var bp=Pp,Mp="preload",Fp="useInterimTilesOnError",Ap=function(t){function e(e){var i=e||{},r=u({},i);delete r.preload,delete r.useInterimTilesOnError,t.call(this,r),this.setPreload(void 0!==i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=Ss.TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(Mp)},e.prototype.setPreload=function(t){this.set(Mp,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Fp)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Fp,t)},e}(xo);Ap.prototype.getSource;var Np=Ap,Gp="beforeoperations",Dp="afteroperations",kp={PIXEL:"pixel",IMAGE:"image"},jp=function(t){function e(e,i,r){t.call(this,e),this.extent=i.extent,this.resolution=i.viewState.resolution/i.pixelRatio,this.data=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P),Up=null;function Yp(t,e,i){if(!t.prepareFrame(e,i))return null;var r=e.size[0],n=e.size[1];if(Up){var o=Up.canvas;o.width!==r||o.height!==n?Up=Jn(r,n):Up.clearRect(0,0,r,n)}else Up=Jn(r,n);return t.composeFrame(e,i,Up),Up.getImageData(0,0,r,n)}function Bp(t){var e=t,i=t,r=t,n=null;return"function"==typeof e.getTile?n=function(t){var e=new Np({source:t});return new ha(e)}(e):"function"==typeof i.getImage?n=function(t){var e=new bp({source:t});return new ra(e)}(i):r.getType()===Ss.TILE?n=new ha(r):r.getType()!=Ss.IMAGE&&r.getType()!=Ss.VECTOR||(n=new ra(r)),n}var Vp=function(t){function e(e){t.call(this,{projection:null}),this.worker_=null,this.operationType_=void 0!==e.operationType?e.operationType:kp.PIXEL,this.threads_=void 0!==e.threads?e.threads:1,this.renderers_=function(t){for(var e=t.length,i=new Array(e),r=0;r<e;++r)i[r]=Bp(t[r]);return i}(e.sources);for(var i=0,r=this.renderers_.length;i<r;++i)v(this.renderers_[i],M.CHANGE,this.changed,this);this.tileQueue_=new Mn(function(){return 1},this.changed.bind(this));for(var n=function(t){return t.map(function(t){return t.getLayer().getLayerState()})}(this.renderers_),s={},a=0,h=n.length;a<h;++a)s[o(n[a].layer)]=n[a];this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],extent:null,focus:null,index:0,layerStates:s,layerStatesArray:n,pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},void 0!==e.operation&&this.setOperation(e.operation,e.lib)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setOperation=function(t,e){this.worker_=new Op.Processor({operation:t,imageOps:this.operationType_===kp.IMAGE,queue:1,lib:e,threads:this.threads_}),this.changed()},e.prototype.updateFrameState_=function(t,e,i){var r=u({},this.frameState_);r.viewState=u({},r.viewState);var n=Tt(t);r.extent=t.slice(),r.focus=n,r.size[0]=Math.round(Ot(t)/e),r.size[1]=Math.round(Rt(t)/e),r.time=Date.now(),r.animate=!1;var o=r.viewState;return o.center=n,o.projection=i,o.resolution=e,r},e.prototype.allSourcesReady_=function(){for(var t=!0,e=0,i=this.renderers_.length;e<i;++e)if(this.renderers_[e].getLayer().getSource().getState()!==ro.READY){t=!1;break}return t},e.prototype.getImage=function(t,e,i,r){if(!this.allSourcesReady_())return null;var n=this.updateFrameState_(t,e,r);if(this.requestedFrameState_=n,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),s=this.renderedImageCanvas_.getExtent();e===o&&dt(t,s)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),n.tileQueue.loadMoreTiles(16,16),n.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},e.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.renderers_.length,i=new Array(e),r=0;r<e;++r){var n=Yp(this.renderers_[r],t,t.layerStatesArray[r]);if(!n)return;i[r]=n}var o={};this.dispatchEvent(new jp(Gp,t,o)),this.worker_.process(i,o,this.onWorkerComplete_.bind(this,t))},e.prototype.onWorkerComplete_=function(t,e,i,r){if(!e&&i){var n=t.extent,o=t.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&dt(n,this.requestedFrameState_.extent)){var s;if(this.renderedImageCanvas_)s=this.renderedImageCanvas_.getImage().getContext("2d");else s=Jn(Math.round(Ot(n)/o),Math.round(Rt(n)/o)),this.renderedImageCanvas_=new Es(n,o,1,s.canvas);s.putImageData(i,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new jp(Dp,t,r))}}},e.prototype.getImageInternal=function(){return null},e}(dp),Xp=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',Ip],zp={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},Wp={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},Kp=function(t){function e(e){var i=e.layer.indexOf("-"),r=-1==i?e.layer:e.layer.slice(0,i),n=Wp[r],o=zp[e.layer],s=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+o.extension;t.call(this,{attributions:Xp,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:void 0!=e.maxZoom?e.maxZoom:n.maxZoom,minZoom:void 0!=e.minZoom?e.minZoom:n.minZoom,opaque:o.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:s,wrapX:e.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ep);function Hp(t,e,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){var n=r.getTileCoordExtent(t,this.tmpExtent_),o=ho(r.getTileSize(t[0]),this.tmpSize);1!=e&&(o=ao(o,e,this.tmpSize));var s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return u(s,this.params_),this.getRequestUrl_(t,o,n,e,i,s)}}var Zp=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,tileUrlFunction:Hp,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition}),this.params_=i.params||{},this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.setKey(this.getKeyForParams_())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,i,r,n,o){var s=this.urls;if(s){var a,h=n.getCode().split(":").pop();if(o.SIZE=e[0]+","+e[1],o.BBOX=i.join(","),o.BBOXSR=h,o.IMAGESR=h,o.DPI=Math.round(o.DPI?o.DPI*r:90*r),1==s.length)a=s[0];else a=s[Xt(Cl(t),s.length)];return _p(a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.updateParams=function(t){u(this.params_,t),this.setKey(this.getKeyForParams_())},e}($u),qp=function(t){function e(e,i,r){t.call(this,e,On.LOADED),this.tileSize_=i,this.text_=r,this.canvas_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=Jn(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.text_,t[0]/2,t[1]/2),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(vl),Jp=function(t){function e(e){t.call(this,{opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:void 0===e.wrapX||e.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTile=function(t,e,i){var r=Sl(t,e,i);if(this.tileCache.containsKey(r))return this.tileCache.get(r);var n=ho(this.tileGrid.getTileSize(t)),o=[t,e,i],s=this.getTileCoordForTileUrlFunction(o),a=s?this.getTileCoordForTileUrlFunction(s).toString():"",h=new qp(o,n,a);return this.tileCache.set(r,h),h},e}(jl),Qp=function(t){function e(e){if(t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:Ee("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:ro.LOADING,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.tileJSON_=null,e.url)if(e.jsonp)Yu(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",e.url),i.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):Y(!1,51)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,i=Ee("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var n=Le(i,r);e=Ft(t.bounds,n)}var o=t.minzoom||0,s=t.maxzoom||22,a=Fl({extent:Gl(r),maxZoom:s,minZoom:o});if(this.tileGrid=a,this.tileUrlFunction=Du(t.tiles,a),void 0!==t.attribution&&!this.getAttributions()){var h=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return Pt(h,e.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState(ro.READY)},e.prototype.handleTileJSONError=function(){this.setState(ro.ERROR)},e}($u);function $p(t,e,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var n=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.tmpExtent_),s=ho(r.getTileSize(t[0]),this.tmpSize),a=this.gutter_;0!==a&&(s=so(s,a,this.tmpSize),o=et(o,n*a,o)),1!=e&&(s=ao(s,e,this.tmpSize));var h={SERVICE:"WMS",VERSION:xp,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return u(h,this.params_),this.getRequestUrl_(t,s,o,e,i,h)}}var tc=function(t){function e(e){var i=e||{},r=i.params||{},n=!("TRANSPARENT"in r)||r.TRANSPARENT;t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:!n,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,tileUrlFunction:$p,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition}),this.gutter_=void 0!==i.gutter?i.gutter:0,this.params_=r,this.v13_=!0,this.serverType_=i.serverType,this.hidpi_=void 0===i.hidpi||i.hidpi,this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.updateV13_(),this.setKey(this.getKeyForParams_())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getGetFeatureInfoUrl=function(t,e,i,r){var n=Ee(i),o=this.getProjection(),s=this.getTileGrid();s||(s=this.getTileGridForProjection(n));var a=s.getTileCoordForCoordAndResolution(t,e);if(!(s.getResolutions().length<=a[0])){var h=s.getResolution(a[0]),l=s.getTileCoordExtent(a,this.tmpExtent_),p=ho(s.getTileSize(a[0]),this.tmpSize),c=this.gutter_;0!==c&&(p=so(p,c,this.tmpSize),l=et(l,h*c,l)),o&&o!==n&&(h=Bu(o,n,t,h),l=be(l,n,o),t=Pe(t,n,o));var d={SERVICE:"WMS",VERSION:xp,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};u(d,this.params_,r);var f=Math.floor((t[0]-l[0])/h),_=Math.floor((l[3]-t[1])/h);return d[this.v13_?"I":"X"]=f,d[this.v13_?"J":"Y"]=_,this.getRequestUrl_(a,p,l,1,o||n,d)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,i,r,n,o){var s=this.urls;if(s){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=r)switch(this.serverType_){case Sp:var a=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+a:o.FORMAT_OPTIONS="dpi:"+a;break;case Tp:o.MAP_RESOLUTION=90*r;break;case Ep:case Cp:o.DPI=90*r;break;default:Y(!1,52)}var h,l,u=n.getAxisOrientation(),p=i;if(this.v13_&&"ne"==u.substr(0,2))h=i[0],p[0]=i[1],p[1]=h,h=i[2],p[2]=i[3],p[3]=h;if(o.BBOX=p.join(","),1==s.length)l=s[0];else l=s[Xt(Cl(t),s.length)];return _p(l,o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},e.prototype.updateParams=function(t){u(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||xp;this.v13_=Ki(t,"1.3")>=0},e}($u),ec=function(t){function e(e,i,r,n,o,s){t.call(this,e,i),this.src_=r,this.extent_=n,this.preemptive_=o,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),r=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof r)return null;var n=r.charCodeAt(Math.floor(e*r.length));n>=93&&n--,n>=35&&n--;var o=null;if((n-=32)in this.keys_){var s=this.keys_[n];o=this.data_&&s in this.data_?this.data_[s]:s}return o},e.prototype.forDataAtCoordinate=function(t,e,i,r){this.state==On.IDLE&&!0===r?(m(this,M.CHANGE,function(r){e.call(i,this.getData(t))},this),this.loadInternal_()):!0===r?setTimeout(function(){e.call(i,this.getData(t))}.bind(this),0):e.call(i,this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=On.ERROR,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=On.EMPTY,this.changed()},e.prototype.loadInternal_=function(){if(this.state==On.IDLE)if(this.state=On.LOADING,this.jsonp_)Yu(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_&&this.loadInternal_()},e}(vl),ic=function(t){function e(e){if(t.call(this,{projection:Ee("EPSG:3857"),state:ro.LOADING}),this.preemptive_=void 0===e.preemptive||e.preemptive,this.tileUrlFunction_=ju,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)Yu(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",e.url),i.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):Y(!1,51)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,i,r){if(this.tileGrid){var n=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(n[0],n[1],n[2],1,this.getProjection()).forDataAtCoordinate(t,i,null,r)}else!0===r?setTimeout(function(){i(null)},0):i(null)},e.prototype.handleTileJSONError=function(){this.setState(ro.ERROR)},e.prototype.handleTileJSONResponse=function(t){var e,i=Ee("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var n=Le(i,r);e=Ft(t.bounds,n)}var o=t.minzoom||0,s=t.maxzoom||22,a=Fl({extent:Gl(r),maxZoom:s,minZoom:o});this.tileGrid=a,this.template_=t.template;var h=t.grids;if(h){if(this.tileUrlFunction_=Du(h,a),void 0!==t.attribution){var l=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return Pt(l,e.extent)?[t.attribution]:null})}this.setState(ro.READY)}else this.setState(ro.ERROR)},e.prototype.getTile=function(t,e,i,r,n){var o=Sl(t,e,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,n),h=this.tileUrlFunction_(a,r,n),l=new ec(s,void 0!==h?On.IDLE:On.EMPTY,void 0!==h?h:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_);return this.tileCache.set(o,l),l},e.prototype.useTile=function(t,e,i){var r=Sl(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(jl),rc=function(t){function e(i,r,n,o,s,a,h,l,u,p,c,d,f,_,g){if(t.call(this,i,r,{transition:0}),this.context_={},this.loader_,this.replayState_={},this.sourceTiles_=p,this.tileKeys=[],this.extent=null,this.sourceRevision_=n,this.wrappedTileCoord=a,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],a){var y=this.extent=u.getTileCoordExtent(a),m=u.getResolution(g),x=l.getZForResolution(m),E=g!=i[0],S=0;if(l.forEachTileCoord(y,x,function(t){var e=wt(y,l.getTileCoordExtent(t)),i=l.getExtent();if(i&&(e=wt(e,i,e)),Ot(e)/m>=.5&&Rt(e)/m>=.5){++S;var r=t.toString(),n=p[r];if(!n&&!E){var a=h(t,c,d);n=p[r]=new f(t,void 0==a?On.EMPTY:On.IDLE,void 0==a?"":a,o,s),this.sourceTileListenerKeys_.push(v(n,M.CHANGE,_))}!n||E&&n.getState()!=On.LOADED||(n.consumers++,this.tileKeys.push(r))}}.bind(this)),E&&S==this.tileKeys.length&&this.finishLoading_(),g<=i[0]&&this.state!=On.LOADED)for(;g>u.getMinZoom();){var T=new e(i,r,n,o,s,a,h,l,u,p,c,d,f,I,--g);if(T.state==On.LOADED){this.interimTile=T;break}}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state=On.ABORT,this.changed(),this.interimTile&&this.interimTile.dispose();for(var e=0,i=this.tileKeys.length;e<i;++e){var r=this.tileKeys[e],n=this.getTile(r);n.consumers--,0==n.consumers&&(delete this.sourceTiles_[r],n.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(E),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(E),this.sourceTileListenerKeys_.length=0,t.prototype.disposeInternal.call(this)},e.prototype.getContext=function(t){var e=o(t);return e in this.context_||(this.context_[e]=Jn()),this.context_[e]},e.prototype.getImage=function(t){return-1==this.getReplayState(t).renderedTileRevision?null:this.getContext(t).canvas},e.prototype.getReplayState=function(t){var e=o(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[e]},e.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},e.prototype.getTile=function(t){return this.sourceTiles_[t]},e.prototype.load=function(){var t=0,e={};this.state==On.IDLE&&this.setState(On.LOADING),this.state==On.LOADING&&this.tileKeys.forEach(function(i){var r=this.getTile(i);if(r.state==On.IDLE&&(r.setLoader(this.loader_),r.load()),r.state==On.LOADING){var n=v(r,M.CHANGE,function(i){var n=r.getState();if(n==On.LOADED||n==On.ERROR){var s=o(r);n==On.ERROR?e[s]=!0:(--t,delete e[s]),t-Object.keys(e).length==0&&this.finishLoading_()}}.bind(this));this.loadListenerKeys_.push(n),++t}}.bind(this)),t-Object.keys(e).length==0&&setTimeout(this.finishLoading_.bind(this),0)},e.prototype.finishLoading_=function(){for(var t=this.tileKeys.length,e=0,i=t-1;i>=0;--i){var r=this.getTile(this.tileKeys[i]).getState();r!=On.LOADED&&--t,r==On.EMPTY&&++e}t==this.tileKeys.length?(this.loadListenerKeys_.forEach(E),this.loadListenerKeys_.length=0,this.setState(On.LOADED)):this.setState(e==this.tileKeys.length?On.EMPTY:On.ERROR)},e}(vl);function nc(t,e){var i=Zl(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(i)}var oc=[0,0,4096,4096],sc=function(t){function e(e,i,r,n,o,s){t.call(this,e,i,s),this.consumers=0,this.extent_=null,this.format_=n,this.features_=null,this.loader_,this.projection_=null,this.replayGroups_={},this.tileLoadFunction_=o,this.url_=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=On.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getExtent=function(){return this.extent_||oc},e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getReplayGroup=function(t,e){return this.replayGroups_[o(t)+","+e]},e.prototype.load=function(){this.state==On.IDLE&&(this.setState(On.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},e.prototype.onLoad=function(t,e,i){this.setProjection(e),this.setFeatures(t),this.setExtent(i)},e.prototype.onError=function(){this.setState(On.ERROR)},e.prototype.setExtent=function(t){this.extent_=t},e.prototype.setFeatures=function(t){this.features_=t,this.setState(On.LOADED)},e.prototype.setProjection=function(t){this.projection_=t},e.prototype.setReplayGroup=function(t,e,i){this.replayGroups_[o(t)+","+e]=i},e.prototype.setLoader=function(t){this.loader_=t},e}(vl),ac=function(t){function e(e){var i=e.projection||"EPSG:3857",r=e.extent||Gl(i),n=e.tileGrid||Fl({extent:r,maxZoom:e.maxZoom||22,minZoom:e.minZoom,tileSize:e.tileSize||512});t.call(this,{attributions:e.attributions,cacheSize:void 0!==e.cacheSize?e.cacheSize:128,opaque:!1,projection:i,state:e.state,tileGrid:n,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:nc,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.format_=e.format?e.format:null,this.sourceTiles_={},this.overlaps_=void 0==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:sc,this.tileGrids_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTiles_={}},e.prototype.getTile=function(t,e,i,r,n){var o=Sl(t,e,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,n),h=new rc(s,null!==a?On.IDLE:On.EMPTY,this.getRevision(),this.format_,this.tileLoadFunction,a,this.tileUrlFunction,this.tileGrid,this.getTileGridForProjection(n),this.sourceTiles_,r,n,this.tileClass,this.handleTileChange.bind(this),s[0]);return this.tileCache.set(o,h),h},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),i=this.tileGrids_[e];if(!i){var r=this.tileGrid;i=this.tileGrids_[e]=Nl(t,void 0,r?r.getTileSize(r.getMinZoom()):void 0)}return i},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,i){var r=ho(this.getTileGridForProjection(i).getTileSize(t),this.tmpSize);return[Math.round(r[0]*e),Math.round(r[1]*e)]},e}(Ju),hc={KVP:"KVP",REST:"REST"},lc=function(t){function e(e){var i=void 0!==e.requestEncoding?e.requestEncoding:hc.KVP,r=e.tileGrid,n=e.urls;void 0===n&&void 0!==e.url&&(n=Uu(e.url)),t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:ju,urls:n,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition}),this.version_=void 0!==e.version?e.version:"1.0.0",this.format_=void 0!==e.format?e.format:"image/jpeg",this.dimensions_=void 0!==e.dimensions?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=i,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=ku(n.map(uc.bind(this))))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(ku(t.map(uc.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")},e.prototype.updateDimensions=function(t){u(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}($u);function uc(t){var e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==hc.KVP&&u(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==hc.KVP?_p(t,i):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t});var r=this.tileGrid,n=this.dimensions_;return function(i,o,s){if(i){var a={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:-i[2]-1};u(a,n);var h=t;return h=e==hc.KVP?_p(h,a):h.replace(/\{(\w+?)\}/g,function(t,e){return a[e]})}}}var pc={DEFAULT:"default",TRUNCATED:"truncated"},cc=function(t){function e(e,i,r,n,o,s,a){t.call(this,i,r,n,o,s,a),this.zoomifyImage_=null,this.tileSize_=ho(e.getTileSize(i[0]))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=t.prototype.getImage.call(this);if(this.state==On.LOADED){var i=this.tileSize_;if(e.width==i[0]&&e.height==i[1])return this.zoomifyImage_=e,e;var r=Jn(i[0],i[1]);return r.drawImage(e,0,0),this.zoomifyImage_=r.canvas,r.canvas}return e},e}(xl),dc=function(t){function e(e){var i=e||{},r=i.size,n=void 0!==i.tierSizeCalculation?i.tierSizeCalculation:pc.DEFAULT,o=r[0],s=r[1],a=i.extent||[0,-r[1],r[0],0],h=[],l=i.tileSize||An,u=l;switch(n){case pc.DEFAULT:for(;o>u||s>u;)h.push([Math.ceil(o/u),Math.ceil(s/u)]),u+=u;break;case pc.TRUNCATED:for(var p=o,c=s;p>u||c>u;)h.push([Math.ceil(p/u),Math.ceil(c/u)]),p>>=1,c>>=1;break;default:Y(!1,53)}h.push([1,1]),h.reverse();for(var d=[1],f=[0],_=1,g=h.length;_<g;_++)d.push(1<<_),f.push(h[_-1][0]*h[_-1][1]+f[_-1]);d.reverse();var y=new Pl({tileSize:l,extent:a,origin:It(a),resolutions:d}),v=i.url;v&&-1==v.indexOf("{TileGroup}")&&-1==v.indexOf("{tileIndex}")&&(v+="{TileGroup}/{z}-{x}-{y}.jpg");var m=ku(Uu(v).map(function(t){return function(e,i,r){if(e){var n=e[0],o=e[1],s=-e[2]-1,a=o+s*h[n][0],l=y.getTileSize(n),u=Array.isArray(l)?l[0]:l,p={z:n,x:o,y:s,tileIndex:a,TileGroup:"TileGroup"+((a+f[n])/u|0)};return t.replace(/\{(\w+?)\}/g,function(t,e){return p[e]})}}})),x=cc.bind(null,y);t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:x,tileGrid:y,tileUrlFunction:m,transition:i.transition})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}($u);var fc="renderOrder",_c=function(t){function e(e){var i=e||{},r=u({},i);delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,t.call(this,r),this.declutter_=void 0!==i.declutter&&i.declutter,this.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(i.style),this.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,this.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,this.renderMode_=i.renderMode||Ts.VECTOR,this.type=Ss.VECTOR}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(fc)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(fc,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:Mu,this.styleFunction_=null===t?void 0:function(t){var e;if("function"==typeof t)e=t;else{var i;Array.isArray(t)?i=t:(Y("function"==typeof t.getZIndex,41),i=[t]),e=function(){return i}}return e}(this.style_),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(xo);_c.prototype.getSource;var gc=_c,yc={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},vc=["#00f","#0ff","#0f0","#ff0","#f00"];var mc=function(t){function e(e){var i=e||{},r=u({},i);delete r.gradient,delete r.radius,delete r.blur,delete r.shadow,delete r.weight,t.call(this,r),this.gradient_=null,this.shadow_=void 0!==i.shadow?i.shadow:250,this.circleImage_=void 0,this.styleCache_=null,v(this,G(yc.GRADIENT),this.handleGradientChanged_,this),this.setGradient(i.gradient?i.gradient:vc),this.setBlur(void 0!==i.blur?i.blur:15),this.setRadius(void 0!==i.radius?i.radius:8),v(this,G(yc.BLUR),this.handleStyleChanged_,this),v(this,G(yc.RADIUS),this.handleStyleChanged_,this),this.handleStyleChanged_();var n,o=i.weight?i.weight:"weight";n="string"==typeof o?function(t){return t.get(o)}:o,this.setStyle(function(t,e){var i=n(t),r=void 0!==i?kt(i,0,1):1,o=255*r|0,s=this.styleCache_[o];return s||(s=[new Nu({image:new Ou({opacity:r,src:this.circleImage_})})],this.styleCache_[o]=s),s}.bind(this)),this.setRenderOrder(null),v(this,ur.RENDER,this.handleRender_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createCircle_=function(){var t=this.getRadius(),e=this.getBlur(),i=t+e+1,r=2*i,n=Jn(r,r);n.shadowOffsetX=n.shadowOffsetY=this.shadow_,n.shadowBlur=e,n.shadowColor="#000",n.beginPath();var o=i-this.shadow_;return n.arc(o,o,t,0,2*Math.PI,!0),n.fill(),n.canvas.toDataURL()},e.prototype.getBlur=function(){return this.get(yc.BLUR)},e.prototype.getGradient=function(){return this.get(yc.GRADIENT)},e.prototype.getRadius=function(){return this.get(yc.RADIUS)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Jn(1,256),i=e.createLinearGradient(0,0,1,256),r=1/(t.length-1),n=0,o=t.length;n<o;++n)i.addColorStop(n*r,t[n]);return e.fillStyle=i,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}(this.getGradient())},e.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},e.prototype.handleRender_=function(t){for(var e=t.context,i=e.canvas,r=e.getImageData(0,0,i.width,i.height),n=r.data,o=0,s=n.length;o<s;o+=4){var a=4*n[o+3];a&&(n[o]=this.gradient_[a],n[o+1]=this.gradient_[a+1],n[o+2]=this.gradient_[a+2])}e.putImageData(r,0,0)},e.prototype.setBlur=function(t){this.set(yc.BLUR,t)},e.prototype.setGradient=function(t){this.set(yc.GRADIENT,t)},e.prototype.setRadius=function(t){this.set(yc.RADIUS,t)},e}(gc),xc=function(t){function e(e){var i=e||{},r=i.renderMode||Va.HYBRID;Y(void 0==r||r==Va.IMAGE||r==Va.HYBRID||r==Va.VECTOR,28),i.declutter&&r==Va.IMAGE&&(r=Va.HYBRID),i.renderMode=r;var n=u({},i);delete n.preload,delete n.useInterimTilesOnError,t.call(this,n),this.setPreload(i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=Ss.VECTOR_TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(Mp)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Fp)},e.prototype.setPreload=function(t){this.set(Mp,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Fp,t)},e}(gc);xc.prototype.getSource;var Ec=xc,Sc="addfeatures",Tc=function(t){function e(e,i,r,n){t.call(this,e),this.features=r,this.file=i,this.projection=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P);function Cc(t){for(var e=t.dataTransfer.files,i=0,r=e.length;i<r;++i){var n=e.item(i),o=new FileReader;o.addEventListener(M.LOAD,this.handleResult_.bind(this,n)),o.readAsText(n)}}function Rc(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var wc=function(t){function e(e){var i=e||{};t.call(this,{handleEvent:R}),this.formatConstructors_=i.formatConstructors?i.formatConstructors:[],this.projection_=i.projection?Ee(i.projection):null,this.dropListenKeys_=null,this.source_=i.source||null,this.target=i.target?i.target:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleResult_=function(t,e){var i=e.target.result,r=this.getMap(),n=this.projection_;n||(n=r.getView().getProjection());for(var o=this.formatConstructors_,s=[],a=0,h=o.length;a<h;++a){var l=new o[a];if((s=this.tryReadFeatures_(l,i,{featureProjection:n}))&&s.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(s)),this.dispatchEvent(new Tc(Sc,t,s,n))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[v(e,M.DROP,Cc,this),v(e,M.DRAGENTER,Rc,this),v(e,M.DRAGOVER,Rc,this),v(e,M.DROP,Rc,this)]}},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),e?this.registerListeners_():this.unregisterListeners_()},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,i){try{return t.readFeatures(e,i)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(E),this.dropListenKeys_=null)},e}(Fo),Ic=function(t){function e(e){var i=e||{};t.call(this,i),this.condition_=i.condition?i.condition:zo,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==i.duration?i.duration:400}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(Ko(t)){var e=t.map,i=e.getSize(),r=t.pixel,n=r[0]-i[0]/2,o=i[1]/2-r[1],s=Math.atan2(o,n),a=Math.sqrt(n*n+o*o),h=e.getView();if(h.getConstraints().rotation!==Gn&&void 0!==this.lastAngle_){var l=s-this.lastAngle_;Oo(h,h.getRotation()-l)}if(this.lastAngle_=s,void 0!==this.lastMagnitude_)Mo(h,this.lastMagnitude_*(h.getResolution()/a));void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/a),this.lastMagnitude_=a}},e.prototype.handleUpEvent=function(t){if(!Ko(t))return!0;var e=t.map.getView();e.setHint(jn,-1);var i=this.lastScaleDelta_-1;return Lo(e,e.getRotation()),Po(e,e.getResolution(),void 0,this.duration_,i),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!Ko(t)&&(!!this.condition_(t)&&(t.map.getView().setHint(jn,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},e}(qo),Lc=function(t){function e(e,i,r){if(t.call(this),void 0!==r&&void 0===i)this.setFlatCoordinates(r,e);else{var n=i||0;this.setCenterAndRadius(e,n,r)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,r){var n=this.flatCoordinates,o=t-n[0],s=e-n[1],a=o*o+s*s;if(a<r){if(0===a)for(var h=0;h<this.stride;++h)i[h]=n[h];else{var l=this.getRadius()/Math.sqrt(a);i[0]=n[0]+l*o,i[1]=n[1]+l*s;for(var u=2;u<this.stride;++u)i[u]=n[u]}return i.length=this.stride,a}return r},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,r=t-i[0],n=e-i[1];return r*r+n*n<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return lt(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return Nt.CIRCLE},e.prototype.intersectsExtent=function(t){if(Pt(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||mt(t,this.intersectsCoordinate,this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+i;for(var n=1;n<e;++n)r[e+n]=t[n];this.setFlatCoordinates(this.layout,r),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,n=ti(r,0,t,this.stride);r[n++]=r[0]+e;for(var o=1,s=this.stride;o<s;++o)r[n++]=r[o];r.length=n,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(We);Lc.prototype.transform;var Oc=Lc,Pc=function(t){function e(e,i,r){if(t.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,i);else if(void 0!==i&&r)this.setFlatCoordinates(i,e),this.ends_=r;else{for(var n=this.getLayout(),o=e,s=[],a=[],h=0,l=o.length;h<l;++h){var u=o[h];0===h&&(n=u.getLayout()),K(s,u.getFlatCoordinates()),a.push(s.length)}this.setFlatCoordinates(n,s),this.ends_=a}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLineString=function(t){this.flatCoordinates?K(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,r){return r<rt(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Je(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$e(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,r))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=At.XYM&&this.layout!=At.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,n=void 0!==i&&i;return function(t,e,i,r,n,o,s){if(s)return sr(t,e,i[i.length-1],r,n,o);var a;if(n<t[r-1])return o?((a=t.slice(0,r))[r-1]=n,a):null;if(t[t.length-1]<n)return o?((a=t.slice(t.length-r))[r-1]=n,a):null;for(var h=0,l=i.length;h<l;++h){var u=i[h];if(e!=u){if(n<t[e+r-1])return null;if(n<=t[u-1])return sr(t,e,u,r,n,!1);e=u}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,r,n)},e.prototype.getCoordinates=function(){return ni(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new hr(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,r=[],n=0,o=0,s=e.length;o<s;++o){var a=e[o],h=new hr(t.slice(n,a),i);r.push(h),n=a}return r},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,r=this.ends_,n=this.stride,o=0,s=r.length;o<s;++o){var a=r[o];K(t,or(e,i,a,n,.5)),i=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=ai(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,r),new e(i,At.XY,r)},e.prototype.getType=function(){return Nt.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){if(mi(t,e,i[o],r,n))return!0;e=i[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=ii(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(We),bc=function(t){function e(e,i){t.call(this),i&&!Array.isArray(e[0])?this.setFlatCoordinates(i,e):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPoint=function(t){this.flatCoordinates?K(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){if(r<rt(this.getExtent(),t,e))return r;for(var n=this.flatCoordinates,o=this.stride,s=0,a=n.length;s<a;s+=o){var h=Yt(t,e,n[s],n[s+1]);if(h<r){r=h;for(var l=0;l<o;++l)i[l]=n[s+l];i.length=o}}return r},e.prototype.getCoordinates=function(){return ri(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new ci(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,r=[],n=0,o=t.length;n<o;n+=i){var s=new ci(t.slice(n,n+i),e);r.push(s)}return r},e.prototype.getType=function(){return Nt.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,r=0,n=e.length;r<n;r+=i){if(st(t,e[r],e[r+1]))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ei(this.flatCoordinates,0,t,this.stride),this.changed()},e}(We);function Mc(t,e,i,r){for(var n=[],o=[1/0,1/0,-1/0,-1/0],s=0,a=i.length;s<a;++s){var h=i[s];o=ct(t,e,h[0],r),n.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=h[h.length-1]}return n}var Fc=function(t){function e(e,i,r){if(t.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var n=this.getLayout(),o=e,s=[],a=[],h=0,l=o.length;h<l;++h){var u=o[h];0===h&&(n=u.getLayout());for(var p=s.length,c=u.getEnds(),d=0,f=c.length;d<f;++d)c[d]+=p;K(s,u.getFlatCoordinates()),a.push(c)}i=n,e=s,r=a}void 0!==i&&r?(this.setFlatCoordinates(i,e),this.endss_=r):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;K(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,n=(e=t.getEnds().slice()).length;r<n;++r)e[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),r=0;r<t;++r)i[r]=this.endss_[r].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,r){return r<rt(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o];n=Je(t,e,a,r,n),e=a[a.length-1]}return n}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,r,n,o,s,a,h,l,u){for(var p=u||[NaN,NaN],c=0,d=i.length;c<d;++c){var f=i[c];l=$e(t,e,f,r,n,o,s,a,h,l,p),e=f[f.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))},e.prototype.containsXY=function(t,e){return function(t,e,i,r,n,o){if(0===i.length)return!1;for(var s=0,a=i.length;s<a;++s){var h=i[s];if(_i(t,e,h,r,n,o))return!0;e=h[h.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,i,r){for(var n=0,o=0,s=i.length;o<s;++o){var a=i[o];n+=He(t,e,a,r),e=a[a.length-1]}return n}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Ri(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,oi(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Mc(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=yi(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new bc(this.getFlatInteriorPoints().slice(),At.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o)if(!Ti(t,e,i[o],r,n))return!1;return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ri(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=function(t,e,i,r,n,o,s,a){for(var h=0,l=i.length;h<l;++h){var u=i[h],p=[];s=ui(t,e,u,r,n,o,s,p),a.push(p),e=u[u.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,r),new e(i,At.XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var r=this.endss_[t].slice(),n=r[r.length-1];if(0!==e)for(var o=0,s=r.length;o<s;++o)r[o]-=e;return new Ii(this.flatCoordinates.slice(e,n),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[],n=0,o=0,s=i.length;o<s;++o){var a=i[o].slice(),h=a[a.length-1];if(0!==n)for(var l=0,u=a.length;l<u;++l)a[l]-=n;var p=new Ii(e.slice(n,h),t,a);r.push(p),n=h}return r},e.prototype.getType=function(){return Nt.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o];if(xi(t,e,a,r,n))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=function(t,e,i,r,n){for(var o=n||[],s=0,a=0,h=i.length;a<h;++a){var l=ii(t,e,i[a],r,o[s]);o[s++]=l,e=l[l.length-1]}return o.length=s,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(We),Ac={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},Nc="drawstart",Gc="drawend",Dc=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P);var kc=function(t){function e(e){var i=e;i.stopDown||(i.stopDown=w),t.call(this,i),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(t){var e;t===Nt.POINT||t===Nt.MULTI_POINT?e=Ac.POINT:t===Nt.LINE_STRING||t===Nt.MULTI_LINE_STRING?e=Ac.LINE_STRING:t===Nt.POLYGON||t===Nt.MULTI_POLYGON?e=Ac.POLYGON:t===Nt.CIRCLE&&(e=Ac.CIRCLE);return e}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===Ac.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:R;var r=e.geometryFunction;if(!r)if(this.type_===Nt.CIRCLE)r=function(t,e){var i=e||new Oc([NaN,NaN]),r=er(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(r)),i};else{var n,o=this.mode_;o===Ac.POINT?n=ci:o===Ac.LINE_STRING?n=hr:o===Ac.POLYGON&&(n=Ii),r=function(t,e){var i=e;return i?o===Ac.POLYGON?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new n(t),i}}this.geometryFunction_=r,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new gc({source:new op({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:function(){var t=Fu();return function(e,i){return t[e.getGeometry().getType()]}}(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Xo,this.freehandCondition_,e.freehand?this.freehandCondition_=jo:this.freehandCondition_=e.freehandCondition?e.freehandCondition:zo,v(this,G(Io.ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===M.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==Ac.POINT&&this.freehandCondition_(e);var i=e.type===Ar.POINTERMOVE,r=!0;!this.freehand_&&this.lastDragTime_&&e.type===Ar.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===Ar.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),r=!1):this.freehand_&&e.type===Ar.POINTERDOWN?r=!1:i?(r=e.type===Ar.POINTERMOVE)&&this.freehand_?r=this.handlePointerMove_(e):(e.pointerEvent.pointerType==Ur||e.type===Ar.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===Ar.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,e)&&r},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Nr(Ar.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===Ac.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===Ac.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,r=e[0]-i[0],n=e[1]-i[1],o=r*r+n*n;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_];if(this.mode_===Ac.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===Ac.POLYGON){var n=this.sketchCoords_;i=n[0].length>this.minPoints_,r=[n[0][0],n[0][n[0].length-2]]}if(i)for(var o=t.map,s=0,a=r.length;s<a;s++){var h=r[s],l=o.getPixelFromCoordinate(h),u=t.pixel,p=u[0]-l[0],c=u[1]-l[1],d=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(p*p+c*c)<=d){this.finishCoordinate_=h;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new B(new ci(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===Ac.POINT?this.sketchCoords_=e.slice():this.mode_===Ac.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new B(new hr(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new B,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new Dc(Nc,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,r,n=t.coordinate,o=this.sketchFeature_.getGeometry();(this.mode_===Ac.POINT?i=this.sketchCoords_:this.mode_===Ac.POLYGON?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(n=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=n[0],i[1]=n[1],this.geometryFunction_(this.sketchCoords_,o),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(n);if(o.getType()==Nt.POLYGON&&this.mode_!==Ac.POLYGON){this.sketchLine_||(this.sketchLine_=new B);var s=o.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),r.changed()):(r=new hr(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,r=t.coordinate,n=this.sketchFeature_.getGeometry();this.mode_===Ac.LINE_STRING?(this.finishCoordinate_=r.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(r.slice()),this.geometryFunction_(i,n)):this.mode_===Ac.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(r.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,n)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===Ac.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===Ac.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===Ac.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===Ac.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===Nt.MULTI_POINT?t.setGeometry(new bc([e])):this.type_===Nt.MULTI_LINE_STRING?t.setGeometry(new Pc([e])):this.type_===Nt.MULTI_POLYGON&&t.setGeometry(new Fc([e])),this.dispatchEvent(new Dc(Gc,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new Dc(Nc,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(qo),jc={EXTENTCHANGED:"extentchanged"},Uc=function(t){function e(e){t.call(this,jc.EXTENTCHANGED),this.extent=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P);function Yc(t){return function(e){return tt([t,e])}}function Bc(t,e){return t[0]==e[0]?function(i){return tt([t,[i[0],e[1]]])}:t[1]==e[1]?function(i){return tt([t,[e[0],i[1]]])}:null}var Vc=function(t){function e(e){var i=e||{};t.call(this,i),this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),this.extentOverlay_=new gc({source:new op({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:function(){var t=Fu();return function(e,i){return t[Nt.POLYGON]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new gc({source:new op({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:function(){var t=Fu();return function(e,i){return t[Nt.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapToVertex_=function(t,e){var i=e.getCoordinateFromPixel(t),r=this.getExtent();if(r){var n=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);n.sort(function(t,e){return rr(i,t)-rr(i,e)});var o=n[0],s=Zi(i,o),a=e.getPixelFromCoordinate(s);if(ir(t,a)<=this.pixelTolerance_){var h=e.getPixelFromCoordinate(o[0]),l=e.getPixelFromCoordinate(o[1]),u=er(a,h),p=er(a,l),c=Math.sqrt(Math.min(u,p));return this.snappedToVertex_=c<=this.pixelTolerance_,this.snappedToVertex_&&(s=u>p?o[1]:o[0]),s}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,i=t.map,r=this.snapToVertex_(e,i);r||(r=i.getCoordinateFromPixel(e)),this.createOrUpdatePointerFeature_(r)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(Oi(t)):e.setGeometry(void 0):(e=new B(t?Oi(t):{}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new B(new ci(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=Ar.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,i=t.map,r=this.getExtent(),n=this.snapToVertex_(e,i),o=function(t){var e=null,i=null;return t[0]==r[0]?e=r[2]:t[0]==r[2]&&(e=r[0]),t[1]==r[1]?i=r[3]:t[1]==r[3]&&(i=r[1]),null!==e&&null!==i?[e,i]:null};if(n&&r){var s=n[0]==r[0]||n[0]==r[2]?n[0]:null,a=n[1]==r[1]||n[1]==r[3]?n[1]:null;null!==s&&null!==a?this.pointerHandler_=Yc(o(n)):null!==s?this.pointerHandler_=Bc(o([s,r[1]]),o([s,r[3]])):null!==a&&(this.pointerHandler_=Bc(o([r[0],a]),o([r[2],a])))}else n=i.getCoordinateFromPixel(e),this.setExtent([n[0],n[1],n[0],n[1]]),this.pointerHandler_=Yc(n);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtent();return e&&0!==xt(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new Uc(this.extent_))},e}(qo),Xc=1,zc="modifystart",Wc="modifyend",Kc=function(t){function e(e,i,r){t.call(this,e),this.features=i,this.mapBrowserEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P);function Hc(t,e){return t.index-e.index}function Zc(t,e){var i=e.geometry;if(i.getType()===Nt.CIRCLE){var r=i;if(e.index===Xc){var n=er(r.getCenter(),t),o=Math.sqrt(n)-r.getRadius();return o*o}}return rr(t,e.segment)}function qc(t,e){var i=e.geometry;return i.getType()===Nt.CIRCLE&&e.index===Xc?i.getClosestPoint(t):Zi(t,e.segment)}var Jc=function(t){function e(e){var i;if(t.call(this,e),this.condition_=e.condition?e.condition:Ho,this.defaultDeleteCondition_=function(t){return Go(t)&&Vo(t)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:jo,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new tl,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new gc({source:new op({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:function(){var t=Fu();return function(e,i){return t[Nt.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,i=new U(this.source_.getFeatures()),v(this.source_,rp.ADDFEATURE,this.handleSourceAdd_,this),v(this.source_,rp.REMOVEFEATURE,this.handleSourceRemove_,this)):i=e.features,!i)throw new Error("The modify interaction requires features or a source");this.features_=i,this.features_.forEach(this.addFeature_.bind(this)),v(this.features_,h.ADD,this.handleFeatureAdd_,this),v(this.features_,h.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),v(t,M.CHANGE,this.handleFeatureChange_,this)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new Kc(zc,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),x(t,M.CHANGE,this.handleFeatureChange_,this)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach(function(e){t===e.feature&&i.push(e)});for(var r=i.length-1;r>=0;--r)e.remove(i[r])},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),r={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),r)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r){var o=i[r],s={feature:t,geometry:e,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length-1;r<n;++r){var o=i.slice(r,r+2),s={feature:t,geometry:e,index:r,segment:o};this.rBush_.insert(tt(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),l={feature:t,geometry:e,depth:[r],index:s,segment:h};this.rBush_.insert(tt(h),l)}},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),l={feature:t,geometry:e,depth:[r],index:s,segment:h};this.rBush_.insert(tt(h),l)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length;s<a;++s)for(var h=o[s],l=0,u=h.length-1;l<u;++l){var p=h.slice(l,l+2),c={feature:t,geometry:e,depth:[s,r],index:l,segment:p};this.rBush_.insert(tt(p),c)}},e.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),r={feature:t,geometry:e,index:0,segment:[i,i]},n={feature:t,geometry:e,index:Xc,segment:[i,i]},o=[r,n];r.featureSegments=n.featureSegments=o,this.rBush_.insert(pt(i),r),this.rBush_.insert(e.getExtent(),n)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),r=0;r<i.length;++r)this.SEGMENT_WRITERS_[i[r].getType()].call(this,t,i[r])},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new B(new ci(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=Ar.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(i=!(e.type!=Ar.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==Ar.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!i);var i},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,r=this.dragSegments_.length;i<r;++i){for(var n=this.dragSegments_[i],o=n[0],s=o.depth,a=o.geometry,h=void 0,l=o.segment,u=n[1];e.length<a.getStride();)e.push(l[u][e.length]);switch(a.getType()){case Nt.POINT:h=e,l[0]=l[1]=e;break;case Nt.MULTI_POINT:(h=a.getCoordinates())[o.index]=e,l[0]=l[1]=e;break;case Nt.LINE_STRING:(h=a.getCoordinates())[o.index+u]=e,l[u]=e;break;case Nt.MULTI_LINE_STRING:case Nt.POLYGON:(h=a.getCoordinates())[s[0]][o.index+u]=e,l[u]=e;break;case Nt.MULTI_POLYGON:(h=a.getCoordinates())[s[1]][s[0]][o.index+u]=e,l[u]=e;break;case Nt.CIRCLE:l[0]=l[1]=e,0===o.index?(this.changingFeature_=!0,a.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,a.setRadius(ir(a.getCenter(),e)),this.changingFeature_=!1)}h&&this.setGeometryCoordinates_(a,h)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var r=[],n=i.getGeometry().getCoordinates(),s=tt([n]),a=this.rBush_.getInExtent(s),h={};a.sort(Hc);for(var l=0,u=a.length;l<u;++l){var p=a[l],c=p.segment,d=o(p.feature),f=p.depth;if(f&&(d+="-"+f.join("-")),h[d]||(h[d]=new Array(2)),p.geometry.getType()===Nt.CIRCLE&&p.index===Xc)Qi(qc(e,p),n)&&!h[d][0]&&(this.dragSegments_.push([p,0]),h[d][0]=p);else if(Qi(c[0],n)&&!h[d][0])this.dragSegments_.push([p,0]),h[d][0]=p;else if(Qi(c[1],n)&&!h[d][1]){if((p.geometry.getType()===Nt.LINE_STRING||p.geometry.getType()===Nt.MULTI_LINE_STRING)&&h[d][0]&&0===h[d][0].index)continue;this.dragSegments_.push([p,1]),h[d][1]=p}else this.insertVertexCondition_(t)&&o(c)in this.vertexSegments_&&!h[d][0]&&!h[d][1]&&r.push([p,n])}r.length&&this.willModifyFeatures_(t);for(var _=r.length-1;_>=0;--_)this.insertVertex_.apply(this,r[_])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var i=this.dragSegments_[e][0],r=i.geometry;if(r.getType()===Nt.CIRCLE){var n=r.getCenter(),o=i.featureSegments[0],s=i.featureSegments[1];o.segment[0]=o.segment[1]=n,s.segment[0]=s.segment[1]=n,this.rBush_.update(pt(n),o),this.rBush_.update(r.getExtent(),s)}else this.rBush_.update(tt(i.segment),i)}return this.modified_&&(this.dispatchEvent(new Kc(Wc,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},e.prototype.handlePointerAtPixel_=function(t,e){var i=e.getCoordinateFromPixel(t),r=et(pt(i),e.getView().getResolution()*this.pixelTolerance_),n=this.rBush_.getInExtent(r);if(n.length>0){n.sort(function(t,e){return Zc(i,t)-Zc(i,e)});var s=n[0],a=s.segment,h=qc(i,s),l=e.getPixelFromCoordinate(h),u=ir(t,l);if(u<=this.pixelTolerance_){var p={};if(s.geometry.getType()===Nt.CIRCLE&&s.index===Xc)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h);else{var c=e.getPixelFromCoordinate(a[0]),d=e.getPixelFromCoordinate(a[1]),f=er(l,c),_=er(l,d);u=Math.sqrt(Math.min(f,_)),this.snappedToVertex_=u<=this.pixelTolerance_,this.snappedToVertex_&&(h=f>_?a[1]:a[0]),this.createOrUpdateVertexFeature_(h);for(var g=1,y=n.length;g<y;++g){var v=n[g].segment;if(!(Qi(a[0],v[0])&&Qi(a[1],v[1])||Qi(a[0],v[1])&&Qi(a[1],v[0])))break;p[o(v)]=!0}}return p[o(a)]=!0,void(this.vertexSegments_=p)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var i,r=t.segment,n=t.feature,o=t.geometry,s=t.depth,a=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case Nt.MULTI_LINE_STRING:case Nt.POLYGON:(i=o.getCoordinates())[s[0]].splice(a+1,0,e);break;case Nt.MULTI_POLYGON:(i=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case Nt.LINE_STRING:(i=o.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(o,i);var h=this.rBush_;h.remove(t),this.updateSegmentIndices_(o,a,s,1);var l={segment:[r[0],e],feature:n,geometry:o,depth:s,index:a};h.insert(tt(l.segment),l),this.dragSegments_.push([l,1]);var u={segment:[e,r[1]],feature:n,geometry:o,depth:s,index:a+1};h.insert(tt(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Ar.POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new Kc(Wc,this.features_,t)),this.modified_=!1,!0}return!1},e.prototype.removeVertex_=function(){var t,e,i,r,n,s,a,h,l,u,p,c=this.dragSegments_,d={},f=!1;for(n=c.length-1;n>=0;--n)p=o((u=(i=c[n])[0]).feature),u.depth&&(p+="-"+u.depth.join("-")),p in d||(d[p]={}),0===i[1]?(d[p].right=u,d[p].index=u.index):1==i[1]&&(d[p].left=u,d[p].index=u.index+1);for(p in d){switch(l=d[p].right,a=d[p].left,h=(s=d[p].index)-1,u=void 0!==a?a:l,h<0&&(h=0),t=e=(r=u.geometry).getCoordinates(),f=!1,r.getType()){case Nt.MULTI_LINE_STRING:e[u.depth[0]].length>2&&(e[u.depth[0]].splice(s,1),f=!0);break;case Nt.LINE_STRING:e.length>2&&(e.splice(s,1),f=!0);break;case Nt.MULTI_POLYGON:t=t[u.depth[1]];case Nt.POLYGON:(t=t[u.depth[0]]).length>4&&(s==t.length-1&&(s=0),t.splice(s,1),f=!0,0===s&&(t.pop(),t.push(t[0]),h=t.length-1))}if(f){this.setGeometryCoordinates_(r,e);var _=[];if(void 0!==a&&(this.rBush_.remove(a),_.push(a.segment[0])),void 0!==l&&(this.rBush_.remove(l),_.push(l.segment[1])),void 0!==a&&void 0!==l){var g={depth:u.depth,feature:u.feature,geometry:u.geometry,index:h,segment:_};this.rBush_.insert(tt(g.segment),g)}this.updateSegmentIndices_(r,s,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),c.length=0}}return f},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,i,r){this.rBush_.forEachInExtent(t.getExtent(),function(n){n.geometry===t&&(void 0===i||void 0===n.depth||Z(n.depth,i))&&n.index>e&&(n.index+=r)})},e}(qo),Qc={SELECT:"select"},$c=function(t){function e(e,i,r,n){t.call(this,e),this.selected=i,this.deselected=r,this.mapBrowserEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P);function td(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),r=this.toggleCondition_(t),n=!e&&!i&&!r,o=t.map,s=this.getFeatures(),a=[],h=[];if(n){p(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return h.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var l=s.getLength()-1;l>=0;--l){var u=s.item(l),c=h.indexOf(u);c>-1?h.splice(c,1):(s.remove(u),a.push(u))}0!==h.length&&s.extend(h)}else{o.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.filter_(t,n))return!e&&!r||X(s.getArray(),t)?(i||r)&&X(s.getArray(),t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(h.push(t),this.addFeatureLayerAssociation_(t,n)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var d=a.length-1;d>=0;--d)s.remove(a[d]);s.extend(h)}return(h.length>0||a.length>0)&&this.dispatchEvent(new $c(Qc.SELECT,h,a,t)),Bo(t)}var ed=function(t){function e(e){t.call(this,{handleEvent:td});var i=e||{};this.condition_=i.condition?i.condition:Vo,this.addCondition_=i.addCondition?i.addCondition:Yo,this.removeCondition_=i.removeCondition?i.removeCondition:Yo,this.toggleCondition_=i.toggleCondition?i.toggleCondition:zo,this.multi_=!!i.multi&&i.multi,this.filter_=i.filter?i.filter:R,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0;var r,n=new gc({source:new op({useSpatialIndex:!1,features:i.features,wrapX:i.wrapX}),style:i.style?i.style:function(){var t=Fu();return K(t[Nt.POLYGON],t[Nt.LINE_STRING]),K(t[Nt.GEOMETRY_COLLECTION],t[Nt.LINE_STRING]),function(e,i){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=n,i.layers)if("function"==typeof i.layers)r=i.layers;else{var o=i.layers;r=function(t){return X(o,t)}}else r=R;this.layerFilter_=r,this.featureLayerAssociation_={};var s=this.getFeatures();v(s,h.ADD,this.addFeature_,this),v(s,h.REMOVE,this.removeFeature_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[o(t)]=e},e.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[o(t)]},e.prototype.getOverlay=function(){return this.featureOverlay_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap(),r=this.getFeatures();i&&r.forEach(i.unskipFeature.bind(i)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&r.forEach(e.skipFeature.bind(e))},e.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},e.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[o(t)]},e}(Fo);function id(t){return t.feature?t.feature:t.element?t.element:void 0}var rd=function(t){function e(e){var i=e||{},r=i;r.handleDownEvent||(r.handleDownEvent=R),r.stopDown||(r.stopDown=w),t.call(this,r),this.source_=i.source?i.source:null,this.vertex_=void 0===i.vertex||i.vertex,this.edge_=void 0===i.edge||i.edge,this.features_=i.features?i.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,this.sortByDistance_=function(t,e){var i=rr(this.pixelCoordinate_,t.segment),r=rr(this.pixelCoordinate_,e.segment);return i-r}.bind(this),this.rBush_=new tl,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t,e){var i=void 0===e||e,r=o(t),n=t.getGeometry();if(n){var s=this.SEGMENT_WRITERS_[n.getType()];s&&(this.indexedFeaturesExtents_[r]=n.getExtent([1/0,1/0,-1/0,-1/0]),s.call(this,t,n))}i&&(this.featureChangeListenerKeys_[r]=v(t,M.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var i=this.snapTo(e.pixel,e.coordinate,e.map);return i.snapped&&(e.coordinate=i.vertex.slice(0,2),e.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=id(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=id(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var i=o(e);i in this.pendingFeatures_||(this.pendingFeatures_[i]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=c(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var i=void 0===e||e,r=o(t),n=this.indexedFeaturesExtents_[r];if(n){var s=this.rBush_,a=[];s.forEachInExtent(n,function(e){t===e.feature&&a.push(e)});for(var h=a.length-1;h>=0;--h)s.remove(a[h])}i&&(E(this.featureChangeListenerKeys_[r]),delete this.featureChangeListenerKeys_[r])},e.prototype.setMap=function(e){var i=this.getMap(),r=this.featuresListenerKeys_,n=this.getFeatures_();i&&(r.forEach(E),r.length=0,n.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?r.push(v(this.features_,h.ADD,this.handleFeatureAdd_,this),v(this.features_,h.REMOVE,this.handleFeatureRemove_,this)):this.source_&&r.push(v(this.source_,rp.ADDFEATURE,this.handleFeatureAdd_,this),v(this.source_,rp.REMOVEFEATURE,this.handleFeatureRemove_,this)),n.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,i){var r=tt([i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_])]),n=this.rBush_.getInExtent(r);this.vertex_&&!this.edge_&&(n=n.filter(function(t){return t.feature.getGeometry().getType()!==Nt.CIRCLE}));var o,s,a,h,l=!1,u=null,p=null;if(n.length>0){this.pixelCoordinate_=e,n.sort(this.sortByDistance_);var c=n[0].segment,d=n[0].feature.getGeometry().getType()===Nt.CIRCLE;this.vertex_&&!this.edge_?(o=i.getPixelFromCoordinate(c[0]),s=i.getPixelFromCoordinate(c[1]),a=er(t,o),h=er(t,s),Math.sqrt(Math.min(a,h))<=this.pixelTolerance_&&(l=!0,u=a>h?c[1]:c[0],p=i.getPixelFromCoordinate(u))):this.edge_&&(u=d?function(t,e){var i=e.getRadius(),r=e.getCenter(),n=r[0],o=r[1],s=t[0]-n,a=t[1]-o;0===s&&0===a&&(s=1);var h=Math.sqrt(s*s+a*a);return[n+i*s/h,o+i*a/h]}(e,n[0].feature.getGeometry()):Zi(e,c),ir(t,p=i.getPixelFromCoordinate(u))<=this.pixelTolerance_&&(l=!0,this.vertex_&&!d&&(o=i.getPixelFromCoordinate(c[0]),s=i.getPixelFromCoordinate(c[1]),a=er(p,o),h=er(p,s),Math.sqrt(Math.min(a,h))<=this.pixelTolerance_&&(u=a>h?c[1]:c[0],p=i.getPixelFromCoordinate(u))))),l&&(p=[Math.round(p[0]),Math.round(p[1])])}return{snapped:l,vertex:u,vertexPixel:p}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){for(var i=Pi(e).getCoordinates()[0],r=0,n=i.length-1;r<n;++r){var o=i.slice(r,r+2),s={feature:t,segment:o};this.rBush_.insert(tt(o),s)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),r=0;r<i.length;++r){var n=this.SEGMENT_WRITERS_[i[r].getType()];n&&n.call(this,t,i[r])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length-1;r<n;++r){var o=i.slice(r,r+2),s={feature:t,segment:o};this.rBush_.insert(tt(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),l={feature:t,segment:h};this.rBush_.insert(tt(h),l)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r){var o=i[r],s={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length;s<a;++s)for(var h=o[s],l=0,u=h.length-1;l<u;++l){var p=h.slice(l,l+2),c={feature:t,segment:p};this.rBush_.insert(tt(p),c)}},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),r={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),r)},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),l={feature:t,segment:h};this.rBush_.insert(tt(h),l)}},e}(qo),nd="translatestart",od="translating",sd="translateend",ad=function(t){function e(e,i,r){t.call(this,e),this.features=i,this.coordinate=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P),hd=function(t){function e(e){var i,r=e||{};if(t.call(this,r),this.lastCoordinate_=null,this.features_=void 0!==r.features?r.features:null,r.layers)if("function"==typeof r.layers)i=r.layers;else{var n=r.layers;i=function(t){return X(n,t)}}else i=R;this.layerFilter_=i,this.hitTolerance_=r.hitTolerance?r.hitTolerance:0,this.lastFeature_=null,v(this,G(Io.ACTIVE),this.handleActiveChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new U([this.lastFeature_]);return this.dispatchEvent(new ad(nd,e,t.coordinate)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new U([this.lastFeature_]);return this.dispatchEvent(new ad(sd,e,t.coordinate)),!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,i=e[0]-this.lastCoordinate_[0],r=e[1]-this.lastCoordinate_[1],n=this.features_||new U([this.lastFeature_]);n.forEach(function(t){var e=t.getGeometry();e.translate(i,r),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new ad(od,n,e))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||X(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(i)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),i=this.getActive();e&&i||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(qo);function ld(t){for(var e=[],i=0,r=t.length;i<r;++i)e.push(t[i].clone());return e}var ud=function(t){function e(e){t.call(this),this.geometries_=e||null,this.listenGeometriesChange_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)x(this.geometries_[t],M.CHANGE,this.changed,this)},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)v(this.geometries_[t],M.CHANGE,this.changed,this)},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,r){if(r<rt(this.getExtent(),t,e))return r;for(var n=this.geometries_,o=0,s=n.length;o<s;++o)r=n[o].closestPointXY(t,e,i,r);return r},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)if(i[r].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){ut(t);for(var e=this.geometries_,i=0,r=e.length;i<r;++i)ft(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return ld(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(p(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(i))return this.simplifiedGeometryCache[i];for(var r=[],n=this.geometries_,o=!1,s=0,a=n.length;s<a;++s){var h=n[s],l=h.getSimplifiedGeometry(t);r.push(l),l!==h&&(o=!0)}if(o){var u=new e(null);return u.setGeometriesArray(r),this.simplifiedGeometryCache[i]=u,u}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return Nt.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,r=e.length;i<r;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)i[r].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var r=i;r||(r=Tt(this.getExtent()));for(var n=this.geometries_,o=0,s=n.length;o<s;++o)n[o].scale(t,e,r);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(ld(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,r=e.length;i<r;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)i[r].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(Xe),pd=function(){this.dataProjection=null,this.defaultFeatureProjection=null};pd.prototype.getReadOptions=function(t,e){var i;return e&&(i={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(i)},pd.prototype.adaptOptions=function(t){return u({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},pd.prototype.getLastExtent=function(){return null},pd.prototype.getType=function(){return r()},pd.prototype.readFeature=function(t,e){return r()},pd.prototype.readFeatures=function(t,e){return r()},pd.prototype.readGeometry=function(t,e){return r()},pd.prototype.readProjection=function(t){return r()},pd.prototype.writeFeature=function(t,e){return r()},pd.prototype.writeFeatures=function(t,e){return r()},pd.prototype.writeGeometry=function(t,e){return r()};var cd=pd;function dd(t,e,i){var r,n=i?Ee(i.featureProjection):null,o=i?Ee(i.dataProjection):null;if(r=n&&o&&!Ie(n,o)?Array.isArray(t)?be(t,o,n):(e?t.clone():t).transform(e?n:o,e?o:n):t,e&&i&&void 0!==i.decimals&&!Array.isArray(r)){var s=Math.pow(10,i.decimals);r===t&&(r=t.clone()),r.applyTransform(function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*s)/s;return t})}return r}function fd(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var _d=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return Hl.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(fd(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(fd(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return r()},e.prototype.readFeaturesFromObject=function(t,e){return r()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(fd(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return r()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(fd(t))},e.prototype.readProjectionFromObject=function(t){return r()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return r()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return r()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return r()},e}(cd),gd={};gd[Nt.POINT]=function(t){var e;e=void 0!==t.m&&void 0!==t.z?new ci([t.x,t.y,t.z,t.m],At.XYZM):void 0!==t.z?new ci([t.x,t.y,t.z],At.XYZ):void 0!==t.m?new ci([t.x,t.y,t.m],At.XYM):new ci([t.x,t.y]);return e},gd[Nt.LINE_STRING]=function(t){var e=md(t);return new hr(t.paths[0],e)},gd[Nt.POLYGON]=function(t){var e=md(t);return new Ii(t.rings,e)},gd[Nt.MULTI_POINT]=function(t){var e=md(t);return new bc(t.points,e)},gd[Nt.MULTI_LINE_STRING]=function(t){var e=md(t);return new Pc(t.paths,e)},gd[Nt.MULTI_POLYGON]=function(t){var e=md(t);return new Fc(t.rings,e)};var yd={};function vd(t,e){if(!t)return null;var i;if("number"==typeof t.x&&"number"==typeof t.y)i=Nt.POINT;else if(t.points)i=Nt.MULTI_POINT;else if(t.paths){i=1===t.paths.length?Nt.LINE_STRING:Nt.MULTI_LINE_STRING}else if(t.rings){var r=t,n=md(r),o=function(t,e){var i,r,n=[],o=[],s=[];for(i=0,r=t.length;i<r;++i){n.length=0,ei(n,0,t[i],e.length);var a=Si(n,0,n.length,e.length);a?o.push([t[i]]):s.push(t[i])}for(;s.length;){var h=s.shift(),l=!1;for(i=o.length-1;i>=0;i--){var u=o[i][0],p=ot(new pi(u).getExtent(),new pi(h).getExtent());if(p){o[i].push(h),l=!0;break}}l||o.push([h.reverse()])}return o}(r.rings,n);1===o.length?(i=Nt.POLYGON,t.rings=o[0]):(i=Nt.MULTI_POLYGON,t.rings=o)}return dd((0,gd[i])(t),!1,e)}function md(t){var e=At.XY;return!0===t.hasZ&&!0===t.hasM?e=At.XYZM:!0===t.hasZ?e=At.XYZ:!0===t.hasM&&(e=At.XYM),e}function xd(t){var e=t.getLayout();return{hasZ:e===At.XYZ||e===At.XYZM,hasM:e===At.XYM||e===At.XYZM}}function Ed(t,e){return(0,yd[t.getType()])(dd(t,!0,e),e)}yd[Nt.POINT]=function(t,e){var i,r=t.getCoordinates(),n=t.getLayout();n===At.XYZ?i={x:r[0],y:r[1],z:r[2]}:n===At.XYM?i={x:r[0],y:r[1],m:r[2]}:n===At.XYZM?i={x:r[0],y:r[1],z:r[2],m:r[3]}:n===At.XY?i={x:r[0],y:r[1]}:Y(!1,34);return i},yd[Nt.LINE_STRING]=function(t,e){var i=t,r=xd(i);return{hasZ:r.hasZ,hasM:r.hasM,paths:[i.getCoordinates()]}},yd[Nt.POLYGON]=function(t,e){var i=t,r=xd(i);return{hasZ:r.hasZ,hasM:r.hasM,rings:i.getCoordinates(!1)}},yd[Nt.MULTI_POINT]=function(t,e){var i=t,r=xd(i);return{hasZ:r.hasZ,hasM:r.hasM,points:i.getCoordinates()}},yd[Nt.MULTI_LINE_STRING]=function(t,e){var i=t,r=xd(i);return{hasZ:r.hasZ,hasM:r.hasM,paths:i.getCoordinates()}},yd[Nt.MULTI_POLYGON]=function(t,e){for(var i=xd(t),r=t.getCoordinates(!1),n=[],o=0;o<r.length;o++)for(var s=r[o].length-1;s>=0;s--)n.push(r[o][s]);return{hasZ:i.hasZ,hasM:i.hasM,rings:n}};var Sd=function(t){function e(e){var i=e||{};t.call(this),this.geometryName_=i.geometryName}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromObject=function(t,e){var i=t,r=vd(i.geometry,e),n=new B;return this.geometryName_&&n.setGeometryName(this.geometryName_),n.setGeometry(r),e&&e.idField&&i.attributes[e.idField]&&n.setId(i.attributes[e.idField]),i.attributes&&n.setProperties(i.attributes),n},e.prototype.readFeaturesFromObject=function(t,e){var i=e||{};if(t.features){var r=[],n=t.features;i.idField=t.objectIdFieldName;for(var o=0,s=n.length;o<s;++o)r.push(this.readFeatureFromObject(n[o],i));return r}return[this.readFeatureFromObject(t,i)]},e.prototype.readGeometryFromObject=function(t,e){return vd(t,e)},e.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?Ee("EPSG:"+t.spatialReference.wkid):null},e.prototype.writeGeometryObject=function(t,e){return Ed(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={},r=t.getGeometry();r&&(i.geometry=Ed(r,e),e&&e.featureProjection&&(i.geometry.spatialReference={wkid:Number(Ee(e.featureProjection).getCode().split(":").pop())}));var n=t.getProperties();return delete n[t.getGeometryName()],d(n)?i.attributes={}:i.attributes=n,i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],r=0,n=t.length;r<n;++r)i.push(this.writeFeatureObject(t[r],e));return{features:i}},e}(_d),Td=function(t){function e(){t.call(this),this.xmlSerializer_=new XMLSerializer}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return Hl.XML},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var i=ru(t);return this.readFeatureFromDocument(i,e)}return iu(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var i=this.readFeaturesFromDocument(t,e);return i.length>0?i[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var i=ru(t);return this.readFeaturesFromDocument(i,e)}return iu(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var i=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&K(i,this.readFeaturesFromNode(r,e));return i},e.prototype.readFeaturesFromNode=function(t,e){return r()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var i=ru(t);return this.readGeometryFromDocument(i,e)}return iu(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=ru(t);return this.readProjectionFromDocument(e)}return iu(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeGeometryNode=function(t,e){return null},e}(cd),Cd="http://www.opengis.net/gml",Rd=/^[\s\xa0]*$/,wd=function(t){function e(e){t.call(this);var i=e||{};this.featureType=i.featureType,this.featureNS=i.featureNS,this.srsName=i.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:ou(this.readFeaturesInternal),featureMembers:su(this.readFeaturesInternal)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeaturesInternal=function(t,e){var i=t.localName,r=null;if("FeatureCollection"==i)r=gu([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==i||"featureMember"==i){var n=e[0],o=n.featureType,s=n.featureNS;if(!o&&t.childNodes){o=[],s={};for(var a=0,h=t.childNodes.length;a<h;++a){var l=t.childNodes[a];if(1===l.nodeType){var u=l.nodeName.split(":").pop();if(-1===o.indexOf(u)){var p="",c=0,d=l.namespaceURI;for(var f in s){if(s[f]===d){p=f;break}++c}p||(s[p="p"+c]=d),o.push(p+":"+u)}}}"featureMember"!=i&&(n.featureType=o,n.featureNS=s)}if("string"==typeof s){var _=s;(s={}).p0=_}var g={},y=Array.isArray(o)?o:[o];for(var v in s){for(var m={},x=0,E=y.length;x<E;++x){(-1===y[x].indexOf(":")?"p0":y[x].split(":")[0])===v&&(m[y[x].split(":").pop()]="featureMembers"==i?ou(this.readFeatureElement,this):su(this.readFeatureElement,this))}g[s[v]]=m}r=gu("featureMember"==i?void 0:[],g,t,e)}return null===r&&(r=[]),r},e.prototype.readGeometryElement=function(t,e){var i=e[0];i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension");var r=gu(null,this.GEOMETRY_PARSERS,t,e,this);return r?dd(r,!1,i):void 0},e.prototype.readFeatureElementInternal=function(t,e,i){for(var r,n={},o=t.firstElementChild;o;o=o.nextElementSibling){var s=void 0,a=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(s=eu(o,!1),Rd.test(s)&&(s=void 0)):(i&&(s=this.readGeometryElement(o,e)),s?"boundedBy"!==a&&(r=a):s=this.readFeatureElementInternal(o,e,!1)),n[a]?(n[a]instanceof Array||(n[a]=[n[a]]),n[a].push(s)):n[a]=s;var h=o.attributes.length;if(h>0){n[a]={_content_:n[a]};for(var l=0;l<h;l++){var u=o.attributes[l].name;n[a][u]=o.attributes[l].value}}}if(i){var p=new B(n);r&&p.setGeometryName(r);var c=t.getAttribute("fid")||function(t,e,i){return t.getAttributeNS(e,i)||""}(t,this.namespace,"id");return c&&p.setId(c),p}return n},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i)return new ci(i,At.XYZ)},e.prototype.readMultiPoint=function(t,e){var i=gu([],this.MULTIPOINT_PARSERS_,t,e,this);return i?new bc(i):void 0},e.prototype.readMultiLineString=function(t,e){var i=gu([],this.MULTILINESTRING_PARSERS_,t,e,this);if(i)return new Pc(i)},e.prototype.readMultiPolygon=function(t,e){var i=gu([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(i)return new Fc(i)},e.prototype.pointMemberParser_=function(t,e){_u(this.POINTMEMBER_PARSERS_,t,e,this)},e.prototype.lineStringMemberParser_=function(t,e){_u(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},e.prototype.polygonMemberParser_=function(t,e){_u(this.POLYGONMEMBER_PARSERS_,t,e,this)},e.prototype.readLineString=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);return i?new hr(i,At.XYZ):void 0},e.prototype.readFlatLinearRing_=function(t,e){var i=gu(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);return i||void 0},e.prototype.readLinearRing=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i)return new pi(i,At.XYZ)},e.prototype.readPolygon=function(t,e){var i=gu([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(i&&i[0]){var r,n,o=i[0],s=[o.length];for(r=1,n=i.length;r<n;++r)K(o,i[r]),s.push(o.length);return new Ii(o,At.XYZ,s)}},e.prototype.readFlatCoordinatesFromNode_=function(t,e){return gu(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){var i=this.readGeometryElement(t,[this.getReadOptions(t,e||{})]);return i||null},e.prototype.readFeaturesFromNode=function(t,e){var i={featureType:this.featureType,featureNS:this.featureNS};return e&&u(i,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[i])||[]},e.prototype.readProjectionFromNode=function(t){return Ee(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(Td);wd.prototype.namespace=Cd,wd.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},wd.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},wd.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},wd.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:ou(wd.prototype.pointMemberParser_),pointMembers:ou(wd.prototype.pointMemberParser_)}},wd.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:ou(wd.prototype.lineStringMemberParser_),lineStringMembers:ou(wd.prototype.lineStringMemberParser_)}},wd.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:ou(wd.prototype.polygonMemberParser_),polygonMembers:ou(wd.prototype.polygonMemberParser_)}},wd.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:ou(wd.prototype.readFlatCoordinatesFromNode_)}},wd.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:ou(wd.prototype.readLineString)}},wd.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:ou(wd.prototype.readPolygon)}},wd.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:su(wd.prototype.readFlatLinearRing_)}};var Id=wd;function Ld(t){return Od(eu(t,!1))}function Od(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function Pd(t){var e=eu(t,!1),i=Date.parse(e);return isNaN(i)?void 0:i/1e3}function bd(t){return Md(eu(t,!1))}function Md(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function Fd(t){return Ad(eu(t,!1))}function Ad(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function Nd(t){return eu(t,!1).trim()}function Gd(t,e){jd(t,e?"1":"0")}function Dd(t,e){var i=e.toPrecision();t.appendChild(Ql.createTextNode(i))}function kd(t,e){var i=e.toString();t.appendChild(Ql.createTextNode(i))}function jd(t,e){t.appendChild(Ql.createTextNode(e))}var Ud=Cd+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",Yd={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Bd=function(t){function e(e){var i=e||{};t.call(this,i),this.surface_=void 0!==i.surface&&i.surface,this.curve_=void 0!==i.curve&&i.curve,this.multiCurve_=void 0===i.multiCurve||i.multiCurve,this.multiSurface_=void 0===i.multiSurface||i.multiSurface,this.schemaLocation=i.schemaLocation?i.schemaLocation:Ud,this.hasZ=void 0!==i.hasZ&&i.hasZ}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readMultiCurve_=function(t,e){var i=gu([],this.MULTICURVE_PARSERS_,t,e,this);return i?new Pc(i):void 0},e.prototype.readMultiSurface_=function(t,e){var i=gu([],this.MULTISURFACE_PARSERS_,t,e,this);if(i)return new Fc(i)},e.prototype.curveMemberParser_=function(t,e){_u(this.CURVEMEMBER_PARSERS_,t,e,this)},e.prototype.surfaceMemberParser_=function(t,e){_u(this.SURFACEMEMBER_PARSERS_,t,e,this)},e.prototype.readPatch_=function(t,e){return gu([null],this.PATCHES_PARSERS_,t,e,this)},e.prototype.readSegment_=function(t,e){return gu([null],this.SEGMENTS_PARSERS_,t,e,this)},e.prototype.readPolygonPatch_=function(t,e){return gu([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment_=function(t,e){return gu([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser_=function(t,e){var i=gu(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)},e.prototype.exteriorParser_=function(t,e){var i=gu(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)},e.prototype.readSurface_=function(t,e){var i=gu([null],this.SURFACE_PARSERS_,t,e,this);if(i&&i[0]){var r,n,o=i[0],s=[o.length];for(r=1,n=i.length;r<n;++r)K(o,i[r]),s.push(o.length);return new Ii(o,At.XYZ,s)}},e.prototype.readCurve_=function(t,e){var i=gu([null],this.CURVE_PARSERS_,t,e,this);return i?new hr(i,At.XYZ):void 0},e.prototype.readEnvelope_=function(t,e){var i=gu([null],this.ENVELOPE_PARSERS_,t,e,this);return lt(i[1][0],i[1][1],i[2][0],i[2][1])},e.prototype.readFlatPos_=function(t,e){for(var i,r=eu(t,!1),n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];i=n.exec(r);)o.push(parseFloat(i[1])),r=r.substr(i[0].length);if(""===r){var s,a,h=e[0].srsName,l="enu";if(h)l=Ee(h).getAxisOrientation();if("neu"===l)for(s=0,a=o.length;s<a;s+=3){var u=o[s],p=o[s+1];o[s]=p,o[s+1]=u}var c=o.length;if(2==c&&o.push(0),0!==c)return o}},e.prototype.readFlatPosList_=function(t,e){var i=eu(t,!1).replace(/^\s*|\s*$/g,""),r=e[0],n=r.srsName,o=r.srsDimension,s="enu";n&&(s=Ee(n).getAxisOrientation());var a,h,l,u=i.split(/\s+/),p=2;t.getAttribute("srsDimension")?p=Ad(t.getAttribute("srsDimension")):t.getAttribute("dimension")?p=Ad(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?p=Ad(t.parentNode.getAttribute("srsDimension")):o&&(p=Ad(o));for(var c=[],d=0,f=u.length;d<f;d+=p)a=parseFloat(u[d]),h=parseFloat(u[d+1]),l=3===p?parseFloat(u[d+2]):0,"en"===s.substr(0,2)?c.push(a,h,l):c.push(h,a,l);return c},e.prototype.writePos_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=n?"3":"2";t.setAttribute("srsDimension",o);var s=r.srsName,a="enu";s&&(a=Ee(s).getAxisOrientation());var h,l=e.getCoordinates();(h="en"===a.substr(0,2)?l[0]+" "+l[1]:l[1]+" "+l[0],n)&&(h+=" "+(l[2]||0));jd(t,h)},e.prototype.getCoords_=function(t,e,i){var r="enu";e&&(r=Ee(e).getAxisOrientation());var n="en"===r.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];i&&(n+=" "+(t[2]||0));return n},e.prototype.writePosList_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=n?"3":"2";t.setAttribute("srsDimension",o);for(var s,a=r.srsName,h=e.getCoordinates(),l=h.length,u=new Array(l),p=0;p<l;++p)s=h[p],u[p]=this.getCoords_(s,a,n);jd(t,u.join(" "))},e.prototype.writePoint_=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=tu(t.namespaceURI,"pos");t.appendChild(n),this.writePos_(n,e,i)},e.prototype.writeEnvelope=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=[e[0]+" "+e[1],e[2]+" "+e[3]];vu({node:t},this.ENVELOPE_SERIALIZERS_,cu,n,i,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing_=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=tu(t.namespaceURI,"posList");t.appendChild(n),this.writePosList_(n,e,i)},e.prototype.RING_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1],n=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),tu(n.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=e.getLinearRings();vu({node:t,hasZ:n,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,s,i,void 0,this)}else if("Surface"===t.nodeName){var a=tu(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,i)}},e.prototype.writeCurveOrLineString_=function(t,e,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var n=tu(t.namespaceURI,"posList");t.appendChild(n),this.writePosList_(n,e,i)}else if("Curve"===t.nodeName){var o=tu(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,i)}},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var a=e.getPolygons();vu({node:t,hasZ:n,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},e.prototype.writeMultiPoint_=function(t,e,i){var r=i[i.length-1],n=r.srsName,o=r.hasZ;n&&t.setAttribute("srsName",n);var s=e.getPoints();vu({node:t,hasZ:o,srsName:n},this.POINTMEMBER_SERIALIZERS_,pu("pointMember"),s,i,void 0,this)},e.prototype.writeMultiCurveOrLineString_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var a=e.getLineStrings();vu({node:t,hasZ:n,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},e.prototype.writeRing_=function(t,e,i){var r=tu(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing_(r,e,i)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i))},e.prototype.writePointMember_=function(t,e,i){var r=tu(t.namespaceURI,"Point");t.appendChild(r),this.writePoint_(r,e,i)},e.prototype.writeLineStringOrCurveMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeCurveOrLineString_(r,e,i))},e.prototype.writeSurfacePatches_=function(t,e,i){var r=tu(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i)},e.prototype.writeCurveSegments_=function(t,e,i){var r=tu(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString_(r,e,i)},e.prototype.writeGeometryElement=function(t,e,i){var r,n=i[i.length-1],o=u({},n);o.node=t,r=Array.isArray(e)?n.dataProjection?be(e,n.featureProjection,n.dataProjection):e:dd(e,!0,n),vu(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[r],i,void 0,this)},e.prototype.writeFeatureElement=function(t,e,i){var r=e.getId();r&&t.setAttribute("fid",r);var n=i[i.length-1],o=n.featureNS,s=e.getGeometryName();n.serializers||(n.serializers={},n.serializers[o]={});var a=e.getProperties(),h=[],l=[];for(var p in a){var c=a[p];null!==c&&(h.push(p),l.push(c),p==s||"function"==typeof c.getSimplifiedGeometry?p in n.serializers[o]||(n.serializers[o][p]=lu(this.writeGeometryElement,this)):p in n.serializers[o]||(n.serializers[o][p]=lu(jd)))}var d=u({},n);d.node=t,vu(d,n.serializers,pu(void 0,o),l,i,h)},e.prototype.writeFeatureMembers_=function(t,e,i){var r=i[i.length-1],n=r.featureType,o=r.featureNS,s={};s[o]={},s[o][n]=lu(this.writeFeatureElement,this);var a=u({},r);a.node=t,vu(a,s,pu(n,o),e,i)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1].node;return tu(this.namespace,Yd[r.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var r,n=e[e.length-1],o=n.multiSurface,s=n.surface,a=n.curve,h=n.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"LineString"===r&&!0===a?r="Curve":"MultiLineString"===r&&!0===h&&(r="MultiCurve"),tu(this.namespace,r)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var i=tu(this.namespace,"geom"),r={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&u(r,e),this.writeGeometryElement(i,t,[r]),i},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=tu(this.namespace,"featureMembers");i.setAttributeNS($l,"xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&u(r,e),this.writeFeatureMembers_(i,t,[r]),i},e}(Id);Bd.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:su(Bd.prototype.readFlatPos_),posList:su(Bd.prototype.readFlatPosList_)}},Bd.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Bd.prototype.interiorParser_,exterior:Bd.prototype.exteriorParser_}},Bd.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:su(Id.prototype.readPoint),MultiPoint:su(Id.prototype.readMultiPoint),LineString:su(Id.prototype.readLineString),MultiLineString:su(Id.prototype.readMultiLineString),LinearRing:su(Id.prototype.readLinearRing),Polygon:su(Id.prototype.readPolygon),MultiPolygon:su(Id.prototype.readMultiPolygon),Surface:su(Bd.prototype.readSurface_),MultiSurface:su(Bd.prototype.readMultiSurface_),Curve:su(Bd.prototype.readCurve_),MultiCurve:su(Bd.prototype.readMultiCurve_),Envelope:su(Bd.prototype.readEnvelope_)}},Bd.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:ou(Bd.prototype.curveMemberParser_),curveMembers:ou(Bd.prototype.curveMemberParser_)}},Bd.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:ou(Bd.prototype.surfaceMemberParser_),surfaceMembers:ou(Bd.prototype.surfaceMemberParser_)}},Bd.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:ou(Id.prototype.readLineString),Curve:ou(Bd.prototype.readCurve_)}},Bd.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:ou(Id.prototype.readPolygon),Surface:ou(Bd.prototype.readSurface_)}},Bd.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:su(Bd.prototype.readPatch_)}},Bd.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:su(Bd.prototype.readSegment_)}},Bd.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:ou(Bd.prototype.readFlatPosList_),upperCorner:ou(Bd.prototype.readFlatPosList_)}},Bd.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:su(Bd.prototype.readPolygonPatch_)}},Bd.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:su(Bd.prototype.readLineStringSegment_)}},Bd.prototype.writeFeatures,Bd.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:lu(Bd.prototype.writeRing_),interior:lu(Bd.prototype.writeRing_)}},Bd.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:lu(jd),upperCorner:lu(jd)}},Bd.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:lu(Bd.prototype.writeSurfaceOrPolygonMember_),polygonMember:lu(Bd.prototype.writeSurfaceOrPolygonMember_)}},Bd.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:lu(Bd.prototype.writePointMember_)}},Bd.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:lu(Bd.prototype.writeLineStringOrCurveMember_),curveMember:lu(Bd.prototype.writeLineStringOrCurveMember_)}},Bd.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:lu(Bd.prototype.writeCurveOrLineString_),MultiCurve:lu(Bd.prototype.writeMultiCurveOrLineString_),Point:lu(Bd.prototype.writePoint_),MultiPoint:lu(Bd.prototype.writeMultiPoint_),LineString:lu(Bd.prototype.writeCurveOrLineString_),MultiLineString:lu(Bd.prototype.writeMultiCurveOrLineString_),LinearRing:lu(Bd.prototype.writeLinearRing_),Polygon:lu(Bd.prototype.writeSurfaceOrPolygon_),MultiPolygon:lu(Bd.prototype.writeMultiSurfaceOrPolygon_),Surface:lu(Bd.prototype.writeSurfaceOrPolygon_),MultiSurface:lu(Bd.prototype.writeMultiSurfaceOrPolygon_),Envelope:lu(Bd.prototype.writeEnvelope)}};var Vd=Bd,Xd=Vd;Xd.prototype.writeFeatures,Xd.prototype.writeFeaturesNode;var zd=Xd,Wd=Cd+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",Kd={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Hd=function(t){function e(e){var i=e||{};t.call(this,i),this.FEATURE_COLLECTION_PARSERS[Cd].featureMember=ou(this.readFeaturesInternal),this.schemaLocation=i.schemaLocation?i.schemaLocation:Wd}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFlatCoordinates_=function(t,e){var i=eu(t,!1).replace(/^\s*|\s*$/g,""),r=e[0].srsName,n="enu";if(r){var o=Ee(r);o&&(n=o.getAxisOrientation())}for(var s=i.trim().split(/\s+/),a=[],h=0,l=s.length;h<l;h++){var u=s[h].split(/,+/),p=parseFloat(u[0]),c=parseFloat(u[1]),d=3===u.length?parseFloat(u[2]):0;"en"===n.substr(0,2)?a.push(p,c,d):a.push(c,p,d)}return a},e.prototype.readBox_=function(t,e){var i=gu([null],this.BOX_PARSERS_,t,e,this);return lt(i[1][0],i[1][1],i[1][3],i[1][4])},e.prototype.innerBoundaryIsParser_=function(t,e){var i=gu(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)},e.prototype.outerBoundaryIsParser_=function(t,e){var i=gu(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var r,n=e[e.length-1],o=n.multiSurface,s=n.surface,a=n.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"MultiLineString"===r&&!0===a&&(r="MultiCurve"),tu("http://www.opengis.net/gml",r)},e.prototype.writeFeatureElement=function(t,e,i){var r=e.getId();r&&t.setAttribute("fid",r);var n=i[i.length-1],o=n.featureNS,s=e.getGeometryName();n.serializers||(n.serializers={},n.serializers[o]={});var a=e.getProperties(),h=[],l=[];for(var p in a){var c=a[p];null!==c&&(h.push(p),l.push(c),p==s||"function"==typeof c.getSimplifiedGeometry?p in n.serializers[o]||(n.serializers[o][p]=lu(this.writeGeometryElement,this)):p in n.serializers[o]||(n.serializers[o][p]=lu(jd)))}var d=u({},n);d.node=t,vu(d,n.serializers,pu(void 0,o),l,i,h)},e.prototype.writeCurveOrLineString_=function(t,e,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var n=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(n),this.writeCoordinates_(n,e,i)}else if("Curve"===t.nodeName){var o=tu(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,i)}},e.prototype.writeLineStringOrCurveMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeCurveOrLineString_(r,e,i))},e.prototype.writeMultiCurveOrLineString_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var a=e.getLineStrings();vu({node:t,hasZ:n,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},e.prototype.writeGeometryElement=function(t,e,i){var r,n=i[i.length-1],o=u({},n);o.node=t,r=Array.isArray(e)?n.dataProjection?be(e,n.featureProjection,n.dataProjection):e:dd(e,!0,n),vu(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[r],i,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=tu(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,i){for(var r=i[i.length-1],n=r.hasZ,o=r.srsName,s=e.getCoordinates(),a=s.length,h=new Array(a),l=0;l<a;++l){var u=s[l];h[l]=this.getCoords_(u,o,n)}jd(t,h.join(" "))},e.prototype.writeCurveSegments_=function(t,e,i){var r=tu(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString_(r,e,i)},e.prototype.writeSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=e.getLinearRings();vu({node:t,hasZ:n,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,s,i,void 0,this)}else if("Surface"===t.nodeName){var a=tu(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,i)}},e.prototype.RING_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1],n=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),tu(n.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,i){var r=tu(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i)},e.prototype.writeRing_=function(t,e,i){var r=tu(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing_(r,e,i)},e.prototype.getCoords_=function(t,e,i){var r="enu";e&&(r=Ee(e).getAxisOrientation());var n="en"===r.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];i&&(n+=","+(t[2]||0));return n},e.prototype.writePoint_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s);var a=e.getCoordinates();jd(s,this.getCoords_(a,o,n))},e.prototype.writeMultiPoint_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=e.getPoints();vu({node:t,hasZ:n,srsName:o},this.POINTMEMBER_SERIALIZERS_,pu("pointMember"),s,i,void 0,this)},e.prototype.writePointMember_=function(t,e,i){var r=tu(t.namespaceURI,"Point");t.appendChild(r),this.writePoint_(r,e,i)},e.prototype.writeLinearRing_=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(n),this.writeCoordinates_(n,e,i)},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var a=e.getPolygons();vu({node:t,hasZ:n,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i))},e.prototype.writeEnvelope=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=[e[0]+" "+e[1],e[2]+" "+e[3]];vu({node:t},this.ENVELOPE_SERIALIZERS_,cu,n,i,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1].node;return tu("http://www.opengis.net/gml",Kd[r.nodeName])},e}(Id);Hd.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:su(Hd.prototype.readFlatCoordinates_)}},Hd.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:Hd.prototype.innerBoundaryIsParser_,outerBoundaryIs:Hd.prototype.outerBoundaryIsParser_}},Hd.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:ou(Hd.prototype.readFlatCoordinates_)}},Hd.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:su(Id.prototype.readPoint),MultiPoint:su(Id.prototype.readMultiPoint),LineString:su(Id.prototype.readLineString),MultiLineString:su(Id.prototype.readMultiLineString),LinearRing:su(Id.prototype.readLinearRing),Polygon:su(Id.prototype.readPolygon),MultiPolygon:su(Id.prototype.readMultiPolygon),Box:su(Hd.prototype.readBox_)}},Hd.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:lu(Hd.prototype.writeCurveOrLineString_),MultiCurve:lu(Hd.prototype.writeMultiCurveOrLineString_),Point:lu(Hd.prototype.writePoint_),MultiPoint:lu(Hd.prototype.writeMultiPoint_),LineString:lu(Hd.prototype.writeCurveOrLineString_),MultiLineString:lu(Hd.prototype.writeMultiCurveOrLineString_),LinearRing:lu(Hd.prototype.writeLinearRing_),Polygon:lu(Hd.prototype.writeSurfaceOrPolygon_),MultiPolygon:lu(Hd.prototype.writeMultiSurfaceOrPolygon_),Surface:lu(Hd.prototype.writeSurfaceOrPolygon_),MultiSurface:lu(Hd.prototype.writeMultiSurfaceOrPolygon_),Envelope:lu(Hd.prototype.writeEnvelope)}},Hd.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:lu(Hd.prototype.writeLineStringOrCurveMember_),curveMember:lu(Hd.prototype.writeLineStringOrCurveMember_)}},Hd.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:lu(Hd.prototype.writeRing_),innerBoundaryIs:lu(Hd.prototype.writeRing_)}},Hd.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:lu(Hd.prototype.writePointMember_)}},Hd.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:lu(Hd.prototype.writeSurfaceOrPolygonMember_),polygonMember:lu(Hd.prototype.writeSurfaceOrPolygonMember_)}},Hd.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:lu(jd),upperCorner:lu(jd)}};var Zd=Hd,qd=function(t){function e(e){var i=e||{};t.call(this,i),this.schemaLocation=i.schemaLocation?i.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Vd);qd.prototype.namespace="http://www.opengis.net/gml/3.2",qd.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:su(Vd.prototype.readFlatPos_),posList:su(Vd.prototype.readFlatPosList_)}},qd.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:Vd.prototype.interiorParser_,exterior:Vd.prototype.exteriorParser_}},qd.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:su(Id.prototype.readPoint),MultiPoint:su(Id.prototype.readMultiPoint),LineString:su(Id.prototype.readLineString),MultiLineString:su(Id.prototype.readMultiLineString),LinearRing:su(Id.prototype.readLinearRing),Polygon:su(Id.prototype.readPolygon),MultiPolygon:su(Id.prototype.readMultiPolygon),Surface:su(qd.prototype.readSurface_),MultiSurface:su(Vd.prototype.readMultiSurface_),Curve:su(qd.prototype.readCurve_),MultiCurve:su(Vd.prototype.readMultiCurve_),Envelope:su(qd.prototype.readEnvelope_)}},qd.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{curveMember:ou(Vd.prototype.curveMemberParser_),curveMembers:ou(Vd.prototype.curveMemberParser_)}},qd.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:ou(Vd.prototype.surfaceMemberParser_),surfaceMembers:ou(Vd.prototype.surfaceMemberParser_)}},qd.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:ou(Id.prototype.readLineString),Curve:ou(Vd.prototype.readCurve_)}},qd.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:ou(Id.prototype.readPolygon),Surface:ou(Vd.prototype.readSurface_)}},qd.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{patches:su(Vd.prototype.readPatch_)}},qd.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{segments:su(Vd.prototype.readSegment_)}},qd.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:ou(Vd.prototype.readFlatPosList_),upperCorner:ou(Vd.prototype.readFlatPosList_)}},qd.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml/3.2":{PolygonPatch:su(Vd.prototype.readPolygonPatch_)}},qd.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml/3.2":{LineStringSegment:su(Vd.prototype.readLineStringSegment_)}},qd.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml/3.2":{pointMember:ou(Id.prototype.pointMemberParser_),pointMembers:ou(Id.prototype.pointMemberParser_)}},qd.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:ou(Id.prototype.lineStringMemberParser_),lineStringMembers:ou(Id.prototype.lineStringMemberParser_)}},qd.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml/3.2":{polygonMember:ou(Id.prototype.polygonMemberParser_),polygonMembers:ou(Id.prototype.polygonMemberParser_)}},qd.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Point:ou(Id.prototype.readFlatCoordinatesFromNode_)}},qd.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:ou(Id.prototype.readLineString)}},qd.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:ou(Id.prototype.readPolygon)}},qd.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:su(Id.prototype.readFlatLinearRing_)}},qd.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{exterior:lu(Vd.prototype.writeRing_),interior:lu(Vd.prototype.writeRing_)}},qd.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:lu(jd),upperCorner:lu(jd)}},qd.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:lu(Vd.prototype.writeSurfaceOrPolygonMember_),polygonMember:lu(Vd.prototype.writeSurfaceOrPolygonMember_)}},qd.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{pointMember:lu(Vd.prototype.writePointMember_)}},qd.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:lu(Vd.prototype.writeLineStringOrCurveMember_),curveMember:lu(Vd.prototype.writeLineStringOrCurveMember_)}},qd.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{Curve:lu(Vd.prototype.writeCurveOrLineString_),MultiCurve:lu(Vd.prototype.writeMultiCurveOrLineString_),Point:lu(qd.prototype.writePoint_),MultiPoint:lu(Vd.prototype.writeMultiPoint_),LineString:lu(Vd.prototype.writeCurveOrLineString_),MultiLineString:lu(Vd.prototype.writeMultiCurveOrLineString_),LinearRing:lu(Vd.prototype.writeLinearRing_),Polygon:lu(Vd.prototype.writeSurfaceOrPolygon_),MultiPolygon:lu(Vd.prototype.writeMultiSurfaceOrPolygon_),Surface:lu(Vd.prototype.writeSurfaceOrPolygon_),MultiSurface:lu(Vd.prototype.writeMultiSurfaceOrPolygon_),Envelope:lu(Vd.prototype.writeEnvelope)}};var Jd=qd,Qd=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],$d={rte:Lf,trk:Of,wpt:Pf},tf=fu(Qd,{rte:ou(Lf),trk:ou(Of),wpt:ou(Pf)}),ef=fu(Qd,{text:hu(Nd,"linkText"),type:hu(Nd,"linkType")}),rf=fu(Qd,{rte:lu(function(t,e,i){var r=i[0],n=e.getProperties(),o={node:t};o.properties=n;var s=e.getGeometry();if(s.getType()==Nt.LINE_STRING){var a=dd(s,!0,r);o.geometryLayout=a.getLayout(),n.rtept=a.getCoordinates()}var h=i[i.length-1].node,l=df[h.namespaceURI],u=du(n,l);vu(o,ff,cu,u,i,l)}),trk:lu(function(t,e,i){var r=i[0],n=e.getProperties(),o={node:t};o.properties=n;var s=e.getGeometry();if(s.getType()==Nt.MULTI_LINE_STRING){var a=dd(s,!0,r);n.trkseg=a.getLineStrings()}var h=i[i.length-1].node,l=gf[h.namespaceURI],u=du(n,l);vu(o,yf,cu,u,i,l)}),wpt:lu(function(t,e,i){var r=i[0],n=i[i.length-1];n.properties=e.getProperties();var o=e.getGeometry();if(o.getType()==Nt.POINT){var s=dd(o,!0,r);n.geometryLayout=s.getLayout(),Mf(t,s.getCoordinates(),i)}})}),nf=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=Ee("EPSG:4326"),this.readExtensions_=i.readExtensions}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,i=t.length;e<i;++e){var r=t[e];if(this.readExtensions_){var n=r.get("extensionsNode_")||null;this.readExtensions_(r,n)}r.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!X(Qd,t.namespaceURI))return null;var i=$d[t.localName];if(!i)return null;var r=i(t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_([r]),r):null},e.prototype.readFeaturesFromNode=function(t,e){if(!X(Qd,t.namespaceURI))return[];if("gpx"==t.localName){var i=gu([],tf,t,[this.getReadOptions(t,e)]);return i?(this.handleReadExtensions_(i),i):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=tu("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",$l),i.setAttributeNS($l,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),vu({node:i},rf,Tf,t,[e]),i},e}(Td),of=fu(Qd,{name:hu(Nd),cmt:hu(Nd),desc:hu(Nd),src:hu(Nd),link:wf,number:hu(Fd),extensions:If,type:hu(Nd),rtept:function(t,e){var i=gu({},sf,t,e);if(i){var r=e[e.length-1],n=r.flatCoordinates,o=r.layoutOptions;Cf(n,o,t,i)}}}),sf=fu(Qd,{ele:hu(bd),time:hu(Pd)}),af=fu(Qd,{name:hu(Nd),cmt:hu(Nd),desc:hu(Nd),src:hu(Nd),link:wf,number:hu(Fd),type:hu(Nd),extensions:If,trkseg:function(t,e){var i=e[e.length-1];_u(hf,t,e);var r=i.flatCoordinates;i.ends.push(r.length)}}),hf=fu(Qd,{trkpt:function(t,e){var i=gu({},lf,t,e);if(i){var r=e[e.length-1],n=r.flatCoordinates,o=r.layoutOptions;Cf(n,o,t,i)}}}),lf=fu(Qd,{ele:hu(bd),time:hu(Pd)}),uf=fu(Qd,{ele:hu(bd),time:hu(Pd),magvar:hu(bd),geoidheight:hu(bd),name:hu(Nd),cmt:hu(Nd),desc:hu(Nd),src:hu(Nd),link:wf,sym:hu(Nd),type:hu(Nd),fix:hu(Nd),sat:hu(Fd),hdop:hu(bd),vdop:hu(bd),pdop:hu(bd),ageofdgpsdata:hu(bd),dgpsid:hu(Fd),extensions:If}),pf=["text","type"],cf=fu(Qd,{text:lu(jd),type:lu(jd)}),df=fu(Qd,["name","cmt","desc","src","link","number","type","rtept"]),ff=fu(Qd,{name:lu(jd),cmt:lu(jd),desc:lu(jd),src:lu(jd),link:lu(bf),number:lu(kd),type:lu(jd),rtept:uu(lu(Mf))}),_f=fu(Qd,["ele","time"]),gf=fu(Qd,["name","cmt","desc","src","link","number","type","trkseg"]),yf=fu(Qd,{name:lu(jd),cmt:lu(jd),desc:lu(jd),src:lu(jd),link:lu(bf),number:lu(kd),type:lu(jd),trkseg:uu(lu(function(t,e,i){var r={node:t};r.geometryLayout=e.getLayout(),r.properties={},vu(r,mf,vf,e.getCoordinates(),i)}))}),vf=pu("trkpt"),mf=fu(Qd,{trkpt:lu(Mf)}),xf=fu(Qd,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Ef=fu(Qd,{ele:lu(Dd),time:lu(function(t,e){var i=new Date(1e3*e),r=i.getUTCFullYear()+"-"+Wi(i.getUTCMonth()+1,2)+"-"+Wi(i.getUTCDate(),2)+"T"+Wi(i.getUTCHours(),2)+":"+Wi(i.getUTCMinutes(),2)+":"+Wi(i.getUTCSeconds(),2)+"Z";t.appendChild(Ql.createTextNode(r))}),magvar:lu(Dd),geoidheight:lu(Dd),name:lu(jd),cmt:lu(jd),desc:lu(jd),src:lu(jd),link:lu(bf),sym:lu(jd),type:lu(jd),fix:lu(jd),sat:lu(kd),hdop:lu(Dd),vdop:lu(Dd),pdop:lu(Dd),ageofdgpsdata:lu(Dd),dgpsid:lu(kd)}),Sf={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Tf(t,e,i){var r=t.getGeometry();if(r){var n=Sf[r.getType()];if(n)return tu(e[e.length-1].node.namespaceURI,n)}}function Cf(t,e,i,r){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,e.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,e.hasM=!0):t.push(0),t}function Rf(t,e,i){var r=At.XY,n=2;if(t.hasZ&&t.hasM?(r=At.XYZM,n=4):t.hasZ?(r=At.XYZ,n=3):t.hasM&&(r=At.XYM,n=3),4!==n){for(var o=0,s=e.length/4;o<s;o++)e[o*n]=e[4*o],e[o*n+1]=e[4*o+1],t.hasZ&&(e[o*n+2]=e[4*o+2]),t.hasM&&(e[o*n+2]=e[4*o+3]);if(e.length=e.length/4*n,i)for(var a=0,h=i.length;a<h;a++)i[a]=i[a]/4*n}return r}function wf(t,e){var i=e[e.length-1],r=t.getAttribute("href");null!==r&&(i.link=r),_u(ef,t,e)}function If(t,e){e[e.length-1].extensionsNode_=t}function Lf(t,e){var i=e[0],r=gu({flatCoordinates:[],layoutOptions:{}},of,t,e);if(r){var n=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var s=Rf(o,n),a=new hr(n,s);dd(a,!1,i);var h=new B(a);return h.setProperties(r),h}}function Of(t,e){var i=e[0],r=gu({flatCoordinates:[],ends:[],layoutOptions:{}},af,t,e);if(r){var n=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var s=r.layoutOptions;delete r.layoutOptions;var a=Rf(s,n,o),h=new Pc(n,a,o);dd(h,!1,i);var l=new B(h);return l.setProperties(r),l}}function Pf(t,e){var i=e[0],r=gu({},uf,t,e);if(r){var n={},o=Cf([],n,t,r),s=Rf(n,o),a=new ci(o,s);dd(a,!1,i);var h=new B(a);return h.setProperties(r),h}}function bf(t,e,i){t.setAttribute("href",e);var r=i[i.length-1].properties,n=[r.linkText,r.linkType];vu({node:t},cf,cu,n,i,pf)}function Mf(t,e,i){var r=i[i.length-1],n=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case At.XYZM:0!==e[3]&&(o.time=e[3]);case At.XYZ:0!==e[2]&&(o.ele=e[2]);break;case At.XYM:0!==e[2]&&(o.time=e[2])}var s="rtept"==t.nodeName?_f[n]:xf[n],a=du(o,s);vu({node:t,properties:o},Ef,cu,a,i,s)}var Ff=nf;function Af(t,e){if(!t)return null;var i;switch(t.type){case Nt.POINT:i=function(t){return new ci(t.coordinates)}(t);break;case Nt.LINE_STRING:i=function(t){return new hr(t.coordinates)}(t);break;case Nt.POLYGON:i=function(t){return new Ii(t.coordinates)}(t);break;case Nt.MULTI_POINT:i=function(t){return new bc(t.coordinates)}(t);break;case Nt.MULTI_LINE_STRING:i=function(t){return new Pc(t.coordinates)}(t);break;case Nt.MULTI_POLYGON:i=function(t){return new Fc(t.coordinates)}(t);break;case Nt.GEOMETRY_COLLECTION:i=function(t,e){var i=t.geometries.map(function(t){return Af(t,e)});return new ud(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return dd(i,!1,e)}function Nf(t,e){var i,r=(t=dd(t,!0,e)).getType();switch(r){case Nt.POINT:i=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case Nt.LINE_STRING:i=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case Nt.POLYGON:i=function(t,e){var i;e&&(i=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e);break;case Nt.MULTI_POINT:i=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case Nt.MULTI_LINE_STRING:i=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case Nt.MULTI_POLYGON:i=function(t,e){var i;e&&(i=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e);break;case Nt.GEOMETRY_COLLECTION:i=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var i=u({},e);return delete i.featureProjection,Nf(t,i)})}}(t,e);break;case Nt.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return i}var Gf=function(t){function e(e){var i=e||{};t.call(this),this.dataProjection=Ee(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(this.defaultFeatureProjection=Ee(i.featureProjection)),this.geometryName_=i.geometryName,this.extractGeometryName_=i.extractGeometryName}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromObject=function(t,e){var i=null,r=Af((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),n=new B;return this.geometryName_?n.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&n.setGeometryName(i.geometry_name),n.setGeometry(r),"id"in i&&n.setId(i.id),i.properties&&n.setProperties(i.properties),n},e.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];for(var r=t.features,n=0,o=r.length;n<o;++n)i.push(this.readFeatureFromObject(r[n],e))}else i=[this.readFeatureFromObject(t,e)];return i},e.prototype.readGeometryFromObject=function(t,e){return Af(t,e)},e.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=Ee(i.properties.name):Y(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature",geometry:null,properties:null},r=t.getId();void 0!==r&&(i.id=r);var n=t.getGeometry();n&&(i.geometry=Nf(n,e));var o=t.getProperties();return delete o[t.getGeometryName()],d(o)||(i.properties=o),i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],r=0,n=t.length;r<n;++r)i.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,e){return Nf(t,this.adaptOptions(e))},e}(_d);function Df(t){return"string"==typeof t?t:""}var kf,jf,Uf,Yf,Bf,Vf,Xf,zf=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return Hl.TEXT},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(Df(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return r()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(Df(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return r()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(Df(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return r()},e.prototype.readProjection=function(t){return this.readProjectionFromText(Df(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return r()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return r()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return r()},e}(cd),Wf={BAROMETRIC:"barometric",GPS:"gps",NONE:"none"},Kf=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Hf=/^H.([A-Z]{3}).*?:(.*)/,Zf=/^HFDTE(\d{2})(\d{2})(\d{2})/,qf=/\r\n|\r|\n/,Jf=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=Ee("EPSG:4326"),this.altitudeMode_=i.altitudeMode?i.altitudeMode:Wf.NONE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromText=function(t,e){var i,r,n=this.altitudeMode_,o=t.split(qf),s={},a=[],h=2e3,l=0,u=1,p=-1;for(i=0,r=o.length;i<r;++i){var c=o[i],d=void 0;if("B"==c.charAt(0)){if(d=Kf.exec(c)){var f=parseInt(d[1],10),_=parseInt(d[2],10),g=parseInt(d[3],10),y=parseInt(d[4],10)+parseInt(d[5],10)/6e4;"S"==d[6]&&(y=-y);var v=parseInt(d[7],10)+parseInt(d[8],10)/6e4;if("W"==d[9]&&(v=-v),a.push(v,y),n!=Wf.NONE){var m=void 0;m=n==Wf.GPS?parseInt(d[11],10):n==Wf.BAROMETRIC?parseInt(d[12],10):0,a.push(m)}var x=Date.UTC(h,l,u,f,_,g);x<p&&(x=Date.UTC(h,l,u+1,f,_,g)),a.push(x/1e3),p=x}}else"H"==c.charAt(0)&&((d=Zf.exec(c))?(u=parseInt(d[1],10),l=parseInt(d[2],10)-1,h=2e3+parseInt(d[3],10)):(d=Hf.exec(c))&&(s[d[1]]=d[2].trim()))}if(0===a.length)return null;var E=n==Wf.NONE?At.XYM:At.XYZM,S=new hr(a,E),T=new B(dd(S,!1,e));return T.setProperties(s),T},e.prototype.readFeaturesFromText=function(t,e){var i=this.readFeatureFromText(t,e);return i?[i]:[]},e}(zf),Qf=["http://www.google.com/kml/ext/2.2"],$f=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],t_={fraction:wu.FRACTION,pixels:wu.PIXELS,insetPixels:wu.PIXELS},e_=fu($f,{ExtendedData:H_,Region:Z_,MultiGeometry:hu(j_,"geometry"),LineString:hu(G_,"geometry"),LinearRing:hu(D_,"geometry"),Point:hu(U_,"geometry"),Polygon:hu(B_,"geometry"),Style:hu(X_),StyleMap:function(t,e){var i=S_(t,e);if(!i)return;var r=e[e.length-1];Array.isArray(i)?r.Style=i:"string"==typeof i?r.styleUrl=i:Y(!1,38)},address:hu(Nd),description:hu(Nd),name:hu(Nd),open:hu(Ld),phoneNumber:hu(Nd),styleUrl:hu(m_),visibility:hu(Ld)},fu(Qf,{MultiTrack:hu(function(t,e){var i=gu([],O_,t,e);if(!i)return;return new Pc(i)},"geometry"),Track:hu(b_,"geometry")})),i_=fu($f,{ExtendedData:H_,Region:Z_,Link:function(t,e){_u(r_,t,e)},address:hu(Nd),description:hu(Nd),name:hu(Nd),open:hu(Ld),phoneNumber:hu(Nd),visibility:hu(Ld)}),r_=fu($f,{href:hu(m_)}),n_=fu($f,{LatLonAltBox:function(t,e){var i=gu({},Q_,t,e);if(!i)return;var r=e[e.length-1],n=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];r.extent=n,r.altitudeMode=i.altitudeMode,r.minAltitude=parseFloat(i.minAltitude),r.maxAltitude=parseFloat(i.maxAltitude)},Lod:function(t,e){var i=gu({},$_,t,e);if(!i)return;var r=e[e.length-1];r.minLodPixels=parseFloat(i.minLodPixels),r.maxLodPixels=parseFloat(i.maxLodPixels),r.minFadeExtent=parseFloat(i.minFadeExtent),r.maxFadeExtent=parseFloat(i.maxFadeExtent)}}),o_=fu($f,["Document","Placemark"]),s_=fu($f,{Document:lu(function(t,e,i){vu({node:t},ng,og,e,i,void 0,this)}),Placemark:lu(Og)}),a_=null;var h_,l_=null;var u_,p_=null;var c_=null;var d_=null;var f_=null;var __=function(t){function e(e){t.call(this);var i=e||{};f_||(a_=new mr({color:kf=[255,255,255,1]}),jf=[20,2],Uf=wu.PIXELS,Yf=wu.PIXELS,Bf=[64,64],Vf="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Xf=.5,l_=new Ou({anchor:jf,anchorOrigin:Lu.BOTTOM_LEFT,anchorXUnits:Uf,anchorYUnits:Yf,crossOrigin:"anonymous",rotation:0,scale:Xf,size:Bf,src:Vf}),h_="NO_IMAGE",p_=new Er({color:kf,width:1}),u_=new Er({color:[51,51,51,1],width:2}),c_=new Rr({font:"bold 16px Helvetica",fill:a_,stroke:u_,scale:.8}),d_=new Nu({fill:a_,image:l_,text:c_,stroke:p_,zIndex:0}),f_=[d_]),this.dataProjection=Ee("EPSG:4326"),this.defaultStyle_=i.defaultStyle?i.defaultStyle:f_,this.extractStyles_=void 0===i.extractStyles||i.extractStyles,this.writeStyles_=void 0===i.writeStyles||i.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===i.showPointNames||i.showPointNames}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readDocumentOrFolder_=function(t,e){var i=gu([],fu($f,{Document:nu(this.readDocumentOrFolder_,this),Folder:nu(this.readDocumentOrFolder_,this),Placemark:ou(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this);return i||void 0},e.prototype.readPlacemark_=function(t,e){var i=gu({geometry:null},e_,t,e);if(i){var r=new B,n=t.getAttribute("id");null!==n&&r.setId(n);var o=e[0],s=i.geometry;if(s&&dd(s,!1,o),r.setGeometry(s),delete i.geometry,this.extractStyles_){var a=function(t,e,i,r,n){return function(o,s){var a,h=n,l="";if(h){var u=o.getGeometry();u&&(h=u.getType()===Nt.POINT)}if(h&&(l=o.get("name"),h=h&&!!l),t)return h?(a=g_(t[0],l),t.concat(a)):t;if(e){var p=function t(e,i,r){return Array.isArray(e)?e:"string"==typeof e?(!(e in r)&&"#"+e in r&&(e="#"+e),t(r[e],i,r)):i}(e,i,r);return h?(a=g_(p[0],l),p.concat(a)):p}return h?(a=g_(i[0],l),i.concat(a)):i}}(i.Style,i.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);r.setStyle(a)}return delete i.Style,r.setProperties(i),r}},e.prototype.readSharedStyle_=function(t,e){var i=t.getAttribute("id");if(null!==i){var r=X_(t,e);if(r){var n,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)n=new URL("#"+i,o).href;else n="#"+i;this.sharedStyles_[n]=r}}},e.prototype.readSharedStyleMap_=function(t,e){var i=t.getAttribute("id");if(null!==i){var r=S_(t,e);if(r){var n,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)n=new URL("#"+i,o).href;else n="#"+i;this.sharedStyles_[n]=r}}},e.prototype.readFeatureFromNode=function(t,e){if(!X($f,t.namespaceURI))return null;var i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i||null},e.prototype.readFeaturesFromNode=function(t,e){var i;if(!X($f,t.namespaceURI))return[];var r=t.localName;if("Document"==r||"Folder"==r)return(i=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==r){var n=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return n?[n]:[]}if("kml"==r){i=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var s=this.readFeaturesFromNode(o,e);s&&K(i,s)}return i}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=ru(t);return this.readNameFromDocument(e)}return iu(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var i=this.readNameFromNode(e);if(i)return i}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(X($f,e.namespaceURI)&&"name"==e.localName)return Nd(e);for(var i=t.firstElementChild;i;i=i.nextElementSibling){var r=i.localName;if(X($f,i.namespaceURI)&&("Document"==r||"Folder"==r||"Placemark"==r||"kml"==r)){var n=this.readNameFromNode(i);if(n)return n}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var i=ru(t);K(e,this.readNetworkLinksFromDocument(i))}else iu(t)?K(e,this.readNetworkLinksFromDocument(t)):K(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&K(e,this.readNetworkLinksFromNode(i));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(X($f,i.namespaceURI)&&"NetworkLink"==i.localName){var r=gu({},i_,i,[]);e.push(r)}for(var n=t.firstElementChild;n;n=n.nextElementSibling){var o=n.localName;!X($f,n.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||K(e,this.readNetworkLinksFromNode(n))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var i=ru(t);K(e,this.readRegionFromDocument(i))}else iu(t)?K(e,this.readRegionFromDocument(t)):K(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&K(e,this.readRegionFromNode(i));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(X($f,i.namespaceURI)&&"Region"==i.localName){var r=gu({},n_,i,[]);e.push(r)}for(var n=t.firstElementChild;n;n=n.nextElementSibling){var o=n.localName;!X($f,n.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||K(e,this.readRegionFromNode(n))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=tu($f[4],"kml"),r="http://www.w3.org/2000/xmlns/";i.setAttributeNS(r,"xmlns:gx",Qf[0]),i.setAttributeNS(r,"xmlns:xsi",$l),i.setAttributeNS($l,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var n={node:i},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var s=o_[i.namespaceURI],a=du(o,s);return vu(n,s_,cu,a,[e],s,this),i},e}(Td);function g_(t,e){var i=null,r=[0,0],n="start";if(t.getImage()){var o=t.getImage().getImageSize();if(null===o&&(o=Bf),2==o.length){var s=t.getImage().getScale();r[0]=s*o[0]/2,r[1]=-s*o[1]/2,n="left"}}if(null!==t.getText()){var a=t.getText();(i=a.clone()).setFont(a.getFont()||c_.getFont()),i.setScale(a.getScale()||c_.getScale()),i.setFill(a.getFill()||c_.getFill()),i.setStroke(a.getStroke()||u_)}else i=c_.clone();return i.setText(e),i.setOffsetX(r[0]),i.setOffsetY(r[1]),i.setTextAlign(n),new Nu({text:i})}function y_(t){var e=eu(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(i){var r=i[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function v_(t){for(var e,i=eu(t,!1),r=[],n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=n.exec(i);){var o=parseFloat(e[1]),s=parseFloat(e[2]),a=e[3]?parseFloat(e[3]):0;r.push(o,s,a),i=i.substr(e[0].length)}if(""===i)return r}function m_(t){var e=eu(t,!1).trim(),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(e,i).href:e}function x_(t){return bd(t)}var E_=fu($f,{Pair:function(t,e){var i=gu({},q_,t,e);if(!i)return;var r=i.key;if(r&&"normal"==r){var n=i.styleUrl;n&&(e[e.length-1]=n);var o=i.Style;o&&(e[e.length-1]=o)}}});function S_(t,e){return gu(void 0,E_,t,e)}var T_=fu($f,{Icon:hu(function(t,e){var i=gu({},M_,t,e);return i||null}),heading:hu(bd),hotSpot:hu(function(t){var e,i=t.getAttribute("xunits"),r=t.getAttribute("yunits");return e="insetPixels"!==i?"insetPixels"!==r?Lu.BOTTOM_LEFT:Lu.TOP_LEFT:"insetPixels"!==r?Lu.BOTTOM_RIGHT:Lu.TOP_RIGHT,{x:parseFloat(t.getAttribute("x")),xunits:t_[i],y:parseFloat(t.getAttribute("y")),yunits:t_[r],origin:e}}),scale:hu(x_)});var C_=fu($f,{color:hu(y_),scale:hu(x_)});var R_=fu($f,{color:hu(y_),width:hu(bd)});var w_=fu($f,{color:hu(y_),fill:hu(Ld),outline:hu(Ld)});var I_=fu($f,{coordinates:su(v_)});function L_(t,e){return gu(null,I_,t,e)}var O_=fu(Qf,{Track:ou(b_)});var P_=fu($f,{when:function(t,e){var i=e[e.length-1].whens,r=eu(t,!1),n=Date.parse(r);i.push(isNaN(n)?0:n)}},fu(Qf,{coord:function(t,e){var i=e[e.length-1].flatCoordinates,r=eu(t,!1),n=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(n){var o=parseFloat(n[1]),s=parseFloat(n[2]),a=parseFloat(n[3]);i.push(o,s,a,0)}else i.push(0,0,0,0)}}));function b_(t,e){var i=gu({flatCoordinates:[],whens:[]},P_,t,e);if(i){for(var r=i.flatCoordinates,n=i.whens,o=0,s=Math.min(r.length,n.length);o<s;++o)r[4*o+3]=n[o];return new hr(r,At.XYZM)}}var M_=fu($f,{href:hu(m_)},fu(Qf,{x:hu(bd),y:hu(bd),w:hu(bd),h:hu(bd)}));var F_=fu($f,{coordinates:su(v_)});function A_(t,e){return gu(null,F_,t,e)}var N_=fu($f,{extrude:hu(Ld),tessellate:hu(Ld),altitudeMode:hu(Nd)});function G_(t,e){var i=gu({},N_,t,e),r=A_(t,e);if(r){var n=new hr(r,At.XYZ);return n.setProperties(i),n}}function D_(t,e){var i=gu({},N_,t,e),r=A_(t,e);if(r){var n=new Ii(r,At.XYZ,[r.length]);return n.setProperties(i),n}}var k_=fu($f,{LineString:ou(G_),LinearRing:ou(D_),MultiGeometry:ou(j_),Point:ou(U_),Polygon:ou(B_)});function j_(t,e){var i,r=gu([],k_,t,e);if(!r)return null;if(0===r.length)return new ud(r);for(var n,o,s=!0,a=r[0].getType(),h=1,l=r.length;h<l;++h)if(r[h].getType()!=a){s=!1;break}if(s)if(a==Nt.POINT){var u=r[0];n=u.getLayout(),o=u.getFlatCoordinates();for(var p=1,c=r.length;p<c;++p)K(o,r[p].getFlatCoordinates());z_(i=new bc(o,n),r)}else a==Nt.LINE_STRING?z_(i=new Pc(r),r):a==Nt.POLYGON?z_(i=new Fc(r),r):a==Nt.GEOMETRY_COLLECTION?i=new ud(r):Y(!1,37);else i=new ud(r);return i}function U_(t,e){var i=gu({},N_,t,e),r=A_(t,e);if(r){var n=new ci(r,At.XYZ);return n.setProperties(i),n}}var Y_=fu($f,{innerBoundaryIs:function(t,e){var i=gu(void 0,tg,t,e);if(i){var r=e[e.length-1];r.push(i)}},outerBoundaryIs:function(t,e){var i=gu(void 0,eg,t,e);if(i){var r=e[e.length-1];r[0]=i}}});function B_(t,e){var i=gu({},N_,t,e),r=gu([null],Y_,t,e);if(r&&r[0]){for(var n=r[0],o=[n.length],s=1,a=r.length;s<a;++s)K(n,r[s]),o.push(n.length);var h=new Ii(n,At.XYZ,o);return h.setProperties(i),h}}var V_=fu($f,{IconStyle:function(t,e){var i=gu({},T_,t,e);if(i){var r,n,o,s,a=e[e.length-1],h="Icon"in i?i.Icon:{},l=!("Icon"in i)||Object.keys(h).length>0,u=h.href;u?r=u:l&&(r=Vf);var p,c=Lu.BOTTOM_LEFT,d=i.hotSpot;d?(n=[d.x,d.y],o=d.xunits,s=d.yunits,c=d.origin):r===Vf?(n=jf,o=Uf,s=Yf):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(n=[.5,0],o=wu.FRACTION,s=wu.FRACTION);var f,_=h.x,g=h.y;void 0!==_&&void 0!==g&&(p=[_,g]);var y,v=h.w,m=h.h;void 0!==v&&void 0!==m&&(f=[v,m]);var x=i.heading;void 0!==x&&(y=Vt(x));var E=i.scale;if(l){r==Vf&&(f=Bf,void 0===E&&(E=Xf));var S=new Ou({anchor:n,anchorOrigin:c,anchorXUnits:o,anchorYUnits:s,crossOrigin:"anonymous",offset:p,offsetOrigin:Lu.BOTTOM_LEFT,rotation:y,scale:E,size:f,src:r});a.imageStyle=S}else a.imageStyle=h_}},LabelStyle:function(t,e){var i=gu({},C_,t,e);if(i){var r=e[e.length-1],n=new Rr({fill:new mr({color:"color"in i?i.color:kf}),scale:i.scale});r.textStyle=n}},LineStyle:function(t,e){var i=gu({},R_,t,e);if(i){var r=e[e.length-1],n=new Er({color:"color"in i?i.color:kf,width:"width"in i?i.width:1});r.strokeStyle=n}},PolyStyle:function(t,e){var i=gu({},w_,t,e);if(i){var r=e[e.length-1],n=new mr({color:"color"in i?i.color:kf});r.fillStyle=n;var o=i.fill;void 0!==o&&(r.fill=o);var s=i.outline;void 0!==s&&(r.outline=s)}}});function X_(t,e){var i=gu({},V_,t,e);if(!i)return null;var r,n="fillStyle"in i?i.fillStyle:a_,o=i.fill;void 0===o||o||(n=null),"imageStyle"in i?i.imageStyle!=h_&&(r=i.imageStyle):r=l_;var s="textStyle"in i?i.textStyle:c_,a="strokeStyle"in i?i.strokeStyle:p_,h=i.outline;return void 0===h||h||(a=null),[new Nu({fill:n,image:r,stroke:a,text:s,zIndex:void 0})]}function z_(t,e){var i,r,n,o=e.length,s=new Array(e.length),a=new Array(e.length),h=new Array(e.length);i=r=n=!1;for(var l=0;l<o;++l){var u=e[l];s[l]=u.get("extrude"),a[l]=u.get("tessellate"),h[l]=u.get("altitudeMode"),i=i||void 0!==s[l],r=r||void 0!==a[l],n=n||h[l]}i&&t.set("extrude",s),r&&t.set("tessellate",a),n&&t.set("altitudeMode",h)}var W_=fu($f,{displayName:hu(Nd),value:hu(Nd)});var K_=fu($f,{Data:function(t,e){var i=t.getAttribute("name");_u(W_,t,e);var r=e[e.length-1];null!==i?r[i]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(t,e){_u(J_,t,e)}});function H_(t,e){_u(K_,t,e)}function Z_(t,e){_u(n_,t,e)}var q_=fu($f,{Style:hu(X_),key:hu(Nd),styleUrl:hu(m_)});var J_=fu($f,{SimpleData:function(t,e){var i=t.getAttribute("name");if(null!==i){var r=Nd(t),n=e[e.length-1];n[i]=r}}});var Q_=fu($f,{altitudeMode:hu(Nd),minAltitude:hu(bd),maxAltitude:hu(bd),north:hu(bd),south:hu(bd),east:hu(bd),west:hu(bd)});var $_=fu($f,{minLodPixels:hu(bd),maxLodPixels:hu(bd),minFadeExtent:hu(bd),maxFadeExtent:hu(bd)});var tg=fu($f,{LinearRing:su(L_)});var eg=fu($f,{LinearRing:su(L_)});function ig(t,e){for(var i=_r(e),r=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]],n=0;n<4;++n){var o=Math.floor(r[n]).toString(16);r[n]=1==o.length?"0"+o:o}jd(t,r.join(""))}var rg=fu($f,{Data:lu(function(t,e,i){t.setAttribute("name",e.name);var r={node:t},n=e.value;"object"==typeof n?(null!==n&&n.displayName&&vu(r,rg,cu,[n.displayName],i,["displayName"]),null!==n&&n.value&&vu(r,rg,cu,[n.value],i,["value"])):vu(r,rg,cu,[n],i,["value"])}),value:lu(function(t,e){jd(t,e)}),displayName:lu(function(t,e){!function(t,e){t.appendChild(Ql.createCDATASection(e))}(t,e)})});var ng=fu($f,{Placemark:lu(Og)}),og=function(t,e,i){return tu(e[e.length-1].node.namespaceURI,"Placemark")};var sg=pu("Data");var ag=fu($f,["href"],fu(Qf,["x","y","w","h"])),hg=fu($f,{href:lu(jd)},fu(Qf,{x:lu(Dd),y:lu(Dd),w:lu(Dd),h:lu(Dd)})),lg=function(t,e,i){return tu(Qf[0],"gx:"+i)};var ug=fu($f,["scale","heading","Icon","hotSpot"]),pg=fu($f,{Icon:lu(function(t,e,i){var r={node:t},n=i[i.length-1].node,o=ag[n.namespaceURI],s=du(e,o);vu(r,hg,cu,s,i,o),s=du(e,o=ag[Qf[0]]),vu(r,hg,lg,s,i,o)}),heading:lu(Dd),hotSpot:lu(function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}),scale:lu(jg)});var cg=fu($f,["color","scale"]),dg=fu($f,{color:lu(ig),scale:lu(jg)});var fg=fu($f,["color","width"]),_g=fu($f,{color:lu(ig),width:lu(Dd)});var gg={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},yg=function(t,e,i){if(t)return tu(e[e.length-1].node.namespaceURI,gg[t.getType()])},vg=pu("Point"),mg=pu("LineString"),xg=pu("LinearRing"),Eg=pu("Polygon"),Sg=fu($f,{LineString:lu(Mg),Point:lu(Mg),Polygon:lu(Gg),GeometryCollection:lu(Tg)});function Tg(t,e,i){var r,n,o={node:t},s=e.getType();s==Nt.GEOMETRY_COLLECTION?(r=e.getGeometries(),n=yg):s==Nt.MULTI_POINT?(r=e.getPoints(),n=vg):s==Nt.MULTI_LINE_STRING?(r=e.getLineStrings(),n=mg):s==Nt.MULTI_POLYGON?(r=e.getPolygons(),n=Eg):Y(!1,39),vu(o,Sg,n,r,i)}var Cg=fu($f,{LinearRing:lu(Mg)});function Rg(t,e,i){vu({node:t},Cg,xg,[e],i)}var wg=fu($f,{ExtendedData:lu(function(t,e,i){for(var r={node:t},n=e.names,o=e.values,s=n.length,a=0;a<s;a++)vu(r,rg,sg,[{name:n[a],value:o[a]}],i)}),MultiGeometry:lu(Tg),LineString:lu(Mg),LinearRing:lu(Mg),Point:lu(Mg),Polygon:lu(Gg),Style:lu(function(t,e,i){var r={node:t},n={},o=e.getFill(),s=e.getStroke(),a=e.getImage(),h=e.getText();a&&"function"==typeof a.getSrc&&(n.IconStyle=a);h&&(n.LabelStyle=h);s&&(n.LineStyle=s);o&&(n.PolyStyle=o);var l=i[i.length-1].node,u=Ug[l.namespaceURI],p=du(n,u);vu(r,Yg,cu,p,i,u)}),address:lu(jd),description:lu(jd),name:lu(jd),open:lu(Gd),phoneNumber:lu(jd),styleUrl:lu(jd),visibility:lu(Gd)}),Ig=fu($f,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Lg=pu("ExtendedData");function Og(t,e,i){var r={node:t};e.getId()&&t.setAttribute("id",e.getId());var n=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var s=Object.keys(n||{}).sort().filter(function(t){return!o[t]});if(s.length>0){var a=du(n,s);vu(r,wg,Lg,[{names:s,values:a}],i)}var h=e.getStyleFunction();if(h){var l=h(e,0);if(l){var u=Array.isArray(l)?l[0]:l;this.writeStyles_&&(n.Style=u);var p=u.getText();p&&(n.name=p.getText())}}var c=i[i.length-1].node,d=Ig[c.namespaceURI],f=du(n,d);vu(r,wg,cu,f,i,d);var _=i[0],g=e.getGeometry();g&&(g=dd(g,!0,_)),vu(r,wg,yg,[g],i)}var Pg=fu($f,["extrude","tessellate","altitudeMode","coordinates"]),bg=fu($f,{extrude:lu(Gd),tessellate:lu(Gd),altitudeMode:lu(jd),coordinates:lu(function(t,e,i){var r,n=i[i.length-1],o=n.layout,s=n.stride;o==At.XY||o==At.XYM?r=2:o==At.XYZ||o==At.XYZM?r=3:Y(!1,34);var a=e.length,h="";if(a>0){h+=e[0];for(var l=1;l<r;++l)h+=","+e[l];for(var u=s;u<a;u+=s){h+=" "+e[u];for(var p=1;p<r;++p)h+=","+e[u+p]}}jd(t,h)})});function Mg(t,e,i){var r=e.getFlatCoordinates(),n={node:t};n.layout=e.getLayout(),n.stride=e.getStride();var o=e.getProperties();o.coordinates=r;var s=i[i.length-1].node,a=Pg[s.namespaceURI],h=du(o,a);vu(n,bg,cu,h,i,a)}var Fg=fu($f,{outerBoundaryIs:lu(Rg),innerBoundaryIs:lu(Rg)}),Ag=pu("innerBoundaryIs"),Ng=pu("outerBoundaryIs");function Gg(t,e,i){var r=e.getLinearRings(),n=r.shift(),o={node:t};vu(o,Fg,Ag,r,i),vu(o,Fg,Ng,[n],i)}var Dg=fu($f,{color:lu(ig)}),kg=pu("color");function jg(t,e){Dd(t,Math.round(1e6*e)/1e6)}var Ug=fu($f,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Yg=fu($f,{IconStyle:lu(function(t,e,i){var r={node:t},n={},o=e.getSrc(),s=e.getSize(),a=e.getImageSize(),h={href:o};if(s){h.w=s[0],h.h=s[1];var l=e.getAnchor(),u=e.getOrigin();if(u&&a&&0!==u[0]&&u[1]!==s[1]&&(h.x=u[0],h.y=a[1]-(u[1]+s[1])),l&&(l[0]!==s[0]/2||l[1]!==s[1]/2)){var p={x:l[0],xunits:wu.PIXELS,y:s[1]-l[1],yunits:wu.PIXELS};n.hotSpot=p}}n.Icon=h;var c=e.getScale();1!==c&&(n.scale=c);var d=e.getRotation();0!==d&&(n.heading=d);var f=i[i.length-1].node,_=ug[f.namespaceURI],g=du(n,_);vu(r,pg,cu,g,i,_)}),LabelStyle:lu(function(t,e,i){var r={node:t},n={},o=e.getFill();o&&(n.color=o.getColor());var s=e.getScale();s&&1!==s&&(n.scale=s);var a=i[i.length-1].node,h=cg[a.namespaceURI],l=du(n,h);vu(r,dg,cu,l,i,h)}),LineStyle:lu(function(t,e,i){var r={node:t},n={color:e.getColor(),width:e.getWidth()},o=i[i.length-1].node,s=fg[o.namespaceURI],a=du(n,s);vu(r,_g,cu,a,i,s)}),PolyStyle:lu(function(t,e,i){vu({node:t},Dg,kg,[e.getColor()],i)})});var Bg=__,Vg=i(1),Xg=i.n(Vg),zg=[1,0,0,1,0,0],Wg=function(t,e,i,r,n){this.extent_,this.id_=n,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=r};Wg.prototype.get=function(t){return this.properties_[t]},Wg.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===Nt.POINT?pt(this.flatCoordinates_):ct(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},Wg.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=Tt(this.getExtent());this.flatInteriorPoints_=gi(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},Wg.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=Mc(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=yi(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},Wg.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=or(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},Wg.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,i=this.ends_,r=0,n=i.length;r<n;++r){var o=i[r],s=or(t,e,o,2,.5);K(this.flatMidpoints_,s),e=o}}return this.flatMidpoints_},Wg.prototype.getId=function(){return this.id_},Wg.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},Wg.prototype.getGeometry=function(){return this},Wg.prototype.getSimplifiedGeometry=function(t){return this},Wg.prototype.getProperties=function(){return this.properties_},Wg.prototype.getStride=function(){return 2},Wg.prototype.getStyleFunction=function(){},Wg.prototype.getType=function(){return this.type_},Wg.prototype.transform=function(t,e){var i=(t=Ee(t)).getExtent(),r=t.getWorldExtent(),n=Rt(r)/Rt(i);Ye(zg,r[0],r[3],n,-n,0,0,0),Gt(this.flatCoordinates_,0,this.flatCoordinates_.length,2,zg,this.flatCoordinates_)},Wg.prototype.getEnds=Wg.prototype.getEndss=function(){return this.ends_},Wg.prototype.getFlatCoordinates=Wg.prototype.getOrientedFlatCoordinates;var Kg=Wg;function Hg(t,e,i){if(3===t){var r={keys:[],values:[],features:[]},n=i.readVarint()+i.pos;i.readFields(Zg,r,n),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Zg(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){for(var r=null,n=i.readVarint()+i.pos;i.pos<n;)r=1===(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(r)}}function qg(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t)for(var r=i.readVarint()+i.pos;i.pos<r;){var n=e.layer.keys[i.readVarint()],o=e.layer.values[i.readVarint()];e.properties[n]=o}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}function Jg(t,e,i){t.pos=e.features[i];var r=t.readVarint()+t.pos,n={layer:e,type:0,properties:{}};return t.readFields(qg,n,r),n}var Qg=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=new ee({code:"",units:$t.TILE_PIXELS}),this.featureClass_=i.featureClass?i.featureClass:Kg,this.geometryName_=i.geometryName,this.layerName_=i.layerName?i.layerName:"layer",this.layers_=i.layers?i.layers:null,this.extent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readRawGeometry_=function(t,e,i,r){t.pos=e.geometry;for(var n=t.readVarint()+t.pos,o=1,s=0,a=0,h=0,l=0,u=0;t.pos<n;){if(!s){var p=t.readVarint();o=7&p,s=p>>3}s--,1===o||2===o?(a+=t.readSVarint(),h+=t.readSVarint(),1===o&&l>u&&(r.push(l),u=l),i.push(a,h),l+=2):7===o?l>u&&(i.push(i[u],i[u+1]),l+=2):Y(!1,59)}l>u&&(r.push(l),u=l)},e.prototype.createFeature_=function(t,e,i){var r,n=e.type;if(0===n)return null;var o=e.id,s=e.properties;s[this.layerName_]=e.layer.name;var a=[],h=[];this.readRawGeometry_(t,e,a,h);var l=function(t,e){var i;1===t?i=1===e?Nt.POINT:Nt.MULTI_POINT:2===t?i=1===e?Nt.LINE_STRING:Nt.MULTI_LINE_STRING:3===t&&(i=Nt.POLYGON);return i}(n,h.length);if(this.featureClass_===Kg)r=new this.featureClass_(l,a,h,s,o);else{var u;if(l==Nt.POLYGON){for(var p=[],c=0,d=0,f=0,_=h.length;f<_;++f){var g=h[f];Si(a,c,g,2)||(p.push(h.slice(d,f)),d=f),c=g}u=p.length>1?new Fc(a,At.XY,p):new Ii(a,At.XY,h)}else u=l===Nt.POINT?new ci(a,At.XY):l===Nt.LINE_STRING?new hr(a,At.XY):l===Nt.POLYGON?new Ii(a,At.XY,h):l===Nt.MULTI_POINT?new bc(a,At.XY):l===Nt.MULTI_LINE_STRING?new Pc(a,At.XY,h):null;r=new(0,this.featureClass_),this.geometryName_&&r.setGeometryName(this.geometryName_);var y=dd(u,!1,this.adaptOptions(i));r.setGeometry(y),r.setId(o),r.setProperties(s)}return r},e.prototype.getLastExtent=function(){return this.extent_},e.prototype.getType=function(){return Hl.ARRAY_BUFFER},e.prototype.readFeatures=function(t,e){var i=this.layers_,r=new Xg.a(t),n=r.readFields(Hg,{}),o=[];for(var s in n)if(!i||-1!=i.indexOf(s)){for(var a=n[s],h=0,l=a.length;h<l;++h){var u=Jg(r,a,h);o.push(this.createFeature_(r,u))}this.extent_=a?[0,0,a.extent,a.extent]:null}return o},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(cd),$g=[null],ty=fu($g,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:ny}),ey=fu($g,{node:function(t,e){var i=e[0],r=e[e.length-1],n=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];r.nodes[n]=o;var s=gu({tags:{}},ry,t,e);if(!d(s.tags)){var a=new ci(o);dd(a,!1,i);var h=new B(a);h.setId(n),h.setProperties(s.tags),r.features.push(h)}},way:function(t,e){var i=gu({id:t.getAttribute("id"),ndrefs:[],tags:{}},ty,t,e);e[e.length-1].ways.push(i)}}),iy=function(t){function e(){t.call(this),this.dataProjection=Ee("EPSG:4326")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeaturesFromNode=function(t,e){var i=this.getReadOptions(t,e);if("osm"==t.localName){for(var r=gu({nodes:{},ways:[],features:[]},ey,t,[i]),n=0;n<r.ways.length;n++){for(var o=r.ways[n],s=[],a=0,h=o.ndrefs.length;a<h;a++){K(s,r.nodes[o.ndrefs[a]])}var l=void 0;dd(l=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Ii(s,At.XY,[s.length]):new hr(s,At.XY),!1,i);var u=new B(l);u.setId(o.id),u.setProperties(o.tags),r.features.push(u)}if(r.features)return r.features}return[]},e}(Td),ry=fu($g,{tag:ny});function ny(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var oy=iy;function sy(t,e,i,r,n,o){var s,a;void 0!==n?(s=n,a=void 0!==o?o:0):(s=[],a=0);for(var h=e;h<i;){var l=t[h++];s[a++]=t[h++],s[a++]=l;for(var u=2;u<r;++u)s[a++]=t[h++]}return s.length=a,s}function ay(t,e,i){var r,n=i||1e5,o=new Array(e);for(r=0;r<e;++r)o[r]=0;for(var s=0,a=t.length;s<a;)for(r=0;r<e;++r,++s){var h=t[s],l=h-o[r];o[r]=h,t[s]=l}return ly(t,n)}function hy(t,e,i){var r,n=i||1e5,o=new Array(e);for(r=0;r<e;++r)o[r]=0;for(var s=uy(t,n),a=0,h=s.length;a<h;)for(r=0;r<e;++r,++a)o[r]+=s[a],s[a]=o[r];return s}function ly(t,e){for(var i=e||1e5,r=0,n=t.length;r<n;++r)t[r]=Math.round(t[r]*i);return function(t){for(var e=0,i=t.length;e<i;++e){var r=t[e];t[e]=r<0?~(r<<1):r<<1}return function(t){for(var e="",i=0,r=t.length;i<r;++i)e+=py(t[i]);return e}(t)}(t)}function uy(t,e){for(var i=e||1e5,r=function(t){for(var e=function(t){for(var e=[],i=0,r=0,n=0,o=t.length;n<o;++n){var s=t.charCodeAt(n)-63;i|=(31&s)<<r,s<32?(e.push(i),i=0,r=0):r+=5}return e}(t),i=0,r=e.length;i<r;++i){var n=e[i];e[i]=1&n?~(n>>1):n>>1}return e}(t),n=0,o=r.length;n<o;++n)r[n]/=i;return r}function py(t){for(var e,i="";t>=32;)e=63+(32|31&t),i+=String.fromCharCode(e),t>>=5;return e=t+63,i+=String.fromCharCode(e)}var cy=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=Ee("EPSG:4326"),this.factor_=i.factor?i.factor:1e5,this.geometryLayout_=i.geometryLayout?i.geometryLayout:At.XY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);return new B(i)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var i=ze(this.geometryLayout_),r=hy(t,i,this.factor_);sy(r,0,r.length,i,r);var n=ri(r,0,r.length,i);return dd(new hr(n,this.geometryLayout_),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):(Y(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var i=(t=dd(t,!0,this.adaptOptions(e))).getFlatCoordinates(),r=t.getStride();return sy(i,0,i.length,r,i),ay(i,r,this.factor_)},e}(zf),dy={Point:function(t,e,i){var r=t.coordinates;e&&i&&vy(r,e,i);return new ci(r)},LineString:function(t,e){var i=fy(t.arcs,e);return new hr(i)},Polygon:function(t,e){for(var i=[],r=0,n=t.arcs.length;r<n;++r)i[r]=fy(t.arcs[r],e);return new Ii(i)},MultiPoint:function(t,e,i){var r=t.coordinates;if(e&&i)for(var n=0,o=r.length;n<o;++n)vy(r[n],e,i);return new bc(r)},MultiLineString:function(t,e){for(var i=[],r=0,n=t.arcs.length;r<n;++r)i[r]=fy(t.arcs[r],e);return new Pc(i)},MultiPolygon:function(t,e){for(var i=[],r=0,n=t.arcs.length;r<n;++r){for(var o=t.arcs[r],s=[],a=0,h=o.length;a<h;++a)s[a]=fy(o[a],e);i[r]=s}return new Fc(i)}};function fy(t,e){for(var i,r,n=[],o=0,s=t.length;o<s;++o)i=t[o],o>0&&n.pop(),r=i>=0?e[i]:e[~i].slice().reverse(),n.push.apply(n,r);for(var a=0,h=n.length;a<h;++a)n[a]=n[a].slice();return n}function _y(t,e,i,r,n,o,s){for(var a=t.geometries,h=[],l=0,u=a.length;l<u;++l)h[l]=gy(a[l],e,i,r,n,o,s);return h}function gy(t,e,i,r,n,o,s){var a,h=t.type,l=dy[h];a="Point"===h||"MultiPoint"===h?l(t,i,r):l(t,e);var u=new B;u.setGeometry(dd(a,!1,s)),void 0!==t.id&&u.setId(t.id);var p=t.properties;return n&&(p||(p={}),p[n]=o),p&&u.setProperties(p),u}function yy(t,e,i){for(var r=0,n=0,o=0,s=t.length;o<s;++o){var a=t[o];r+=a[0],n+=a[1],a[0]=r,a[1]=n,vy(a,e,i)}}function vy(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]}var my=function(t){function e(e){t.call(this);var i=e||{};this.layerName_=i.layerName,this.layers_=i.layers?i.layers:null,this.dataProjection=Ee(i.dataProjection?i.dataProjection:"EPSG:4326")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var i,r=t,n=null,o=null;r.transform&&(n=(i=r.transform).scale,o=i.translate);var s=r.arcs;i&&function(t,e,i){for(var r=0,n=t.length;r<n;++r)yy(t[r],e,i)}(s,n,o);var a,h=[],l=r.objects,u=this.layerName_;for(var p in l)this.layers_&&-1==this.layers_.indexOf(p)||("GeometryCollection"===l[p].type?(a=l[p],h.push.apply(h,_y(a,s,n,o,u,p,e))):(a=l[p],h.push(gy(a,s,n,o,u,p,e))));return h}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(_d),xy=function(t){this.tagName_=t};xy.prototype.getTagName=function(){return this.tagName_};var Ey=xy,Sy=function(t){function e(e,i){t.call(this,e),this.conditions=i,Y(this.conditions.length>=2,57)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ey),Ty=function(t){function e(e){t.call(this,"And",Array.prototype.slice.call(arguments))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Sy),Cy=function(t){function e(e,i,r){t.call(this,"BBOX"),this.geometryName=e,this.extent=i,this.srsName=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ey),Ry=function(t){function e(e,i,r,n){t.call(this,e),this.geometryName=i||"the_geom",this.geometry=r,this.srsName=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ey),wy=function(t){function e(e,i,r){t.call(this,"Contains",e,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ry),Iy=function(t){function e(e,i){t.call(this,e),this.propertyName=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ey),Ly=function(t){function e(e,i,r){t.call(this,"During",e),this.begin=i,this.end=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Iy),Oy=function(t){function e(e,i,r,n){t.call(this,e,i),this.expression=r,this.matchCase=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Iy),Py=function(t){function e(e,i,r){t.call(this,"PropertyIsEqualTo",e,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Oy),by=function(t){function e(e,i){t.call(this,"PropertyIsGreaterThan",e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Oy),My=function(t){function e(e,i){t.call(this,"PropertyIsGreaterThanOrEqualTo",e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Oy),Fy=function(t){function e(e,i,r){t.call(this,"Intersects",e,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ry),Ay=function(t){function e(e,i,r){t.call(this,"PropertyIsBetween",e),this.lowerBoundary=i,this.upperBoundary=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Iy),Ny=function(t){function e(e,i,r,n,o,s){t.call(this,"PropertyIsLike",e),this.pattern=i,this.wildCard=void 0!==r?r:"*",this.singleChar=void 0!==n?n:".",this.escapeChar=void 0!==o?o:"!",this.matchCase=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Iy),Gy=function(t){function e(e){t.call(this,"PropertyIsNull",e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Iy),Dy=function(t){function e(e,i){t.call(this,"PropertyIsLessThan",e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Oy),ky=function(t){function e(e,i){t.call(this,"PropertyIsLessThanOrEqualTo",e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Oy),jy=function(t){function e(e){t.call(this,"Not"),this.condition=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ey),Uy=function(t){function e(e,i,r){t.call(this,"PropertyIsNotEqualTo",e,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Oy),Yy=function(t){function e(e){t.call(this,"Or",Array.prototype.slice.call(arguments))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Sy),By=function(t){function e(e,i,r){t.call(this,"Within",e,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ry);function Vy(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Ty,e))}function Xy(t,e,i){return new Cy(t,e,i)}var zy={"http://www.opengis.net/gml":{boundedBy:hu(Id.prototype.readGeometryElement,"bounds")}},Wy={"http://www.opengis.net/wfs":{totalInserted:hu(Fd),totalUpdated:hu(Fd),totalDeleted:hu(Fd)}},Ky={"http://www.opengis.net/wfs":{TransactionSummary:hu(function(t,e){return gu({},Wy,t,e)},"transactionSummary"),InsertResults:hu(function(t,e){return gu([],ov,t,e)},"insertIds")}},Hy={"http://www.opengis.net/wfs":{PropertyName:lu(jd)}},Zy={"http://www.opengis.net/wfs":{Insert:lu(function(t,e,i){var r=i[i.length-1],n=r.featureType,o=r.featureNS,s=r.gmlVersion,a=tu(o,n);t.appendChild(a),2===s?Zd.prototype.writeFeatureElement(a,e,i):Vd.prototype.writeFeatureElement(a,e,i)}),Update:lu(function(t,e,i){var r=i[i.length-1];Y(void 0!==e.getId(),27);var n=r.featureType,o=r.featurePrefix,s=r.featureNS,a=av(o,n),h=e.getGeometryName();t.setAttribute("typeName",a),t.setAttributeNS(Jy,"xmlns:"+o,s);var l=e.getId();if(void 0!==l){for(var u=e.getKeys(),p=[],c=0,d=u.length;c<d;c++){var f=e.get(u[c]);if(void 0!==f){var _=u[c];f&&"function"==typeof f.getSimplifiedGeometry&&(_=h),p.push({name:_,value:f})}}vu({gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},Zy,pu("Property"),p,i),sv(t,l,i)}}),Delete:lu(function(t,e,i){var r=i[i.length-1];Y(void 0!==e.getId(),26);var n=r.featureType,o=r.featurePrefix,s=r.featureNS,a=av(o,n);t.setAttribute("typeName",a),t.setAttributeNS(Jy,"xmlns:"+o,s);var h=e.getId();void 0!==h&&sv(t,h,i)}),Property:lu(function(t,e,i){var r=tu($y,"Name"),n=i[i.length-1].gmlVersion;if(t.appendChild(r),jd(r,e.name),void 0!==e.value&&null!==e.value){var o=tu($y,"Value");t.appendChild(o),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===n?Zd.prototype.writeGeometryElement(o,e.value,i):Vd.prototype.writeGeometryElement(o,e.value,i):jd(o,e.value)}}),Native:lu(function(t,e,i){e.vendorId&&t.setAttribute("vendorId",e.vendorId);void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore));void 0!==e.value&&jd(t,e.value)})}},qy="feature",Jy="http://www.w3.org/2000/xmlns/",Qy="http://www.opengis.net/ogc",$y="http://www.opengis.net/wfs",tv="http://www.opengis.net/fes",ev={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},iv="1.1.0",rv=function(t){function e(e){t.call(this);var i=e||{};this.featureType_=i.featureType,this.featureNS_=i.featureNS,this.gmlFormat_=i.gmlFormat?i.gmlFormat:new Vd,this.schemaLocation_=i.schemaLocation?i.schemaLocation:ev[iv]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var i={node:t};u(i,{featureType:this.featureType_,featureNS:this.featureNS_}),u(i,this.getReadOptions(t,e||{}));var r=[i];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[Cd].featureMember=ou(Id.prototype.readFeaturesInternal);var n=gu([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,r,this.gmlFormat_);return n||(n=[]),n},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=ru(t);return this.readTransactionResponseFromDocument(e)}return iu(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=ru(t);return this.readFeatureCollectionMetadataFromDocument(e)}return iu(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},i=Ad(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=i,gu(e,zy,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return gu({},Ky,t,[])},e.prototype.writeGetFeature=function(t){var e,i=tu($y,"GetFeature");if(i.setAttribute("service","WFS"),i.setAttribute("version","1.1.0"),t&&(t.handle&&i.setAttribute("handle",t.handle),t.outputFormat&&i.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&i.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&i.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&i.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&i.setAttribute("count",String(t.count)),void 0!==t.viewParams&&i.setAttribute("viewParams ",t.viewParams),e=t.filter,t.bbox)){Y(t.geometryName,12);var r=Xy(t.geometryName,t.bbox,t.srsName);e=e?Vy(e,r):r}i.setAttributeNS($l,"xsi:schemaLocation",this.schemaLocation_);var n={node:i};return u(n,{srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:e,propertyNames:t.propertyNames?t.propertyNames:[]}),Y(Array.isArray(t.featureTypes),11),function(t,e,i){var r=i[i.length-1],n=u({},r);n.node=t,vu(n,hv,pu("Query"),e,i)}(i,t.featureTypes,[n]),i},e.prototype.writeTransaction=function(t,e,i,r){var n,o,s=[],a=tu($y,"Transaction"),h=r.version?r.version:iv,l="1.0.0"===h?2:3;a.setAttribute("service","WFS"),a.setAttribute("version",h),r&&(n=r.gmlOptions?r.gmlOptions:{},r.handle&&a.setAttribute("handle",r.handle));var p=ev[h];a.setAttributeNS($l,"xsi:schemaLocation",p);var c=r.featurePrefix?r.featurePrefix:qy;return t&&(o=u({node:a},{featureNS:r.featureNS,featureType:r.featureType,featurePrefix:c,gmlVersion:l,hasZ:r.hasZ,srsName:r.srsName}),u(o,n),vu(o,Zy,pu("Insert"),t,s)),e&&(o=u({node:a},{featureNS:r.featureNS,featureType:r.featureType,featurePrefix:c,gmlVersion:l,hasZ:r.hasZ,srsName:r.srsName}),u(o,n),vu(o,Zy,pu("Update"),e,s)),i&&vu({node:a,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:c,gmlVersion:l,srsName:r.srsName},Zy,pu("Delete"),i,s),r.nativeElements&&vu({node:a,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:c,gmlVersion:l,srsName:r.srsName},Zy,pu("Native"),r.nativeElements,s),a},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var i=[{}];return this.gmlFormat_.readGeometryElement(e,i),Ee(i.pop().srsName)}return null},e}(Td);var nv={"http://www.opengis.net/ogc":{FeatureId:ou(function(t,e){return t.getAttribute("fid")})}};var ov={"http://www.opengis.net/wfs":{Feature:function(t,e){_u(nv,t,e)}}};function sv(t,e,i){var r=tu(Qy,"Filter"),n=tu(Qy,"FeatureId");r.appendChild(n),n.setAttribute("fid",e),t.appendChild(r)}function av(t,e){var i=(t=t||qy)+":";return 0===e.indexOf(i)?e:i+e}var hv={"http://www.opengis.net/wfs":{Query:lu(function(t,e,i){var r,n=i[i.length-1],o=n.featurePrefix,s=n.featureNS,a=n.propertyNames,h=n.srsName;r=o?av(o,e):e;t.setAttribute("typeName",r),h&&t.setAttribute("srsName",h);s&&t.setAttributeNS(Jy,"xmlns:"+o,s);var l=u({},n);l.node=t,vu(l,Hy,pu("PropertyName"),a,i);var p=n.filter;if(p){var c=tu(Qy,"Filter");t.appendChild(c),lv(c,p,i)}})},"http://www.opengis.net/ogc":{During:lu(function(t,e,i){var r=tu(tv,"ValueReference");jd(r,e.propertyName),t.appendChild(r);var n=tu(Cd,"TimePeriod");t.appendChild(n);var o=tu(Cd,"begin");n.appendChild(o),_v(o,e.begin);var s=tu(Cd,"end");n.appendChild(s),_v(s,e.end)}),And:lu(uv),Or:lu(uv),Not:lu(function(t,e,i){var r={node:t},n=e.condition;vu(r,hv,pu(n.getTagName()),[n],i)}),BBOX:lu(function(t,e,i){i[i.length-1].srsName=e.srsName,dv(t,e.geometryName),Vd.prototype.writeGeometryElement(t,e.extent,i)}),Contains:lu(function(t,e,i){i[i.length-1].srsName=e.srsName,dv(t,e.geometryName),Vd.prototype.writeGeometryElement(t,e.geometry,i)}),Intersects:lu(function(t,e,i){i[i.length-1].srsName=e.srsName,dv(t,e.geometryName),Vd.prototype.writeGeometryElement(t,e.geometry,i)}),Within:lu(function(t,e,i){i[i.length-1].srsName=e.srsName,dv(t,e.geometryName),Vd.prototype.writeGeometryElement(t,e.geometry,i)}),PropertyIsEqualTo:lu(pv),PropertyIsNotEqualTo:lu(pv),PropertyIsLessThan:lu(pv),PropertyIsLessThanOrEqualTo:lu(pv),PropertyIsGreaterThan:lu(pv),PropertyIsGreaterThanOrEqualTo:lu(pv),PropertyIsNull:lu(function(t,e,i){dv(t,e.propertyName)}),PropertyIsBetween:lu(function(t,e,i){dv(t,e.propertyName);var r=tu(Qy,"LowerBoundary");t.appendChild(r),fv(r,""+e.lowerBoundary);var n=tu(Qy,"UpperBoundary");t.appendChild(n),fv(n,""+e.upperBoundary)}),PropertyIsLike:lu(function(t,e,i){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString());dv(t,e.propertyName),fv(t,""+e.pattern)})}};function lv(t,e,i){vu({node:t},hv,pu(e.getTagName()),[e],i)}function uv(t,e,i){for(var r={node:t},n=e.conditions,o=0,s=n.length;o<s;++o){var a=n[o];vu(r,hv,pu(a.getTagName()),[a],i)}}function pv(t,e,i){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),dv(t,e.propertyName),fv(t,""+e.expression)}function cv(t,e,i){var r=tu(Qy,t);jd(r,i),e.appendChild(r)}function dv(t,e){cv("PropertyName",t,e)}function fv(t,e){cv("Literal",t,e)}function _v(t,e){var i=tu(Cd,"TimeInstant");t.appendChild(i);var r=tu(Cd,"timePosition");i.appendChild(r),jd(r,e)}var gv=rv,yv={POINT:ci,LINESTRING:hr,POLYGON:Ii,MULTIPOINT:bc,MULTILINESTRING:Pc,MULTIPOLYGON:Fc},vv="EMPTY",mv="Z",xv="M",Ev=1,Sv=2,Tv=3,Cv=4,Rv=5,wv=6,Iv={};for(var Lv in Nt)Iv[Lv]=Nt[Lv].toUpperCase();var Ov=function(t){this.wkt=t,this.index_=-1};Ov.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},Ov.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},Ov.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},Ov.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},Ov.prototype.nextToken=function(){var t,e=this.nextChar_(),i=this.index_,r=e;if("("==e)t=Sv;else if(","==e)t=Rv;else if(")"==e)t=Tv;else if(this.isNumeric_(e)||"-"==e)t=Cv,r=this.readNumber_();else if(this.isAlpha_(e))t=Ev,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=wv}return{position:i,value:r,type:t}},Ov.prototype.readNumber_=function(){var t,e=this.index_,i=!1,r=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(r=!0),t=this.nextChar_()}while(this.isNumeric_(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},Ov.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()};var Pv=function(t){this.lexer_=t,this.token_,this.layout_=At.XY};function bv(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function Mv(t){for(var e=t.getCoordinates(),i=[],r=0,n=e.length;r<n;++r)i.push(e[r].join(" "));return i.join(",")}function Fv(t){for(var e=[],i=t.getLinearRings(),r=0,n=i.length;r<n;++r)e.push("("+Mv(i[r])+")");return e.join(",")}Pv.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},Pv.prototype.isTokenType=function(t){return this.token_.type==t},Pv.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},Pv.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},Pv.prototype.parseGeometryLayout_=function(){var t=At.XY,e=this.token_;if(this.isTokenType(Ev)){var i=e.value;i===mv?t=At.XYZ:i===xv?t=At.XYM:"ZM"===i&&(t=At.XYZM),t!==At.XY&&this.consume_()}return t},Pv.prototype.parseGeometryCollectionText_=function(){if(this.match(Sv)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(Rv));if(this.match(Tv))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Pv.prototype.parsePointText_=function(){if(this.match(Sv)){var t=this.parsePoint_();if(this.match(Tv))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},Pv.prototype.parseLineStringText_=function(){if(this.match(Sv)){var t=this.parsePointList_();if(this.match(Tv))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Pv.prototype.parsePolygonText_=function(){if(this.match(Sv)){var t=this.parseLineStringTextList_();if(this.match(Tv))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Pv.prototype.parseMultiPointText_=function(){var t;if(this.match(Sv)){if(t=this.token_.type==Sv?this.parsePointTextList_():this.parsePointList_(),this.match(Tv))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Pv.prototype.parseMultiLineStringText_=function(){if(this.match(Sv)){var t=this.parseLineStringTextList_();if(this.match(Tv))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Pv.prototype.parseMultiPolygonText_=function(){if(this.match(Sv)){var t=this.parsePolygonTextList_();if(this.match(Tv))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Pv.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,i=0;i<e;++i){var r=this.token_;if(!this.match(Cv))break;t.push(r.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},Pv.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(Rv);)t.push(this.parsePoint_());return t},Pv.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(Rv);)t.push(this.parsePointText_());return t},Pv.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(Rv);)t.push(this.parseLineStringText_());return t},Pv.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(Rv);)t.push(this.parsePolygonText_());return t},Pv.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(Ev)&&this.token_.value==vv;return t&&this.consume_(),t},Pv.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},Pv.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(Ev)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var i=this.parseGeometryCollectionText_();return new ud(i)}var r,n=yv[e];if(!n)throw new Error("Invalid geometry type: "+e);switch(e){case"POINT":r=this.parsePointText_();break;case"LINESTRING":r=this.parseLineStringText_();break;case"POLYGON":r=this.parsePolygonText_();break;case"MULTIPOINT":r=this.parseMultiPointText_();break;case"MULTILINESTRING":r=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":r=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return r||(r=n===yv.POINT?[NaN,NaN]:[]),new n(r,this.layout_)}throw new Error(this.formatErrorMessage_())};var Av={Point:bv,LineString:Mv,Polygon:Fv,MultiPoint:function(t){for(var e=[],i=t.getPoints(),r=0,n=i.length;r<n;++r)e.push("("+bv(i[r])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],i=t.getLineStrings(),r=0,n=i.length;r<n;++r)e.push("("+Mv(i[r])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],i=t.getPolygons(),r=0,n=i.length;r<n;++r)e.push("("+Fv(i[r])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],i=t.getGeometries(),r=0,n=i.length;r<n;++r)e.push(Nv(i[r]));return e.join(",")}};function Nv(t){var e=t.getType(),i=(0,Av[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var r=function(t){var e=t.getLayout(),i="";return e!==At.XYZ&&e!==At.XYZM||(i+=mv),e!==At.XYM&&e!==At.XYZM||(i+=xv),i}(t);r.length>0&&(e+=" "+r)}return 0===i.length?e+" "+vv:e+"("+i+")"}var Gv=function(t){function e(e){t.call(this);var i=e||{};this.splitCollection_=void 0!==i.splitCollection&&i.splitCollection}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse_=function(t){var e=new Ov(t);return new Pv(e).parse()},e.prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);if(i){var r=new B;return r.setGeometry(i),r}return null},e.prototype.readFeaturesFromText=function(t,e){for(var i=[],r=this.readGeometryFromText(t,e),n=[],o=0,s=(i=this.splitCollection_&&r.getType()==Nt.GEOMETRY_COLLECTION?r.getGeometriesArray():[r]).length;o<s;++o){var a=new B;a.setGeometry(i[o]),n.push(a)}return n},e.prototype.readGeometryFromText=function(t,e){var i=this.parse_(t);return i?dd(i,!1,e):null},e.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var i=[],r=0,n=t.length;r<n;++r)i.push(t[r].getGeometry());var o=new ud(i);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return Nv(dd(t,!0,e))},e}(zf),Dv="http://www.w3.org/1999/xlink";function kv(t){return t.getAttributeNS(Dv,"href")}var jv=function(){};jv.prototype.read=function(t){if(t){if("string"==typeof t){var e=ru(t);return this.readFromDocument(e)}return iu(t)?this.readFromDocument(t):this.readFromNode(t)}return null},jv.prototype.readFromDocument=function(t){},jv.prototype.readFromNode=function(t){};var Uv=jv,Yv=[null,"http://www.opengis.net/wms"],Bv=fu(Yv,{Service:hu(function(t,e){return gu({},zv,t,e)}),Capability:hu(function(t,e){return gu({},Vv,t,e)})}),Vv=fu(Yv,{Request:hu(function(t,e){return gu({},$v,t,e)}),Exception:hu(function(t,e){return gu([],Zv,t,e)}),Layer:hu(function(t,e){return gu({},qv,t,e)})}),Xv=function(t){function e(){t.call(this),this.version=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var e=gu({version:this.version},Bv,t,[]);return e||null},e}(Uv),zv=fu(Yv,{Name:hu(Nd),Title:hu(Nd),Abstract:hu(Nd),KeywordList:hu(lm),OnlineResource:hu(kv),ContactInformation:hu(function(t,e){return gu({},Wv,t,e)}),Fees:hu(Nd),AccessConstraints:hu(Nd),LayerLimit:hu(Fd),MaxWidth:hu(Fd),MaxHeight:hu(Fd)}),Wv=fu(Yv,{ContactPersonPrimary:hu(function(t,e){return gu({},Kv,t,e)}),ContactPosition:hu(Nd),ContactAddress:hu(function(t,e){return gu({},Hv,t,e)}),ContactVoiceTelephone:hu(Nd),ContactFacsimileTelephone:hu(Nd),ContactElectronicMailAddress:hu(Nd)}),Kv=fu(Yv,{ContactPerson:hu(Nd),ContactOrganization:hu(Nd)}),Hv=fu(Yv,{AddressType:hu(Nd),Address:hu(Nd),City:hu(Nd),StateOrProvince:hu(Nd),PostCode:hu(Nd),Country:hu(Nd)}),Zv=fu(Yv,{Format:ou(Nd)}),qv=fu(Yv,{Name:hu(Nd),Title:hu(Nd),Abstract:hu(Nd),KeywordList:hu(lm),CRS:au(Nd),EX_GeographicBoundingBox:hu(function(t,e){var i=gu({},Qv,t,e);if(!i)return;var r=i.westBoundLongitude,n=i.southBoundLatitude,o=i.eastBoundLongitude,s=i.northBoundLatitude;if(void 0===r||void 0===n||void 0===o||void 0===s)return;return[r,n,o,s]}),BoundingBox:au(function(t,e){var i=[Md(t.getAttribute("minx")),Md(t.getAttribute("miny")),Md(t.getAttribute("maxx")),Md(t.getAttribute("maxy"))],r=[Md(t.getAttribute("resx")),Md(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:i,res:r}}),Dimension:au(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:Od(t.getAttribute("multipleValues")),nearestValue:Od(t.getAttribute("nearestValue")),current:Od(t.getAttribute("current")),values:Nd(t)}}),Attribution:hu(function(t,e){return gu({},Jv,t,e)}),AuthorityURL:au(function(t,e){var i=sm(t,e);if(i)return i.name=t.getAttribute("name"),i;return}),Identifier:au(Nd),MetadataURL:au(function(t,e){var i=sm(t,e);if(i)return i.type=t.getAttribute("type"),i;return}),DataURL:au(sm),FeatureListURL:au(sm),Style:au(function(t,e){return gu({},rm,t,e)}),MinScaleDenominator:hu(bd),MaxScaleDenominator:hu(bd),Layer:au(function(t,e){var i=e[e.length-1],r=gu({},qv,t,e);if(!r)return;var n=Od(t.getAttribute("queryable"));void 0===n&&(n=i.queryable);r.queryable=void 0!==n&&n;var o=Ad(t.getAttribute("cascaded"));void 0===o&&(o=i.cascaded);r.cascaded=o;var s=Od(t.getAttribute("opaque"));void 0===s&&(s=i.opaque);r.opaque=void 0!==s&&s;var a=Od(t.getAttribute("noSubsets"));void 0===a&&(a=i.noSubsets);r.noSubsets=void 0!==a&&a;var h=Md(t.getAttribute("fixedWidth"));h||(h=i.fixedWidth);r.fixedWidth=h;var l=Md(t.getAttribute("fixedHeight"));l||(l=i.fixedHeight);r.fixedHeight=l,["Style","CRS","AuthorityURL"].forEach(function(t){if(t in i){var e=r[t]||[];r[t]=e.concat(i[t])}});return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in r)){var e=i[t];r[t]=e}}),r})}),Jv=fu(Yv,{Title:hu(Nd),OnlineResource:hu(kv),LogoURL:hu(hm)}),Qv=fu(Yv,{westBoundLongitude:hu(bd),eastBoundLongitude:hu(bd),southBoundLatitude:hu(bd),northBoundLatitude:hu(bd)}),$v=fu(Yv,{GetCapabilities:hu(am),GetMap:hu(am),GetFeatureInfo:hu(am)}),tm=fu(Yv,{Format:au(Nd),DCPType:au(function(t,e){return gu({},em,t,e)})}),em=fu(Yv,{HTTP:hu(function(t,e){return gu({},im,t,e)})}),im=fu(Yv,{Get:hu(sm),Post:hu(sm)}),rm=fu(Yv,{Name:hu(Nd),Title:hu(Nd),Abstract:hu(Nd),LegendURL:au(hm),StyleSheetURL:hu(sm),StyleURL:hu(sm)}),nm=fu(Yv,{Format:hu(Nd),OnlineResource:hu(kv)}),om=fu(Yv,{Keyword:ou(Nd)});function sm(t,e){return gu({},nm,t,e)}function am(t,e){return gu({},tm,t,e)}function hm(t,e){var i=sm(t,e);if(i){var r=[Ad(t.getAttribute("width")),Ad(t.getAttribute("height"))];return i.size=r,i}}function lm(t,e){return gu([],om,t,e)}var um=Xv,pm=function(t){function e(e){t.call(this);var i=e||{};this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new Zd,this.layers_=i.layers?i.layers:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var i=t.localName,r=[];if(0===t.childNodes.length)return r;if("msGMLOutput"==i)for(var n=0,o=t.childNodes.length;n<o;n++){var s=t.childNodes[n];if(s.nodeType===Node.ELEMENT_NODE){var a=s,h=e[0],l=a.localName.replace("_layer","");if(!this.layers_||X(this.layers_,l)){var u=l+"_feature";h.featureType=u,h.featureNS=this.featureNS_;var p={};p[u]=ou(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var c=fu([h.featureNS,null],p);a.setAttribute("namespaceURI",this.featureNS_);var d=gu([],c,a,e,this.gmlFormat_);d&&K(r,d)}}}if("FeatureCollection"==i){var f=gu([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);f&&(r=f)}return r},e.prototype.readFeaturesFromNode=function(t,e){var i={};return e&&u(i,this.getReadOptions(t,e)),this.readFeatures_(t,[i])},e}(Td),cm=[null,"http://www.opengis.net/ows/1.1"],dm=fu(cm,{ServiceIdentification:hu(function(t,e){return gu({},wm,t,e)}),ServiceProvider:hu(function(t,e){return gu({},Im,t,e)}),OperationsMetadata:hu(function(t,e){return gu({},Sm,t,e)})}),fm=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=gu({},dm,t,[]);return e||null},e}(Uv),_m=fu(cm,{DeliveryPoint:hu(Nd),City:hu(Nd),AdministrativeArea:hu(Nd),PostalCode:hu(Nd),Country:hu(Nd),ElectronicMailAddress:hu(Nd)}),gm=fu(cm,{Value:au(function(t,e){return Nd(t)})}),ym=fu(cm,{AllowedValues:hu(function(t,e){return gu({},gm,t,e)})}),vm=fu(cm,{Phone:hu(function(t,e){return gu({},Tm,t,e)}),Address:hu(function(t,e){return gu({},_m,t,e)})}),mm=fu(cm,{HTTP:hu(function(t,e){return gu({},xm,t,e)})}),xm=fu(cm,{Get:au(function(t,e){var i=kv(t);if(!i)return;return gu({href:i},Cm,t,e)}),Post:void 0}),Em=fu(cm,{DCP:hu(function(t,e){return gu({},mm,t,e)})}),Sm=fu(cm,{Operation:function(t,e){var i=t.getAttribute("name"),r=gu({},Em,t,e);if(!r)return;e[e.length-1][i]=r}}),Tm=fu(cm,{Voice:hu(Nd),Facsimile:hu(Nd)}),Cm=fu(cm,{Constraint:au(function(t,e){var i=t.getAttribute("name");if(!i)return;return gu({name:i},ym,t,e)})}),Rm=fu(cm,{IndividualName:hu(Nd),PositionName:hu(Nd),ContactInfo:hu(function(t,e){return gu({},vm,t,e)})}),wm=fu(cm,{Abstract:hu(Nd),AccessConstraints:hu(Nd),Fees:hu(Nd),Title:hu(Nd),ServiceTypeVersion:hu(Nd),ServiceType:hu(Nd)}),Im=fu(cm,{ProviderName:hu(Nd),ProviderSite:hu(kv),ServiceContact:hu(function(t,e){return gu({},Rm,t,e)})});var Lm=fm,Om=[null,"http://www.opengis.net/wmts/1.0"],Pm=[null,"http://www.opengis.net/ows/1.1"],bm=fu(Om,{Contents:hu(function(t,e){return gu({},Fm,t,e)})}),Mm=function(t){function e(){t.call(this),this.owsParser_=new Lm}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=t.getAttribute("version").trim(),i=this.owsParser_.readFromNode(t);return i?(i.version=e,(i=gu(i,bm,t,[]))||null):null},e}(Uv),Fm=fu(Om,{Layer:au(function(t,e){return gu({},Am,t,e)}),TileMatrixSet:au(function(t,e){return gu({},Ym,t,e)})}),Am=fu(Om,{Style:au(function(t,e){var i=gu({},Nm,t,e);if(!i)return;var r="true"===t.getAttribute("isDefault");return i.isDefault=r,i}),Format:au(Nd),TileMatrixSetLink:au(function(t,e){return gu({},Gm,t,e)}),Dimension:au(function(t,e){return gu({},jm,t,e)}),ResourceURL:au(function(t,e){var i=t.getAttribute("format"),r=t.getAttribute("template"),n=t.getAttribute("resourceType"),o={};i&&(o.format=i);r&&(o.template=r);n&&(o.resourceType=n);return o})},fu(Pm,{Title:hu(Nd),Abstract:hu(Nd),WGS84BoundingBox:hu(function(t,e){var i=gu([],Um,t,e);if(2!=i.length)return;return tt(i)}),Identifier:hu(Nd)})),Nm=fu(Om,{LegendURL:au(function(t,e){var i={};return i.format=t.getAttribute("format"),i.href=kv(t),i})},fu(Pm,{Title:hu(Nd),Identifier:hu(Nd)})),Gm=fu(Om,{TileMatrixSet:hu(Nd),TileMatrixSetLimits:hu(function(t,e){return gu([],Dm,t,e)})}),Dm=fu(Om,{TileMatrixLimits:ou(function(t,e){return gu({},km,t,e)})}),km=fu(Om,{TileMatrix:hu(Nd),MinTileRow:hu(Fd),MaxTileRow:hu(Fd),MinTileCol:hu(Fd),MaxTileCol:hu(Fd)}),jm=fu(Om,{Default:hu(Nd),Value:au(Nd)},fu(Pm,{Identifier:hu(Nd)})),Um=fu(Pm,{LowerCorner:ou(Vm),UpperCorner:ou(Vm)}),Ym=fu(Om,{WellKnownScaleSet:hu(Nd),TileMatrix:au(function(t,e){return gu({},Bm,t,e)})},fu(Pm,{SupportedCRS:hu(Nd),Identifier:hu(Nd)})),Bm=fu(Om,{TopLeftCorner:hu(Vm),ScaleDenominator:hu(bd),TileWidth:hu(Fd),TileHeight:hu(Fd),MatrixWidth:hu(Fd),MatrixHeight:hu(Fd)},fu(Pm,{Identifier:hu(Nd)}));function Vm(t,e){var i=Nd(t).split(/\s+/);if(i&&2==i.length){var r=+i[0],n=+i[1];if(!isNaN(r)&&!isNaN(n))return[r,n]}}var Xm=Mm,zm=function(){var t;return function(){if(!t){var e=document.body;e.webkitRequestFullscreen?t="webkitfullscreenchange":e.mozRequestFullScreen?t="mozfullscreenchange":e.msRequestFullscreen?t="MSFullscreenChange":e.requestFullscreen&&(t="fullscreenchange")}return t}}();function Wm(){var t=document.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&document.mozFullScreenEnabled||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function Km(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function Hm(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var Zm=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target}),this.cssClassName_=void 0!==i.className?i.className:"ol-full-screen";var r=void 0!==i.label?i.label:"";this.labelNode_="string"==typeof r?document.createTextNode(r):r;var n=void 0!==i.labelActive?i.labelActive:"";this.labelActiveNode_="string"==typeof n?document.createTextNode(n):n,this.button_=document.createElement("button");var o=i.tipLabel?i.tipLabel:"Toggle full-screen";this.setClassName_(this.button_,Km()),this.button_.setAttribute("type","button"),this.button_.title=o,this.button_.appendChild(this.labelNode_),v(this.button_,M.CLICK,this.handleClick_,this);var s=this.cssClassName_+" "+fo+" "+go+" "+(Wm()?"":_o),a=this.element;a.className=s,a.appendChild(this.button_),this.keys_=void 0!==i.keys&&i.keys,this.source_=i.source}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(Wm()){var t,e=this.getMap();if(e)if(Km())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?function(t){t.mozRequestFullScreenWithKeys?t.mozRequestFullScreenWithKeys():t.webkitRequestFullscreen?t.webkitRequestFullscreen():Hm(t)}(t):Hm(t)}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();Km()?(this.setClassName_(this.button_,!0),Qn(this.labelActiveNode_,this.labelNode_)):(this.setClassName_(this.button_,!1),Qn(this.labelNode_,this.labelActiveNode_)),t&&t.updateSize()},e.prototype.setClassName_=function(t,e){var i=this.cssClassName_+"-true",r=this.cssClassName_+"-false",n=e?i:r;t.classList.remove(i),t.classList.remove(r),t.classList.add(n)},e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&this.listenerKeys.push(v(document,zm(),this.handleFullScreenChange_,this))},e}(uo),qm="projection";function Jm(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}var Qm=function(t){function e(e){var i=e||{},r=document.createElement("div");r.className=void 0!==i.className?i.className:"ol-mouse-position",t.call(this,{element:r,render:i.render||Jm,target:i.target}),v(this,G(qm),this.handleProjectionChanged_,this),i.coordinateFormat&&this.setCoordinateFormat(i.coordinateFormat),i.projection&&this.setProjection(i.projection),this.undefinedHTML_=void 0!==i.undefinedHTML?i.undefinedHTML:"&#160;",this.renderOnMouseOut_=!!this.undefinedHTML_,this.renderedHTML_=r.innerHTML,this.mapProjection_=null,this.transform_=null,this.lastMouseMovePixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},e.prototype.getProjection=function(){return this.get(qm)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.lastMouseMovePixel_=e.getEventPixel(t),this.updateHTML_(this.lastMouseMovePixel_)},e.prototype.handleMouseOut=function(t){this.updateHTML_(null),this.lastMouseMovePixel_=null},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var i=e.getViewport();this.listenerKeys.push(v(i,M.MOUSEMOVE,this.handleMouseMove,this),v(i,M.TOUCHSTART,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(v(i,M.MOUSEOUT,this.handleMouseOut,this),v(i,M.TOUCHEND,this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},e.prototype.setProjection=function(t){this.set(qm,Ee(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var i=this.getProjection();this.transform_=i?Le(this.mapProjection_,i):me}var r=this.getMap().getCoordinateFromPixel(t);if(r){this.transform_(r,r);var n=this.getCoordinateFormat();e=n?n(r):r.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(uo);function $m(t){this.validateExtent_(),this.updateBox_()}var tx=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||$m,target:i.target}),this.collapsed_=void 0===i.collapsed||i.collapsed,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var r=void 0!==i.className?i.className:"ol-overviewmap",n=void 0!==i.tipLabel?i.tipLabel:"Overview map",o=void 0!==i.collapseLabel?i.collapseLabel:"";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;var s=void 0!==i.label?i.label:"";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=n,h.appendChild(a),v(h,M.CLICK,this.handleClick_,this),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.ovmap_=new Ha({controls:new U,interactions:new U,view:i.view});var l=this.ovmap_;i.layers&&i.layers.forEach(function(t){l.addLayer(t)}.bind(this));var u=document.createElement("div");u.className="ol-overviewmap-box",u.style.boxSizing="border-box",this.boxOverlay_=new Ja({position:[0,0],positioning:Za.BOTTOM_LEFT,element:u}),this.ovmap_.addOverlay(this.boxOverlay_);var p=r+" "+fo+" "+go+(this.collapsed_&&this.collapsible_?" "+yo:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=p,c.appendChild(this.ovmapDiv_),c.appendChild(h);var d=this,f=this.boxOverlay_,_=this.boxOverlay_.getElement(),g=function(t){var e=function(t){return{clientX:t.clientX-_.offsetWidth/2,clientY:t.clientY+_.offsetHeight/2}}(t),i=l.getEventCoordinate(e);f.setPosition(i)},y=function(t){var e=l.getEventCoordinate(t);d.getMap().getView().setCenter(e),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",y)};_.addEventListener("mousedown",function(){window.addEventListener("mousemove",g),window.addEventListener("mouseup",y)})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){var i=this.getMap();if(e!==i){if(i){var r=i.getView();r&&this.unbindView_(r),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(v(e,l,this.handleMapPropertyChange_,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(e.getLayerGroup());var n=e.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===Ln.VIEW){var e=t.oldValue;e&&this.unbindView_(e);var i=this.getMap().getView();this.bindView_(i)}},e.prototype.bindView_=function(t){v(t,G(Bn),this.handleRotationChanged_,this)},e.prototype.unbindView_=function(t){x(t,G(Bn),this.handleRotationChanged_,this)},e.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),r=t.getView().calculateExtent(i),n=e.getSize(),o=e.getView().calculateExtent(n),s=e.getPixelFromCoordinate(It(r)),a=e.getPixelFromCoordinate(St(r)),h=Math.abs(s[0]-a[0]),l=Math.abs(s[1]-a[1]),u=n[0],p=n[1];h<.1*u||l<.1*p||h>.75*u||l>.75*p?this.resetExtent_():ot(o,r)||this.recenter_()}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getSize(),r=t.getView().calculateExtent(i),n=e.getView(),o=Math.log(7.5)/Math.LN2;Mt(r,1/(.1*Math.pow(2,o/2))),n.fit(r)},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getView();e.getView().setCenter(i.getCenter())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),r=t.getView(),n=e.getView(),o=r.getRotation(),s=this.boxOverlay_,a=this.boxOverlay_.getElement(),h=r.calculateExtent(i),l=n.getResolution(),u=Et(h),p=Lt(h),c=this.calculateCoordinateRotate_(o,u);s.setPosition(c),a&&(a.style.width=Math.abs((u[0]-p[0])/l)+"px",a.style.height=Math.abs((p[1]-u[1])/l)+"px")}},e.prototype.calculateCoordinateRotate_=function(t,e){var i,r=this.getMap().getView().getCenter();return r&&($i(i=[e[0]-r[0],e[1]-r[1]],t),Hi(i,r)),i},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(yo),this.collapsed_?Qn(this.collapseLabel_,this.label_):Qn(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;this.collapsed_||t.isRendered()||(t.updateSize(),this.resetExtent_(),m(t,Rn,function(t){this.updateBox_()},this))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(uo),ex="units",ix={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},rx=[1,2,5];function nx(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}var ox=function(t){function e(e){var i=e||{},r=void 0!==i.className?i.className:"ol-scale-line";t.call(this,{element:document.createElement("div"),render:i.render||nx,target:i.target}),this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+fo,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==i.minWidth?i.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",v(this,G(ex),this.handleUnitsChanged_,this),this.setUnits(i.units||ix.METRIC)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getUnits=function(){return this.get(ex)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(ex,t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,i=t.projection,r=this.getUnits(),n=r==ix.DEGREES?$t.DEGREES:$t.METERS,o=Se(i,t.resolution,e,n);i.getUnits()!=$t.DEGREES&&i.getMetersPerUnit()&&n==$t.METERS&&(o*=i.getMetersPerUnit());var s=this.minWidth_*o,a="";if(r==ix.DEGREES){var h=Qt[$t.DEGREES];i.getUnits()==$t.DEGREES?s*=h:o/=h,s<h/60?(a="",o*=3600):s<h?(a="",o*=60):a=""}else r==ix.IMPERIAL?s<.9144?(a="in",o/=.0254):s<1609.344?(a="ft",o/=.3048):(a="mi",o/=1609.344):r==ix.NAUTICAL?(o/=1852,a="nm"):r==ix.METRIC?s<.001?(a="m",o*=1e6):s<1?(a="mm",o*=1e3):s<1e3?a="m":(a="km",o/=1e3):r==ix.US?s<.9144?(a="in",o*=39.37):s<1609.344?(a="ft",o/=.30480061):(a="mi",o/=1609.3472):Y(!1,33);for(var l,u,p=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));;){if(l=rx[(p%3+3)%3]*Math.pow(10,Math.floor(p/3)),u=Math.round(l/o),isNaN(u))return this.element.style.display="none",void(this.renderedVisible_=!1);if(u>=this.minWidth_)break;++p}var c=l+" "+a;this.renderedHTML_!=c&&(this.innerElement_.innerHTML=c,this.renderedHTML_=c),this.renderedWidth_!=u&&(this.innerElement_.style.width=u+"px",this.renderedWidth_=u),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e}(uo),sx={VERTICAL:0,HORIZONTAL:1};function ax(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;e!==this.currentResolution_&&(this.currentResolution_=e,this.setThumbPosition_(e))}}var hx=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||ax}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=sx.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.previousX_,this.previousY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==i.duration?i.duration:200;var r=void 0!==i.className?i.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=r+"-thumb "+fo;var o=this.element;o.className=r+" "+fo+" "+go,o.appendChild(n),this.dragger_=new Tn(o),v(this.dragger_,Gr.POINTERDOWN,this.handleDraggerStart_,this),v(this.dragger_,Gr.POINTERMOVE,this.handleDraggerDrag_,this),v(this.dragger_,Gr.POINTERUP,this.handleDraggerEnd_,this),v(o,M.CLICK,this.handleContainerClick_,this),v(n,M.CLICK,O)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.dragger_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight,r=t.firstElementChild,n=getComputedStyle(r),o=r.offsetWidth+parseFloat(n.marginRight)+parseFloat(n.marginLeft),s=r.offsetHeight+parseFloat(n.marginTop)+parseFloat(n.marginBottom);this.thumbSize_=[o,s],e>i?(this.direction_=sx.HORIZONTAL,this.widthLimit_=e-o):(this.direction_=sx.VERTICAL,this.heightLimit_=i-s),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(i);e.animate({resolution:e.constrainResolution(r),duration:this.duration_,easing:Xn})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.originalEvent.target===this.element.firstElementChild&&(this.getMap().getView().setHint(jn,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0,0===this.dragListenerKeys_.length)){var e=this.handleDraggerDrag_,i=this.handleDraggerEnd_;this.dragListenerKeys_.push(v(document,M.MOUSEMOVE,e,this),v(document,Gr.POINTERMOVE,e,this),v(document,M.MOUSEUP,i,this),v(document,Gr.POINTERUP,i,this))}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=this.element.firstElementChild,i=t.clientX-this.previousX_+parseFloat(e.style.left),r=t.clientY-this.previousY_+parseFloat(e.style.top),n=this.getRelativePosition_(i,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_),this.setThumbPosition_(this.currentResolution_),this.previousX_=t.clientX,this.previousY_=t.clientY}},e.prototype.handleDraggerEnd_=function(t){if(this.dragging_){var e=this.getMap().getView();e.setHint(jn,-1),e.animate({resolution:e.constrainResolution(this.currentResolution_),duration:this.duration_,easing:Xn}),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0,this.dragListenerKeys_.forEach(E),this.dragListenerKeys_.length=0}},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==sx.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){return kt(this.direction_===sx.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){return 1-this.getMap().getView().getValueForResolutionFunction()(t)},e}(uo),lx=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target}),this.extent=i.extent?i.extent:null;var r=void 0!==i.className?i.className:"ol-zoom-extent",n=void 0!==i.label?i.label:"E",o=void 0!==i.tipLabel?i.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=o,s.appendChild("string"==typeof n?document.createTextNode(n):n),v(s,M.CLICK,this.handleClick_,this);var a=r+" "+fo+" "+go,h=this.element;h.className=a,h.appendChild(s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fit(e)},e}(uo),ux={array:{},color:{},colorlike:{},control:{},coordinate:{},easing:{},events:{}};ux.events.condition={},ux.extent={},ux.featureloader={},ux.format={},ux.format.filter={},ux.geom={},ux.has={},ux.interaction={},ux.layer={},ux.loadingstrategy={},ux.proj={},ux.proj.Units={},ux.proj.proj4={},ux.render={},ux.render.canvas={},ux.renderer={},ux.renderer.canvas={},ux.renderer.webgl={},ux.size={},ux.source={},ux.sphere={},ux.style={},ux.style.IconImageCache={},ux.tilegrid={},ux.xml={},ux.Collection=U,ux.Feature=B,ux.Geolocation=zi,ux.Graticule=Or,ux.Kinetic=br,ux.Map=Ha,ux.Object=D,ux.Observable=F,ux.Observable.unByKey=function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)E(t[e]);else E(t)},ux.Overlay=Ja,ux.PluggableMap=lo,ux.View=qn,ux.WebGLMap=Kl,ux.array.stableSort=q,ux.color.asArray=_r,ux.color.asString=dr,ux.colorlike.asColorLike=Ys,ux.control.Attribution=So,ux.control.Attribution.render=Eo,ux.control.Control=uo,ux.control.FullScreen=Zm,ux.control.MousePosition=Qm,ux.control.MousePosition.render=Jm,ux.control.OverviewMap=tx,ux.control.OverviewMap.render=$m,ux.control.Rotate=Co,ux.control.Rotate.render=To,ux.control.ScaleLine=ox,ux.control.ScaleLine.render=nx,ux.control.Zoom=Ro,ux.control.ZoomSlider=hx,ux.control.ZoomSlider.render=ax,ux.control.ZoomToExtent=lx,ux.control.defaults=wo,ux.coordinate.add=Hi,ux.coordinate.createStringXY=function(t){return function(e){return nr(e,t)}},ux.coordinate.format=Ji,ux.coordinate.rotate=$i,ux.coordinate.toStringHDMS=function(t,e){return t?qi("NS",t[1],e)+" "+qi("EW",t[0],e):""},ux.coordinate.toStringXY=nr,ux.easing.easeIn=Vn,ux.easing.easeOut=Xn,ux.easing.inAndOut=zn,ux.easing.linear=Wn,ux.easing.upAndDown=function(t){return t<.5?zn(2*t):1-zn(2*(t-.5))},ux.events.condition.altKeyOnly=Go,ux.events.condition.altShiftKeysOnly=Do,ux.events.condition.always=jo,ux.events.condition.click=function(t){return t.type==Ar.CLICK},ux.events.condition.doubleClick=function(t){return t.type==Ar.DBLCLICK},ux.events.condition.focus=ko,ux.events.condition.mouseOnly=Ko,ux.events.condition.never=Yo,ux.events.condition.noModifierKeys=Xo,ux.events.condition.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(Gi?e.metaKey:e.ctrlKey)&&!e.shiftKey},ux.events.condition.pointerMove=Bo,ux.events.condition.primaryAction=Ho,ux.events.condition.shiftKeyOnly=zo,ux.events.condition.singleClick=Vo,ux.events.condition.targetNotEditable=Wo,ux.extent.applyTransform=Ft,ux.extent.boundingExtent=tt,ux.extent.buffer=et,ux.extent.containsCoordinate=nt,ux.extent.containsExtent=ot,ux.extent.containsXY=st,ux.extent.createEmpty=ht,ux.extent.equals=dt,ux.extent.extend=ft,ux.extent.getArea=xt,ux.extent.getBottomLeft=Et,ux.extent.getBottomRight=St,ux.extent.getCenter=Tt,ux.extent.getHeight=Rt,ux.extent.getIntersection=wt,ux.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},ux.extent.getTopLeft=It,ux.extent.getTopRight=Lt,ux.extent.getWidth=Ot,ux.extent.intersects=Pt,ux.extent.isEmpty=bt,ux.featureloader.xhr=ql,ux.format.EsriJSON=Sd,ux.format.Feature=cd,ux.format.GML=zd,ux.format.GML2=Zd,ux.format.GML3=Vd,ux.format.GML32=Jd,ux.format.GPX=Ff,ux.format.GeoJSON=Gf,ux.format.IGC=Jf,ux.format.KML=Bg,ux.format.MVT=Qg,ux.format.OSMXML=oy,ux.format.Polyline=cy,ux.format.Polyline.decodeDeltas=hy,ux.format.Polyline.decodeFloats=uy,ux.format.Polyline.encodeDeltas=ay,ux.format.Polyline.encodeFloats=ly,ux.format.TopoJSON=my,ux.format.WFS=gv,ux.format.WFS.writeFilter=function(t){var e=tu(Qy,"Filter");return lv(e,t,[]),e},ux.format.WKT=Gv,ux.format.WMSCapabilities=um,ux.format.WMSGetFeatureInfo=pm,ux.format.WMTSCapabilities=Xm,ux.format.filter.Bbox=Cy,ux.format.filter.Contains=wy,ux.format.filter.During=Ly,ux.format.filter.EqualTo=Py,ux.format.filter.GreaterThan=by,ux.format.filter.GreaterThanOrEqualTo=My,ux.format.filter.Intersects=Fy,ux.format.filter.IsBetween=Ay,ux.format.filter.IsLike=Ny,ux.format.filter.IsNull=Gy,ux.format.filter.LessThan=Dy,ux.format.filter.LessThanOrEqualTo=ky,ux.format.filter.Not=jy,ux.format.filter.NotEqualTo=Uy,ux.format.filter.Or=Yy,ux.format.filter.Within=By,ux.format.filter.and=Vy,ux.format.filter.bbox=Xy,ux.format.filter.between=function(t,e,i){return new Ay(t,e,i)},ux.format.filter.contains=function(t,e,i){return new wy(t,e,i)},ux.format.filter.during=function(t,e,i){return new Ly(t,e,i)},ux.format.filter.equalTo=function(t,e,i){return new Py(t,e,i)},ux.format.filter.greaterThan=function(t,e){return new by(t,e)},ux.format.filter.greaterThanOrEqualTo=function(t,e){return new My(t,e)},ux.format.filter.intersects=function(t,e,i){return new Fy(t,e,i)},ux.format.filter.isNull=function(t){return new Gy(t)},ux.format.filter.lessThan=function(t,e){return new Dy(t,e)},ux.format.filter.lessThanOrEqualTo=function(t,e){return new ky(t,e)},ux.format.filter.like=function(t,e,i,r,n,o){return new Ny(t,e,i,r,n,o)},ux.format.filter.not=function(t){return new jy(t)},ux.format.filter.notEqualTo=function(t,e,i){return new Uy(t,e,i)},ux.format.filter.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Yy,e))},ux.format.filter.within=function(t,e,i){return new By(t,e,i)},ux.geom.Circle=Oc,ux.geom.Geometry=Xe,ux.geom.GeometryCollection=ud,ux.geom.LineString=hr,ux.geom.LinearRing=pi,ux.geom.MultiLineString=Pc,ux.geom.MultiPoint=bc,ux.geom.MultiPolygon=Fc,ux.geom.Point=ci,ux.geom.Polygon=Ii,ux.geom.Polygon.circular=Li,ux.geom.Polygon.fromCircle=Pi,ux.geom.Polygon.fromExtent=Oi,ux.geom.SimpleGeometry=We,ux.getUid=o,ux.has.DEVICE_PIXEL_RATIO=Di,ux.has.GEOLOCATION=ji,ux.has.TOUCH=Ui,ux.inherits=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},ux.interaction.DoubleClickZoom=No,ux.interaction.DragAndDrop=wc,ux.interaction.DragBox=ns,ux.interaction.DragPan=Jo,ux.interaction.DragRotate=Qo,ux.interaction.DragRotateAndZoom=Ic,ux.interaction.DragZoom=ss,ux.interaction.Draw=kc,ux.interaction.Draw.createBox=function(){return function(t,e){var i=tt(t),r=[[Et(i),St(i),Lt(i),It(i),Et(i)]],n=e;return n?n.setCoordinates(r):n=new Ii(r),n}},ux.interaction.Draw.createRegularPolygon=function(t,e){return function(i,r){var n=i[0],o=i[1],s=Math.sqrt(er(n,o)),a=r||Pi(new Oc(n),t),h=e;if(!e){var l=o[0]-n[0],u=o[1]-n[1];h=Math.atan(u/l)-(l<0?Math.PI:0)}return bi(a,n,s,h),a}},ux.interaction.Extent=Vc,ux.interaction.Interaction=Fo,ux.interaction.KeyboardPan=ls,ux.interaction.KeyboardZoom=ps,ux.interaction.Modify=Jc,ux.interaction.MouseWheelZoom=fs,ux.interaction.PinchRotate=_s,ux.interaction.PinchZoom=gs,ux.interaction.Pointer=qo,ux.interaction.Select=ed,ux.interaction.Snap=rd,ux.interaction.Translate=hd,ux.interaction.defaults=ys,ux.layer.Base=io,ux.layer.Group=oo,ux.layer.Heatmap=mc,ux.layer.Image=bp,ux.layer.Tile=Np,ux.layer.Vector=gc,ux.layer.VectorTile=Ec,ux.loadingstrategy.all=Jl,ux.loadingstrategy.bbox=function(t,e){return[t]},ux.loadingstrategy.tile=function(t){return function(e,i){var r=t.getZForResolution(i),n=t.getTileRangeForExtentAndZ(e,r),o=[],s=[r,0,0];for(s[1]=n.minX;s[1]<=n.maxX;++s[1])for(s[2]=n.minY;s[2]<=n.maxY;++s[2])o.push(t.getTileCoordExtent(s));return o}},ux.proj.Projection=ee,ux.proj.Units.METERS_PER_UNIT=Qt,ux.proj.addCoordinateTransforms=we,ux.proj.addEquivalentProjections=Te,ux.proj.addProjection=xe,ux.proj.equivalent=Ie,ux.proj.fromLonLat=function(t,e){return Pe(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},ux.proj.get=Ee,ux.proj.getPointResolution=Se,ux.proj.getTransform=Oe,ux.proj.proj4.register=function(t){var e,i,r=Object.keys(t.defs),n=r.length;for(e=0;e<n;++e){var o=r[e];if(!Ee(o)){var s=t.defs(o);xe(new ee({code:o,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:s.units}))}}for(e=0;e<n;++e){var a=r[e],h=Ee(a);for(i=0;i<n;++i){var l=r[i],u=Ee(l);if(!ye(a,l))if(t.defs[a]===t.defs[l])Te([h,u]);else{var p=t(a,l);we(h,u,p.forward,p.inverse)}}}},ux.proj.toLonLat=function(t,e){var i=Pe(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),r=i[0];return(r<-180||r>180)&&(i[0]=Xt(r+180,360)-180),i},ux.proj.transform=Pe,ux.proj.transformExtent=be,ux.render.VectorContext=Vs,ux.render.canvas.labelCache=Ps,ux.render.toContext=function(t,e){var i=t.canvas,r=e||{},n=r.pixelRatio||Di,o=r.size;o&&(i.width=o[0]*n,i.height=o[1]*n,i.style.width=o[0]+"px",i.style.height=o[1]+"px");var s=[0,0,i.width,i.height],a=je([1,0,0,1,0,0],n,n);return new Xs(t,n,s,a,0)},ux.renderer.canvas.ImageLayer=ra,ux.renderer.canvas.Map=Qs,ux.renderer.canvas.TileLayer=ha,ux.renderer.canvas.VectorLayer=Ba,ux.renderer.canvas.VectorTileLayer=Ka,ux.renderer.webgl.ImageLayer=gl,ux.renderer.webgl.Map=yl,ux.renderer.webgl.TileLayer=Xl,ux.renderer.webgl.VectorLayer=Wl,ux.size.toSize=ho,ux.source.BingMaps=tp,ux.source.CartoDB=ip,ux.source.Cluster=sp,ux.source.Image=dp,ux.source.ImageArcGISRest=gp,ux.source.ImageCanvas=yp,ux.source.ImageMapGuide=vp,ux.source.ImageStatic=mp,ux.source.ImageWMS=wp,ux.source.OSM=Lp,ux.source.OSM.ATTRIBUTION=Ip,ux.source.Raster=Vp,ux.source.Source=Il,ux.source.Stamen=Kp,ux.source.Tile=jl,ux.source.TileArcGISRest=Zp,ux.source.TileDebug=Jp,ux.source.TileImage=$u,ux.source.TileJSON=Qp,ux.source.TileWMS=tc,ux.source.UTFGrid=ic,ux.source.Vector=op,ux.source.VectorTile=ac,ux.source.WMTS=lc,ux.source.WMTS.optionsFromCapabilities=function(t,e){var i=H(t.Contents.Layer,function(t,i,r){return t.Identifier==e.layer});if(null===i)return null;var r,n=t.Contents.TileMatrixSet;(r=i.TileMatrixSetLink.length>1?J(i.TileMatrixSetLink,"projection"in e?function(t,i,r){var o=H(n,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,s=Ee(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Ee(o),a=Ee(e.projection);return s&&a?Ie(s,a):o==e.projection}:function(t,i,r){return t.TileMatrixSet==e.matrixSet}):0)<0&&(r=0);var o=i.TileMatrixSetLink[r].TileMatrixSet,s=i.TileMatrixSetLink[r].TileMatrixSetLimits,a=i.Format[0];"format"in e&&(a=e.format),(r=J(i.Style,function(t,i,r){return"style"in e?t.Title==e.style:t.isDefault}))<0&&(r=0);var h=i.Style[r].Identifier,l={};"Dimension"in i&&i.Dimension.forEach(function(t,e,i){var r=t.Identifier,n=t.Default;void 0===n&&(n=t.Value[0]),l[r]=n});var u,p=H(t.Contents.TileMatrixSet,function(t,e,i){return t.Identifier==o}),c=p.SupportedCRS;if(c&&(u=Ee(c.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Ee(c)),"projection"in e){var d=Ee(e.projection);d&&(u&&!Ie(d,u)||(u=d))}var f,_,g=i.WGS84BoundingBox;if(void 0!==g){var y=Ee("EPSG:4326").getExtent();_=g[0]==y[0]&&g[2]==y[2],f=be(g,"EPSG:4326",u);var v=u.getExtent();v&&(ot(v,f)||(f=void 0))}var m=Eu(p,f,s),x=[],E=e.requestEncoding;if(E=void 0!==E?E:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var S=t.OperationsMetadata.GetTile.DCP.HTTP.Get,T=0,C=S.length;T<C;++T)if(S[T].Constraint){var R=H(S[T].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===E&&(E=R[0]),E!==hc.KVP)break;X(R,hc.KVP)&&x.push(S[T].href)}else S[T].href&&(E=hc.KVP,x.push(S[T].href));return 0===x.length&&(E=hc.REST,i.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(a=t.format,x.push(t.template))})),{urls:x,layer:e.layer,matrixSet:o,format:a,projection:u,requestEncoding:E,tileGrid:m,style:h,dimensions:l,wrapX:_,crossOrigin:e.crossOrigin}},ux.source.XYZ=ep,ux.source.Zoomify=dc,ux.sphere.getArea=function t(e,i){var r=i||{},n=r.radius||Wt,o=r.projection||"EPSG:3857",s=e.getType();s!==Nt.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var a,h,l,u,p,c,d=0;switch(s){case Nt.POINT:case Nt.MULTI_POINT:case Nt.LINE_STRING:case Nt.MULTI_LINE_STRING:case Nt.LINEAR_RING:break;case Nt.POLYGON:for(a=e.getCoordinates(),d=Math.abs(Zt(a[0],n)),l=1,u=a.length;l<u;++l)d-=Math.abs(Zt(a[l],n));break;case Nt.MULTI_POLYGON:for(l=0,u=(a=e.getCoordinates()).length;l<u;++l)for(h=a[l],d+=Math.abs(Zt(h[0],n)),p=1,c=h.length;p<c;++p)d-=Math.abs(Zt(h[p],n));break;case Nt.GEOMETRY_COLLECTION:var f=e.getGeometries();for(l=0,u=f.length;l<u;++l)d+=t(f[l],i);break;default:throw new Error("Unsupported geometry type: "+s)}return d},ux.sphere.getDistance=Kt,ux.sphere.getLength=function t(e,i){var r=i||{},n=r.radius||Wt,o=r.projection||"EPSG:3857",s=e.getType();s!==Nt.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var a,h,l,u,p,c,d=0;switch(s){case Nt.POINT:case Nt.MULTI_POINT:break;case Nt.LINE_STRING:case Nt.LINEAR_RING:d=Ht(a=e.getCoordinates(),n);break;case Nt.MULTI_LINE_STRING:case Nt.POLYGON:for(l=0,u=(a=e.getCoordinates()).length;l<u;++l)d+=Ht(a[l],n);break;case Nt.MULTI_POLYGON:for(l=0,u=(a=e.getCoordinates()).length;l<u;++l)for(p=0,c=(h=a[l]).length;p<c;++p)d+=Ht(h[p],n);break;case Nt.GEOMETRY_COLLECTION:var f=e.getGeometries();for(l=0,u=f.length;l<u;++l)d+=t(f[l],i);break;default:throw new Error("Unsupported geometry type: "+s)}return d},ux.style.AtlasManager=ol,ux.style.Circle=Ru,ux.style.Fill=mr,ux.style.Icon=Ou,ux.style.IconImageCache.shared=Ks,ux.style.Image=Tu,ux.style.RegularShape=Cu,ux.style.Stroke=Er,ux.style.Style=Nu,ux.style.Text=Rr,ux.tilegrid.TileGrid=Pl,ux.tilegrid.WMTS=xu,ux.tilegrid.WMTS.createFromCapabilitiesMatrixSet=Eu,ux.tilegrid.createXYZ=Fl,ux.xml.getAllTextContent=eu,ux.xml.parse=ru;e.default=ux}]).default});

/* Source and licensing information for the above line(s) can be found at https://www.fgr.gob.cu/themes/custom/fgr/js/openlayers/ol.js. */;
/* Source and licensing information for the line(s) below can be found at https://www.fgr.gob.cu/themes/custom/fgr/js/openlayers/openlayers.js. */
;var baseMapLayer=new ol.layer.Tile({source:new ol.source.OSM()});var map=new ol.Map({target:'mapa',layers:[baseMapLayer],view:new ol.View({center:ol.proj.fromLonLat([-82.42273038525376,23.126210001055295]),zoom:18}),});var marker=new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat([-82.42273038525376,23.126210001055295])),});var iconStyle=new ol.style.Style({image:new ol.style.Icon(({opacity:0.75,src:'themes/custom/fgr/images/location.png'}))});marker.setStyle(iconStyle);var vectorSource=new ol.source.Vector({features:[marker]});var markerVectorLayer=new ol.layer.Vector({source:vectorSource,});map.addLayer(markerVectorLayer);
/* Source and licensing information for the above line(s) can be found at https://www.fgr.gob.cu/themes/custom/fgr/js/openlayers/openlayers.js. */;
/* Source and licensing information for the line(s) below can be found at https://www.fgr.gob.cu/themes/custom/fgr/js/highmaps/highmaps.js. */
(function(t,e){'object'===typeof module&&module.exports?(e['default']=e,module.exports=t.document?e(t):e):'function'===typeof define&&define.amd?define('highcharts/highmaps',function(){return e(t)}):(t.Highcharts&&t.Highcharts.error(16,!0),t.Highcharts=e(t))})('undefined'!==typeof window?window:this,function(t){function i(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i))};var e={};i(e,'Core/Globals.js',[],function(){var e='undefined'!==typeof t?t:'undefined'!==typeof window?window:{},o=e.document,i=e.navigator&&e.navigator.userAgent||'',h=o&&o.createElementNS&&!!o.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect,s=/(edge|msie|trident)/i.test(i)&&!e.opera,n=-1!==i.indexOf('Firefox'),a=-1!==i.indexOf('Chrome'),l=n&&4>parseInt(i.split('Firefox/')[1],10),r=function(){};return{product:'Highcharts',version:'9.0.1',deg2rad:2*Math.PI/360,doc:o,hasBidiBug:l,hasTouch:!!e.TouchEvent,isMS:s,isWebKit:-1!==i.indexOf('AppleWebKit'),isFirefox:n,isChrome:a,isSafari:!a&&-1!==i.indexOf('Safari'),isTouchDevice:/(Mobile|Android|Windows Phone)/.test(i),SVG_NS:'http://www.w3.org/2000/svg',chartCount:0,seriesTypes:{},supportsPassiveEvents:function(){var i=!1;if(!s){var t=Object.defineProperty({},'passive',{get:function(){i=!0}});e.addEventListener&&e.removeEventListener&&(e.addEventListener('testPassive',r,t),e.removeEventListener('testPassive',r,t))};return i}(),symbolSizes:{},svg:h,win:e,marginNames:['plotTop','marginRight','marginBottom','plotLeft'],noop:r,charts:[],dateFormats:{}}});i(e,'Core/Utilities.js',[e['Core/Globals.js']],function(t){function e(t,r,s,n){var h=r?'Highcharts error':'Highcharts warning';32===t&&(t=h+': Deprecated member');var l=g(t),a=l?h+' #'+t+': www.highcharts.com/errors/'+t+'/':t.toString();h=function(){if(r)throw Error(a);o.console&&-1===e.messages.indexOf(a)&&console.warn(a)};if('undefined'!==typeof n){var p='';l&&(a+='?');i(n,function(t,e){p+='\n - '+e+': '+t;l&&(a+=encodeURI(e)+'='+encodeURI(t))});a+=p};s?A(s,'displayError',{code:t,message:a,params:n},h):h();e.messages.push(a)};function p(){var e,t=arguments,o={},s=function(t,e){'object'!==typeof t&&(t={});i(e,function(i,o){'__proto__'!==o&&'constructor'!==o&&(!r(i,!0)||x(i)||f(i)?t[o]=e[o]:t[o]=s(t[o]||{},i))});return t};!0===t[0]&&(o=t[1],t=Array.prototype.slice.call(t,2));var n=t.length;for(e=0;e<n;e++)o=s(o,t[e]);return o};function v(t,e){var o={};i(t,function(i,s){if(r(t[s],!0)&&!t.nodeType&&e[s])i=v(t[s],e[s]),Object.keys(i).length&&(o[s]=i);else if(r(t[s])||t[s]!==e[s])o[s]=t[s]});return o};function c(t,e){return parseInt(t,e||10)};function d(t){return'string'===typeof t};function u(t){t=Object.prototype.toString.call(t);return'[object Array]'===t||'[object Array Iterator]'===t};function r(t,e){return!!t&&'object'===typeof t&&(!e||!u(t))};function f(t){return r(t)&&'number'===typeof t.nodeType};function x(t){var e=t&&t.constructor;return!(!r(t,!0)||f(t)||!e||!e.name||'Object'===e.name)};function g(t){return'number'===typeof t&&!isNaN(t)&&Infinity>t&&-Infinity<t};function m(t){return'undefined'!==typeof t&&null!==t};function b(t,e,o){var r;d(e)?m(o)?t.setAttribute(e,o):t&&t.getAttribute&&((r=t.getAttribute(e))||'class'!==e||(r=t.getAttribute(e+'Name'))):i(e,function(e,i){t.setAttribute(i,e)});return r};function s(t,e){var i;t||(t={});for(i in e)t[i]=e[i];return t};function n(){for(var i=arguments,o=i.length,e=0;e<o;e++){var t=i[e];if('undefined'!==typeof t&&null!==t)return t}};function y(e,i){t.isMS&&!t.svg&&i&&'undefined'!==typeof i.opacity&&(i.filter='alpha(opacity='+100*i.opacity+')');s(e.style,i)};function C(t,e,i,o,r){t=h.createElement(t);e&&s(t,e);r&&y(t,{padding:'0',border:'none',margin:'0'});i&&y(t,i);o&&o.appendChild(t);return t};function M(t,e){return parseFloat(t.toPrecision(e||14))};function S(e,i,o,r){e=+e||0;i=+i;var p=t.defaultOptions.lang,h=(e.toString().split('.')[1]||'').split('e')[0].length,s=e.toString().split('e'),d=i;if(-1===i)i=Math.min(h,20);else if(!g(i))i=2;else if(i&&s[1]&&0>s[1]){var a=i+ +s[1];0<=a?(s[0]=(+s[0]).toExponential(a).split('e')[0],i=a):(s[0]=s[0].split('.')[0]||0,e=20>i?(s[0]*Math.pow(10,s[1])).toFixed(i):0,s[1]=0)};var l=(Math.abs(s[1]?s[0]:e)+Math.pow(10,-Math.max(i,h)-1)).toFixed(i);h=String(c(l));a=3<h.length?h.length%3:0;o=n(o,p.decimalPoint);r=n(r,p.thousandsSep);e=(0>e?'-':'')+(a?h.substr(0,a)+r:'');e=0>+s[1]&&!d?'0':e+h.substr(a).replace(/(\d{3})(?=\d)/g,'$1'+r);i&&(e+=o+l.slice(-i));s[1]&&0!==+e&&(e+='e'+s[1]);return e};function k(t,e){if(!t)return e;var i=t.split('.').reverse();if(1===i.length)return e[t];for(t=i.pop();'undefined'!==typeof t&&'undefined'!==typeof e&&null!==e;)e=e[t],t=i.pop();return e};function i(t,e,i){for(var o in t)Object.hasOwnProperty.call(t,o)&&e.call(i||t[o],t[o],o,t)};function w(e,o,r){function a(i,o){var r=e.removeEventListener||t.removeEventListenerPolyfill;r&&r.call(e,i,o,!1)};function h(t){var s;if(e.nodeName){if(o){var r={};r[o]=!0}
else r=t;i(r,function(e,i){if(t[i])for(s=t[i].length;s--;)a(i,t[i][s].fn)})}};var n='function'===typeof e&&e.prototype||e;if(Object.hasOwnProperty.call(n,'hcEvents')){var s=n.hcEvents;o?(n=s[o]||[],r?(s[o]=n.filter(function(t){return r!==t.fn}),a(o,r)):(h(s),s[o]=[])):(h(s),delete n.hcEvents)}};function A(t,e,i,o){i=i||{};if(h.createEvent&&(t.dispatchEvent||t.fireEvent)){var r=h.createEvent('Events');r.initEvent(e,!0,!0);s(r,i);t.dispatchEvent?t.dispatchEvent(r):t.fireEvent(e,r)}
else if(t.hcEvents){i.target||s(i,{preventDefault:function(){i.defaultPrevented=!0},target:t,type:e});r=[];for(var n=t,a=!1;n.hcEvents;)Object.hasOwnProperty.call(n,'hcEvents')&&n.hcEvents[e]&&(r.length&&(a=!0),r.unshift.apply(r,n.hcEvents[e])),n=Object.getPrototypeOf(n);a&&r.sort(function(t,e){return t.order-e.order});r.forEach(function(e){!1===e.fn.call(t,i)&&i.preventDefault()})};o&&!i.defaultPrevented&&o.call(t,i)};var E=t.charts,h=t.doc,o=t.win;'';(e||(e={})).messages=[];var a;Math.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)};var O=Array.prototype.find?function(t,e){return t.find(e)}:function(t,e){var i,o=t.length;for(i=0;i<o;i++)if(e(t[i],i))return t[i]};i({map:'map',each:'forEach',grep:'filter',reduce:'reduce',some:'some'},function(i,o){t[o]=function(t){var r;e(32,!1,void 0,(r={},r['Highcharts.'+o]='use Array.'+i,r));return Array.prototype[i].apply(t,[].slice.call(arguments,1))}});var l,P=function(){var t=Math.random().toString(36).substring(2,9)+'-',e=0;return function(){return'highcharts-'+(l?'':t)+e++}}(),T=t.getOptions=function(){return t.defaultOptions},L=t.setOptions=function(e){t.defaultOptions=p(!0,t.defaultOptions,e);(e.time||e.global)&&t.time.update(p(t.defaultOptions.global,t.defaultOptions.time,e.global,e.time));return t.defaultOptions};o.jQuery&&(o.jQuery.fn.highcharts=function(){var e=[].slice.call(arguments);if(this[0])return e[0]?(new(t[d(e[0])?e.shift():'Chart'])(this[0],e[0],e[1]),this):E[b(this[0],'data-highcharts-chart')]});return{addEvent:function(e,i,o,r){void 0===r&&(r={});var s='function'===typeof e&&e.prototype||e;Object.hasOwnProperty.call(s,'hcEvents')||(s.hcEvents={});s=s.hcEvents;t.Point&&e instanceof t.Point&&e.series&&e.series.chart&&(e.series.chart.runTrackerClick=!0);var n=e.addEventListener||t.addEventListenerPolyfill;n&&n.call(e,i,o,t.supportsPassiveEvents?{passive:void 0===r.passive?-1!==i.indexOf('touch'):r.passive,capture:!1}:!1);s[i]||(s[i]=[]);s[i].push({fn:o,order:'number'===typeof r.order?r.order:Infinity});s[i].sort(function(t,e){return t.order-e.order});return function(){w(e,i,o)}},arrayMax:function(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i},arrayMin:function(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i},attr:b,clamp:function(t,e,i){return t>e?t<i?t:i:e},cleanRecursively:v,clearTimeout:function(t){m(t)&&clearTimeout(t)},correctFloat:M,createElement:C,css:y,defined:m,destroyObjectProperties:function(t,e){i(t,function(i,o){i&&i!==e&&i.destroy&&i.destroy();delete t[o]})},discardElement:function(t){a||(a=C('div'));t&&a.appendChild(t);a.innerHTML=''},erase:function(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}},error:e,extend:s,extendClass:function(t,e){var i=function(){};i.prototype=new t;s(i.prototype,e);return i},find:O,fireEvent:A,format:function(e,i,o){var s='{',h=!1,n=[],c=/f$/,d=/\.([0-9])/,l=t.defaultOptions.lang,u=o&&o.time||t.time;for(o=o&&o.numberFormatter||S;e;){var a=e.indexOf(s);if(-1===a)break;var r=e.slice(0,a);if(h){r=r.split(':');s=k(r.shift()||'',i);if(r.length&&'number'===typeof s)if(r=r.join(':'),c.test(r)){var p=parseInt((r.match(d)||['','-1'])[1],10);null!==s&&(s=o(s,p,l.decimalPoint,-1<r.indexOf(',')?l.thousandsSep:''))}
else s=u.dateFormat(r,s);n.push(s)}
else n.push(r);e=e.slice(a+1);s=(h=!h)?'}':'{'};n.push(e);return n.join('')},getMagnitude:function(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))},getNestedProperty:k,getOptions:T,getStyle:function(i,r,s){if('width'===r)return r=Math.min(i.offsetWidth,i.scrollWidth),s=i.getBoundingClientRect&&i.getBoundingClientRect().width,s<r&&s>=r-1&&(r=Math.floor(s)),Math.max(0,r-t.getStyle(i,'padding-left')-t.getStyle(i,'padding-right'));if('height'===r)return Math.max(0,Math.min(i.offsetHeight,i.scrollHeight)-t.getStyle(i,'padding-top')-t.getStyle(i,'padding-bottom'));o.getComputedStyle||e(27,!0);if(i=o.getComputedStyle(i,void 0))i=i.getPropertyValue(r),n(s,'opacity'!==r)&&(i=c(i));return i},inArray:function(t,i,o){e(32,!1,void 0,{'Highcharts.inArray':'use Array.indexOf'});return i.indexOf(t,o)},isArray:u,isClass:x,isDOMElement:f,isFunction:function(t){return'function'===typeof t},isNumber:g,isObject:r,isString:d,keys:function(t){e(32,!1,void 0,{'Highcharts.keys':'use Object.keys'});return Object.keys(t)},merge:p,normalizeTickInterval:function(t,e,i,o,r){var s=t;i=n(i,1);var a=t/i;e||(e=r?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===o&&(1===i?e=e.filter(function(t){return 0===t%1}):.1>=i&&(e=[1/i])));for(o=0;o<e.length&&!(s=e[o],r&&s*i>=t||!r&&a<=(e[o]+(e[o+1]||e[o]))/2);o++);return s=M(s*i,-Math.round(Math.log(.001)/Math.LN10))},numberFormat:S,objectEach:i,offset:function(t){var e=h.documentElement;t=t.parentElement||t.parentNode?t.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:t.top+(o.pageYOffset||e.scrollTop)-(e.clientTop||0),left:t.left+(o.pageXOffset||e.scrollLeft)-(e.clientLeft||0),width:t.width,height:t.height}},pad:function(t,e,i){return Array((e||2)+1-String(t).replace('-','').length).join(i||'0')+t},pick:n,pInt:c,relativeLength:function(t,e,i){return/%$/.test(t)?e*parseFloat(t)/100+(i||0):parseFloat(t)},removeEvent:w,setOptions:L,splat:function(t){return u(t)?t:[t]},stableSort:function(t,e){var r=t.length,o,i;for(i=0;i<r;i++)t[i].safeI=i;t.sort(function(t,i){o=e(t,i);return 0===o?t.safeI-i.safeI:o});for(i=0;i<r;i++)delete t[i].safeI},syncTimeout:function(t,e,i){if(0<e)return setTimeout(t,e,i);t.call(0,i);return-1},timeUnits:{millisecond:1,second:1E3,minute:6E4,hour:36E5,day:864E5,week:6048E5,month:24192E5,year:314496E5},uniqueKey:P,useSerialIds:function(t){return l=n(t,l)},wrap:function(t,e,i){var o=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments),r=arguments,e=this;e.proceed=function(){o.apply(e,arguments.length?arguments:r)};t.unshift(o);t=i.apply(this,t);e.proceed=null;return t}}}});i(e,'Core/Renderer/HTML/AST.js',[e['Core/Globals.js'],e['Core/Utilities.js']],function(t,e){var o=t.SVG_NS,a=e.attr,h=e.createElement,l=e.discardElement,r=e.error,p=e.isString,s=e.objectEach,c=e.splat;'';var i=!1;try{i=!!(new DOMParser).parseFromString('','text/html')}catch(n){};return function(){function e(t){this.nodes='string'===typeof t?this.parseMarkup(t):t};e.filterUserAttributes=function(t){s(t,function(i,o){var s=!0;-1===e.allowedAttributes.indexOf(o)&&(s=!1);-1!==['background','dynsrc','href','lowsrc','src'].indexOf(o)&&(s=p(i)&&e.allowedReferences.some(function(t){return 0===i.indexOf(t)}));s||(r('Highcharts warning: Invalid attribute \''+o+'\' in config'),delete t[o])});return t};e.setElementHTML=function(t,i){t.innerHTML='';i&&(new e(i)).addToDOM(t)};e.prototype.addToDOM=function(i){function n(i,h){var l;c(i).forEach(function(i){var p=i.tagName,d=i.textContent?t.doc.createTextNode(i.textContent):void 0;if(p)if('#text'===p)var c=d;else if(-1!==e.allowedTags.indexOf(p)){p=t.doc.createElementNS('svg'===p?o:h.namespaceURI||o,p);var u=i.attributes||{};s(i,function(t,e){'tagName'!==e&&'attributes'!==e&&'children'!==e&&'textContent'!==e&&(u[e]=t)});a(p,e.filterUserAttributes(u));d&&p.appendChild(d);n(i.children||[],p);c=p}
else r('Highcharts warning: Invalid tagName \''+p+'\' in config');c&&h.appendChild(c);l=c});return l};return n(this.nodes,i)};e.prototype.parseMarkup=function(t){var r=[];if(i)t=(new DOMParser).parseFromString(t,'text/html');else{var e=h('div');e.innerHTML=t;t={body:e}};var o=function(t,e){var i=t.nodeName.toLowerCase(),r={tagName:i};if('#text'===i){i=t.textContent||'';if(/^[\s]*$/.test(i))return;r.textContent=i};if(i=t.attributes){var n={};[].forEach.call(i,function(t){n[t.name]=t.value});r.attributes=n};if(t.childNodes.length){var s=[];[].forEach.call(t.childNodes,function(t){o(t,s)});s.length&&(r.children=s)};e.push(r)};[].forEach.call(t.body.childNodes,function(t){return o(t,r)});e&&l(e);return r};e.allowedTags='a b br button caption circle clipPath code dd defs div dl dt em feComponentTransfer feFuncA feFuncB feFuncG feFuncR feGaussianBlur feOffset feMerge feMergeNode filter h1 h2 h3 h4 h5 h6 hr i img li linearGradient marker ol p path pattern pre rect small span stop strong style sub sup svg table text thead tbody tspan td th tr ul #text'.split(' ');e.allowedAttributes='aria-controls aria-describedby aria-expanded aria-haspopup aria-hidden aria-label aria-labelledby aria-live aria-pressed aria-readonly aria-roledescription aria-selected class clip-path color colspan cx cy d dx dy disabled fill height href id in markerHeight markerWidth offset opacity orient padding paddingLeft patternUnits r refX refY role scope slope src startOffset stdDeviation stroke stroke-linecap stroke-width style result rowspan summary target tabindex text-align textAnchor textLength type valign width x x1 xy y y1 y2 zIndex'.split(' ');e.allowedReferences='https:// http:// mailto: / ../ ./ #'.split(' ');return e}()});i(e,'Core/Color/Color.js',[e['Core/Globals.js'],e['Core/Utilities.js']],function(t,e){var o=e.isNumber,r=e.merge,i=e.pInt;'';e=function(){function e(o){this.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[i(t[1]),i(t[2]),i(t[3]),parseFloat(t[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[i(t[1]),i(t[2]),i(t[3]),1]}}];this.rgba=[];if(t.Color!==e)return new t.Color(o);if(!(this instanceof e))return new e(o);this.init(o)};e.parse=function(t){return new e(t)};e.prototype.init=function(t){var i,r;if((this.input=t=e.names[t&&t.toLowerCase?t.toLowerCase():'']||t)&&t.stops)this.stops=t.stops.map(function(t){return new e(t[1])});else{if(t&&t.charAt&&'#'===t.charAt()){var o=t.length;t=parseInt(t.substr(1),16);7===o?i=[(t&16711680)>>16,(t&65280)>>8,t&255,1]:4===o&&(i=[(t&3840)>>4|(t&3840)>>8,(t&240)>>4|t&240,(t&15)<<4|t&15,1])};if(!i)for(r=this.parsers.length;r--&&!i;){var s=this.parsers[r];(o=s.regex.exec(t))&&(i=s.parse(o))}};this.rgba=i||[]};e.prototype.get=function(t){var s=this.input,e=this.rgba;if('undefined'!==typeof this.stops){var i=r(s);i.stops=[].concat(i.stops);this.stops.forEach(function(e,o){i.stops[o]=[i.stops[o][0],e.get(t)]})}
else i=e&&o(e[0])?'rgb'===t||!t&&1===e[3]?'rgb('+e[0]+','+e[1]+','+e[2]+')':'a'===t?e[3]:'rgba('+e.join(',')+')':s;return i};e.prototype.brighten=function(t){var e,r=this.rgba;if(this.stops)this.stops.forEach(function(e){e.brighten(t)});else if(o(t)&&0!==t)for(e=0;3>e;e++)r[e]+=i(255*t),0>r[e]&&(r[e]=0),255<r[e]&&(r[e]=255);return this};e.prototype.setOpacity=function(t){this.rgba[3]=t;return this};e.prototype.tweenTo=function(t,e){var o=this.rgba,i=t.rgba;i.length&&o&&o.length?(t=1!==i[3]||1!==o[3],e=(t?'rgba(':'rgb(')+Math.round(i[0]+(o[0]-i[0])*(1-e))+','+Math.round(i[1]+(o[1]-i[1])*(1-e))+','+Math.round(i[2]+(o[2]-i[2])*(1-e))+(t?','+(i[3]+(o[3]-i[3])*(1-e)):'')+')'):e=t.input||'none';return e};e.names={white:'#ffffff',black:'#000000'};return e}();t.Color=e;t.color=e.parse;return e});i(e,'Core/Color/Palette.js',[],function(){return{colors:'#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1'.split(' '),backgroundColor:'#ffffff',neutralColor100:'#000000',neutralColor80:'#333333',neutralColor60:'#666666',neutralColor40:'#999999',neutralColor20:'#cccccc',neutralColor10:'#e6e6e6',neutralColor5:'#f2f2f2',neutralColor3:'#f7f7f7',highlightColor100:'#003399',highlightColor80:'#335cad',highlightColor60:'#6685c2',highlightColor20:'#ccd6eb',highlightColor10:'#e6ebf5',indicatorPositiveLine:'#06b535',indicatorNegativeLine:'#f21313'}});i(e,'Core/Animation/Fx.js',[e['Core/Globals.js'],e['Core/Utilities.js']],function(t,e){var o=t.win,i=e.isNumber,r=e.objectEach;e=function(){function e(t,e,i){this.pos=NaN;this.options=e;this.elem=t;this.prop=i};e.prototype.dSetter=function(){var t=this.paths,p=t&&t[0];t=t&&t[1];var r=[],l=this.now||0;if(1!==l&&p&&t)if(p.length===t.length&&1>l)for(var o=0;o<t.length;o++){for(var c=p[o],a=t[o],h=[],e=0;e<a.length;e++){var s=c[e],n=a[e];i(s)&&i(n)&&('A'!==a[0]||4!==e&&5!==e)?h[e]=s+l*(n-s):h[e]=n};r.push(h)}
else r=t;else r=this.toD||[];this.elem.attr('d',r,void 0,!0)};e.prototype.update=function(){var t=this.elem,e=this.prop,i=this.now,o=this.options.step;if(this[e+'Setter'])this[e+'Setter']();else t.attr?t.element&&t.attr(e,i,null,!0):t.style[e]=i+this.unit;o&&o.call(t,i,this)};e.prototype.run=function(t,i,r){var a=this,n=a.options,s=function(t){return s.stopped?!1:a.step(t)},h=o.requestAnimationFrame||function(t){setTimeout(t,13)},l=function(){for(var t=0;t<e.timers.length;t++)e.timers[t]()||e.timers.splice(t--,1);e.timers.length&&h(l)};t!==i||this.elem['forceAnimate:'+this.prop]?(this.startTime=+new Date,this.start=t,this.end=i,this.unit=r,this.now=this.start,this.pos=0,s.elem=this.elem,s.prop=this.prop,s()&&1===e.timers.push(s)&&h(l)):(delete n.curAnim[this.prop],n.complete&&0===Object.keys(n.curAnim).length&&n.complete.call(this.elem))};e.prototype.step=function(t){var s=+new Date,e=this.options,i=this.elem,n=e.complete,a=e.duration,h=e.curAnim;if(i.attr&&!i.element)t=!1;else if(t||s>=a+this.startTime){this.now=this.end;this.pos=1;this.update();var o=h[this.prop]=!0;r(h,function(t){!0!==t&&(o=!1)});o&&n&&n.call(i);t=!1}
else this.pos=e.easing((s-this.startTime)/a),this.now=this.start+(this.end-this.start)*this.pos,this.update(),t=!0;return t};e.prototype.initPath=function(t,e,o){function p(t,e){for(;t.length<a;){var i=t[0],o=e[a-t.length];o&&'M'===i[0]&&(t[0]='C'===o[0]?['C',i[1],i[2],i[1],i[2],i[1],i[2]]:['L',i[1],i[2]]);t.unshift(i);h&&t.push(t[t.length-1])}};function c(t,e){for(;t.length<a;)if(e=t[t.length/l-1].slice(),'C'===e[0]&&(e[1]=e[5],e[2]=e[6]),h){var i=t[t.length/l].slice();t.splice(t.length/2,0,e,i)}
else t.push(e)};var r=t.startX,s=t.endX;e=e&&e.slice();o=o.slice();var h=t.isArea,l=h?2:1;if(!e)return[o,o];if(r&&s){for(t=0;t<r.length;t++)if(r[t]===s[0]){var n=t;break}
else if(r[0]===s[s.length-r.length+t]){n=t;var d=!0;break}
else if(r[r.length-1]===s[s.length-r.length+t]){n=r.length-t;break};'undefined'===typeof n&&(e=[])};if(e.length&&i(n)){var a=o.length+n*l;d?(p(e,o),c(o,e)):(p(o,e),c(e,o))};return[e,o]};e.prototype.fillSetter=function(){e.prototype.strokeSetter.apply(this,arguments)};e.prototype.strokeSetter=function(){this.elem.attr(this.prop,t.color(this.start).tweenTo(t.color(this.end),this.pos),null,!0)};e.timers=[];return e}();t.Fx=e;t.timers=e.timers;return e});i(e,'Core/Animation/AnimationUtilities.js',[e['Core/Animation/Fx.js'],e['Core/Globals.js'],e['Core/Utilities.js']],function(t,e,i){var h=i.defined,l=i.getStyle,p=i.isArray,c=i.isNumber,s=i.isObject,n=i.merge,d=i.objectEach,u=i.pick;i=e.setAnimation=function(t,e){e.renderer.globalAnimation=u(t,e.options.chart.animation,!0)};var o=e.animObject=function(t){return s(t)?n({duration:500,defer:0},t):{duration:t?500:0,defer:0}},a=e.getDeferredAnimation=function(t,e,i){var n=o(e),r=0,s=0;(i?[i]:t.series).forEach(function(t){t=o(t.options.animation);r=e&&h(e.defer)?n.defer:Math.max(r,t.duration+t.defer);s=Math.min(n.duration,t.duration)});t.renderer.forExport&&(r=0);return{defer:Math.max(0,r-s),duration:Math.min(r,s)}},r=e.stop=function(e,i){for(var o=t.timers.length;o--;)t.timers[o].elem!==e||i&&i!==t.timers[o].prop||(t.timers[o].stopped=!0)};return{animate:function(e,i,o){var u,g='',a,h;if(!s(o)){var f=arguments;o={duration:f[2],easing:f[3],complete:f[4]}};c(o.duration)||(o.duration=400);o.easing='function'===typeof o.easing?o.easing:Math[o.easing]||Math.easeInOutSine;o.curAnim=n(i);d(i,function(s,n){r(e,n);h=new t(e,o,n);a=null;'d'===n&&p(i.d)?(h.paths=h.initPath(e,e.pathArray,i.d),h.toD=i.d,u=0,a=1):e.attr?u=e.attr(n):(u=parseFloat(l(e,n))||0,'opacity'!==n&&(g='px'));a||(a=s);a&&a.match&&a.match('px')&&(a=a.replace(/px/g,''));h.run(u,a,g)})},animObject:o,getDeferredAnimation:a,setAnimation:i,stop:r}});i(e,'Core/Renderer/SVG/SVGElement.js',[e['Core/Animation/AnimationUtilities.js'],e['Core/Renderer/HTML/AST.js'],e['Core/Color/Color.js'],e['Core/Globals.js'],e['Core/Color/Palette.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s){var S=t.animate,k=t.animObject,f=t.stop,w=o.deg2rad,l=o.doc,A=o.hasTouch,P=o.noop,T=o.svg,c=o.SVG_NS,L=o.win,p=s.attr,O=s.createElement,g=s.css,a=s.defined,m=s.erase,u=s.extend,y=s.fireEvent,v=s.isArray,x=s.isFunction,E=s.isNumber,b=s.isString,C=s.merge,h=s.objectEach,n=s.pick,d=s.pInt,j=s.syncTimeout,M=s.uniqueKey;'';t=function(){function t(){this.height=this.element=void 0;this.opacity=1;this.renderer=void 0;this.SVG_NS=c;this.symbolCustomAttribs='x y width height r start end innerR anchorX anchorY rounded'.split(' ');this.width=void 0};t.prototype._defaultGetter=function(t){t=n(this[t+'Value'],this[t],this.element?this.element.getAttribute(t):null,0);/^[\-0-9\.]+$/.test(t)&&(t=parseFloat(t));return t};t.prototype._defaultSetter=function(t,e,i){i.setAttribute(e,t)};t.prototype.add=function(t){var e=this.renderer,o=this.element;t&&(this.parentGroup=t);this.parentInverted=t&&t.inverted;'undefined'!==typeof this.textStr&&'text'===this.element.nodeName&&e.buildText(this);this.added=!0;if(!t||t.handleZ||this.zIndex)var i=this.zIndexSetter();i||(t?t.element:e.box).appendChild(o);if(this.onAdd)this.onAdd();return this};t.prototype.addClass=function(t,e){var i=e?'':this.attr('class')||'';t=(t||'').split(/ /g).reduce(function(t,e){-1===i.indexOf(e)&&t.push(e);return t},i?[i]:[]).join(' ');t!==i&&this.attr('class',t);return this};t.prototype.afterSetters=function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)};t.prototype.align=function(t,e,i){var r,l={};var o=this.renderer,s=o.alignedObjects,a,h;if(t){if(this.alignOptions=t,this.alignByTranslate=e,!i||b(i))this.alignTo=r=i||'renderer',m(s,this),s.push(this),i=void 0}
else t=this.alignOptions,e=this.alignByTranslate,r=this.alignTo;i=n(i,o[r],o);r=t.align;o=t.verticalAlign;s=(i.x||0)+(t.x||0);var p=(i.y||0)+(t.y||0);'right'===r?a=1:'center'===r&&(a=2);a&&(s+=(i.width-(t.width||0))/a);l[e?'translateX':'x']=Math.round(s);'bottom'===o?h=1:'middle'===o&&(h=2);h&&(p+=(i.height-(t.height||0))/h);l[e?'translateY':'y']=Math.round(p);this[this.placed?'animate':'attr'](l);this.placed=!0;this.alignAttr=l;return this};t.prototype.alignSetter=function(t){var e={left:'start',center:'middle',right:'end'};e[t]&&(this.alignValue=t,this.element.setAttribute('text-anchor',e[t]))};t.prototype.animate=function(t,e,i){var r=this,o=k(n(e,this.renderer.globalAnimation,!0));e=o.defer;n(l.hidden,l.msHidden,l.webkitHidden,!1)&&(o.duration=0);0!==o.duration?(i&&(o.complete=i),j(function(){r.element&&S(r,t,o)},e)):(this.attr(t,void 0,i),h(t,function(t,e){o.step&&o.step.call(this,t,{prop:e,pos:1,elem:this})},this));return this};t.prototype.applyTextOutline=function(t){var i=this.element;-1!==t.indexOf('contrast')&&(t=t.replace(/contrast/g,this.renderer.getContrast(i.style.fill)));var e=t.split(' ');t=e[e.length-1];if((e=e[0])&&'none'!==e&&o.svg){this.fakeTS=!0;this.ySetter=this.xSetter;e=e.replace(/(^[\d\.]+)(.*?)$/g,function(t,e,i){return 2*Number(e)+i});this.removeTextOutline();var r=l.createElementNS(c,'tspan');p(r,{'class':'highcharts-text-outline',fill:t,stroke:t,'stroke-width':e,'stroke-linejoin':'round'});[].forEach.call(i.childNodes,function(t){var e=t.cloneNode(!0);e.removeAttribute&&['fill','stroke','stroke-width','stroke'].forEach(function(t){return e.removeAttribute(t)});r.appendChild(e)});t=l.createElementNS(c,'tspan');t.textContent='\u200b';p(t,{x:i.getAttribute('x'),y:i.getAttribute('y')});r.appendChild(t);i.insertBefore(r,i.firstChild)}};t.prototype.attr=function(t,e,i,o){var n=this.element,a,l=this,r,s,c=this.symbolCustomAttribs;if('string'===typeof t&&'undefined'!==typeof e){var p=t;t={};t[p]=e};'string'===typeof t?l=(this[t+'Getter']||this._defaultGetter).call(this,t,n):(h(t,function(e,i){r=!1;o||f(this,i);this.symbolName&&-1!==c.indexOf(i)&&(a||(this.symbolAttr(t),a=!0),r=!0);!this.rotation||'x'!==i&&'y'!==i||(this.doTransform=!0);r||(s=this[i+'Setter']||this._defaultSetter,s.call(this,e,i,n),!this.styledMode&&this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(i)&&this.updateShadows(i,e,s))},this),this.afterSetters());i&&i.call(this);return l};t.prototype.clip=function(t){return this.attr('clip-path',t?'url('+this.renderer.url+'#'+t.id+')':'none')};t.prototype.crisp=function(t,e){e=e||t.strokeWidth||0;var i=Math.round(e)%2/2;t.x=Math.floor(t.x||this.x||0)+i;t.y=Math.floor(t.y||this.y||0)+i;t.width=Math.floor((t.width||this.width||0)-2*i);t.height=Math.floor((t.height||this.height||0)-2*i);a(t.strokeWidth)&&(t.strokeWidth=e);return t};t.prototype.complexColor=function(t,e,o){var l=this.renderer,c,n,r,d,p,u,f,g,m,x,s=[],b;y(this.renderer,'complexColor',{args:arguments},function(){t.radialGradient?n='radialGradient':t.linearGradient&&(n='linearGradient');if(n){r=t[n];p=l.gradients;u=t.stops;m=o.radialReference;v(r)&&(t[n]=r={x1:r[0],y1:r[1],x2:r[2],y2:r[3],gradientUnits:'userSpaceOnUse'});'radialGradient'===n&&m&&!a(r.gradientUnits)&&(d=r,r=C(r,l.getRadialAttr(m,d),{gradientUnits:'userSpaceOnUse'}));h(r,function(t,e){'id'!==e&&s.push(e,t)});h(u,function(t){s.push(t)});s=s.join(',');if(p[s])x=p[s].attr('id');else{r.id=x=M();var y=p[s]=l.createElement(n).attr(r).add(l.defs);y.radAttr=d;y.stops=[];u.forEach(function(t){0===t[1].indexOf('rgba')?(c=i.parse(t[1]),f=c.get('rgb'),g=c.get('a')):(f=t[1],g=1);t=l.createElement('stop').attr({offset:t[0],'stop-color':f,'stop-opacity':g}).add(y);y.stops.push(t)})};b='url('+l.url+'#'+x+')';o.setAttribute(e,b);o.gradient=s;t.toString=function(){return b}}})};t.prototype.css=function(t){var e=this.styles,r={},i=this.element,o='',s=!e,l=['textOutline','textOverflow','width'];t&&t.color&&(t.fill=t.color);e&&h(t,function(t,i){e&&e[i]!==t&&(r[i]=t,s=!0)});if(s){e&&(t=u(e,r));if(t)if(null===t.width||'auto'===t.width)delete this.textWidth;else if('text'===i.nodeName.toLowerCase()&&t.width)var a=this.textWidth=d(t.width);this.styles=t;a&&!T&&this.renderer.forExport&&delete t.width;if(i.namespaceURI===this.SVG_NS){var n=function(t,e){return'-'+e.toLowerCase()};h(t,function(t,e){-1===l.indexOf(e)&&(o+=e.replace(/([A-Z])/g,n)+':'+t+';')});o&&p(i,'style',o)}
else g(i,t);this.added&&('text'===this.element.nodeName&&this.renderer.buildText(this),t&&t.textOutline&&this.applyTextOutline(t.textOutline))};return this};t.prototype.dashstyleSetter=function(t){var i=this['stroke-width'];'inherit'===i&&(i=1);if(t=t&&t.toLowerCase()){var e=t.replace('shortdashdotdot','3,1,1,1,1,1,').replace('shortdashdot','3,1,1,1').replace('shortdot','1,1,').replace('shortdash','3,1,').replace('longdash','8,3,').replace(/dot/g,'1,3,').replace('dash','4,3,').replace(/,$/,'').split(',');for(t=e.length;t--;)e[t]=''+d(e[t])*n(i,NaN);t=e.join(',').replace(/NaN/g,'none');this.element.setAttribute('stroke-dasharray',t)}};t.prototype.destroy=function(){var t=this,e=t.element||{},r=t.renderer,i=r.isSVG&&'SPAN'===e.nodeName&&t.parentGroup||void 0,o=e.ownerSVGElement;e.onclick=e.onmouseout=e.onmouseover=e.onmousemove=e.point=null;f(t);if(t.clipPath&&o){var s=t.clipPath;[].forEach.call(o.querySelectorAll('[clip-path],[CLIP-PATH]'),function(t){-1<t.getAttribute('clip-path').indexOf(s.element.id)&&t.removeAttribute('clip-path')});t.clipPath=s.destroy()};if(t.stops){for(o=0;o<t.stops.length;o++)t.stops[o].destroy();t.stops.length=0;t.stops=void 0};t.safeRemoveChild(e);for(r.styledMode||t.destroyShadows();i&&i.div&&0===i.div.childNodes.length;)e=i.parentGroup,t.safeRemoveChild(i.div),delete i.div,i=e;t.alignTo&&m(r.alignedObjects,t);h(t,function(e,i){t[i]&&t[i].parentGroup===t&&t[i].destroy&&t[i].destroy();delete t[i]})};t.prototype.destroyShadows=function(){(this.shadows||[]).forEach(function(t){this.safeRemoveChild(t)},this);this.shadows=void 0};t.prototype.destroyTextPath=function(t,e){var i=t.getElementsByTagName('text')[0];if(i){if(i.removeAttribute('dx'),i.removeAttribute('dy'),e.element.setAttribute('id',''),this.textPathWrapper&&i.getElementsByTagName('textPath').length){for(t=this.textPathWrapper.element.childNodes;t.length;)i.appendChild(t[0]);i.removeChild(this.textPathWrapper.element)}}
else if(t.getAttribute('dx')||t.getAttribute('dy'))t.removeAttribute('dx'),t.removeAttribute('dy');this.textPathWrapper&&(this.textPathWrapper=this.textPathWrapper.destroy())};t.prototype.dSetter=function(t,e,i){v(t)&&('string'===typeof t[0]&&(t=this.renderer.pathToSegments(t)),this.pathArray=t,t=t.reduce(function(t,e,i){return e&&e.join?(i?t+' ':'')+e.join(' '):(e||'').toString()},''));/(NaN| {2}|^$)/.test(t)&&(t='M 0 0');this[e]!==t&&(i.setAttribute(e,t),this[e]=t)};t.prototype.fadeOut=function(t){var e=this;e.animate({opacity:0},{duration:n(t,150),complete:function(){e.attr({y:-9999}).hide()}})};t.prototype.fillSetter=function(t,e,i){'string'===typeof t?i.setAttribute(e,t):t&&this.complexColor(t,e,i)};t.prototype.getBBox=function(e,i){var o,s=this.renderer,l=this.element,r=this.styles,f=this.textStr,c=s.cache,d=s.cacheKeys,m=l.namespaceURI===this.SVG_NS;i=n(i,this.rotation,0);var v=s.styledMode?l&&t.prototype.getStyle.call(l,'font-size'):r&&r.fontSize;if(a(f)){var h=f.toString();-1===h.indexOf('<')&&(h=h.replace(/[0-9]/g,'0'));h+=['',i,v,this.textWidth,r&&r.textOverflow,r&&r.fontWeight].join()};h&&!e&&(o=c[h]);if(!o){if(m||s.forExport){try{var p=this.fakeTS&&function(t){var e=l.querySelector('.highcharts-text-outline');e&&g(e,{display:t})};x(p)&&p('none');o=l.getBBox?u({},l.getBBox()):{width:l.offsetWidth,height:l.offsetHeight};x(p)&&p('')}catch(y){''};if(!o||0>o.width)o={width:0,height:0}}
else o=this.htmlGetBBox();s.isSVG&&(e=o.width,s=o.height,m&&(o.height=s={'11px,17':14,'13px,20':16}[r&&r.fontSize+','+Math.round(s)]||s),i&&(r=i*w,o.width=Math.abs(s*Math.sin(r))+Math.abs(e*Math.cos(r)),o.height=Math.abs(s*Math.cos(r))+Math.abs(e*Math.sin(r))));if(h&&0<o.height){for(;250<d.length;)delete c[d.shift()];c[h]||d.push(h);c[h]=o}};return o};t.prototype.getStyle=function(t){return L.getComputedStyle(this.element||this,'').getPropertyValue(t)};t.prototype.hasClass=function(t){return-1!==(''+this.attr('class')).split(' ').indexOf(t)};t.prototype.hide=function(t){t?this.attr({y:-9999}):this.attr({visibility:'hidden'});return this};t.prototype.htmlGetBBox=function(){return{height:0,width:0,x:0,y:0}};t.prototype.init=function(t,e){this.element='span'===e?O(e):l.createElementNS(this.SVG_NS,e);this.renderer=t;y(this,'afterInit')};t.prototype.invert=function(t){this.inverted=t;this.updateTransform();return this};t.prototype.on=function(t,e){var o,r,i=this.element,s;A&&'click'===t?(i.ontouchstart=function(t){o=t.touches[0].clientX;r=t.touches[0].clientY},i.ontouchend=function(t){o&&4<=Math.sqrt(Math.pow(o-t.changedTouches[0].clientX,2)+Math.pow(r-t.changedTouches[0].clientY,2))||e.call(i,t);s=!0;!1!==t.cancelable&&t.preventDefault()},i.onclick=function(t){s||e.call(i,t)}):i['on'+t]=e;return this};t.prototype.opacitySetter=function(t,e,i){this.opacity=t=Number(Number(t).toFixed(3));i.setAttribute(e,t)};t.prototype.removeClass=function(t){return this.attr('class',(''+this.attr('class')).replace(b(t)?new RegExp('(^| )'+t+'( |$)'):t,' ').replace(/ +/g,' ').trim())};t.prototype.removeTextOutline=function(){var t=this.element.querySelector('tspan.highcharts-text-outline');t&&this.safeRemoveChild(t)};t.prototype.safeRemoveChild=function(t){var e=t.parentNode;e&&e.removeChild(t)};t.prototype.setRadialReference=function(t){var e=this.element.gradient&&this.renderer.gradients[this.element.gradient];this.element.radialReference=t;e&&e.radAttr&&e.animate(this.renderer.getRadialAttr(t,e.radAttr));return this};t.prototype.setTextPath=function(t,i){var c=this.element,l=this.text?this.text.element:c,u={textAnchor:'text-anchor'},d=!1,o=this.textPathWrapper,s=!o;i=C(!0,{enabled:!0,attributes:{dy:-5,startOffset:'50%',textAnchor:'middle'}},i);var r=e.filterUserAttributes(i.attributes);if(t&&i&&i.enabled){o&&null===o.element.parentNode?(s=!0,o=o.destroy()):o&&this.removeTextOutline.call(o.parentGroup);this.options&&this.options.padding&&(r.dx=-this.options.padding);o||(this.textPathWrapper=o=this.renderer.createElement('textPath'),d=!0);var n=o.element;(i=t.element.getAttribute('id'))||t.element.setAttribute('id',i=M());if(s)for(l.setAttribute('y',0),E(r.dx)&&l.setAttribute('x',-r.dx),t=[].slice.call(l.childNodes),s=0;s<t.length;s++){var p=t[s];p.nodeType!==Node.TEXT_NODE&&'tspan'!==p.nodeName||n.appendChild(p)};d&&o&&o.add({element:l});n.setAttributeNS('http://www.w3.org/1999/xlink','href',this.renderer.url+'#'+i);a(r.dy)&&(n.parentNode.setAttribute('dy',r.dy),delete r.dy);a(r.dx)&&(n.parentNode.setAttribute('dx',r.dx),delete r.dx);h(r,function(t,e){n.setAttribute(u[e]||e,t)});c.removeAttribute('transform');this.removeTextOutline.call(o);this.text&&!this.renderer.styledMode&&this.attr({fill:'none','stroke-width':0});this.applyTextOutline=this.updateTransform=P}
else o&&(delete this.updateTransform,delete this.applyTextOutline,this.destroyTextPath(c,t),this.updateTransform(),this.options&&this.options.rotation&&this.applyTextOutline(this.options.style.textOutline));return this};t.prototype.shadow=function(t,e,i){var c=[],a=this.element,d=!1,f=this.oldShadowOptions,n={color:r.neutralColor100,offsetX:1,offsetY:1,opacity:.15,width:3};var o;!0===t?o=n:'object'===typeof t&&(o=u(n,t));o&&(o&&f&&h(o,function(t,e){t!==f[e]&&(d=!0)}),d&&this.destroyShadows(),this.oldShadowOptions=o);if(!o)this.destroyShadows();else if(!this.shadows){var g=o.opacity/o.width,m=this.parentInverted?'translate(-1,-1)':'translate('+o.offsetX+', '+o.offsetY+')';for(n=1;n<=o.width;n++){var s=a.cloneNode(!1),l=2*o.width+1-2*n;p(s,{stroke:t.color||r.neutralColor100,'stroke-opacity':g*n,'stroke-width':l,transform:m,fill:'none'});s.setAttribute('class',(s.getAttribute('class')||'')+' highcharts-shadow');i&&(p(s,'height',Math.max(p(s,'height')-l,0)),s.cutHeight=l);e?e.element.appendChild(s):a.parentNode&&a.parentNode.insertBefore(s,a);c.push(s)};this.shadows=c};return this};t.prototype.show=function(t){return this.attr({visibility:t?'inherit':'visible'})};t.prototype.strokeSetter=function(e,i,o){this[i]=e;this.stroke&&this['stroke-width']?(t.prototype.fillSetter.call(this,this.stroke,'stroke',o),o.setAttribute('stroke-width',this['stroke-width']),this.hasStroke=!0):'stroke-width'===i&&0===e&&this.hasStroke?(o.removeAttribute('stroke'),this.hasStroke=!1):this.renderer.styledMode&&this['stroke-width']&&(o.setAttribute('stroke-width',this['stroke-width']),this.hasStroke=!0)};t.prototype.strokeWidth=function(){if(!this.renderer.styledMode)return this['stroke-width']||0;var e=this.getStyle('stroke-width'),i=0;if(e.indexOf('px')===e.length-2)i=d(e);else if(''!==e){var t=l.createElementNS(c,'rect');p(t,{width:e,'stroke-width':0});this.element.parentNode.appendChild(t);i=t.getBBox().width;t.parentNode.removeChild(t)};return i};t.prototype.symbolAttr=function(t){var e=this;'x y r start end width height innerR anchorX anchorY clockwise'.split(' ').forEach(function(i){e[i]=n(t[i],e[i])});e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})};t.prototype.textSetter=function(t){t!==this.textStr&&(delete this.textPxLength,this.textStr=t,this.added&&this.renderer.buildText(this))};t.prototype.titleSetter=function(t){var e=this.element,i=e.getElementsByTagName('title')[0]||l.createElementNS(this.SVG_NS,'title');e.insertBefore?e.insertBefore(i,e.firstChild):e.appendChild(i);i.textContent=String(n(t,'')).replace(/<[^>]*>/g,'').replace(/&lt;/g,'<').replace(/&gt;/g,'>')};t.prototype.toFront=function(){var t=this.element;t.parentNode.appendChild(t);return this};t.prototype.translate=function(t,e){return this.attr({translateX:t,translateY:e})};t.prototype.updateShadows=function(t,e,i){var o=this.shadows;if(o)for(var r=o.length;r--;)i.call(o[r],'height'===t?Math.max(e-(o[r].cutHeight||0),0):'d'===t?this.d:e,t,o[r])};t.prototype.updateTransform=function(){var t=this.translateX||0,i=this.translateY||0,o=this.scaleX,r=this.scaleY,s=this.inverted,h=this.rotation,l=this.matrix,e=this.element;s&&(t+=this.width,i+=this.height);t=['translate('+t+','+i+')'];a(l)&&t.push('matrix('+l.join(',')+')');s?t.push('rotate(90) scale(-1,1)'):h&&t.push('rotate('+h+' '+n(this.rotationOriginX,e.getAttribute('x'),0)+' '+n(this.rotationOriginY,e.getAttribute('y')||0)+')');(a(o)||a(r))&&t.push('scale('+n(o,1)+' '+n(r,1)+')');t.length&&e.setAttribute('transform',t.join(' '))};t.prototype.visibilitySetter=function(t,e,i){'inherit'===t?i.removeAttribute(e):this[e]!==t&&i.setAttribute(e,t);this[e]=t};t.prototype.xGetter=function(t){'circle'===this.element.nodeName&&('x'===t?t='cx':'y'===t&&(t='cy'));return this._defaultGetter(t)};t.prototype.zIndexSetter=function(t,e){var o=this.renderer,r=this.parentGroup,l=(r||o).element||o.box,s=this.element,n=!1;o=l===o.box;var h=this.added,i;a(t)?(s.setAttribute('data-z-index',t),t=+t,this[e]===t&&(h=!1)):a(this[e])&&s.removeAttribute('data-z-index');this[e]=t;if(h){(t=this.zIndex)&&r&&(r.handleZ=!0);e=l.childNodes;for(i=e.length-1;0<=i&&!n;i--){r=e[i];h=r.getAttribute('data-z-index');var p=!a(h);if(r!==s)if(0>t&&p&&!o&&!i)l.insertBefore(s,e[i]),n=!0;else if(d(h)<=t||p&&(!a(t)||0<=t))l.insertBefore(s,e[i+1]||null),n=!0};n||(l.insertBefore(s,e[o?3:0]||null),n=!0)};return n};return t}();t.prototype['stroke-widthSetter']=t.prototype.strokeSetter;t.prototype.yGetter=t.prototype.xGetter;t.prototype.matrixSetter=t.prototype.rotationOriginXSetter=t.prototype.rotationOriginYSetter=t.prototype.rotationSetter=t.prototype.scaleXSetter=t.prototype.scaleYSetter=t.prototype.translateXSetter=t.prototype.translateYSetter=t.prototype.verticalAlignSetter=function(t,e){this[e]=t;this.doTransform=!0};o.SVGElement=t;return o.SVGElement});i(e,'Core/Renderer/SVG/SVGLabel.js',[e['Core/Renderer/SVG/SVGElement.js'],e['Core/Utilities.js']],function(t,e){function s(t,e){i(t)?t!==this[e]&&(this[e]=t,this.updateTextPadding()):this[e]=void 0};var a=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),o=e.defined,h=e.extend,i=e.isNumber,l=e.merge,r=e.pick,n=e.removeEvent;return function(e){function p(t,i,o,r,n,a,l,c,u,d){var h=e.call(this)||this;h.paddingSetter=s;h.paddingLeftSetter=s;h.paddingRightSetter=s;h.init(t,'g');h.textStr=i;h.x=o;h.y=r;h.anchorX=a;h.anchorY=l;h.baseline=u;h.className=d;'button'!==d&&h.addClass('highcharts-label');d&&h.addClass('highcharts-'+d);h.text=t.text('',0,0,c).attr({zIndex:1});if('string'===typeof n){var f=/^url\((.*?)\)$/.test(n);if(h.renderer.symbols[n]||f)h.symbolKey=n};h.bBox=p.emptyBBox;h.padding=3;h.baselineOffset=0;h.needsBox=t.styledMode||f;h.deferredAttr={};h.alignFactor=0;return h};a(p,e);p.prototype.alignSetter=function(t){t={left:0,center:.5,right:1}[t];t!==this.alignFactor&&(this.alignFactor=t,this.bBox&&i(this.xSetting)&&this.attr({x:this.xSetting}))};p.prototype.anchorXSetter=function(t,e){this.anchorX=t;this.boxAttr(e,Math.round(t)-this.getCrispAdjust()-this.xSetting)};p.prototype.anchorYSetter=function(t,e){this.anchorY=t;this.boxAttr(e,t-this.ySetting)};p.prototype.boxAttr=function(t,e){this.box?this.box.attr(t,e):this.deferredAttr[t]=e};p.prototype.css=function(e){if(e){var i={};e=l(e);p.textProps.forEach(function(t){'undefined'!==typeof e[t]&&(i[t]=e[t],delete e[t])});this.text.css(i);var o='width' in i;'fontSize' in i||'fontWeight' in i?this.updateTextPadding():o&&this.updateBoxSize()};return t.prototype.css.call(this,e)};p.prototype.destroy=function(){n(this.element,'mouseenter');n(this.element,'mouseleave');this.text&&this.text.destroy();this.box&&(this.box=this.box.destroy());t.prototype.destroy.call(this)};p.prototype.fillSetter=function(t,e){t&&(this.needsBox=!0);this.fill=t;this.boxAttr(e,t)};p.prototype.getBBox=function(){var t=this.bBox,e=this.padding,i=r(this.paddingLeft,e);return{width:this.width,height:this.height,x:t.x-i,y:t.y-e}};p.prototype.getCrispAdjust=function(){return this.renderer.styledMode&&this.box?this.box.strokeWidth()%2/2:(this['stroke-width']?parseInt(this['stroke-width'],10):0)%2/2};p.prototype.heightSetter=function(t){this.heightSetting=t};p.prototype.on=function(e,i){var o=this,r=o.text,s=r&&'SPAN'===r.element.tagName?r:void 0;if(s){var n=function(t){('mouseenter'===e||'mouseleave'===e)&&t.relatedTarget instanceof Element&&(o.element.compareDocumentPosition(t.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY||s.element.compareDocumentPosition(t.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||i.call(o.element,t)};s.on(e,n)};t.prototype.on.call(o,e,n||i);return o};p.prototype.onAdd=function(){var t=this.textStr;this.text.add(this);this.attr({text:o(t)?t:'',x:this.x,y:this.y});this.box&&o(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})};p.prototype.rSetter=function(t,e){this.boxAttr(e,t)};p.prototype.shadow=function(t){t&&!this.renderer.styledMode&&(this.updateBoxSize(),this.box&&this.box.shadow(t));return this};p.prototype.strokeSetter=function(t,e){this.stroke=t;this.boxAttr(e,t)};p.prototype['stroke-widthSetter']=function(t,e){t&&(this.needsBox=!0);this['stroke-width']=t;this.boxAttr(e,t)};p.prototype['text-alignSetter']=function(t){this.textAlign=t};p.prototype.textSetter=function(t){'undefined'!==typeof t&&this.text.attr({text:t});this.updateTextPadding()};p.prototype.updateBoxSize=function(){var t=this.text.element.style,e={},r=this.padding,s=this.bBox=i(this.widthSetting)&&i(this.heightSetting)&&!this.textAlign||!o(this.text.textStr)?p.emptyBBox:this.text.getBBox();this.width=this.getPaddedWidth();this.height=(this.heightSetting||s.height||0)+2*r;this.baselineOffset=r+Math.min(this.renderer.fontMetrics(t&&t.fontSize,this.text).b,s.height||Infinity);this.needsBox&&(this.box||(t=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect(),t.addClass(('button'===this.className?'':'highcharts-label-box')+(this.className?' highcharts-'+this.className+'-box':'')),t.add(this)),t=this.getCrispAdjust(),e.x=t,e.y=(this.baseline?-this.baselineOffset:0)+t,e.width=Math.round(this.width),e.height=Math.round(this.height),this.box.attr(h(e,this.deferredAttr)),this.deferredAttr={})};p.prototype.updateTextPadding=function(){var t=this.text;this.updateBoxSize();var e=this.baseline?0:this.baselineOffset,i=r(this.paddingLeft,this.padding);o(this.widthSetting)&&this.bBox&&('center'===this.textAlign||'right'===this.textAlign)&&(i+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width));if(i!==t.x||e!==t.y)t.attr('x',i),t.hasBoxWidthChanged&&(this.bBox=t.getBBox(!0)),'undefined'!==typeof e&&t.attr('y',e);t.x=i;t.y=e};p.prototype.widthSetter=function(t){this.widthSetting=i(t)?t:void 0};p.prototype.getPaddedWidth=function(){var t=this.padding,e=r(this.paddingLeft,t);t=r(this.paddingRight,t);return(this.widthSetting||this.bBox.width||0)+e+t};p.prototype.xSetter=function(t){this.x=t;this.alignFactor&&(t-=this.alignFactor*this.getPaddedWidth(),this['forceAnimate:x']=!0);this.xSetting=Math.round(t);this.attr('translateX',this.xSetting)};p.prototype.ySetter=function(t){this.ySetting=this.y=Math.round(t);this.attr('translateY',this.ySetting)};p.emptyBBox={width:0,height:0,x:0,y:0};p.textProps='color direction fontFamily fontSize fontStyle fontWeight lineHeight textAlign textDecoration textOutline textOverflow width'.split(' ');return p}(t)});i(e,'Core/Renderer/SVG/TextBuilder.js',[e['Core/Globals.js'],e['Core/Utilities.js'],e['Core/Renderer/HTML/AST.js']],function(t,e,i){var o=t.doc,n=t.SVG_NS,r=e.attr,s=e.isString,a=e.objectEach,h=e.pick;return function(){function e(t){var e=t.styles;this.renderer=t.renderer;this.svgElement=t;this.width=t.textWidth;this.textLineHeight=e&&e.lineHeight;this.textOutline=e&&e.textOutline;this.ellipsis=!(!e||'ellipsis'!==e.textOverflow);this.noWrap=!(!e||'nowrap'!==e.whiteSpace);this.fontSize=e&&e.fontSize};e.prototype.buildSVG=function(){var t=this.svgElement,r=t.element,n=t.renderer,e=h(t.textStr,'').toString(),d=-1!==e.indexOf('<'),l=r.childNodes,p=l.length;n=this.width&&!t.added&&n.box;var c=/<br.*?>/g,a=[e,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,this.fontSize,this.width].join();if(a!==t.textCache){t.textCache=a;for(delete t.actualWidth;p--;)r.removeChild(l[p]);d||this.ellipsis||this.width||-1!==e.indexOf(' ')&&(!this.noWrap||c.test(e))?''!==e&&(n&&n.appendChild(r),e=new i(e),this.modifyTree(e.nodes),e.addToDOM(t.element),this.modifyDOM(),this.ellipsis&&-1!==(r.textContent||'').indexOf('\u2026')&&t.attr('title',this.unescapeEntities(t.textStr||'',['&lt;','&gt;'])),n&&n.removeChild(r)):r.appendChild(o.createTextNode(this.unescapeEntities(e)));s(this.textOutline)&&t.applyTextOutline&&t.applyTextOutline(this.textOutline)}};e.prototype.modifyDOM=function(){var e=this,i=this.svgElement,a=r(i.element,'x');[].forEach.call(i.element.querySelectorAll('tspan.highcharts-br'),function(t){t.nextSibling&&t.previousSibling&&r(t,{dy:e.getLineHeight(t.nextSibling),x:a})}),t=this.width||0;if(t){var h=function(s,h){var l=s.textContent||'',p=l.replace(/([^\^])-/g,'$1- ').split(' '),c=!e.noWrap&&(1<p.length||1<i.element.childNodes.length),f=e.getLineHeight(h),d=0,u=i.actualWidth;if(e.ellipsis)l&&e.truncate(s,l,void 0,0,Math.max(0,t-parseInt(e.fontSize||12,10)),function(t,e){return t.substring(0,e)+'\u2026'});else if(c){l=[];for(c=[];h.firstChild&&h.firstChild!==s;)c.push(h.firstChild),h.removeChild(h.firstChild);for(;p.length;)p.length&&!e.noWrap&&0<d&&(l.push(s.textContent||''),s.textContent=p.join(' ').replace(/- /g,'-')),e.truncate(s,void 0,p,0===d?u||0:0,t,function(t,e){return p.slice(0,e).join(' ').replace(/- /g,'-')}),u=i.actualWidth,d++;c.forEach(function(t){h.insertBefore(t,s)});l.forEach(function(t){h.insertBefore(o.createTextNode(t),s);t=o.createElementNS(n,'tspan');t.textContent='\u200b';r(t,{dy:f,x:a});h.insertBefore(t,s)})}},s=function(t){[].slice.call(t.childNodes).forEach(function(e){e.nodeType===Node.TEXT_NODE?h(e,t):(-1!==e.className.baseVal.indexOf('highcharts-br')&&(i.actualWidth=0),s(e))})};s(i.element)}};e.prototype.getLineHeight=function(t){var e;t=t.nodeType===Node.TEXT_NODE?t.parentElement:t;this.renderer.styledMode||(e=t&&/(px|em)$/.test(t.style.fontSize)?t.style.fontSize:this.fontSize||this.renderer.style.fontSize||12);return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(e,t||this.svgElement.element).h};e.prototype.modifyTree=function(t){var i=this,e=function(o,r){var a=o.tagName,h=i.renderer.styledMode,n=o.attributes||{};if('b'===a||'strong'===a)h?n['class']='highcharts-strong':n.style='font-weight:bold;'+(n.style||'');else if('i'===a||'em'===a)h?n['class']='highcharts-emphasized':n.style='font-style:italic;'+(n.style||'');s(n.style)&&(n.style=n.style.replace(/(;| |^)color([ :])/,'$1fill$2'));'br'===a&&(n['class']='highcharts-br',o.textContent='\u200b',(r=t[r+1])&&r.textContent&&(r.textContent=r.textContent.replace(/^ +/gm,'')));'#text'!==a&&'a'!==a&&(o.tagName='tspan');o.attributes=n;o.children&&o.children.filter(function(t){return'#text'!==t.tagName}).forEach(e)};for(t.forEach(e);t[0]&&'tspan'===t[0].tagName&&!t[0].children;)t.splice(0,1)};e.prototype.truncate=function(t,e,i,o,r,s){var h=this.svgElement,u=h.renderer,g=h.rotation,c=[],l=i?1:0,n=(e||i||'').length,a=n,d,f=function(r,n){n=n||r;var a=t.parentNode;if(a&&'undefined'===typeof c[n])if(a.getSubStringLength)try{c[n]=o+a.getSubStringLength(0,i?n+1:n)}catch(l){''}
else u.getSpanWidth&&(t.textContent=s(e||i,r),c[n]=o+u.getSpanWidth(h,t));return c[n]};h.rotation=0;var p=f(t.textContent.length);if(o+p>r){for(;l<=n;)a=Math.ceil((l+n)/2),i&&(d=s(i,a)),p=f(a,d&&d.length-1),l===n?l=n+1:p>r?n=a-1:l=a;0===n?t.textContent='':e&&n===e.length-1||(t.textContent=d||s(e||i,a))};i&&i.splice(0,a);h.actualWidth=p;h.rotation=g};e.prototype.unescapeEntities=function(t,e){a(this.renderer.escapes,function(i,o){e&&-1!==e.indexOf(i)||(t=t.toString().replace(new RegExp(i,'g'),o))});return t};return e}()});i(e,'Core/Renderer/SVG/SVGRenderer.js',[e['Core/Color/Color.js'],e['Core/Globals.js'],e['Core/Color/Palette.js'],e['Core/Renderer/SVG/SVGElement.js'],e['Core/Renderer/SVG/SVGLabel.js'],e['Core/Renderer/HTML/AST.js'],e['Core/Renderer/SVG/TextBuilder.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s,a,n){var y=n.addEvent,b=n.attr,P=n.createElement,v=n.css,h=n.defined,T=n.destroyObjectProperties,p=n.extend,L=n.isArray,C=n.isNumber,g=n.isObject,O=n.isString,c=n.merge,d=n.pick,E=n.pInt,M=n.uniqueKey,j=e.charts,S=e.deg2rad,u=e.doc,k=e.isFirefox,w=e.isMS,D=e.isWebKit;n=e.noop;var A=e.SVG_NS,f=e.symbolSizes,m=e.win,x,l=function(){function e(t,e,i,o,r,s,n){this.width=this.url=this.style=this.isSVG=this.imgCount=this.height=this.gradients=this.globalAnimation=this.defs=this.chartIndex=this.cacheKeys=this.cache=this.boxWrapper=this.box=this.alignedObjects=void 0;this.init(t,e,i,o,r,s,n)};e.prototype.init=function(t,e,i,o,r,s,n){var h=this.createElement('svg').attr({version:'1.1','class':'highcharts-root'});n||h.css(this.getStyle(o));o=h.element;t.appendChild(o);b(t,'dir','ltr');-1===t.innerHTML.indexOf('xmlns')&&b(o,'xmlns',this.SVG_NS);this.isSVG=!0;this.box=o;this.boxWrapper=h;this.alignedObjects=[];this.url=this.getReferenceURL();this.createElement('desc').add().element.appendChild(u.createTextNode('Created with Highcharts 9.0.1'));this.defs=this.createElement('defs').add();this.allowHTML=s;this.forExport=r;this.styledMode=n;this.gradients={};this.cache={};this.cacheKeys=[];this.imgCount=0;this.setSize(e,i,!1);var a;k&&t.getBoundingClientRect&&(e=function(){v(t,{left:0,top:0});a=t.getBoundingClientRect();v(t,{left:Math.ceil(a.left)-a.left+'px',top:Math.ceil(a.top)-a.top+'px'})},e(),this.unSubPixelFix=y(m,'resize',e))};e.prototype.definition=function(t){return(new s([t])).addToDOM(this.defs.element)};e.prototype.getReferenceURL=function(){if((k||D)&&u.getElementsByTagName('base').length){if(!h(x)){var t=M();t=(new s([{tagName:'svg',attributes:{width:8,height:8},children:[{tagName:'defs',children:[{tagName:'clipPath',attributes:{id:t},children:[{tagName:'rect',attributes:{width:4,height:4}}]}]},{tagName:'rect',attributes:{id:'hitme',width:8,height:8,'clip-path':'url(#'+t+')',fill:'rgba(0,0,0,0.001)'}}]}])).addToDOM(u.body);v(t,{position:'fixed',top:0,left:0,zIndex:9E5});var e=u.elementFromPoint(6,6);x='hitme'===(e&&e.id);u.body.removeChild(t)};if(x)return m.location.href.split('#')[0].replace(/<[^>]*>/g,'').replace(/([\('\)])/g,'\\$1').replace(/ /g,'%20')};return''};e.prototype.getStyle=function(t){return this.style=p({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:'12px'},t)};e.prototype.setStyle=function(t){this.boxWrapper.css(this.getStyle(t))};e.prototype.isHidden=function(){return!this.boxWrapper.getBBox().width};e.prototype.destroy=function(){var t=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();T(this.gradients||{});this.gradients=null;t&&(this.defs=t.destroy());this.unSubPixelFix&&this.unSubPixelFix();return this.alignedObjects=null};e.prototype.createElement=function(t){var e=new this.Element;e.init(this,t);return e};e.prototype.getRadialAttr=function(t,e){return{cx:t[0]-t[2]/2+e.cx*t[2],cy:t[1]-t[2]/2+e.cy*t[2],r:e.r*t[2]}};e.prototype.buildText=function(t){(new a(t)).buildSVG()};e.prototype.getContrast=function(e){e=t.parse(e).rgba;e[0]*=1;e[1]*=1.2;e[2]*=.5;return 459<e[0]+e[1]+e[2]?'#000000':'#FFFFFF'};e.prototype.button=function(t,e,o,r,n,a,h,l,f,g){var u=this.label(t,e,o,f,void 0,void 0,g,void 0,'button'),m=0,v=this.styledMode,d=n?c(n):{};t=d&&d.style||{};d=s.filterUserAttributes(d);u.attr(c({padding:8,r:2},d));if(!v){d=c({fill:i.neutralColor3,stroke:i.neutralColor20,'stroke-width':1,style:{color:i.neutralColor80,cursor:'pointer',fontWeight:'normal'}},{style:t},d);var x=d.style;delete d.style;a=c(d,{fill:i.neutralColor10},s.filterUserAttributes(a||{}));var M=a.style;delete a.style;h=c(d,{fill:i.highlightColor10,style:{color:i.neutralColor100,fontWeight:'bold'}},s.filterUserAttributes(h||{}));var C=h.style;delete h.style;l=c(d,{style:{color:i.neutralColor20}},s.filterUserAttributes(l||{}));var b=l.style;delete l.style};y(u.element,w?'mouseover':'mouseenter',function(){3!==m&&u.setState(1)});y(u.element,w?'mouseout':'mouseleave',function(){3!==m&&u.setState(m)});u.setState=function(t){1!==t&&(u.state=m=t);u.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass('highcharts-button-'+['normal','hover','pressed','disabled'][t||0]);v||u.attr([d,a,h,l][t||0]).css([x,M,C,b][t||0])};v||u.attr(d).css(p({cursor:'default'},x));return u.on('click',function(t){3!==m&&r.call(u,t)})};e.prototype.crispLine=function(t,e,i){void 0===i&&(i='round');var o=t[0],r=t[1];o[1]===r[1]&&(o[1]=r[1]=Math[i](o[1])-e%2/2);o[2]===r[2]&&(o[2]=r[2]=Math[i](o[2])+e%2/2);return t};e.prototype.path=function(t){var e=this.styledMode?{}:{fill:'none'};L(t)?e.d=t:g(t)&&p(e,t);return this.createElement('path').attr(e)};e.prototype.circle=function(t,e,i){t=g(t)?t:'undefined'===typeof t?{}:{x:t,y:e,r:i};e=this.createElement('circle');e.xSetter=e.ySetter=function(t,e,i){i.setAttribute('c'+e,t)};return e.attr(t)};e.prototype.arc=function(t,e,i,o,r,s){g(t)?(o=t,e=o.y,i=o.r,t=o.x):o={innerR:o,start:r,end:s};t=this.symbol('arc',t,e,i,i,o);t.r=i;return t};e.prototype.rect=function(t,e,i,o,r,s){r=g(t)?t.r:r;var n=this.createElement('rect');t=g(t)?t:'undefined'===typeof t?{}:{x:t,y:e,width:Math.max(i,0),height:Math.max(o,0)};this.styledMode||('undefined'!==typeof s&&(t.strokeWidth=s,t=n.crisp(t)),t.fill='none');r&&(t.r=r);n.rSetter=function(t,e,i){n.r=t;b(i,{rx:t,ry:t})};n.rGetter=function(){return n.r};return n.attr(t)};e.prototype.setSize=function(t,e,i){var o=this.alignedObjects,r=o.length;this.width=t;this.height=e;for(this.boxWrapper.animate({width:t,height:e},{step:function(){this.attr({viewBox:'0 0 '+this.attr('width')+' '+this.attr('height')})},duration:d(i,!0)?void 0:0});r--;)o[r].align()};e.prototype.g=function(t){var e=this.createElement('g');return t?e.attr({'class':'highcharts-'+t}):e};e.prototype.image=function(t,e,i,o,r,s){var n={preserveAspectRatio:'none'},h=function(t,e){t.setAttributeNS?t.setAttributeNS('http://www.w3.org/1999/xlink','href',e):t.setAttribute('hc-svg-href',e)},l=function(e){h(a.element,t);s.call(a,e)};1<arguments.length&&p(n,{x:e,y:i,width:o,height:r});var a=this.createElement('image').attr(n);s?(h(a.element,'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='),n=new m.Image,y(n,'load',l),n.src=t,n.complete&&l({})):h(a.element,t);return a};e.prototype.symbol=function(t,e,i,o,r,s){var l=this,m=/^url\((.*?)\)$/,y=m.test(t),c=!y&&(this.symbols[t]?t:'circle'),x=c&&this.symbols[c],b;if(x){'number'===typeof e&&(b=x.call(this.symbols,Math.round(e||0),Math.round(i||0),o||0,r||0,s));var n=this.path(b);l.styledMode||n.attr('fill','none');p(n,{symbolName:c,x:e,y:i,width:o,height:r});s&&p(n,s)}
else if(y){var a=t.match(m)[1];n=this.image(a);n.imgwidth=d(f[a]&&f[a].width,s&&s.width);n.imgheight=d(f[a]&&f[a].height,s&&s.height);var g=function(){n.attr({width:n.width,height:n.height})};['width','height'].forEach(function(t){n[t+'Setter']=function(t,e){var o={},i=this['img'+e],r='width'===e?'translateX':'translateY';this[e]=t;h(i)&&(s&&'within'===s.backgroundSize&&this.width&&this.height&&(i=Math.round(i*Math.min(this.width/this.imgwidth,this.height/this.imgheight))),this.element&&this.element.setAttribute(e,i),this.alignByTranslate||(o[r]=((this[e]||0)-i)/2,this.attr(o)))}});h(e)&&n.attr({x:e,y:i});n.isImg=!0;h(n.imgwidth)&&h(n.imgheight)?g():(n.attr({width:0,height:0}),P('img',{onload:function(){var t=j[l.chartIndex];0===this.width&&(v(this,{position:'absolute',top:'-999em'}),u.body.appendChild(this));f[a]={width:this.width,height:this.height};n.imgwidth=this.width;n.imgheight=this.height;n.element&&g();this.parentNode&&this.parentNode.removeChild(this);l.imgCount--;if(!l.imgCount&&t&&!t.hasLoaded)t.onload()},src:a}),this.imgCount++)};return n};e.prototype.clipRect=function(t,e,i,o){var r=M()+'-',s=this.createElement('clipPath').attr({id:r}).add(this.defs);t=this.rect(t,e,i,o,0).add(s);t.id=r;t.clipPath=s;t.count=0;return t};e.prototype.text=function(t,e,i,o){var r={};if(o&&(this.allowHTML||!this.forExport))return this.html(t,e,i);r.x=Math.round(e||0);i&&(r.y=Math.round(i));h(t)&&(r.text=t);t=this.createElement('text').attr(r);o||(t.xSetter=function(t,e,i){var s=i.getElementsByTagName('tspan'),n=i.getAttribute(e),o;for(o=0;o<s.length;o++){var r=s[o];r.getAttribute(e)===n&&r.setAttribute(e,t)};i.setAttribute(e,t)});return t};e.prototype.fontMetrics=function(t,e){t=!this.styledMode&&/px/.test(t)||!m.getComputedStyle?t||e&&e.style&&e.style.fontSize||this.style&&this.style.fontSize:e&&o.prototype.getStyle.call(e,'font-size');t=/px/.test(t)?E(t):12;e=24>t?t+3:Math.round(1.2*t);return{h:e,b:Math.round(.8*e),f:t}};e.prototype.rotCorr=function(t,e,i){var o=t;e&&i&&(o=Math.max(o*Math.cos(e*S),4));return{x:-t/3*Math.sin(e*S),y:o}};e.prototype.pathToSegments=function(t){for(var o=[],e=[],r={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2},i=0;i<t.length;i++)O(e[0])&&C(t[i])&&e.length===r[e[0].toUpperCase()]&&t.splice(i,0,e[0].replace('M','L').replace('m','l')),'string'===typeof t[i]&&(e.length&&o.push(e.slice(0)),e.length=0),e.push(t[i]);o.push(e.slice(0));return o};e.prototype.label=function(t,e,i,o,s,n,a,h,l){return new r(this,t,e,i,o,s,n,a,h,l)};return e}();l.prototype.Element=o;l.prototype.SVG_NS=A;l.prototype.draw=n;l.prototype.escapes={'&':'&amp;','<':'&lt;','>':'&gt;','\'':'&#39;','"':'&quot;'};l.prototype.symbols={circle:function(t,e,i,o){return this.arc(t+i/2,e+o/2,i/2,o/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},square:function(t,e,i,o){return[['M',t,e],['L',t+i,e],['L',t+i,e+o],['L',t,e+o],['Z']]},triangle:function(t,e,i,o){return[['M',t+i/2,e],['L',t+i,e+o],['L',t,e+o],['Z']]},'triangle-down':function(t,e,i,o){return[['M',t,e],['L',t+i,e],['L',t+i/2,e+o],['Z']]},diamond:function(t,e,i,o){return[['M',t+i/2,e],['L',t+i,e+o/2],['L',t+i/2,e+o],['L',t,e+o/2],['Z']]},arc:function(t,e,i,o,r){var l=[];if(r){var s=r.start||0,n=r.end||0,u=r.r||i;i=r.r||o||i;var a=.001>Math.abs(n-s-2*Math.PI);n-=.001;o=r.innerR;a=d(r.open,a);var f=Math.cos(s),g=Math.sin(s),p=Math.cos(n),c=Math.sin(n);s=d(r.longArc,.001>n-s-Math.PI?0:1);l.push(['M',t+u*f,e+i*g],['A',u,i,0,s,d(r.clockwise,1),t+u*p,e+i*c]);h(o)&&l.push(a?['M',t+o*p,e+o*c]:['L',t+o*p,e+o*c],['A',o,o,0,s,h(r.clockwise)?1-r.clockwise:0,t+o*f,e+o*g]);a||l.push(['Z'])};return l},callout:function(t,e,i,o,r){var s=Math.min(r&&r.r||0,i,o),h=s+6,n=r&&r.anchorX;r=r&&r.anchorY||0;var a=[['M',t+s,e],['L',t+i-s,e],['C',t+i,e,t+i,e,t+i,e+s],['L',t+i,e+o-s],['C',t+i,e+o,t+i,e+o,t+i-s,e+o],['L',t+s,e+o],['C',t,e+o,t,e+o,t,e+o-s],['L',t,e+s],['C',t,e,t,e,t+s,e]];if(!C(n))return a;t+n>=i?r>e+h&&r<e+o-h?a.splice(3,1,['L',t+i,r-6],['L',t+i+6,r],['L',t+i,r+6],['L',t+i,e+o-s]):a.splice(3,1,['L',t+i,o/2],['L',n,r],['L',t+i,o/2],['L',t+i,e+o-s]):0>=t+n?r>e+h&&r<e+o-h?a.splice(7,1,['L',t,r+6],['L',t-6,r],['L',t,r-6],['L',t,e+s]):a.splice(7,1,['L',t,o/2],['L',n,r],['L',t,o/2],['L',t,e+s]):r&&r>o&&n>t+h&&n<t+i-h?a.splice(5,1,['L',n+6,e+o],['L',n,e+o+6],['L',n-6,e+o],['L',t+s,e+o]):r&&0>r&&n>t+h&&n<t+i-h&&a.splice(1,1,['L',n-6,e],['L',n,e-6],['L',n+6,e],['L',i-s,e]);return a}};e.SVGRenderer=l;e.Renderer=e.SVGRenderer;return e.Renderer});i(e,'Core/Renderer/HTML/HTMLElement.js',[e['Core/Globals.js'],e['Core/Renderer/SVG/SVGElement.js'],e['Core/Utilities.js']],function(t,e,i){var o=i.css,r=i.defined,s=i.extend,n=i.pick,a=i.pInt,h=t.isFirefox;s(e.prototype,{htmlCss:function(t){var e='SPAN'===this.element.tagName&&t&&'width' in t,r=n(e&&t.width,void 0);if(e){delete t.width;this.textWidth=r;var i=!0};t&&'ellipsis'===t.textOverflow&&(t.whiteSpace='nowrap',t.overflow='hidden');this.styles=s(this.styles,t);o(this.element,t);i&&this.htmlUpdateTransform();return this},htmlGetBBox:function(){var t=this.element;return{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var l=this.renderer,t=this.element,c=this.translateX||0,d=this.translateY||0,f=this.x||0,g=this.y||0,n=this.textAlign||'left',u={left:0,center:.5,right:1}[n],e=this.styles,h=e&&e.whiteSpace;o(t,{marginLeft:c,marginTop:d});!l.styledMode&&this.shadows&&this.shadows.forEach(function(t){o(t,{marginLeft:c+1,marginTop:d+1})});this.inverted&&[].forEach.call(t.childNodes,function(e){l.invertChild(e,t)});if('SPAN'===t.tagName){e=this.rotation;var s=this.textWidth&&a(this.textWidth),p=[e,n,t.innerHTML,this.textWidth,this.textAlign].join(),i;(i=s!==this.oldTextWidth)&&!(i=s>this.oldTextWidth)&&((i=this.textPxLength)||(o(t,{width:'',whiteSpace:h||'nowrap'}),i=t.offsetWidth),i=i>s);i&&(/[ \-]/.test(t.textContent||t.innerText)||'ellipsis'===t.style.textOverflow)?(o(t,{width:s+'px',display:'block',whiteSpace:h||'normal'}),this.oldTextWidth=s,this.hasBoxWidthChanged=!0):this.hasBoxWidthChanged=!1;p!==this.cTT&&(h=l.fontMetrics(t.style.fontSize,t).b,!r(e)||e===(this.oldRotation||0)&&n===this.oldAlign||this.setSpanRotation(e,u,h),this.getSpanCorrection(!r(e)&&this.textPxLength||t.offsetWidth,h,u,e,n));o(t,{left:f+(this.xCorr||0)+'px',top:g+(this.yCorr||0)+'px'});this.cTT=p;this.oldRotation=e;this.oldAlign=n}}
else this.alignOnAdd=!0},setSpanRotation:function(t,e,i){var r={},s=this.renderer.getTransformKey();r[s]=r.transform='rotate('+t+'deg)';r[s+(h?'Origin':'-origin')]=r.transformOrigin=100*e+'% '+i+'px';o(this.element,r)},getSpanCorrection:function(t,e,i){this.xCorr=-t*i;this.yCorr=-e}});return e});i(e,'Core/Renderer/HTML/HTMLRenderer.js',[e['Core/Globals.js'],e['Core/Renderer/HTML/AST.js'],e['Core/Renderer/SVG/SVGElement.js'],e['Core/Renderer/SVG/SVGRenderer.js'],e['Core/Utilities.js']],function(t,e,i,o,r){var a=t.isFirefox,h=t.isMS,l=t.isWebKit,s=t.win,p=r.attr,c=r.createElement,n=r.extend,d=r.pick;n(o.prototype,{getTransformKey:function(){return h&&!/Edge/.test(s.navigator.userAgent)?'-ms-transform':l?'-webkit-transform':a?'MozTransform':s.opera?'-o-transform':''},html:function(t,o,r){var s=this.createElement('span'),h=s.element,a=s.renderer,l=a.isSVG,u=function(t,e){['opacity','visibility'].forEach(function(o){t[o+'Setter']=function(r,s,n){var a=t.div?t.div.style:e;i.prototype[o+'Setter'].call(this,r,s,n);a&&(a[s]=r)}});t.addedSetters=!0};s.textSetter=function(t){t!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,e.setElementHTML(this.element,d(t,'')),this.textStr=t,s.doTransform=!0)};l&&u(s,s.element.style);s.xSetter=s.ySetter=s.alignSetter=s.rotationSetter=function(t,e){'align'===e?s.alignValue=s.textAlign=t:s[e]=t;s.doTransform=!0};s.afterSetters=function(){this.doTransform&&(this.htmlUpdateTransform(),this.doTransform=!1)};s.attr({text:t,x:Math.round(o),y:Math.round(r)}).css({position:'absolute'});a.styledMode||s.css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize});h.style.whiteSpace='nowrap';s.css=s.htmlCss;l&&(s.add=function(t){var o=a.box.parentNode,i=[];if(this.parentGroup=t){var e=t.div;if(!e){for(;t;)i.push(t),t=t.parentGroup;i.reverse().forEach(function(t){function l(e,i){t[i]=e;'translateX'===i?r.left=e+'px':r.top=e+'px';t.doTransform=!0};var a=p(t.element,'class'),h=t.styles||{};e=t.div=t.div||c('div',a?{className:a}:void 0,{position:'absolute',left:(t.translateX||0)+'px',top:(t.translateY||0)+'px',display:t.display,opacity:t.opacity,cursor:h.cursor,pointerEvents:h.pointerEvents},e||o);var r=e.style;n(t,{classSetter:function(t){return function(e){this.element.setAttribute('class',e);t.className=e}}(e),on:function(){i[0].div&&s.on.apply({element:i[0].div},arguments);return t},translateXSetter:l,translateYSetter:l});t.addedSetters||u(t)})}}
else e=o;e.appendChild(h);s.added=!0;s.alignOnAdd&&s.htmlUpdateTransform();return s});return s}});return o});i(e,'Core/Time.js',[e['Core/Globals.js'],e['Core/Utilities.js']],function(t,e){var s=t.win,n=e.defined,h=e.error,a=e.extend,l=e.isObject,p=e.merge,c=e.objectEach,o=e.pad,r=e.pick,d=e.splat,i=e.timeUnits;'';e=function(){function e(t){this.options={};this.variableTimezone=this.useUTC=!1;this.Date=s.Date;this.getTimezoneOffset=this.timezoneOffsetFunction();this.update(t)};e.prototype.get=function(t,e){if(this.variableTimezone||this.timezoneOffset){var i=e.getTime(),o=i-this.getTimezoneOffset(e);e.setTime(o);t=e['getUTC'+t]();e.setTime(i);return t};return this.useUTC?e['getUTC'+t]():e['get'+t]()};e.prototype.set=function(t,e,i){if(this.variableTimezone||this.timezoneOffset){if('Milliseconds'===t||'Seconds'===t||'Minutes'===t&&0===this.getTimezoneOffset(e)%36E5)return e['setUTC'+t](i);var o=this.getTimezoneOffset(e);o=e.getTime()-o;e.setTime(o);e['setUTC'+t](i);t=this.getTimezoneOffset(e);o=e.getTime()+t;return e.setTime(o)};return this.useUTC?e['setUTC'+t](i):e['set'+t](i)};e.prototype.update=function(t){var e=r(t&&t.useUTC,!0);this.options=t=p(!0,this.options||{},t);this.Date=t.Date||s.Date||Date;this.timezoneOffset=(this.useUTC=e)&&t.timezoneOffset;this.getTimezoneOffset=this.timezoneOffsetFunction();this.variableTimezone=e&&!(!t.getTimezoneOffset&&!t.timezone)};e.prototype.makeTime=function(e,i,o,s,n,a){if(this.useUTC){var h=this.Date.UTC.apply(0,arguments),l=this.getTimezoneOffset(h);h+=l;var p=this.getTimezoneOffset(h);l!==p?h+=p-l:l-36E5!==this.getTimezoneOffset(h-36E5)||t.isSafari||(h-=36E5)}
else h=(new this.Date(e,i,r(o,1),r(s,0),r(n,0),r(a,0))).getTime();return h};e.prototype.timezoneOffsetFunction=function(){var i=this,t=this.options,e=t.moment||s.moment;if(!this.useUTC)return function(t){return 6E4*(new Date(t.toString())).getTimezoneOffset()};if(t.timezone){if(e)return function(i){return 6E4*-e.tz(i,t.timezone).utcOffset()};h(25)};return this.useUTC&&t.getTimezoneOffset?function(e){return 6E4*t.getTimezoneOffset(e.valueOf())}:function(){return 6E4*(i.timezoneOffset||0)}};e.prototype.dateFormat=function(e,i,s){var h;if(!n(i)||isNaN(i))return(null===(h=t.defaultOptions.lang)||void 0===h?void 0:h.invalidDate)||'';e=r(e,'%Y-%m-%d %H:%M:%S');var v=this;h=new this.Date(i);var p=this.get('Hours',h),d=this.get('Day',h),f=this.get('Date',h),u=this.get('Month',h),g=this.get('FullYear',h),l=t.defaultOptions.lang,m=null===l||void 0===l?void 0:l.weekdays,y=null===l||void 0===l?void 0:l.shortWeekdays;h=a({a:y?y[d]:m[d].substr(0,3),A:m[d],d:o(f),e:o(f,2,' '),w:d,b:l.shortMonths[u],B:l.months[u],m:o(u+1),o:u+1,y:g.toString().substr(2,2),Y:g,H:o(p),k:p,I:o(p%12||12),l:p%12||12,M:o(this.get('Minutes',h)),p:12>p?'AM':'PM',P:12>p?'am':'pm',S:o(h.getSeconds()),L:o(Math.floor(i%1E3),3)},t.dateFormats);c(h,function(t,o){for(;-1!==e.indexOf('%'+o);)e=e.replace('%'+o,'function'===typeof t?t.call(v,i):t)});return s?e.substr(0,1).toUpperCase()+e.substr(1):e};e.prototype.resolveDTLFormat=function(t){return l(t,!0)?t:(t=d(t),{main:t[0],from:t[1],to:t[2]})};e.prototype.getTimeTicks=function(t,e,o,s){var h=this,u=[],m={};var l=new h.Date(e),p=t.unitRange,c=t.count||1,f;s=r(s,1);if(n(e)){h.set('Milliseconds',l,p>=i.second?0:c*Math.floor(h.get('Milliseconds',l)/c));p>=i.second&&h.set('Seconds',l,p>=i.minute?0:c*Math.floor(h.get('Seconds',l)/c));p>=i.minute&&h.set('Minutes',l,p>=i.hour?0:c*Math.floor(h.get('Minutes',l)/c));p>=i.hour&&h.set('Hours',l,p>=i.day?0:c*Math.floor(h.get('Hours',l)/c));p>=i.day&&h.set('Date',l,p>=i.month?1:Math.max(1,c*Math.floor(h.get('Date',l)/c)));if(p>=i.month){h.set('Month',l,p>=i.year?0:c*Math.floor(h.get('Month',l)/c));var d=h.get('FullYear',l)};p>=i.year&&h.set('FullYear',l,d-d%c);p===i.week&&(d=h.get('Day',l),h.set('Date',l,h.get('Date',l)-d+s+(d<s?-7:0)));d=h.get('FullYear',l);s=h.get('Month',l);var g=h.get('Date',l),y=h.get('Hours',l);e=l.getTime();!h.variableTimezone&&h.useUTC||!n(o)||(f=o-e>4*i.month||h.getTimezoneOffset(e)!==h.getTimezoneOffset(o));e=l.getTime();for(l=1;e<o;)u.push(e),e=p===i.year?h.makeTime(d+l*c,0):p===i.month?h.makeTime(d,s+l*c):!f||p!==i.day&&p!==i.week?f&&p===i.hour&&1<c?h.makeTime(d,s,g,y+l*c):e+p*c:h.makeTime(d,s,g+l*c*(p===i.day?1:7)),l++;u.push(e);p<=i.hour&&1E4>u.length&&u.forEach(function(t){0===t%18E5&&'000000000'===h.dateFormat('%H%M%S%L',t)&&(m[t]='day')})};u.info=a(t,{higherRanks:m,totalRange:p*c});return u};return e}();t.Time=e;return t.Time});i(e,'Core/Options.js',[e['Core/Globals.js'],e['Core/Color/Color.js'],e['Core/Color/Palette.js'],e['Core/Time.js'],e['Core/Utilities.js']],function(t,e,i,o,r){var s=t.isTouchDevice,n=t.svg;e=e.parse;r=r.merge;'';t.defaultOptions={colors:i.colors,symbols:['circle','diamond','square','triangle','triangle-down'],lang:{loading:'Loading...',months:'January February March April May June July August September October November December'.split(' '),shortMonths:'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' '),weekdays:'Sunday Monday Tuesday Wednesday Thursday Friday Saturday'.split(' '),decimalPoint:'.',numericSymbols:'kMGTPE'.split(''),resetZoom:'Reset zoom',resetZoomTitle:'Reset zoom level 1:1',thousandsSep:' '},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:{styledMode:!1,borderRadius:0,colorCount:10,defaultSeriesType:'line',ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:6},position:{align:'right',x:-10,y:10}},zoomBySingleTouch:!1,width:null,height:null,borderColor:i.highlightColor80,backgroundColor:i.backgroundColor,plotBorderColor:i.neutralColor20},title:{text:'Chart title',align:'center',margin:15,widthAdjust:-44},subtitle:{text:'',align:'center',widthAdjust:-44},caption:{margin:15,text:'',align:'left',verticalAlign:'bottom'},plotOptions:{},labels:{style:{position:'absolute',color:i.neutralColor80}},legend:{enabled:!0,align:'center',alignColumns:!0,layout:'horizontal',labelFormatter:function(){return this.name},borderColor:i.neutralColor40,borderRadius:0,navigation:{activeColor:i.highlightColor100,inactiveColor:i.neutralColor20},itemStyle:{color:i.neutralColor80,cursor:'pointer',fontSize:'12px',fontWeight:'bold',textOverflow:'ellipsis'},itemHoverStyle:{color:i.neutralColor100},itemHiddenStyle:{color:i.neutralColor20},shadow:!1,itemCheckboxStyle:{position:'absolute',width:'13px',height:'13px'},squareSymbol:!0,symbolPadding:5,verticalAlign:'bottom',x:0,y:0,title:{style:{fontWeight:'bold'}}},loading:{labelStyle:{fontWeight:'bold',position:'relative',top:'45%'},style:{position:'absolute',backgroundColor:i.backgroundColor,opacity:.5,textAlign:'center'}},tooltip:{enabled:!0,animation:n,borderRadius:3,dateTimeLabelFormats:{millisecond:'%A, %b %e, %H:%M:%S.%L',second:'%A, %b %e, %H:%M:%S',minute:'%A, %b %e, %H:%M',hour:'%A, %b %e, %H:%M',day:'%A, %b %e, %Y',week:'Week from %A, %b %e, %Y',month:'%B %Y',year:'%Y'},footerFormat:'',padding:8,snap:s?25:10,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:e(i.neutralColor3).setOpacity(.85).get(),borderWidth:1,shadow:!0,style:{color:i.neutralColor80,cursor:'default',fontSize:'12px',whiteSpace:'nowrap'}},credits:{enabled:!0,href:'https://www.highcharts.com?credits',position:{align:'right',x:-10,verticalAlign:'bottom',y:-5},style:{cursor:'pointer',color:i.neutralColor40,fontSize:'9px'},text:'Highcharts.com'}};t.defaultOptions.chart.styledMode=!1;'';t.time=new o(r(t.defaultOptions.global,t.defaultOptions.time));t.dateFormat=function(e,i,o){return t.time.dateFormat(e,i,o)};return{dateFormat:t.dateFormat,defaultOptions:t.defaultOptions,time:t.time}});i(e,'Core/Axis/Tick.js',[e['Core/Globals.js'],e['Core/Utilities.js']],function(t,e){var r=t.deg2rad,h=e.clamp,s=e.correctFloat,n=e.defined,l=e.destroyObjectProperties,p=e.extend,o=e.fireEvent,a=e.isNumber,c=e.merge,d=e.objectEach,i=e.pick;'';e=function(){function t(t,e,i,r,s){this.isNewLabel=this.isNew=!0;this.axis=t;this.pos=e;this.type=i||'';this.parameters=s||{};this.tickmarkOffset=this.parameters.tickmarkOffset;this.options=this.parameters.options;o(this,'init');i||r||this.addLabel()};t.prototype.addLabel=function(){var t=this,o=t.axis,a=o.options,m=o.chart,c=o.categories,y=o.logarithmic,u=o.names,h=t.pos,l=i(t.options&&t.options.labels,a.labels),r=o.tickPositions,v=h===r[0],x=h===r[r.length-1];u=this.parameters.category||(c?i(c[h],u[h],h):h);var e=t.label;c=(!l.step||1===l.step)&&1===o.tickInterval;r=r.info;var d,g;if(o.dateTime&&r){var f=m.time.resolveDTLFormat(a.dateTimeLabelFormats[!a.grid&&r.higherRanks[h]||r.unitName]),b=f.main};t.isFirst=v;t.isLast=x;t.formatCtx={axis:o,chart:m,isFirst:v,isLast:x,dateTimeLabelFormat:b,tickPositionInfo:r,value:y?s(y.lin2log(u)):u,pos:h};a=o.labelFormatter.call(t.formatCtx,this.formatCtx);if(g=f&&f.list)t.shortenLabel=function(){for(d=0;d<g.length;d++)if(e.attr({text:o.labelFormatter.call(p(t.formatCtx,{dateTimeLabelFormat:g[d]}))}),e.getBBox().width<o.getSlotWidth(t)-2*i(l.padding,5))return;e.attr({text:''})};c&&o._addedPlotLB&&t.moveLabel(a,l);n(e)||t.movedLabel?e&&e.textStr!==a&&!c&&(!e.textWidth||l.style&&l.style.width||e.styles.width||e.css({width:null}),e.attr({text:a}),e.textPxLength=e.getBBox().width):(t.label=e=t.createLabel({x:0,y:0},a,l),t.rotation=0)};t.prototype.createLabel=function(t,e,i){var o=this.axis,r=o.chart;if(t=n(e)&&i.enabled?r.renderer.text(e,t.x,t.y,i.useHTML).add(o.labelGroup):null)r.styledMode||t.css(c(i.style)),t.textPxLength=t.getBBox().width;return t};t.prototype.destroy=function(){l(this,this.axis)};t.prototype.getPosition=function(t,e,i,r){var n=this.axis,a=n.chart,l=r&&a.oldChartHeight||a.chartHeight;t={x:t?s(n.translate(e+i,null,null,r)+n.transB):n.left+n.offset+(n.opposite?(r&&a.oldChartWidth||a.chartWidth)-n.right-n.left:0),y:t?l-n.bottom+n.offset-(n.opposite?n.height:0):s(l-n.translate(e+i,null,null,r)-n.transB)};t.y=h(t.y,-1E5,1E5);o(this,'afterGetPosition',{pos:t});return t};t.prototype.getLabelPosition=function(t,e,i,s,a,h,l,p){var c=this.axis,m=c.transA,y=c.isLinked&&c.linkedParent?c.linkedParent.reversed:c.reversed,d=c.staggerLines,f=c.tickRotCorr||{x:0,y:0},g=a.y,v=s||c.reserveSpaceDefault?0:-c.labelOffset*('center'===c.labelAlign?.5:1),u={};n(g)||(g=0===c.side?i.rotation?-8:-i.getBBox().height:2===c.side?f.y+8:Math.cos(i.rotation*r)*(f.y-i.getBBox(!1,0).height/2));t=t+a.x+v+f.x-(h&&s?h*m*(y?-1:1):0);e=e+g-(h&&!s?h*m*(y?1:-1):0);d&&(i=l/(p||1)%d,c.opposite&&(i=d-i-1),e+=c.labelOffset/d*i);u.x=t;u.y=Math.round(e);o(this,'afterGetLabelPosition',{pos:u,tickmarkOffset:h,index:l});return u};t.prototype.getLabelSize=function(){return this.label?this.label.getBBox()[this.axis.horiz?'height':'width']:0};t.prototype.getMarkPath=function(t,e,i,o,r,s){return s.crispLine([['M',t,e],['L',t+(r?0:-i),e+(r?i:0)]],o)};t.prototype.handleOverflow=function(t){var e=this.axis,y=e.options.labels,a=t.x,u=e.chart.chartWidth,h=e.chart.spacing,f=i(e.labelLeft,Math.min(e.pos,h[3]));h=i(e.labelRight,Math.max(e.isRadial?0:e.pos+e.len,u-h[1]));var d=this.label,l=this.rotation,s={left:0,center:.5,right:1}[e.labelAlign||d.attr('align')],n=d.getBBox().width,p=e.getSlotWidth(this),o=p,m=1,c,g={};if(l||'justify'!==i(y.overflow,'justify'))0>l&&a-s*n<f?c=Math.round(a/Math.cos(l*r)-f):0<l&&a+s*n>h&&(c=Math.round((u-a)/Math.cos(l*r)));else if(u=a+(1-s)*n,a-s*n<f?o=t.x+o*(1-s)-f:u>h&&(o=h-t.x+o*s,m=-1),o=Math.min(p,o),o<p&&'center'===e.labelAlign&&(t.x+=m*(p-o-s*(p-Math.min(n,o)))),n>o||e.autoRotation&&(d.styles||{}).width)c=o;c&&(this.shortenLabel?this.shortenLabel():(g.width=Math.floor(c)+'px',(y.style||{}).textOverflow||(g.textOverflow='ellipsis'),d.css(g)))};t.prototype.moveLabel=function(t,e){var i=this,r=i.label,s=!1,o=i.axis,a=o.reversed;r&&r.textStr===t?(i.movedLabel=r,s=!0,delete i.label):d(o.ticks,function(e){s||e.isNew||e===i||!e.label||e.label.textStr!==t||(i.movedLabel=e.label,s=!0,e.labelPos=i.movedLabel.xy,delete e.label)});if(!s&&(i.labelPos||r)){var n=i.labelPos||r.xy;r=o.horiz?a?0:o.width+o.left:n.x;o=o.horiz?n.y:a?o.width+o.left:0;i.movedLabel=i.createLabel({x:r,y:o},t,e);i.movedLabel&&i.movedLabel.attr({opacity:0})}};t.prototype.render=function(t,e,r){var s=this.axis,a=s.horiz,n=this.pos,h=i(this.tickmarkOffset,s.tickmarkOffset);n=this.getPosition(a,n,h,e);h=n.x;var l=n.y;s=a&&h===s.pos+s.len||!a&&l===s.pos?-1:1;r=i(r,1);this.isActive=!0;this.renderGridLine(e,r,s);this.renderMark(n,r,s);this.renderLabel(n,e,r,t);this.isNew=!1;o(this,'afterRender')};t.prototype.renderGridLine=function(t,e,o){var r=this.axis,s=r.options,n=this.gridLine,a={},p=this.pos,h=this.type,c=i(this.tickmarkOffset,r.tickmarkOffset),d=r.chart.renderer,l=h?h+'Grid':'grid',u=s[l+'LineWidth'],f=s[l+'LineColor'];s=s[l+'LineDashStyle'];n||(r.chart.styledMode||(a.stroke=f,a['stroke-width']=u,s&&(a.dashstyle=s)),h||(a.zIndex=1),t&&(e=0),this.gridLine=n=d.path().attr(a).addClass('highcharts-'+(h?h+'-':'')+'grid-line').add(r.gridGroup));if(n&&(o=r.getPlotLinePath({value:p+c,lineWidth:n.strokeWidth()*o,force:'pass',old:t})))n[t||this.isNew?'attr':'animate']({d:o,opacity:e})};t.prototype.renderMark=function(t,e,o){var r=this.axis,a=r.options,p=r.chart.renderer,s=this.type,l=s?s+'Tick':'tick',h=r.tickSize(l),n=this.mark,c=!n,u=t.x;t=t.y;var d=i(a[l+'Width'],!s&&r.isXAxis?1:0);a=a[l+'Color'];h&&(r.opposite&&(h[0]=-h[0]),c&&(this.mark=n=p.path().addClass('highcharts-'+(s?s+'-':'')+'tick').add(r.axisGroup),r.chart.styledMode||n.attr({stroke:a,'stroke-width':d})),n[c?'attr':'animate']({d:this.getMarkPath(u,t,h[0],n.strokeWidth()*o,r.horiz,p),opacity:e}))};t.prototype.renderLabel=function(t,e,o,r){var s=this.axis,u=s.horiz,p=s.options,n=this.label,h=p.labels,c=h.step;s=i(this.tickmarkOffset,s.tickmarkOffset);var l=!0,d=t.x;t=t.y;n&&a(d)&&(n.xy=t=this.getLabelPosition(d,t,n,u,h,s,r,c),this.isFirst&&!this.isLast&&!i(p.showFirstLabel,1)||this.isLast&&!this.isFirst&&!i(p.showLastLabel,1)?l=!1:!u||h.step||h.rotation||e||0===o||this.handleOverflow(t),c&&r%c&&(l=!1),l&&a(t.y)?(t.opacity=o,n[this.isNewLabel?'attr':'animate'](t),this.isNewLabel=!1):(n.attr('y',-9999),this.isNewLabel=!0))};t.prototype.replaceMovedLabel=function(){var e=this.label,t=this.axis,i=t.reversed;if(e&&!this.isNew){var o=t.horiz?i?t.left:t.width+t.left:e.xy.x;i=t.horiz?e.xy.y:i?t.width+t.top:t.top;e.animate({x:o,y:i,opacity:0},void 0,e.destroy);delete this.label};t.isDirty=!0;this.label=this.movedLabel;delete this.movedLabel};return t}();t.Tick=e;return t.Tick});i(e,'Core/Axis/Axis.js',[e['Core/Animation/AnimationUtilities.js'],e['Core/Color/Color.js'],e['Core/Globals.js'],e['Core/Color/Palette.js'],e['Core/Options.js'],e['Core/Axis/Tick.js'],e['Core/Utilities.js']],function(t,e,i,o,r,a,n){var k=t.animObject,y=r.defaultOptions,w=n.addEvent,v=n.arrayMax,A=n.arrayMin,x=n.clamp,c=n.correctFloat,h=n.defined,P=n.destroyObjectProperties,b=n.erase,g=n.error,m=n.extend,l=n.fireEvent,T=n.format,L=n.getMagnitude,C=n.isArray,O=n.isFunction,p=n.isNumber,M=n.isString,u=n.merge,E=n.normalizeTickInterval,d=n.objectEach,s=n.pick,f=n.relativeLength,j=n.removeEvent,D=n.splat,I=n.syncTimeout;'';var S=i.deg2rad;t=function(){function t(t,e){this.zoomEnabled=this.width=this.visible=this.userOptions=this.translationSlope=this.transB=this.transA=this.top=this.ticks=this.tickRotCorr=this.tickPositions=this.tickmarkOffset=this.tickInterval=this.tickAmount=this.side=this.series=this.right=this.positiveValuesOnly=this.pos=this.pointRangePadding=this.pointRange=this.plotLinesAndBandsGroups=this.plotLinesAndBands=this.paddedTicks=this.overlap=this.options=this.offset=this.names=this.minPixelPadding=this.minorTicks=this.minorTickInterval=this.min=this.maxLabelLength=this.max=this.len=this.left=this.labelFormatter=this.labelEdge=this.isLinked=this.height=this.hasVisibleSeries=this.hasNames=this.coll=this.closestPointRange=this.chart=this.categories=this.bottom=this.alternateBands=void 0;this.init(t,e)};t.prototype.init=function(t,e){var r=e.isX,i=this;i.chart=t;i.horiz=t.inverted&&!i.isZAxis?!r:r;i.isXAxis=r;i.coll=i.coll||(r?'xAxis':'yAxis');l(this,'init',{userOptions:e});i.opposite=s(e.opposite,i.opposite);i.side=s(e.side,i.side,i.horiz?i.opposite?0:2:i.opposite?1:3);i.setOptions(e);var o=this.options,n=o.type;i.labelFormatter=o.labels.formatter||i.defaultLabelFormatter;i.userOptions=e;i.minPixelPadding=0;i.reversed=s(o.reversed,i.reversed);i.visible=!1!==o.visible;i.zoomEnabled=!1!==o.zoomEnabled;i.hasNames='category'===n||!0===o.categories;i.categories=o.categories||i.hasNames;i.names||(i.names=[],i.names.keys={});i.plotLinesAndBandsGroups={};i.positiveValuesOnly=!!i.logarithmic;i.isLinked=h(o.linkedTo);i.ticks={};i.labelEdge=[];i.minorTicks={};i.plotLinesAndBands=[];i.alternateBands={};i.len=0;i.minRange=i.userMinRange=o.minRange||o.maxZoom;i.range=o.range;i.offset=o.offset||0;i.max=null;i.min=null;i.crosshair=s(o.crosshair,D(t.options.tooltip.crosshairs)[r?0:1],!1);e=i.options.events;-1===t.axes.indexOf(i)&&(r?t.axes.splice(t.xAxis.length,0,i):t.axes.push(i),t[i.coll].push(i));i.series=i.series||[];t.inverted&&!i.isZAxis&&r&&'undefined'===typeof i.reversed&&(i.reversed=!0);i.labelRotation=i.options.labels.rotation;d(e,function(t,e){O(t)&&w(i,e,t)});l(this,'afterInit')};t.prototype.setOptions=function(e){this.options=u(t.defaultOptions,'yAxis'===this.coll&&t.defaultYAxisOptions,[t.defaultTopAxisOptions,t.defaultRightAxisOptions,t.defaultBottomAxisOptions,t.defaultLeftAxisOptions][this.side],u(y[this.coll],e));l(this,'afterSetOptions',{userOptions:e})};t.prototype.defaultLabelFormatter=function(){var t=this.axis,e=p(this.value)?this.value:NaN,r=t.chart.time,d=t.categories,c=this.dateTimeLabelFormat,s=y.lang,n=s.numericSymbols;s=s.numericSymbolMagnitude||1E3;var o=n&&n.length,l=t.options.labels.format;t=t.logarithmic?Math.abs(e):t.tickInterval;var h=this.chart,a=h.numberFormatter;if(l)var i=T(l,this,h);else if(d)i=''+this.value;else if(c)i=r.dateFormat(c,e);else if(o&&1E3<=t)for(;o--&&'undefined'===typeof i;)r=Math.pow(s,o+1),t>=r&&0===10*e%r&&null!==n[o]&&0!==e&&(i=a(e/r,-1)+n[o]);'undefined'===typeof i&&(i=1E4<=Math.abs(e)?a(e,-1):a(e,-1,void 0,''));return i};t.prototype.getSeriesExtremes=function(){var t=this,i=t.chart,e;l(this,'getSeriesExtremes',null,function(){t.hasVisibleSeries=!1;t.dataMin=t.dataMax=t.threshold=null;t.softThreshold=!t.isXAxis;t.stacking&&t.stacking.buildStacks();t.series.forEach(function(o){if(o.visible||!i.options.chart.ignoreHiddenSeries){var r=o.options,l=r.threshold;t.hasVisibleSeries=!0;t.positiveValuesOnly&&0>=l&&(l=null);if(t.isXAxis){if(r=o.xData,r.length){r=t.logarithmic?r.filter(t.validatePositiveValue):r;e=o.getXExtremes(r);var n=e.min,a=e.max;p(n)||n instanceof Date||(r=r.filter(p),e=o.getXExtremes(r),n=e.min,a=e.max);r.length&&(t.dataMin=Math.min(s(t.dataMin,n),n),t.dataMax=Math.max(s(t.dataMax,a),a))}}
else if(o=o.applyExtremes(),p(o.dataMin)&&(n=o.dataMin,t.dataMin=Math.min(s(t.dataMin,n),n)),p(o.dataMax)&&(a=o.dataMax,t.dataMax=Math.max(s(t.dataMax,a),a)),h(l)&&(t.threshold=l),!r.softThreshold||t.positiveValuesOnly)t.softThreshold=!1}})});l(this,'afterGetSeriesExtremes')};t.prototype.translate=function(t,e,i,o,r,s){var n=this.linkedParent||this,a=1,l=0,h=o&&n.old?n.old.transA:n.transA;o=o&&n.old?n.old.min:n.min;var c=n.minPixelPadding;r=(n.isOrdinal||n.brokenAxis&&n.brokenAxis.hasBreaks||n.logarithmic&&r)&&n.lin2val;h||(h=n.transA);i&&(a*=-1,l=n.len);n.reversed&&(a*=-1,l-=a*(n.sector||n.len));e?(t=(t*a+l-c)/h+o,r&&(t=n.lin2val(t))):(r&&(t=n.val2lin(t)),t=p(o)?a*(t-o)*h+l+a*c+(p(s)?h*s:0):void 0);return t};t.prototype.toPixels=function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)};t.prototype.toValue=function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)};t.prototype.getPlotLinePath=function(t){function C(t,e,i){if('pass'!==r&&t<e||t>i)r?t=x(t,e,i):g=!0;return t};var e=this,o=e.chart,u=e.left,f=e.top,h=t.old,m=t.value,i=t.translatedValue,y=t.lineWidth,r=t.force,n,a,c,d,v=h&&o.oldChartHeight||o.chartHeight,M=h&&o.oldChartWidth||o.chartWidth,g,b=e.transB;t={value:m,lineWidth:y,old:h,force:r,acrossPanes:t.acrossPanes,translatedValue:i};l(this,'getPlotLinePath',t,function(t){i=s(i,e.translate(m,null,null,h));i=x(i,-1E5,1E5);n=c=Math.round(i+b);a=d=Math.round(v-i-b);p(i)?e.horiz?(a=f,d=v-e.bottom,n=c=C(n,u,u+e.width)):(n=u,c=M-e.right,a=d=C(a,f,f+e.height)):(g=!0,r=!1);t.path=g&&!r?null:o.renderer.crispLine([['M',n,a],['L',c,d]],y||1)});return t.path};t.prototype.getLinearTickPositions=function(t,e,i){var o=c(Math.floor(e/t)*t);i=c(Math.ceil(i/t)*t);var r=[],s;c(o+t)===o&&(s=20);if(this.single)return[e];for(e=o;e<=i;){r.push(e);e=c(e+t,s);if(e===n)break;var n=e};return r};t.prototype.getMinorTickInterval=function(){var t=this.options;return!0===t.minorTicks?s(t.minorTickInterval,'auto'):!1===t.minorTicks?null:t.minorTickInterval};t.prototype.getMinorTickPositions=function(){var e=this.options,a=this.tickPositions,o=this.minorTickInterval,t=[],i=this.pointRangePadding||0,r=this.min-i;i=this.max+i;var n=i-r;if(n&&n/o<this.len/3){var s=this.logarithmic;if(s)this.paddedTicks.forEach(function(e,i,r){i&&t.push.apply(t,s.getLogTickPositions(o,r[i-1],r[i],!0))});else if(this.dateTime&&'auto'===this.getMinorTickInterval())t=t.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(o),r,i,e.startOfWeek));else for(e=r+(a[0]-r)%o;e<=i&&e!==t[0];e+=o)t.push(e)};0!==t.length&&this.trimTicks(t);return t};t.prototype.adjustForMinRange=function(){var r=this.options,t=this.min,e=this.max,p=this.logarithmic,l=0,n,c,a,u;this.isXAxis&&'undefined'===typeof this.minRange&&!p&&(h(r.min)||h(r.max)?this.minRange=null:(this.series.forEach(function(t){a=t.xData;u=t.xIncrement?1:a.length-1;if(1<a.length)for(n=u;0<n;n--)if(c=a[n]-a[n-1],!l||c<l)l=c}),this.minRange=Math.min(5*l,this.dataMax-this.dataMin)));if(e-t<this.minRange){var d=this.dataMax-this.dataMin>=this.minRange,o=this.minRange,i=(o-e+t)/2;i=[t-i,s(r.min,t-i)];d&&(i[2]=this.logarithmic?this.logarithmic.log2lin(this.dataMin):this.dataMin);t=v(i);e=[t+o,s(r.max,t+o)];d&&(e[2]=p?p.log2lin(this.dataMax):this.dataMax);e=A(e);e-t<o&&(i[0]=e-o,i[1]=s(r.min,e-o),t=v(i))};this.min=t;this.max=e};t.prototype.getClosest=function(){var t;this.categories?t=1:this.series.forEach(function(e){var i=e.closestPointRange,o=e.visible||!e.chart.options.chart.ignoreHiddenSeries;!e.noSharedTooltip&&h(i)&&o&&(t=h(t)?Math.min(t,i):i)});return t};t.prototype.nameToX=function(t){var o=C(this.categories),r=o?this.categories:this.names,i=t.options.x;t.series.requireSorting=!1;h(i)||(i=!1===this.options.uniqueNames?t.series.autoIncrement():o?r.indexOf(t.name):s(r.keys[t.name],-1));if(-1===i){if(!o)var e=r.length}
else e=i;'undefined'!==typeof e&&(this.names[e]=t.name,this.names.keys[t.name]=e);return e};t.prototype.updateNames=function(){var e=this,t=this.names;0<t.length&&(Object.keys(t.keys).forEach(function(e){delete t.keys[e]}),t.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(function(t){t.xIncrement=null;if(!t.points||t.isDirtyData)e.max=Math.max(e.max,t.xData.length-1),t.processData(),t.generatePoints();t.data.forEach(function(i,o){if(i&&i.options&&'undefined'!==typeof i.name){var r=e.nameToX(i);'undefined'!==typeof r&&r!==i.x&&(i.x=r,t.xData[o]=r)}})}))};t.prototype.setAxisTranslation=function(){var t=this,p=t.max-t.min,a=t.axisPointRange||0,i=0,o=0,e=t.linkedParent,h=!!t.categories,c=t.transA,r=t.isXAxis;if(r||h||a){var n=t.getClosest();e?(i=e.minPointOffset,o=e.pointRangePadding):t.series.forEach(function(e){var l=h?1:r?s(e.options.pointRange,n,0):t.axisPointRange||0,p=e.options.pointPlacement;a=Math.max(a,l);if(!t.single||h)e=e.is('xrange')?!r:r,i=Math.max(i,e&&M(p)?0:l/2),o=Math.max(o,e&&'on'===p?0:l)});e=t.ordinal&&t.ordinal.slope&&n?t.ordinal.slope/n:1;t.minPointOffset=i*=e;t.pointRangePadding=o*=e;t.pointRange=Math.min(a,t.single&&h?1:p);r&&(t.closestPointRange=n)};t.translationSlope=t.transA=c=t.staticScale||t.len/(p+o||1);t.transB=t.horiz?t.left:t.bottom;t.minPixelPadding=c*i;l(this,'afterSetAxisTranslation')};t.prototype.minFromRange=function(){return this.max-this.range};t.prototype.setTickInterval=function(t){var e=this,n=e.chart,m=e.logarithmic,i=e.options,S=e.isXAxis,f=e.isLinked,y=i.maxPadding,v=i.minPadding,a=i.tickInterval,x=i.tickPixelInterval,b=e.categories,o=p(e.threshold)?e.threshold:null,C=e.softThreshold;e.dateTime||b||f||this.getTickAmount();var d=s(e.userMin,i.min),u=s(e.userMax,i.max);if(f){e.linkedParent=n[e.coll][i.linkedTo];var r=e.linkedParent.getExtremes();e.min=s(r.min,r.dataMin);e.max=s(r.max,r.dataMax);i.type!==e.linkedParent.options.type&&g(11,1,n)}
else{if(C&&h(o))if(e.dataMin>=o)r=o,v=0;else if(e.dataMax<=o){var M=o;y=0};e.min=s(d,r,e.dataMin);e.max=s(u,M,e.dataMax)};m&&(e.positiveValuesOnly&&!t&&0>=Math.min(e.min,s(e.dataMin,e.min))&&g(10,1,n),e.min=c(m.log2lin(e.min),16),e.max=c(m.log2lin(e.max),16));e.range&&h(e.max)&&(e.userMin=e.min=d=Math.max(e.dataMin,e.minFromRange()),e.userMax=u=e.max,e.range=null);l(e,'foundExtremes');e.beforePadding&&e.beforePadding();e.adjustForMinRange();!(b||e.axisPointRange||e.stacking&&e.stacking.usePercentage||f)&&h(e.min)&&h(e.max)&&(n=e.max-e.min)&&(!h(d)&&v&&(e.min-=n*v),!h(u)&&y&&(e.max+=n*y));p(e.userMin)||(p(i.softMin)&&i.softMin<e.min&&(e.min=d=i.softMin),p(i.floor)&&(e.min=Math.max(e.min,i.floor)));p(e.userMax)||(p(i.softMax)&&i.softMax>e.max&&(e.max=u=i.softMax),p(i.ceiling)&&(e.max=Math.min(e.max,i.ceiling)));C&&h(e.dataMin)&&(o=o||0,!h(d)&&e.min<o&&e.dataMin>=o?e.min=e.options.minRange?Math.min(o,e.max-e.minRange):o:!h(u)&&e.max>o&&e.dataMax<=o&&(e.max=e.options.minRange?Math.max(o,e.min+e.minRange):o));p(e.min)&&p(e.max)&&!this.chart.polar&&e.min>e.max&&(h(e.options.min)?e.max=e.min:h(e.options.max)&&(e.min=e.max));e.tickInterval=e.min===e.max||'undefined'===typeof e.min||'undefined'===typeof e.max?1:f&&!a&&x===e.linkedParent.options.tickPixelInterval?a=e.linkedParent.tickInterval:s(a,this.tickAmount?(e.max-e.min)/Math.max(this.tickAmount-1,1):void 0,b?1:(e.max-e.min)*x/Math.max(e.len,x));S&&!t&&e.series.forEach(function(t){var i,o;t.processData(e.min!==(null===(i=e.old)||void 0===i?void 0:i.min)||e.max!==(null===(o=e.old)||void 0===o?void 0:o.max))});e.setAxisTranslation();l(this,'initialAxisTranslation');e.pointRange&&!a&&(e.tickInterval=Math.max(e.pointRange,e.tickInterval));t=s(i.minTickInterval,e.dateTime&&!e.series.some(function(t){return t.noSharedTooltip})?e.closestPointRange:0);!a&&e.tickInterval<t&&(e.tickInterval=t);e.dateTime||e.logarithmic||a||(e.tickInterval=E(e.tickInterval,void 0,L(e.tickInterval),s(i.allowDecimals,.5>e.tickInterval||void 0!==this.tickAmount),!!this.tickAmount));this.tickAmount||(e.tickInterval=e.unsquish());this.setTickPositions()};t.prototype.setTickPositions=function(){var e=this.options,r=e.tickPositions,t=this.getMinorTickInterval(),i=e.tickPositioner,o=this.hasVerticalPanning(),s='colorAxis'===this.coll,n=(s||!o)&&e.startOnTick;o=(s||!o)&&e.endOnTick;this.tickmarkOffset=this.categories&&'between'===e.tickmarkPlacement&&1===this.tickInterval?.5:0;this.minorTickInterval='auto'===t&&this.tickInterval?this.tickInterval/5:t;this.single=this.min===this.max&&h(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==e.allowDecimals);this.tickPositions=t=r&&r.slice();!t&&(this.ordinal&&this.ordinal.positions||!((this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))?t=this.dateTime?this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,e.units),this.min,this.max,e.startOfWeek,this.ordinal&&this.ordinal.positions,this.closestPointRange,!0):this.logarithmic?this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max):(t=[this.min,this.max],g(19,!1,this.chart)),t.length>this.len&&(t=[t[0],t.pop()],t[0]===t[1]&&(t.length=1)),this.tickPositions=t,i&&(i=i.apply(this,[this.min,this.max])))&&(this.tickPositions=t=i);this.paddedTicks=t.slice(0);this.trimTicks(t,n,o);this.isLinked||(this.single&&2>t.length&&!this.categories&&!this.series.some(function(t){return t.is('heatmap')&&'between'===t.options.pointPlacement})&&(this.min-=.5,this.max+=.5),r||i||this.adjustTickAmount());l(this,'afterSetTickPositions')};t.prototype.trimTicks=function(t,e,i){var o=t[0],r=t[t.length-1],s=!this.isOrdinal&&this.minPointOffset||0;l(this,'trimTicks');if(!this.isLinked){if(e&&-Infinity!==o)this.min=o;else for(;this.min-s>t[0];)t.shift();if(i)this.max=r;else for(;this.max+s<t[t.length-1];)t.pop();0===t.length&&h(o)&&!this.options.tickPositions&&t.push((r+o)/2)}};t.prototype.alignToOthers=function(){var e={},i,t=this.options;!1===this.chart.options.chart.alignTicks||!1===t.alignTicks||!1===t.startOnTick||!1===t.endOnTick||this.logarithmic||this.chart[this.coll].forEach(function(t){var o=t.options;o=[t.horiz?o.left:o.top,o.width,o.height,o.pane].join();t.series.length&&(e[o]?i=!0:e[o]=1)});return i};t.prototype.getTickAmount=function(){var e=this.options,t=e.tickAmount,i=e.tickPixelInterval;!h(e.tickInterval)&&!t&&this.len<i&&!this.isRadial&&!this.logarithmic&&e.startOnTick&&e.endOnTick&&(t=2);!t&&this.alignToOthers()&&(t=Math.ceil(this.len/i)+1);4>t&&(this.finalTickAmt=t,t=5);this.tickAmount=t};t.prototype.adjustTickAmount=function(){var i=this.options,e=this.tickInterval,t=this.tickPositions,o=this.tickAmount,r=this.finalTickAmt,n=t&&t.length,a=s(this.threshold,this.softThreshold?0:null);if(this.hasData()&&p(this.min)&&p(this.max)){if(n<o){for(;t.length<o;)t.length%2||this.min===a?t.push(c(t[t.length-1]+e)):t.unshift(c(t[0]-e));this.transA*=(n-1)/(o-1);this.min=i.startOnTick?t[0]:Math.min(this.min,t[0]);this.max=i.endOnTick?t[t.length-1]:Math.max(this.max,t[t.length-1])}
else n>o&&(this.tickInterval*=2,this.setTickPositions());if(h(r)){for(e=i=t.length;e--;)(3===r&&1===e%2||2>=r&&0<e&&e<i-1)&&t.splice(e,1);this.finalTickAmt=void 0}}};t.prototype.setScale=function(){var e,i,o,r,s,a,t=!1,n=!1;this.series.forEach(function(e){var i;t=t||e.isDirtyData||e.isDirty;n=n||(null===(i=e.xAxis)||void 0===i?void 0:i.isDirty)||!1});this.setAxisSize();(a=this.len!==(null===(e=this.old)||void 0===e?void 0:e.len))||t||n||this.isLinked||this.forceRedraw||this.userMin!==(null===(i=this.old)||void 0===i?void 0:i.userMin)||this.userMax!==(null===(o=this.old)||void 0===o?void 0:o.userMax)||this.alignToOthers()?(this.stacking&&this.stacking.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.isDirty||(this.isDirty=a||this.min!==(null===(r=this.old)||void 0===r?void 0:r.min)||this.max!==(null===(s=this.old)||void 0===s?void 0:s.max))):this.stacking&&this.stacking.cleanStacks();t&&this.panningState&&(this.panningState.isDirty=!0);l(this,'afterSetScale')};t.prototype.setExtremes=function(t,e,i,o,r){var n=this,a=n.chart;i=s(i,!0);n.series.forEach(function(t){delete t.kdTree});r=m(r,{min:t,max:e});l(n,'setExtremes',r,function(){n.userMin=t;n.userMax=e;n.eventArgs=r;i&&a.redraw(o)})};t.prototype.zoom=function(t,e){var i=this,n=this.dataMin,a=this.dataMax,p=this.options,o=Math.min(n,s(p.min,n)),r=Math.max(a,s(p.max,a));t={newMin:t,newMax:e};l(this,'zoom',t,function(t){var e=t.newMin,s=t.newMax;if(e!==i.min||s!==i.max)i.allowZoomOutside||(h(n)&&(e<o&&(e=o),e>r&&(e=r)),h(a)&&(s<o&&(s=o),s>r&&(s=r))),i.displayBtn='undefined'!==typeof e||'undefined'!==typeof s,i.setExtremes(e,s,!1,void 0,{trigger:'zoom'});t.zoomed=!0});return t.zoomed};t.prototype.setAxisSize=function(){var t=this.chart,e=this.options,i=e.offsets||[0,0,0,0],o=this.horiz,r=this.width=Math.round(f(s(e.width,t.plotWidth-i[3]+i[1]),t.plotWidth)),n=this.height=Math.round(f(s(e.height,t.plotHeight-i[0]+i[2]),t.plotHeight)),a=this.top=Math.round(f(s(e.top,t.plotTop+i[0]),t.plotHeight,t.plotTop));e=this.left=Math.round(f(s(e.left,t.plotLeft+i[3]),t.plotWidth,t.plotLeft));this.bottom=t.chartHeight-n-a;this.right=t.chartWidth-r-e;this.len=Math.max(o?r:n,0);this.pos=o?e:a};t.prototype.getExtremes=function(){var t=this.logarithmic;return{min:t?c(t.lin2log(this.min)):this.min,max:t?c(t.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}};t.prototype.getThreshold=function(t){var e=this.logarithmic,i=e?e.lin2log(this.min):this.min;e=e?e.lin2log(this.max):this.max;null===t||-Infinity===t?t=i:Infinity===t?t=e:i>t?t=i:e<t&&(t=e);return this.translate(t,0,1,0,1)};t.prototype.autoLabelAlign=function(t){var e=(s(t,0)-90*this.side+720)%360;t={align:'center'};l(this,'autoLabelAlign',t,function(t){15<e&&165>e?t.align='right':195<e&&345>e&&(t.align='left')});return t.align};t.prototype.tickSize=function(t){var i=this.options,e=i['tick'===t?'tickLength':'minorTickLength'],o=s(i['tick'===t?'tickWidth':'minorTickWidth'],'tick'===t&&this.isXAxis&&!this.categories?1:0);if(o&&e){'inside'===i[t+'Position']&&(e=-e);var r=[e,o]};t={tickSize:r};l(this,'afterTickSize',t);return t.tickSize};t.prototype.labelMetrics=function(){var t=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style&&this.options.labels.style.fontSize,this.ticks[t]&&this.ticks[t].label)};t.prototype.unsquish=function(){var t=this.options.labels,g=this.horiz,e=this.tickInterval,o=e,r=this.len/(((this.categories?1:0)+this.max-this.min)/e),p,i=t.rotation,d=this.labelMetrics(),n,u=Number.MAX_VALUE,a,l=Math.max(this.max-this.min,0),f=function(t){var i=t/(r||1);i=1<i?Math.ceil(i):1;i*e>l&&Infinity!==t&&Infinity!==r&&l&&(i=Math.ceil(l/e));return c(i*e)};g?(a=!t.staggerLines&&!t.step&&(h(i)?[i]:r<s(t.autoRotationLimit,80)&&t.autoRotation))&&a.forEach(function(t){if(t===i||t&&-90<=t&&90>=t){n=f(Math.abs(d.h/Math.sin(S*t)));var e=n+Math.abs(t/360);e<u&&(u=e,p=t,o=n)}}):t.step||(o=f(d.h));this.autoRotation=a;this.labelRotation=s(p,i);return o};t.prototype.getSlotWidth=function(t){var i,o=this.chart,r=this.horiz,e=this.options.labels,n=Math.max(this.tickPositions.length-(this.categories?0:1),1),s=o.margin[3];if(t&&p(t.slotWidth))return t.slotWidth;if(r&&e&&2>(e.step||0))return e.rotation?0:(this.staggerLines||1)*this.len/n;if(!r){t=null===(i=null===e||void 0===e?void 0:e.style)||void 0===i?void 0:i.width;if(void 0!==t)return parseInt(t,10);if(s)return s-o.spacing[3]};return.33*o.chartWidth};t.prototype.renderUnsquish=function(){var l=this.chart,f=l.renderer,r=this.tickPositions,p=this.ticks,e=this.options.labels,u=e&&e.style||{},g=this.horiz,a=this.getSlotWidth(),s=Math.max(1,Math.round(a-2*(e.padding||5))),o={},h=this.labelMetrics(),c=e.style&&e.style.textOverflow,i=0;M(e.rotation)||(o.rotation=e.rotation||0);r.forEach(function(t){t=p[t];t.movedLabel&&t.replaceMovedLabel();t&&t.label&&t.label.textPxLength>i&&(i=t.label.textPxLength)});this.maxLabelLength=i;if(this.autoRotation)i>s&&i>h.h?o.rotation=this.labelRotation:this.labelRotation=0;else if(a){var n=s;if(!c){var d='clip';for(s=r.length;!g&&s--;){var t=r[s];if(t=p[t].label)t.styles&&'ellipsis'===t.styles.textOverflow?t.css({textOverflow:'clip'}):t.textPxLength>a&&t.css({width:a+'px'}),t.getBBox().height>this.len/r.length-(h.h-h.f)&&(t.specificTextOverflow='ellipsis')}}};o.rotation&&(n=i>.5*l.chartHeight?.33*l.chartHeight:i,c||(d='ellipsis'));if(this.labelAlign=e.align||this.autoLabelAlign(this.labelRotation))o.align=this.labelAlign;r.forEach(function(t){var e=(t=p[t])&&t.label,r=u.width,i={};e&&(e.attr(o),t.shortenLabel?t.shortenLabel():n&&!r&&'nowrap'!==u.whiteSpace&&(n<e.textPxLength||'SPAN'===e.element.tagName)?(i.width=n+'px',c||(i.textOverflow=e.specificTextOverflow||d),e.css(i)):e.styles&&e.styles.width&&!i.width&&!r&&e.css({width:null}),delete e.specificTextOverflow,t.rotation=o.rotation)},this);this.tickRotCorr=f.rotCorr(h.b,this.labelRotation||0,0!==this.side)};t.prototype.hasData=function(){return this.series.some(function(t){return t.hasData()})||this.options.showEmpty&&h(this.min)&&h(this.max)};t.prototype.addTitle=function(t){var s=this.chart.renderer,n=this.horiz,o=this.opposite,e=this.options.title,i,r=this.chart.styledMode;this.axisTitle||((i=e.textAlign)||(i=(n?{low:'left',middle:'center',high:'right'}:{low:o?'right':'left',middle:'center',high:o?'left':'right'})[e.align]),this.axisTitle=s.text(e.text,0,0,e.useHTML).attr({zIndex:7,rotation:e.rotation||0,align:i}).addClass('highcharts-axis-title'),r||this.axisTitle.css(u(e.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0);r||e.style.width||this.isRadial||this.axisTitle.css({width:this.len+'px'});this.axisTitle[t?'show':'hide'](t)};t.prototype.generateTick=function(t){var e=this.ticks;e[t]?e[t].addLabel():e[t]=new a(this,t)};t.prototype.getOffset=function(){var C=this,t=this,r=t.chart,A=r.renderer,i=t.options,u=t.tickPositions,g=t.ticks,a=t.horiz,e=t.side,M=r.inverted&&!t.isZAxis?[1,0,3,2][e]:e,v,S=0,n=0,o=i.title,f=i.labels,p=0,m=r.axisOffset;r=r.clipOffset;var c=[-1,1,1,-1][e],k=i.className,w=t.axisParent,b=t.hasData();t.showAxis=v=b||s(i.showEmpty,!0);t.staggerLines=t.horiz&&f.staggerLines;if(!t.axisGroup){var y=function(t,e,i){return A.g(t).attr({zIndex:i}).addClass('highcharts-'+C.coll.toLowerCase()+e+' '+(C.isRadial?'highcharts-radial-axis'+e+' ':'')+(k||'')).add(w)};t.gridGroup=y('grid','-grid',i.gridZIndex||1);t.axisGroup=y('axis','',i.zIndex||2);t.labelGroup=y('axis-labels','-labels',f.zIndex||7)};b||t.isLinked?(u.forEach(function(e,i){t.generateTick(e,i)}),t.renderUnsquish(),t.reserveSpaceDefault=0===e||2===e||{1:'left',3:'right'}[e]===t.labelAlign,s(f.reserveSpace,'center'===t.labelAlign?!0:null,t.reserveSpaceDefault)&&u.forEach(function(t){p=Math.max(g[t].getLabelSize(),p)}),t.staggerLines&&(p*=t.staggerLines),t.labelOffset=p*(t.opposite?-1:1)):d(g,function(t,e){t.destroy();delete g[e]});if(o&&o.text&&!1!==o.enabled&&(t.addTitle(v),v&&!1!==o.reserveSpace)){t.titleOffset=S=t.axisTitle.getBBox()[a?'height':'width'];var x=o.offset;n=h(x)?0:s(o.margin,a?5:10)};t.renderLine();t.offset=c*s(i.offset,m[e]?m[e]+(i.margin||0):0);t.tickRotCorr=t.tickRotCorr||{x:0,y:0};o=0===e?-t.labelMetrics().h:2===e?t.tickRotCorr.y:0;n=Math.abs(p)+n;p&&(n=n-o+c*(a?s(f.y,t.tickRotCorr.y+8*c):f.x));t.axisTitleMargin=s(x,n);t.getMaxLabelDimensions&&(t.maxLabelDimensions=t.getMaxLabelDimensions(g,u));a=this.tickSize('tick');m[e]=Math.max(m[e],t.axisTitleMargin+S+c*t.offset,n,u&&u.length&&a?a[0]+c*t.offset:0);i=i.offset?0:2*Math.floor(t.axisLine.strokeWidth()/2);r[M]=Math.max(r[M],i);l(this,'afterGetOffset')};t.prototype.getLinePath=function(t){var i=this.chart,r=this.opposite,e=this.offset,o=this.horiz,s=this.left+(r?this.width:0)+e;e=i.chartHeight-this.bottom-(r?this.height:0)+e;r&&(t*=-1);return i.renderer.crispLine([['M',o?this.left:s,o?e:this.top],['L',o?i.chartWidth-this.right:s,o?e:i.chartHeight-this.bottom]],t)};t.prototype.renderLine=function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass('highcharts-axis-line').add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,'stroke-width':this.options.lineWidth,zIndex:7}))};t.prototype.getTitlePosition=function(){var t=this.horiz,o=this.left,a=this.top,e=this.len,r=this.options.title,s=t?o:a,n=this.opposite,h=this.offset,p=r.x||0,c=r.y||0,i=this.axisTitle,d=this.chart.renderer.fontMetrics(r.style&&r.style.fontSize,i);i=Math.max(i.getBBox(null,0).height-d.h-1,0);e={low:s+(t?0:e),middle:s+e/2,high:s+(t?e:0)}[r.align];o=(t?a+this.height:o)+(t?1:-1)*(n?-1:1)*this.axisTitleMargin+[-i,i,d.f,-i][this.side];t={x:t?e+p:o+(n?this.width:0)+h+p,y:t?o+c-(n?this.height:0)+h:e+c};l(this,'afterGetTitlePosition',{titlePosition:t});return t};t.prototype.renderMinorTick=function(t){var i=this.chart.hasRendered&&this.old,e=this.minorTicks;e[t]||(e[t]=new a(this,t,'minor'));i&&e[t].isNew&&e[t].render(null,!0);e[t].render(null,!1,1)};t.prototype.renderTick=function(t,e){var o,i=this.ticks,r=this.chart.hasRendered&&this.old;if(!this.isLinked||t>=this.min&&t<=this.max||(null===(o=this.grid)||void 0===o?0:o.isColumn))i[t]||(i[t]=new a(this,t)),r&&i[t].isNew&&i[t].render(e,!0,-1),i[t].render(e)};t.prototype.render=function(){var t=this,g=t.chart,u=t.logarithmic,o=t.options,C=t.isLinked,h=t.tickPositions,r=t.axisTitle,c=t.ticks,v=t.minorTicks,e=t.alternateBands,x=o.stackLabels,b=o.alternateGridColor,s=t.tickmarkOffset,n=t.axisLine,m=t.showAxis,M=k(g.renderer.globalAnimation),y,f;t.labelEdge.length=0;t.overlap=!1;[c,v,e].forEach(function(t){d(t,function(t){t.isActive=!1})});if(t.hasData()||C)t.minorTickInterval&&!t.categories&&t.getMinorTickPositions().forEach(function(e){t.renderMinorTick(e)}),h.length&&(h.forEach(function(e,i){t.renderTick(e,i)}),s&&(0===t.min||t.single)&&(c[-1]||(c[-1]=new a(t,-1,null,!0)),c[-1].render(-1))),b&&h.forEach(function(o,r){f='undefined'!==typeof h[r+1]?h[r+1]+s:t.max-s;0===r%2&&o<t.max&&f<=t.max+(g.polar?-s:s)&&(e[o]||(e[o]=new i.PlotLineOrBand(t)),y=o+s,e[o].options={from:u?u.lin2log(y):y,to:u?u.lin2log(f):f,color:b,className:'highcharts-alternate-grid'},e[o].render(),e[o].isActive=!0)}),t._addedPlotLB||(t._addedPlotLB=!0,(o.plotLines||[]).concat(o.plotBands||[]).forEach(function(e){t.addPlotBandOrLine(e)}));[c,v,e].forEach(function(t){var i,o=[],r=M.duration;d(t,function(t,e){t.isActive||(t.render(e,!1,0),t.isActive=!1,o.push(e))});I(function(){for(i=o.length;i--;)t[o[i]]&&!t[o[i]].isActive&&(t[o[i]].destroy(),delete t[o[i]])},t!==e&&g.hasRendered&&r?r:0)});n&&(n[n.isPlaced?'animate':'attr']({d:this.getLinePath(n.strokeWidth())}),n.isPlaced=!0,n[m?'show':'hide'](m));r&&m&&(o=t.getTitlePosition(),p(o.y)?(r[r.isNew?'attr':'animate'](o),r.isNew=!1):(r.attr('y',-9999),r.isNew=!0));x&&x.enabled&&t.stacking&&t.stacking.renderStackTotals();t.old={len:t.len,max:t.max,min:t.min,transA:t.transA,userMax:t.userMax,userMin:t.userMin};t.isDirty=!1;l(this,'afterRender')};t.prototype.redraw=function(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(t){t.render()}));this.series.forEach(function(t){t.isDirty=!0})};t.prototype.getKeepProps=function(){return this.keepProps||t.keepProps};t.prototype.destroy=function(t){var e=this,i=e.plotLinesAndBands,o;l(this,'destroy',{keepEvents:t});t||j(e);[e.ticks,e.minorTicks,e.alternateBands].forEach(function(t){P(t)});if(i)for(t=i.length;t--;)i[t].destroy();'axisLine axisTitle axisGroup gridGroup labelGroup cross scrollbar'.split(' ').forEach(function(t){e[t]&&(e[t]=e[t].destroy())});for(o in e.plotLinesAndBandsGroups)e.plotLinesAndBandsGroups[o]=e.plotLinesAndBandsGroups[o].destroy();d(e,function(t,i){-1===e.getKeepProps().indexOf(i)&&delete e[i]})};t.prototype.drawCrosshair=function(t,i){var r=this.crosshair,n=s(r.snap,!0),c,a=this.cross,d=this.chart;l(this,'drawCrosshair',{e:t,point:i});t||(t=this.cross&&this.cross.e);if(this.crosshair&&!1!==(h(i)||!n)){n?h(i)&&(c=s('colorAxis'!==this.coll?i.crosshairPos:null,this.isXAxis?i.plotX:this.len-i.plotY)):c=t&&(this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos);if(h(c)){var p={value:i&&(this.isXAxis?i.x:s(i.stackY,i.y)),translatedValue:c};d.polar&&m(p,{isCrosshair:!0,chartX:t&&t.chartX,chartY:t&&t.chartY,point:i});p=this.getPlotLinePath(p)||null};if(!h(p)){this.hideCrosshair();return};n=this.categories&&!this.isRadial;a||(this.cross=a=d.renderer.path().addClass('highcharts-crosshair highcharts-crosshair-'+(n?'category ':'thin ')+r.className).attr({zIndex:s(r.zIndex,2)}).add(),d.styledMode||(a.attr({stroke:r.color||(n?e.parse(o.highlightColor20).setOpacity(.25).get():o.neutralColor20),'stroke-width':s(r.width,1)}).css({'pointer-events':'none'}),r.dashStyle&&a.attr({dashstyle:r.dashStyle})));a.show().attr({d:p});n&&!r.width&&a.attr({'stroke-width':this.transA});this.cross.e=t}
else this.hideCrosshair();l(this,'afterDrawCrosshair',{e:t,point:i})};t.prototype.hideCrosshair=function(){this.cross&&this.cross.hide();l(this,'afterHideCrosshair')};t.prototype.hasVerticalPanning=function(){var t,e=null===(t=this.chart.options.chart)||void 0===t?void 0:t.panning;return!!(e&&e.enabled&&/y/.test(e.type))};t.prototype.validatePositiveValue=function(t){return p(t)&&0<t};t.prototype.update=function(t,e){var i=this.chart,o=t&&t.events||{};t=u(this.userOptions,t);i.options[this.coll].indexOf&&(i.options[this.coll][i.options[this.coll].indexOf(this.userOptions)]=t);d(i.options[this.coll].events,function(t,e){'undefined'===typeof o[e]&&(o[e]=void 0)});this.destroy(!0);this.init(i,m(t,{events:o}));i.isDirtyBox=!0;s(e,!0)&&i.redraw()};t.prototype.remove=function(t){for(var e=this.chart,i=this.coll,o=this.series,r=o.length;r--;)o[r]&&o[r].remove(!1);b(e.axes,this);b(e[i],this);C(e.options[i])?e.options[i].splice(this.options.index,1):delete e.options[i];e[i].forEach(function(t,e){t.options.index=t.userOptions.index=e});this.destroy();e.isDirtyBox=!0;s(t,!0)&&e.redraw()};t.prototype.setTitle=function(t,e){this.update({title:t},e)};t.prototype.setCategories=function(t,e){this.update({categories:t},e)};t.defaultOptions={dateTimeLabelFormats:{millisecond:{main:'%H:%M:%S.%L',range:!1},second:{main:'%H:%M:%S',range:!1},minute:{main:'%H:%M',range:!1},hour:{main:'%H:%M',range:!1},day:{main:'%e. %b'},week:{main:'%e. %b'},month:{main:'%b \'%y'},year:{main:'%Y'}},endOnTick:!1,labels:{enabled:!0,indentation:10,x:0,style:{color:o.neutralColor60,cursor:'default',fontSize:'11px'}},maxPadding:.01,minorTickLength:2,minorTickPosition:'outside',minPadding:.01,showEmpty:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:'between',tickPosition:'outside',title:{align:'middle',style:{color:o.neutralColor60}},type:'linear',minorGridLineColor:o.neutralColor5,minorGridLineWidth:1,minorTickColor:o.neutralColor40,lineColor:o.highlightColor20,lineWidth:1,gridLineColor:o.neutralColor10,tickColor:o.highlightColor20};t.defaultYAxisOptions={endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},startOnTick:!0,title:{rotation:270,text:'Values'},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:'justify',formatter:function(){var t=this.axis.chart.numberFormatter;return t(this.total,-1)},style:{color:o.neutralColor100,fontSize:'11px',fontWeight:'bold',textOutline:'1px contrast'}},gridLineWidth:1,lineWidth:0};t.defaultLeftAxisOptions={labels:{x:-15},title:{rotation:270}};t.defaultRightAxisOptions={labels:{x:15},title:{rotation:90}};t.defaultBottomAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}};t.defaultTopAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}};t.keepProps='extKey hcEvents names series userMax userMin'.split(' ');return t}();i.Axis=t;return i.Axis});i(e,'Core/Axis/DateTimeAxis.js',[e['Core/Axis/Axis.js'],e['Core/Utilities.js']],function(t,e){var r=e.addEvent,s=e.getMagnitude,n=e.normalizeTickInterval,i=e.timeUnits,o=function(){function t(t){this.axis=t};t.prototype.normalizeTimeTickInterval=function(t,e){var a=e||[['millisecond',[1,2,5,10,20,25,50,100,200,500]],['second',[1,2,5,10,15,30]],['minute',[1,2,5,10,15,30]],['hour',[1,2,3,4,6,8,12]],['day',[1,2]],['week',[1,2]],['month',[1,2,3,4,6]],['year',null]];e=a[a.length-1];var o=i[e[0]],h=e[1],r;for(r=0;r<a.length&&!(e=a[r],o=i[e[0]],h=e[1],a[r+1]&&t<=(o*h[h.length-1]+i[a[r+1][0]])/2);r++);o===i.year&&t<5*o&&(h=[1,2,5]);t=n(t/o,h,'year'===e[0]?Math.max(s(t/o),1):1);return{unitRange:o,count:t,unitName:e[0]}};return t}();e=function(){function t(){};t.compose=function(t){t.keepProps.push('dateTime');t.prototype.getTimeTicks=function(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)};r(t,'init',function(t){'datetime'!==t.userOptions.type?this.dateTime=void 0:this.dateTime||(this.dateTime=new o(this))})};t.AdditionsClass=o;return t}();e.compose(t);return e});i(e,'Core/Axis/LogarithmicAxis.js',[e['Core/Axis/Axis.js'],e['Core/Utilities.js']],function(t,e){var i=e.addEvent,o=e.getMagnitude,r=e.normalizeTickInterval,s=e.pick,n=function(){function t(t){this.axis=t};t.prototype.getLogTickPositions=function(t,e,i,n){var a=this.axis,l=a.len,h=a.options,d=[];n||(this.minorAutoInterval=void 0);if(.5<=t)t=Math.round(t),d=a.getLinearTickPositions(t,e,i);else if(.08<=t){h=Math.floor(e);var c,u;for(l=.3<t?[1,2,4]:.15<t?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];h<i+1&&!u;h++){var g=l.length;for(c=0;c<g&&!u;c++){var f=this.log2lin(this.lin2log(h)*l[c]);f>e&&(!n||p<=i)&&'undefined'!==typeof p&&d.push(p);p>i&&(u=!0);var p=f}}}
else e=this.lin2log(e),i=this.lin2log(i),t=n?a.getMinorTickInterval():h.tickInterval,t=s('auto'===t?null:t,this.minorAutoInterval,h.tickPixelInterval/(n?5:1)*(i-e)/((n?l/a.tickPositions.length:l)||1)),t=r(t,void 0,o(t)),d=a.getLinearTickPositions(t,e,i).map(this.log2lin),n||(this.minorAutoInterval=t/5);n||(a.tickInterval=t);return d};t.prototype.lin2log=function(t){return Math.pow(10,t)};t.prototype.log2lin=function(t){return Math.log(t)/Math.LN10};return t}();e=function(){function t(){};t.compose=function(t){t.keepProps.push('logarithmic');i(t,'init',function(t){var e=this.logarithmic;'logarithmic'!==t.userOptions.type?this.logarithmic=void 0:e||(this.logarithmic=new n(this))});i(t,'afterInit',function(){var t=this.logarithmic;t&&(this.lin2val=function(e){return t.lin2log(e)},this.val2lin=function(e){return t.log2lin(e)})})};return t}();e.compose(t);return e});i(e,'Core/Axis/PlotLineOrBand.js',[e['Core/Axis/Axis.js'],e['Core/Globals.js'],e['Core/Color/Palette.js'],e['Core/Utilities.js']],function(t,e,i,o){var s=o.arrayMax,n=o.arrayMin,r=o.defined,l=o.destroyObjectProperties,a=o.erase,p=o.extend,c=o.fireEvent,d=o.merge,u=o.objectEach,h=o.pick;o=function(){function t(t,e){this.axis=t;e&&(this.options=e,this.id=e.id)};t.prototype.render=function(){c(this,'render');var n=this,a=n.axis,f=a.horiz,l=a.logarithmic,e=n.options,p=e.label,g=n.label,y=e.to,v=e.from,x=e.value,o=r(v)&&r(y),k=r(x),s=n.svgElem,w=!s,t=[],A=e.color,b=h(e.zIndex,0),C=e.events;t={'class':'highcharts-plot-'+(o?'band ':'line ')+(e.className||'')};var M={},S=a.chart.renderer,m=o?'bands':'lines';l&&(v=l.log2lin(v),y=l.log2lin(y),x=l.log2lin(x));a.chart.styledMode||(k?(t.stroke=A||i.neutralColor40,t['stroke-width']=h(e.width,1),e.dashStyle&&(t.dashstyle=e.dashStyle)):o&&(t.fill=A||i.highlightColor10,e.borderWidth&&(t.stroke=e.borderColor,t['stroke-width']=e.borderWidth)));M.zIndex=b;m+='-'+b;(l=a.plotLinesAndBandsGroups[m])||(a.plotLinesAndBandsGroups[m]=l=S.g('plot-'+m).attr(M).add());w&&(n.svgElem=s=S.path().attr(t).add(l));if(k)t=a.getPlotLinePath({value:x,lineWidth:s.strokeWidth(),acrossPanes:e.acrossPanes});else if(o)t=a.getPlotBandPath(v,y,e);else return;!n.eventsAdded&&C&&(u(C,function(t,e){s.on(e,function(t){C[e].apply(n,[t])})}),n.eventsAdded=!0);(w||!s.d)&&t&&t.length?s.attr({d:t}):s&&(t?(s.show(!0),s.animate({d:t})):s.d&&(s.hide(),g&&(n.label=g=g.destroy())));p&&(r(p.text)||r(p.formatter))&&t&&t.length&&0<a.width&&0<a.height&&!t.isFlat?(p=d({align:f&&o&&'center',x:f?!o&&4:10,verticalAlign:!f&&o&&'middle',y:f?o?16:10:o?6:-4,rotation:f&&!o&&90},p),this.renderLabel(p,t,o,b)):g&&g.hide();return n};t.prototype.renderLabel=function(t,e,i,o){var r=this.label,a=this.axis.chart.renderer;r||(r={align:t.textAlign||t.align,rotation:t.rotation,'class':'highcharts-plot-'+(i?'band':'line')+'-label '+(t.className||'')},r.zIndex=o,o=this.getLabelText(t),this.label=r=a.text(o,0,0,t.useHTML).attr(r).add(),this.axis.chart.styledMode||r.css(t.style));a=e.xBounds||[e[0][1],e[1][1],i?e[2][1]:e[0][1]];e=e.yBounds||[e[0][2],e[1][2],i?e[2][2]:e[0][2]];i=n(a);o=n(e);r.align(t,!1,{x:i,y:o,width:s(a)-i,height:s(e)-o});r.show(!0)};t.prototype.getLabelText=function(t){return r(t.formatter)?t.formatter.call(this):t.text};t.prototype.destroy=function(){a(this.axis.plotLinesAndBands,this);delete this.axis;l(this)};return t}();p(t.prototype,{getPlotBandPath:function(t,e,i){void 0===i&&(i=this.options);var a=this.getPlotLinePath({value:e,force:!0,acrossPanes:i.acrossPanes});i=this.getPlotLinePath({value:t,force:!0,acrossPanes:i.acrossPanes});var h=[],l=this.horiz,s=1;t=t<this.min&&e<this.min||t>this.max&&e>this.max;if(i&&a){if(t){var p=i.toString()===a.toString();s=0};for(t=0;t<i.length;t+=2){e=i[t];var n=i[t+1],o=a[t],r=a[t+1];'M'!==e[0]&&'L'!==e[0]||'M'!==n[0]&&'L'!==n[0]||'M'!==o[0]&&'L'!==o[0]||'M'!==r[0]&&'L'!==r[0]||(l&&o[1]===e[1]?(o[1]+=s,r[1]+=s):l||o[2]!==e[2]||(o[2]+=s,r[2]+=s),h.push(['M',e[1],e[2]],['L',n[1],n[2]],['L',r[1],r[2]],['L',o[1],o[2]],['Z']));h.isFlat=p}};return h},addPlotBand:function(t){return this.addPlotBandOrLine(t,'plotBands')},addPlotLine:function(t){return this.addPlotBandOrLine(t,'plotLines')},addPlotBandOrLine:function(t,i){var n=this,o=new e.PlotLineOrBand(this,t),r=this.userOptions;this.visible&&(o=o.render());if(o){this._addedPlotLB||(this._addedPlotLB=!0,(r.plotLines||[]).concat(r.plotBands||[]).forEach(function(t){n.addPlotBandOrLine(t)}));if(i){var s=r[i]||[];s.push(t);r[i]=s};this.plotLinesAndBands.push(o)};return o},removePlotBandOrLine:function(t){for(var i=this.plotLinesAndBands,o=this.options,r=this.userOptions,e=i.length;e--;)i[e].id===t&&i[e].destroy();[o.plotLines||[],r.plotLines||[],o.plotBands||[],r.plotBands||[]].forEach(function(i){for(e=i.length;e--;)(i[e]||{}).id===t&&a(i,i[e])})},removePlotBand:function(t){this.removePlotBandOrLine(t)},removePlotLine:function(t){this.removePlotBandOrLine(t)}});e.PlotLineOrBand=o;return e.PlotLineOrBand});i(e,'Core/Tooltip.js',[e['Core/Globals.js'],e['Core/Color/Palette.js'],e['Core/Utilities.js']],function(t,e,i){var r=t.doc,s=i.clamp,h=i.css,u=i.defined,f=i.discardElement,l=i.extend,p=i.fireEvent,g=i.format,m=i.isNumber,y=i.isString,c=i.merge,o=i.pick,n=i.splat,v=i.syncTimeout,a=i.timeUnits;'';var d=function(){function d(t,e){this.container=void 0;this.crosshairs=[];this.distance=0;this.isHidden=!0;this.isSticky=!1;this.now={};this.options={};this.outside=!1;this.chart=t;this.init(t,e)};d.prototype.applyFilter=function(){var t=this.chart;t.renderer.definition({tagName:'filter',attributes:{id:'drop-shadow-'+t.index,opacity:.5},children:[{tagName:'feGaussianBlur',attributes:{'in':'SourceAlpha',stdDeviation:1}},{tagName:'feOffset',attributes:{dx:1,dy:1}},{tagName:'feComponentTransfer',children:[{tagName:'feFuncA',attributes:{type:'linear',slope:.3}}]},{tagName:'feMerge',children:[{tagName:'feMergeNode'},{tagName:'feMergeNode',attributes:{'in':'SourceGraphic'}}]}]});t.renderer.definition({tagName:'style',textContent:'.highcharts-tooltip-'+t.index+'{filter:url(#drop-shadow-'+t.index+')}'})};d.prototype.bodyFormatter=function(t){return t.map(function(t){var e=t.series.tooltipOptions;return(e[(t.point.formatPrefix||'point')+'Formatter']||t.point.tooltipFormatter).call(t.point,e[(t.point.formatPrefix||'point')+'Format']||'')})};d.prototype.cleanSplit=function(t){this.chart.series.forEach(function(e){var i=e&&e.tt;i&&(!i.isActive||t?e.tt=i.destroy():i.isActive=!1)})};d.prototype.defaultFormatter=function(t){var i=this.points||n(this),e=[t.tooltipFooterHeaderFormatter(i[0])];e=e.concat(t.bodyFormatter(i));e.push(t.tooltipFooterHeaderFormatter(i[0],!0));return e};d.prototype.destroy=function(){this.label&&(this.label=this.label.destroy());this.split&&this.tt&&(this.cleanSplit(this.chart,!0),this.tt=this.tt.destroy());this.renderer&&(this.renderer=this.renderer.destroy(),f(this.container));i.clearTimeout(this.hideTimer);i.clearTimeout(this.tooltipTimeout)};d.prototype.getAnchor=function(t,e){var i=this.chart,o=i.pointer,l=i.inverted,p=i.plotTop,c=i.plotLeft,r=0,s=0,a,h;t=n(t);this.followPointer&&e?('undefined'===typeof e.chartX&&(e=o.normalize(e)),o=[e.chartX-c,e.chartY-p]):t[0].tooltipPos?o=t[0].tooltipPos:(t.forEach(function(t){a=t.series.yAxis;h=t.series.xAxis;r+=t.plotX||0;s+=t.plotLow?(t.plotLow+(t.plotHigh||0))/2:t.plotY||0;h&&a&&(l?(r+=p+i.plotHeight-h.len-h.pos,s+=c+i.plotWidth-a.len-a.pos):(r+=h.pos-c,s+=a.pos-p))}),r/=t.length,s/=t.length,o=[l?i.plotWidth-s:r,l?i.plotHeight-r:s],this.shared&&1<t.length&&e&&(l?o[0]=e.chartX-c:o[1]=e.chartY-p));return o.map(Math.round)};d.prototype.getDateFormat=function(t,e,i,o){var s=this.chart.time,h=s.dateFormat('%m-%d %H:%M:%S.%L',e),n={millisecond:15,second:12,minute:9,hour:6,day:3},l='millisecond';for(r in a){if(t===a.week&&+s.dateFormat('%w',e)===i&&'00:00:00.000'===h.substr(6)){var r='week';break};if(a[r]>t){r=l;break};if(n[r]&&h.substr(n[r])!=='01-01 00:00:00.000'.substr(n[r]))break;'week'!==r&&(l=r)};if(r)var p=s.resolveDTLFormat(o[r]).main;return p};d.prototype.getLabel=function(){var s,l,p,i=this,a=this.chart.renderer,c=this.chart.styledMode,e=this.options,d='tooltip'+(u(e.className)?' '+e.className:''),f=(null===(s=e.style)||void 0===s?void 0:s.pointerEvents)||(!this.followPointer&&e.stickOnContact?'auto':'none'),o;s=function(){i.inContact=!0};var y=function(){var t=i.chart.hoverSeries;i.inContact=!1;if(t&&t.onMouseOut)t.onMouseOut()};if(!this.label){if(this.outside){var n=null===(l=this.chart.options.chart)||void 0===l?void 0:l.style;this.container=o=t.doc.createElement('div');o.className='highcharts-tooltip-container';h(o,{position:'absolute',top:'1px',pointerEvents:f,zIndex:Math.max((null===(p=this.options.style)||void 0===p?void 0:p.zIndex)||0,((null===n||void 0===n?void 0:n.zIndex)||0)+3)});t.doc.body.appendChild(o);this.renderer=a=new t.Renderer(o,0,0,n,void 0,void 0,a.styledMode)};this.split?this.label=a.g(d):(this.label=a.label('',0,0,e.shape||'callout',null,null,e.useHTML,null,d).attr({padding:e.padding,r:e.borderRadius}),c||this.label.attr({fill:e.backgroundColor,'stroke-width':e.borderWidth}).css(e.style).css({pointerEvents:f}).shadow(e.shadow));c&&(this.applyFilter(),this.label.addClass('highcharts-tooltip-'+this.chart.index));if(i.outside&&!i.split){var r=this.label,g=r.xSetter,m=r.ySetter;r.xSetter=function(t){g.call(r,i.distance);o.style.left=t+'px'};r.ySetter=function(t){m.call(r,i.distance);o.style.top=t+'px'}};this.label.on('mouseenter',s).on('mouseleave',y).attr({zIndex:8}).add()};return this.label};d.prototype.getPosition=function(t,e,i){var s=this.chart,n=this.distance,a={},l=s.inverted&&i.h||0,c,p=this.outside,m=p?r.documentElement.clientWidth-2*n:s.chartWidth,y=p?Math.max(r.body.scrollHeight,r.documentElement.scrollHeight,r.body.offsetHeight,r.documentElement.offsetHeight,r.documentElement.clientHeight):s.chartHeight,h=s.pointer.getChartPosition(),v=function(o){var r='x'===o;return[o,r?m:y,r?t:e].concat(p?[r?t*h.scaleX:e*h.scaleY,r?h.left-n+(i.plotX+s.plotLeft)*h.scaleX:h.top-n+(i.plotY+s.plotTop)*h.scaleY,0,r?m:y]:[r?t:e,r?i.plotX+s.plotLeft:i.plotY+s.plotTop,r?s.plotLeft:s.plotTop,r?s.plotLeft+s.plotWidth:s.plotTop+s.plotHeight])},d=v('y'),u=v('x'),x=!this.followPointer&&o(i.ttBelow,!s.inverted===!!i.negative),b=function(t,e,i,o,r,s,c){var u=p?'y'===t?n*h.scaleY:n*h.scaleX:n,f=(i-o)/2,g=o<r-n,m=r+n+o<e,d=r-u-i+f;r=r+u-f;if(x&&m)a[t]=r;else if(!x&&g)a[t]=d;else if(g)a[t]=Math.min(c-o,0>d-l?d:d-l);else if(m)a[t]=Math.max(s,r+l+i>e?r:r+l);else return!1},C=function(t,e,i,o,r){var s;r<n||r>e-n?s=!1:a[t]=r<i/2?1:r>e-o/2?e-o-2:r-i/2;return s},f=function(t){var e=d;d=u;u=e;c=t},g=function(){!1!==b.apply(0,d)?!1!==C.apply(0,u)||c||(f(!0),g()):c?a.x=a.y=0:(f(!0),g())};(s.inverted||1<this.len)&&f();g();return a};d.prototype.getXDateFormat=function(t,e,i){e=e.dateTimeLabelFormats;var o=i&&i.closestPointRange;return(o?this.getDateFormat(o,t.x,i.options.startOfWeek,e):e.day)||e.year};d.prototype.hide=function(t){var e=this;i.clearTimeout(this.hideTimer);t=o(t,this.options.hideDelay,500);this.isHidden||(this.hideTimer=v(function(){e.getLabel().fadeOut(t?void 0:t);e.isHidden=!0},t))};d.prototype.init=function(t,e){this.chart=t;this.options=e;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.split=e.split&&!t.inverted&&!t.polar;this.shared=e.shared||this.split;this.outside=o(e.outside,!(!t.scrollablePixelsX&&!t.scrollablePixelsY))};d.prototype.isStickyOnContact=function(){return!(this.followPointer||!this.options.stickOnContact||!this.inContact)};d.prototype.move=function(t,e,o,r){var s=this,n=s.now,a=!1!==s.options.animation&&!s.isHidden&&(1<Math.abs(t-n.x)||1<Math.abs(e-n.y)),h=s.followPointer||1<s.len;l(n,{x:a?(2*n.x+t)/3:t,y:a?(n.y+e)/2:e,anchorX:h?void 0:a?(2*n.anchorX+o)/3:o,anchorY:h?void 0:a?(n.anchorY+r)/2:r});s.getLabel().attr(n);s.drawTracker();a&&(i.clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){s&&s.move(t,e,o,r)},32))};d.prototype.refresh=function(t,r){var a=this.chart,c=this.options,s=t,h={},u=[],l=c.formatter||this.defaultFormatter;h=this.shared;var f=a.styledMode;if(c.enabled){i.clearTimeout(this.hideTimer);this.followPointer=n(s)[0].series.tooltipOptions.followPointer;var d=this.getAnchor(s,r);r=d[0];var g=d[1];!h||s.series&&s.series.noSharedTooltip?h=s.getLabelConfig():(a.pointer.applyInactiveState(s),s.forEach(function(t){t.setState('hover');u.push(t.getLabelConfig())}),h={x:s[0].category,y:s[0].y},h.points=u,s=s[0]);this.len=u.length;a=l.call(h,this);l=s.series;this.distance=o(l.tooltipOptions.distance,16);!1===a?this.hide():(this.split?this.renderSplit(a,n(t)):(t=this.getLabel(),c.style.width&&!f||t.css({width:this.chart.spacingBox.width+'px'}),t.attr({text:a&&a.join?a.join(''):a}),t.removeClass(/highcharts-color-[\d]+/g).addClass('highcharts-color-'+o(s.colorIndex,l.colorIndex)),f||t.attr({stroke:c.borderColor||s.color||l.color||e.neutralColor60}),this.updatePosition({plotX:r,plotY:g,negative:s.negative,ttBelow:s.ttBelow,h:d[2]||0})),this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1);p(this,'refresh')}};d.prototype.renderSplit=function(i,r){function T(t,e,i,o,r){void 0===r&&(r=!0);i?(e=A?0:M,t=s(t-o/2,c.left,c.right-o)):(e-=b,t=r?t-o-d:t+d,t=s(t,r?t:c.left,c.right));return{x:t,y:e}};var a=this,f=a.chart,n=a.chart,m=n.plotHeight,L=n.plotLeft,v=n.plotTop,x=n.pointer,O=n.renderer,p=n.scrollablePixelsY,P=void 0===p?0:p;p=n.scrollingContainer;p=void 0===p?{scrollLeft:0,scrollTop:0}:p;var S=p.scrollLeft,u=p.scrollTop,k=n.styledMode,d=a.distance,h=a.options,g=a.options.positioner,c={left:S,right:S+n.chartWidth,top:u,bottom:u+n.chartHeight},w=a.getLabel(),A=!(!f.xAxis[0]||!f.xAxis[0].opposite),b=v+u,C=0,M=m-P;y(i)&&(i=[!1,i]);i=i.slice(0,r.length+1).reduce(function(t,i,n){if(!1!==i&&''!==i){n=r[n-1]||{isHeader:!0,plotX:r[0].plotX,plotY:m,series:{}};var j=n.isHeader,S=j?a:n.series,p=S.tt,y=n.isHeader,l=n.series,f='highcharts-color-'+o(n.colorIndex,l.colorIndex,'none');p||(p={padding:h.padding,r:h.borderRadius},k||(p.fill=h.backgroundColor,p['stroke-width']=h.borderWidth),p=O.label('',0,0,h[y?'headerShape':'shape']||'callout',void 0,void 0,h.useHTML).addClass((y?'highcharts-tooltip-header ':'')+'highcharts-tooltip-box '+f).attr(p).add(w));p.isActive=!0;p.attr({text:i});k||p.css(h.style).shadow(h.shadow).attr({stroke:h.borderColor||n.color||l.color||e.neutralColor80});i=S.tt=p;y=i.getBBox();S=y.width+i.strokeWidth();j&&(C=y.height,M+=C,A&&(b-=C));l=n.plotX;l=void 0===l?0:l;f=n.plotY;f=void 0===f?0:f;var x=n.series;if(n.isHeader){l=L+l;var E=v+m/2}
else p=x.xAxis,x=x.yAxis,l=p.pos+s(l,-d,p.len+d),x.pos+f>=u+v&&x.pos+f<=u+v+m-P&&(E=x.pos+f);l=s(l,c.left-d,c.right+d);'number'===typeof E?(y=y.height+1,f=g?g.call(a,S,y,n):T(l,E,j,S),t.push({align:g?0:void 0,anchorX:l,anchorY:E,boxWidth:S,point:n,rank:o(f.rank,j?1:0),size:y,target:f.y,tt:i,x:f.x})):i.isActive=!1};return t},[]);!g&&i.some(function(t){return t.x<c.left})&&(i=i.map(function(t){var e=T(t.anchorX,t.anchorY,t.point.isHeader,t.boxWidth,!1);return l(t,{target:e.y,x:e.x})}));a.cleanSplit();t.distribute(i,M);i.forEach(function(t){var e=t.pos;t.tt.attr({visibility:'undefined'===typeof e?'hidden':'inherit',x:t.x,y:e+b,anchorX:t.anchorX,anchorY:t.anchorY})});i=a.container;f=a.renderer;a.outside&&i&&f&&(n=w.getBBox(),f.setSize(n.width+n.x,n.height+n.y,!1),x=x.getChartPosition(),i.style.left=x.left+'px',i.style.top=x.top+'px')};d.prototype.drawTracker=function(){if(this.followPointer||!this.options.stickOnContact)this.tracker&&this.tracker.destroy();else{var r=this.chart,i=this.label,t=r.hoverPoint;if(i&&t){var e={x:0,y:0,width:0,height:0};t=this.getAnchor(t);var o=i.getBBox();t[0]+=r.plotLeft-i.translateX;t[1]+=r.plotTop-i.translateY;e.x=Math.min(0,t[0]);e.y=Math.min(0,t[1]);e.width=0>t[0]?Math.max(Math.abs(t[0]),o.width-t[0]):Math.max(Math.abs(t[0]),o.width);e.height=0>t[1]?Math.max(Math.abs(t[1]),o.height-Math.abs(t[1])):Math.max(Math.abs(t[1]),o.height);this.tracker?this.tracker.attr(e):(this.tracker=i.renderer.rect(e).addClass('highcharts-tracker').add(i),r.styledMode||this.tracker.attr({fill:'rgba(0,0,0,0)'}))}}};d.prototype.styledModeFormat=function(t){return t.replace('style="font-size: 10px"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex}"')};d.prototype.tooltipFooterHeaderFormatter=function(t,e){var h=e?'footer':'header',o=t.series,s=o.tooltipOptions,r=s.xDateFormat,n=o.xAxis,a=n&&'datetime'===n.options.type&&m(t.key),i=s[h+'Format'];e={isFooter:e,labelConfig:t};p(this,'headerFormatter',e,function(e){a&&!r&&(r=this.getXDateFormat(t,s,n));a&&r&&(t.point&&t.point.tooltipDateKeys||['key']).forEach(function(t){i=i.replace('{point.'+t+'}','{point.'+t+':'+r+'}')});o.chart.styledMode&&(i=this.styledModeFormat(i));e.text=g(i,{point:t,series:o},this.chart)});return e.text};d.prototype.update=function(t){this.destroy();c(!0,this.chart.options.tooltip.userOptions,t);this.init(this.chart,c(!0,this.options,t))};d.prototype.updatePosition=function(t){var i=this.chart,e=i.pointer,o=this.getLabel(),r=t.plotX+i.plotLeft;i=t.plotY+i.plotTop;e=e.getChartPosition();t=(this.options.positioner||this.getPosition).call(this,o.width,o.height,t);if(this.outside){var s=(this.options.borderWidth||0)+2*this.distance;this.renderer.setSize(o.width+s,o.height+s,!1);if(1!==e.scaleX||1!==e.scaleY)h(this.container,{transform:'scale('+e.scaleX+', '+e.scaleY+')'}),r*=e.scaleX,i*=e.scaleY;r+=e.left-t.x;i+=e.top-t.y};this.move(Math.round(t.x),Math.round(t.y||0),r,i)};return d}();t.Tooltip=d;return t.Tooltip});i(e,'Core/Pointer.js',[e['Core/Color/Color.js'],e['Core/Globals.js'],e['Core/Color/Palette.js'],e['Core/Tooltip.js'],e['Core/Utilities.js']],function(t,e,i,o,r){var f=t.parse,a=e.charts,g=e.noop,n=r.addEvent,m=r.attr,y=r.css,v=r.defined,h=r.extend,d=r.find,l=r.fireEvent,p=r.isNumber,c=r.isObject,x=r.objectEach,b=r.offset,s=r.pick,u=r.splat;'';t=function(){function t(t,e){this.lastValidTouch={};this.pinchDown=[];this.runChartClick=!1;this.chart=t;this.hasDragged=!1;this.options=e;this.unbindContainerMouseLeave=function(){};this.unbindContainerMouseEnter=function(){};this.init(t,e)};t.prototype.applyInactiveState=function(t){var i=[],e;(t||[]).forEach(function(t){e=t.series;i.push(e);e.linkedParent&&i.push(e.linkedParent);e.linkedSeries&&(i=i.concat(e.linkedSeries));e.navigatorSeries&&i.push(e.navigatorSeries)});this.chart.series.forEach(function(t){-1===i.indexOf(t)?t.setState('inactive',!0):t.options.inactiveOtherPoints&&t.setAllPointsToState('inactive')})};t.prototype.destroy=function(){var t=this;'undefined'!==typeof t.unDocMouseMove&&t.unDocMouseMove();this.unbindContainerMouseLeave();e.chartCount||(e.unbindDocumentMouseUp&&(e.unbindDocumentMouseUp=e.unbindDocumentMouseUp()),e.unbindDocumentTouchEnd&&(e.unbindDocumentTouchEnd=e.unbindDocumentTouchEnd()));clearInterval(t.tooltipTimeout);x(t,function(e,i){t[i]=void 0})};t.prototype.drag=function(t){var o=this.chart,s=o.options.chart,e=t.chartX,n=t.chartY,m=this.zoomHor,y=this.zoomVert,a=o.plotLeft,h=o.plotTop,d=o.plotWidth,u=o.plotHeight,r=this.selectionMarker,l=this.mouseDownX||0,p=this.mouseDownY||0,v=c(s.panning)?s.panning&&s.panning.enabled:s.panning,x=s.panKey&&t[s.panKey+'Key'];if(!r||!r.touch)if(e<a?e=a:e>a+d&&(e=a+d),n<h?n=h:n>h+u&&(n=h+u),this.hasDragged=Math.sqrt(Math.pow(l-e,2)+Math.pow(p-n,2)),10<this.hasDragged){var g=o.isInsidePlot(l-a,p-h);o.hasCartesianSeries&&(this.zoomX||this.zoomY)&&g&&!x&&!r&&(this.selectionMarker=r=o.renderer.rect(a,h,m?1:d,y?1:u,0).attr({'class':'highcharts-selection-marker',zIndex:7}).add(),o.styledMode||r.attr({fill:s.selectionMarkerFill||f(i.highlightColor80).setOpacity(.25).get()}));r&&m&&(e-=l,r.attr({width:Math.abs(e),x:(0<e?0:e)+l}));r&&y&&(e=n-p,r.attr({height:Math.abs(e),y:(0<e?0:e)+p}));g&&!r&&v&&o.pan(t,s.panning)}};t.prototype.dragStart=function(t){var e=this.chart;e.mouseIsDown=t.type;e.cancelClick=!1;e.mouseDownX=this.mouseDownX=t.chartX;e.mouseDownY=this.mouseDownY=t.chartY};t.prototype.drop=function(t){var u=this,i=this.chart,o=this.hasPinched;if(this.selectionMarker){var n={originalEvent:t,xAxis:[],yAxis:[]},e=this.selectionMarker,r=e.attr?e.attr('x'):e.x,s=e.attr?e.attr('y'):e.y,c=e.attr?e.attr('width'):e.width,d=e.attr?e.attr('height'):e.height,a;if(this.hasDragged||o)i.axes.forEach(function(e){if(e.zoomEnabled&&v(e.min)&&(o||u[{xAxis:'zoomX',yAxis:'zoomY'}[e.coll]])&&p(r)&&p(s)){var i=e.horiz,h='touchend'===t.type?e.minPixelPadding:0,l=e.toValue((i?r:s)+h);i=e.toValue((i?r+c:s+d)-h);n[e.coll].push({axis:e,min:Math.min(l,i),max:Math.max(l,i)});a=!0}}),a&&l(i,'selection',n,function(t){i.zoom(h(t,o?{animation:!1}:null))});p(i.index)&&(this.selectionMarker=this.selectionMarker.destroy());o&&this.scaleGroups()};i&&p(i.index)&&(y(i.container,{cursor:i._cursor}),i.cancelClick=10<this.hasDragged,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])};t.prototype.findNearestKDPoint=function(t,e,i){var r=this.chart,s=r.hoverPoint;r=r.tooltip;if(s&&r&&r.isStickyOnContact())return s;var o;t.forEach(function(t){var r=!(t.noSharedTooltip&&e)&&0>t.options.findNearestPointBy.indexOf('y');t=t.searchPoint(i,r);if((r=c(t,!0)&&t.series)&&!(r=!c(o,!0))){r=o.distX-t.distX;var s=o.dist-t.dist,n=(t.series.group&&t.series.group.zIndex)-(o.series.group&&o.series.group.zIndex);r=0<(0!==r&&e?r:0!==s?s:0!==n?n:o.series.index>t.series.index?-1:1)};r&&(o=t)});return o};t.prototype.getChartCoordinatesFromPoint=function(t,e){var i=t.series,r=i.xAxis;i=i.yAxis;var n=s(t.clientX,t.plotX),o=t.shapeArgs;if(r&&i)return e?{chartX:r.len+r.pos-n,chartY:i.len+i.pos-t.plotY}:{chartX:n+r.pos,chartY:t.plotY+i.pos};if(o&&o.x&&o.y)return{chartX:o.x,chartY:o.y}};t.prototype.getChartPosition=function(){if(this.chartPosition)return this.chartPosition;var t=this.chart.container,e=b(t);this.chartPosition={left:e.left,top:e.top,scaleX:1,scaleY:1};var i=t.offsetWidth;t=t.offsetHeight;2<i&&2<t&&(this.chartPosition.scaleX=e.width/i,this.chartPosition.scaleY=e.height/t);return this.chartPosition};t.prototype.getCoordinates=function(t){var e={xAxis:[],yAxis:[]};this.chart.axes.forEach(function(i){e[i.isXAxis?'xAxis':'yAxis'].push({axis:i,value:i.toValue(t[i.horiz?'chartX':'chartY'])})});return e};t.prototype.getHoverData=function(t,e,i,o,r,n){var h,u=[];o=!(!o||!t);var p=e&&!e.stickyTracking,a={chartX:n?n.chartX:void 0,chartY:n?n.chartY:void 0,shared:r};l(this,'beforeGetHoverData',a);p=p?[e]:i.filter(function(t){return a.filter?a.filter(t):t.visible&&!(!r&&t.directTouch)&&s(t.options.enableMouseTracking,!0)&&t.stickyTracking});e=(h=o||!n?t:this.findNearestKDPoint(p,r,n))&&h.series;h&&(r&&!e.noSharedTooltip?(p=i.filter(function(t){return a.filter?a.filter(t):t.visible&&!(!r&&t.directTouch)&&s(t.options.enableMouseTracking,!0)&&!t.noSharedTooltip}),p.forEach(function(t){var e=d(t.points,function(t){return t.x===h.x&&!t.isNull});c(e)&&(t.chart.isBoosting&&(e=t.getPoint(e)),u.push(e))})):u.push(h));a={hoverPoint:h};l(this,'afterGetHoverData',a);return{hoverPoint:a.hoverPoint,hoverSeries:e,hoverPoints:u}};t.prototype.getPointFromEvent=function(t){t=t.target;for(var e;t&&!e;)e=t.point,t=t.parentNode;return e};t.prototype.onTrackerMouseOut=function(t){t=t.relatedTarget||t.toElement;var e=this.chart.hoverSeries;this.isDirectTouch=!1;if(!(!e||!t||e.stickyTracking||this.inClass(t,'highcharts-tooltip')||this.inClass(t,'highcharts-series-'+e.index)&&this.inClass(t,'highcharts-tracker')))e.onMouseOut()};t.prototype.inClass=function(t,e){for(var i;t;){if(i=m(t,'class')){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf('highcharts-container'))return!1};t=t.parentNode}};t.prototype.init=function(t,e){this.options=e;this.chart=t;this.runChartClick=e.chart.events&&!!e.chart.events.click;this.pinchDown=[];this.lastValidTouch={};o&&(t.tooltip=new o(t,e.tooltip),this.followTouchMove=s(e.tooltip.followTouchMove,!0));this.setDOMEvents()};t.prototype.normalize=function(t,e){var i=t.touches,o=i?i.length?i.item(0):s(i.changedTouches,t.changedTouches)[0]:t;e||(e=this.getChartPosition());i=o.pageX-e.left;o=o.pageY-e.top;i/=e.scaleX;o/=e.scaleY;return h(t,{chartX:Math.round(i),chartY:Math.round(o)})};t.prototype.onContainerClick=function(t){var e=this.chart,i=e.hoverPoint;t=this.normalize(t);var o=e.plotLeft,r=e.plotTop;e.cancelClick||(i&&this.inClass(t.target,'highcharts-tracker')?(l(i.series,'click',h(t,{point:i})),e.hoverPoint&&i.firePointEvent('click',t)):(h(t,this.getCoordinates(t)),e.isInsidePlot(t.chartX-o,t.chartY-r)&&l(e,'click',t)))};t.prototype.onContainerMouseDown=function(t){var i=1===((t.buttons||t.button)&1);t=this.normalize(t);if(e.isFirefox&&0!==t.button)this.onContainerMouseMove(t);if('undefined'===typeof t.button||i)this.zoomOption(t),i&&t.preventDefault&&t.preventDefault(),this.dragStart(t)};t.prototype.onContainerMouseLeave=function(t){var i=a[s(e.hoverChartIndex,-1)],o=this.chart.tooltip;t=this.normalize(t);i&&(t.relatedTarget||t.toElement)&&(i.pointer.reset(),i.pointer.chartPosition=void 0);o&&!o.isHidden&&this.reset()};t.prototype.onContainerMouseEnter=function(t){delete this.chartPosition};t.prototype.onContainerMouseMove=function(t){var e=this.chart;t=this.normalize(t);this.setHoverChartIndex();t.preventDefault||(t.returnValue=!1);('mousedown'===e.mouseIsDown||this.touchSelect(t))&&this.drag(t);e.openMenu||!this.inClass(t.target,'highcharts-tracker')&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||this.runPointActions(t)};t.prototype.onDocumentTouchEnd=function(t){a[e.hoverChartIndex]&&a[e.hoverChartIndex].pointer.drop(t)};t.prototype.onContainerTouchMove=function(t){if(this.touchSelect(t))this.onContainerMouseMove(t);else this.touch(t)};t.prototype.onContainerTouchStart=function(t){if(this.touchSelect(t))this.onContainerMouseDown(t);else this.zoomOption(t),this.touch(t,!0)};t.prototype.onDocumentMouseMove=function(t){var e=this.chart,o=this.chartPosition;t=this.normalize(t,o);var i=e.tooltip;!o||i&&i.isStickyOnContact()||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||this.inClass(t.target,'highcharts-tracker')||this.reset()};t.prototype.onDocumentMouseUp=function(t){var i=a[s(e.hoverChartIndex,-1)];i&&i.pointer.drop(t)};t.prototype.pinch=function(t){var e=this,o=e.chart,i=e.pinchDown,r=t.touches||[],n=r.length,a=e.lastValidTouch,p=e.hasZoom,l=e.selectionMarker,c={},u=1===n&&(e.inClass(t.target,'highcharts-tracker')&&o.runTrackerClick||e.runChartClick),d={};1<n&&(e.initiated=!0);p&&e.initiated&&!u&&!1!==t.cancelable&&t.preventDefault();[].map.call(r,function(t){return e.normalize(t)});'touchstart'===t.type?([].forEach.call(r,function(t,e){i[e]={chartX:t.chartX,chartY:t.chartY}}),a.x=[i[0].chartX,i[1]&&i[1].chartX],a.y=[i[0].chartY,i[1]&&i[1].chartY],o.axes.forEach(function(t){if(t.zoomEnabled){var e=o.bounds[t.horiz?'h':'v'],i=t.minPixelPadding,r=t.toPixels(Math.min(s(t.options.min,t.dataMin),t.dataMin)),n=t.toPixels(Math.max(s(t.options.max,t.dataMax),t.dataMax)),a=Math.max(r,n);e.min=Math.min(t.pos,Math.min(r,n)-i);e.max=Math.max(t.pos+t.len,a+i)}}),e.res=!0):e.followTouchMove&&1===n?this.runPointActions(e.normalize(t)):i.length&&(l||(e.selectionMarker=l=h({destroy:g,touch:!0},o.plotBox)),e.pinchTranslate(i,r,c,l,d,a),e.hasPinched=p,e.scaleGroups(c,d),e.res&&(e.res=!1,this.reset(!1,0)))};t.prototype.pinchTranslate=function(t,e,i,o,r,s){this.zoomHor&&this.pinchTranslateDirection(!0,t,e,i,o,r,s);this.zoomVert&&this.pinchTranslateDirection(!1,t,e,i,o,r,s)};t.prototype.pinchTranslateDirection=function(t,e,i,o,r,s,n,a){var u=this.chart,c=t?'x':'y',y=t?'X':'Y',f='chart'+y,M=t?'width':'height',v=u['plot'+(t?'Left':'Top')],d,x,h=a||1,b=u.inverted,g=u.bounds[t?'h':'v'],S=1===e.length,m=e[0][f],l=i[0][f],k=!S&&e[1][f],p=!S&&i[1][f];i=function(){'number'===typeof p&&20<Math.abs(m-k)&&(h=a||Math.abs(l-p)/Math.abs(m-k));x=(v-l)/h+m;d=u['plot'+(t?'Width':'Height')]/h};i();e=x;if(e<g.min){e=g.min;var C=!0}
else e+d>g.max&&(e=g.max-d,C=!0);C?(l-=.8*(l-n[c][0]),'number'===typeof p&&(p-=.8*(p-n[c][1])),i()):n[c]=[l,p];b||(s[c]=x-v,s[M]=d);s=b?1/h:h;r[M]=d;r[c]=e;o[b?t?'scaleY':'scaleX':'scale'+y]=h;o['translate'+y]=s*v+(l-s*m)};t.prototype.reset=function(t,e){var i=this.chart,a=i.hoverSeries,o=i.hoverPoint,s=i.hoverPoints,r=i.tooltip,n=r&&r.shared?s:o;t&&n&&u(n).forEach(function(e){e.series.isCartesian&&'undefined'===typeof e.plotX&&(t=!1)});if(t)r&&n&&u(n).length&&(r.refresh(n),r.shared&&s?s.forEach(function(t){t.setState(t.state,!0);t.series.isCartesian&&(t.series.xAxis.crosshair&&t.series.xAxis.drawCrosshair(null,t),t.series.yAxis.crosshair&&t.series.yAxis.drawCrosshair(null,t))}):o&&(o.setState(o.state,!0),i.axes.forEach(function(t){t.crosshair&&o.series[t.coll]===t&&t.drawCrosshair(null,o)})));else{if(o)o.onMouseOut();s&&s.forEach(function(t){t.setState()});if(a)a.onMouseOut();r&&r.hide(e);this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove());i.axes.forEach(function(t){t.hideCrosshair()});this.hoverX=i.hoverPoints=i.hoverPoint=null}};t.prototype.runPointActions=function(t,i){var o=this.chart,l=o.tooltip&&o.tooltip.options.enabled?o.tooltip:void 0,c=l?l.shared:!1,r=i||o.hoverPoint,h=r&&r.series||o.hoverSeries;h=this.getHoverData(r,h,o.series,(!t||'touchmove'!==t.type)&&(!!i||h&&h.directTouch&&this.isDirectTouch),c,t);r=h.hoverPoint;var p=h.hoverPoints;i=(h=h.hoverSeries)&&h.tooltipOptions.followPointer;c=c&&h&&!h.noSharedTooltip;if(r&&(r!==o.hoverPoint||l&&l.isHidden)){(o.hoverPoints||[]).forEach(function(t){-1===p.indexOf(t)&&t.setState()});if(o.hoverSeries!==h)h.onMouseOver();this.applyInactiveState(p);(p||[]).forEach(function(t){t.setState('hover')});o.hoverPoint&&o.hoverPoint.firePointEvent('mouseOut');if(!r.series)return;o.hoverPoints=p;o.hoverPoint=r;r.firePointEvent('mouseOver');l&&l.refresh(c?p:r,t)}
else i&&l&&!l.isHidden&&(r=l.getAnchor([{}],t),l.updatePosition({plotX:r[0],plotY:r[1]}));this.unDocMouseMove||(this.unDocMouseMove=n(o.container.ownerDocument,'mousemove',function(t){var i=a[e.hoverChartIndex];if(i)i.pointer.onDocumentMouseMove(t)}));o.axes.forEach(function(e){var r=s((e.crosshair||{}).snap,!0),i;r&&((i=o.hoverPoint)&&i.series[e.coll]===e||(i=d(p,function(t){return t.series[e.coll]===e})));i||!r?e.drawCrosshair(t,i):e.hideCrosshair()})};t.prototype.scaleGroups=function(t,e){var i=this.chart,o;i.series.forEach(function(r){o=t||r.getPlotBox();r.xAxis&&r.xAxis.zoomEnabled&&r.group&&(r.group.attr(o),r.markerGroup&&(r.markerGroup.attr(o),r.markerGroup.clip(e?i.clipRect:null)),r.dataLabelsGroup&&r.dataLabelsGroup.attr(o))});i.clipRect.attr(e||i.clipBox)};t.prototype.setDOMEvents=function(){var r=this,t=this.chart.container,o=t.ownerDocument;t.onmousedown=this.onContainerMouseDown.bind(this);t.onmousemove=this.onContainerMouseMove.bind(this);t.onclick=this.onContainerClick.bind(this);this.unbindContainerMouseEnter=n(t,'mouseenter',this.onContainerMouseEnter.bind(this));this.unbindContainerMouseLeave=n(t,'mouseleave',this.onContainerMouseLeave.bind(this));e.unbindDocumentMouseUp||(e.unbindDocumentMouseUp=n(o,'mouseup',this.onDocumentMouseUp.bind(this)));for(var i=this.chart.renderTo.parentElement;i&&'BODY'!==i.tagName;)n(i,'scroll',function(){delete r.chartPosition}),i=i.parentElement;e.hasTouch&&(n(t,'touchstart',this.onContainerTouchStart.bind(this),{passive:!1}),n(t,'touchmove',this.onContainerTouchMove.bind(this),{passive:!1}),e.unbindDocumentTouchEnd||(e.unbindDocumentTouchEnd=n(o,'touchend',this.onDocumentTouchEnd.bind(this),{passive:!1})))};t.prototype.setHoverChartIndex=function(){var i=this.chart,t=e.charts[s(e.hoverChartIndex,-1)];if(t&&t!==i)t.pointer.onContainerMouseLeave({relatedTarget:!0});t&&t.mouseIsDown||(e.hoverChartIndex=i.index)};t.prototype.touch=function(t,e){var i=this.chart,r;this.setHoverChartIndex();if(1===t.touches.length)if(t=this.normalize(t),(r=i.isInsidePlot(t.chartX-i.plotLeft,t.chartY-i.plotTop))&&!i.openMenu){e&&this.runPointActions(t);if('touchmove'===t.type){e=this.pinchDown;var o=e[0]?4<=Math.sqrt(Math.pow(e[0].chartX-t.chartX,2)+Math.pow(e[0].chartY-t.chartY,2)):!1};s(o,!0)&&this.pinch(t)}
else e&&this.reset();else 2===t.touches.length&&this.pinch(t)};t.prototype.touchSelect=function(t){return!(!this.chart.options.chart.zoomBySingleTouch||!t.touches||1!==t.touches.length)};t.prototype.zoomOption=function(t){var i=this.chart,o=i.options.chart,e=o.zoomType||'';i=i.inverted;/touch/.test(t.type)&&(e=s(o.pinchType,e));this.zoomX=t=/x/.test(e);this.zoomY=e=/y/.test(e);this.zoomHor=t&&!i||e&&i;this.zoomVert=e&&!i||t&&i;this.hasZoom=t||e};return t}();return e.Pointer=t});i(e,'Core/MSPointer.js',[e['Core/Globals.js'],e['Core/Pointer.js'],e['Core/Utilities.js']],function(t,e,i){function f(){var t=[];t.item=function(t){return this[t]};d(o,function(e){t.push({pageX:e.pageX,pageY:e.pageY,target:e.target})});return t};function s(e,i,o,r){'touch'!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH||!n[t.hoverChartIndex]||(r(e),r=n[t.hoverChartIndex].pointer,r[i]({type:o,target:e.currentTarget,preventDefault:l,touches:f()}))};var a=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=t.charts,h=t.doc,l=t.noop,p=i.addEvent,c=i.css,d=i.objectEach,u=i.removeEvent,o={},r=!!t.win.PointerEvent;return function(t){function e(){return null!==t&&t.apply(this,arguments)||this};a(e,t);e.prototype.batchMSEvents=function(t){t(this.chart.container,r?'pointerdown':'MSPointerDown',this.onContainerPointerDown);t(this.chart.container,r?'pointermove':'MSPointerMove',this.onContainerPointerMove);t(h,r?'pointerup':'MSPointerUp',this.onDocumentPointerUp)};e.prototype.destroy=function(){this.batchMSEvents(u);t.prototype.destroy.call(this)};e.prototype.init=function(e,i){t.prototype.init.call(this,e,i);this.hasZoom&&c(e.container,{'-ms-touch-action':'none','touch-action':'none'})};e.prototype.onContainerPointerDown=function(t){s(t,'onContainerTouchStart','touchstart',function(t){o[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})};e.prototype.onContainerPointerMove=function(t){s(t,'onContainerTouchMove','touchmove',function(t){o[t.pointerId]={pageX:t.pageX,pageY:t.pageY};o[t.pointerId].target||(o[t.pointerId].target=t.currentTarget)})};e.prototype.onDocumentPointerUp=function(t){s(t,'onDocumentTouchEnd','touchend',function(t){delete o[t.pointerId]})};e.prototype.setDOMEvents=function(){t.prototype.setDOMEvents.call(this);(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(p)};return e}(e)});i(e,'Core/Series/Point.js',[e['Core/Renderer/HTML/AST.js'],e['Core/Animation/AnimationUtilities.js'],e['Core/Globals.js'],e['Core/Options.js'],e['Core/Utilities.js']],function(t,e,i,o,r){var p=e.animObject,c=o.defaultOptions,d=r.addEvent,u=r.defined,f=r.erase,n=r.extend,h=r.fireEvent,g=r.format,m=r.getNestedProperty,y=r.isArray,v=r.isFunction,l=r.isNumber,a=r.isObject,x=r.merge,b=r.objectEach,s=r.pick,C=r.syncTimeout,M=r.removeEvent,S=r.uniqueKey;'';e=function(){function e(){this.colorIndex=this.category=void 0;this.formatPrefix='point';this.id=void 0;this.isNull=!1;this.percentage=this.options=this.name=void 0;this.selected=!1;this.total=this.series=void 0;this.visible=!0;this.x=void 0};e.prototype.animateBeforeDestroy=function(){var t=this,o={x:t.startXPos,opacity:0},e,i=t.getGraphicalProps();i.singular.forEach(function(i){e='dataLabel'===i;t[i]=t[i].animate(e?{x:t[i].startXPos,y:t[i].startYPos,opacity:0}:o)});i.plural.forEach(function(e){t[e].forEach(function(e){e.element&&e.animate(n({x:t.startXPos},e.startYPos?{x:e.startXPos,y:e.startYPos}:{}))})})};e.prototype.applyOptions=function(t,i){var o=this.series,r=o.options.pointValKey||o.pointValKey;t=e.prototype.optionsToObject.call(this,t);n(this,t);this.options=this.options?n(this.options,t):t;t.group&&delete this.group;t.dataLabels&&delete this.dataLabels;r&&(this.y=e.prototype.getNestedProperty.call(this,r));this.formatPrefix=(this.isNull=s(this.isValid&&!this.isValid(),null===this.x||!l(this.y)))?'null':'point';this.selected&&(this.state='select');'name' in this&&'undefined'===typeof i&&o.xAxis&&o.xAxis.hasNames&&(this.x=o.xAxis.nameToX(this));'undefined'===typeof this.x&&o&&(this.x='undefined'===typeof i?o.autoIncrement(this):i);return this};e.prototype.destroy=function(){function s(){if(t.graphic||t.dataLabel||t.dataLabels)M(t),t.destroyElements();for(r in t)t[r]=null};var t=this,e=t.series,i=e.chart;e=e.options.dataSorting;var o=i.hoverPoints,n=p(t.series.chart.renderer.globalAnimation),r;t.legendItem&&i.legend.destroyItem(t);o&&(t.setState(),f(o,t),o.length||(i.hoverPoints=null));if(t===i.hoverPoint)t.onMouseOut();e&&e.enabled?(this.animateBeforeDestroy(),C(s,n.duration)):s();i.pointCount--};e.prototype.destroyElements=function(t){var e=this;t=e.getGraphicalProps(t);t.singular.forEach(function(t){e[t]=e[t].destroy()});t.plural.forEach(function(t){e[t].forEach(function(t){t.element&&t.destroy()});delete e[t]})};e.prototype.firePointEvent=function(t,e,i){var o=this,r=this.series.options;(r.point.events[t]||o.options&&o.options.events&&o.options.events[t])&&o.importEvents();'click'===t&&r.allowPointSelect&&(i=function(t){o.select&&o.select(null,t.ctrlKey||t.metaKey||t.shiftKey)});h(o,t,e,i)};e.prototype.getClassName=function(){return'highcharts-point'+(this.selected?' highcharts-point-select':'')+(this.negative?' highcharts-negative':'')+(this.isNull?' highcharts-null-point':'')+('undefined'!==typeof this.colorIndex?' highcharts-color-'+this.colorIndex:'')+(this.options.className?' '+this.options.className:'')+(this.zone&&this.zone.className?' '+this.zone.className.replace('highcharts-negative',''):'')};e.prototype.getGraphicalProps=function(t){var s=this,e=[],i,o={singular:[],plural:[]};t=t||{graphic:1,dataLabel:1};t.graphic&&e.push('graphic','upperGraphic','shadowGroup');t.dataLabel&&e.push('dataLabel','dataLabelUpper','connector');for(i=e.length;i--;){var r=e[i];s[r]&&o.singular.push(r)}['dataLabel','connector'].forEach(function(e){var i=e+'s';t[e]&&s[i]&&o.plural.push(i)});return o};e.prototype.getLabelConfig=function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}};e.prototype.getNestedProperty=function(t){if(t)return 0===t.indexOf('custom.')?m(t,this.options):this[t]};e.prototype.getZone=function(){var e=this.series,o=e.zones;e=e.zoneAxis||'y';var i=0,t;for(t=o[i];this[e]>=t.value;)t=o[++i];this.nonZonedColor||(this.nonZonedColor=this.color);this.color=t&&t.color&&!this.options.color?t.color:this.nonZonedColor;return t};e.prototype.hasNewShapeType=function(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType};e.prototype.init=function(t,e,i){this.series=t;this.applyOptions(e,i);this.id=u(this.id)?this.id:S();this.resolveColor();t.chart.pointCount++;h(this,'afterInit');return this};e.prototype.optionsToObject=function(t){var i={},o=this.series,a=o.options.keys,r=a||o.pointArrayMap||['y'],h=r.length,s=0,n=0;if(l(t)||null===t)i[r[0]]=t;else if(y(t))for(!a&&t.length>h&&(o=typeof t[0],'string'===o?i.name=t[0]:'number'===o&&(i.x=t[0]),s++);n<h;)a&&'undefined'===typeof t[s]||(0<r[n].indexOf('.')?e.prototype.setNestedProperty(i,t[s],r[n]):i[r[n]]=t[s]),s++,n++;else'object'===typeof t&&(i=t,t.dataLabels&&(o._hasPointLabels=!0),t.marker&&(o._hasPointMarkers=!0));return i};e.prototype.resolveColor=function(){var t=this.series,e=t.chart.options.chart.colorCount,i=t.chart.styledMode;delete this.nonZonedColor;i||this.options.color||(this.color=t.color);t.options.colorByPoint?(i||(e=t.options.colors||t.chart.options.colors,this.color=this.color||e[t.colorCounter],e=e.length),i=t.colorCounter,t.colorCounter++,t.colorCounter===e&&(t.colorCounter=0)):i=t.colorIndex;this.colorIndex=s(this.options.colorIndex,i)};e.prototype.setNestedProperty=function(t,e,i){i.split('.').reduce(function(t,i,o,r){t[i]=r.length-1===o?e:a(t[i],!0)?t[i]:{};return t[i]},t);return t};e.prototype.tooltipFormatter=function(t){var e=this.series,i=e.tooltipOptions,n=s(i.valueDecimals,''),o=i.valuePrefix||'',r=i.valueSuffix||'';e.chart.styledMode&&(t=e.chart.tooltip.styledModeFormat(t));(e.pointArrayMap||['y']).forEach(function(e){e='{point.'+e;if(o||r)t=t.replace(RegExp(e+'}','g'),o+e+'}'+r);t=t.replace(RegExp(e+'}','g'),e+':,.'+n+'f}')});return g(t,{point:this,series:this.series},e.chart)};e.prototype.update=function(t,e,i,o){function d(){r.applyOptions(t);var o=h&&r.hasDummyGraphic;o=null===r.y?!o:o;h&&o&&(r.graphic=h.destroy(),delete r.hasDummyGraphic);a(t,!0)&&(h&&h.element&&t&&t.marker&&'undefined'!==typeof t.marker.symbol&&(r.graphic=h.destroy()),t&&t.dataLabels&&r.dataLabel&&(r.dataLabel=r.dataLabel.destroy()),r.connector&&(r.connector=r.connector.destroy()));l=r.index;n.updateParallelArrays(r,l);p.data[l]=a(p.data[l],!0)||a(t,!0)?r.options:s(t,p.data[l]);n.isDirty=n.isDirtyData=!0;!n.fixedBox&&n.hasCartesianSeries&&(c.isDirtyBox=!0);'point'===p.legendType&&(c.isDirtyLegend=!0);e&&c.redraw(i)};var r=this,n=r.series,h=r.graphic,l,c=n.chart,p=n.options;e=s(e,!0);!1===o?d():r.firePointEvent('update',{options:t},d)};e.prototype.remove=function(t,e){this.series.removePoint(this.series.data.indexOf(this),t,e)};e.prototype.select=function(t,e){var i=this,o=i.series,r=o.chart;this.selectedStaging=t=s(t,!i.selected);i.firePointEvent(t?'select':'unselect',{accumulate:e},function(){i.selected=i.options.selected=t;o.options.data[o.data.indexOf(i)]=i.options;i.setState(t&&'select');e||r.getSelectedPoints().forEach(function(t){var e=t.series;t.selected&&t!==i&&(t.selected=t.options.selected=!1,e.options.data[e.data.indexOf(t)]=t.options,t.setState(r.hoverPoints&&e.options.inactiveOtherPoints?'inactive':''),t.firePointEvent('unselect'))})});delete this.selectedStaging};e.prototype.onMouseOver=function(t){var i=this.series.chart,e=i.pointer;t=t?e.normalize(t):e.getChartCoordinatesFromPoint(this,i.inverted);e.runPointActions(t,this)};e.prototype.onMouseOut=function(){var t=this.series.chart;this.firePointEvent('mouseOut');this.series.options.inactiveOtherPoints||(t.hoverPoints||[]).forEach(function(t){t.setState()});t.hoverPoints=t.hoverPoint=null};e.prototype.importEvents=function(){if(!this.hasImportedEvents){var t=this,e=x(t.series.options.point,t.options).events;t.events=e;b(e,function(e,i){v(e)&&d(t,i,e)});this.hasImportedEvents=!0}};e.prototype.setState=function(e,i){var r=this.series,p=this.state,f=r.options.states[e||'normal']||{},d=c.plotOptions[r.type].marker&&r.options.marker,x=d&&!1===d.enabled,m=d&&d.states&&d.states[e||'normal']||{},b=!1===m.enabled,o=r.stateMarkerGraphic,y=this.marker||{},u=r.chart,a=r.halo,l,C=d&&r.markerAttribs;e=e||'';if(!(e===this.state&&!i||this.selected&&'select'!==e||!1===f.enabled||e&&(b||x&&!1===m.enabled)||e&&y.states&&y.states[e]&&!1===y.states[e].enabled)){this.state=e;C&&(l=r.markerAttribs(this,e));if(this.graphic){p&&this.graphic.removeClass('highcharts-point-'+p);e&&this.graphic.addClass('highcharts-point-'+e);if(!u.styledMode){var g=r.pointAttribs(this,e),v=s(u.options.chart.animation,f.animation);r.options.inactiveOtherPoints&&g.opacity&&((this.dataLabels||[]).forEach(function(t){t&&t.animate({opacity:g.opacity},v)}),this.connector&&this.connector.animate({opacity:g.opacity},v));this.graphic.animate(g,v)};l&&this.graphic.animate(l,s(u.options.chart.animation,m.animation,d.animation));o&&o.hide()}
else{if(e&&m){p=y.symbol||r.symbol;o&&o.currentSymbol!==p&&(o=o.destroy());if(l)if(o)o[i?'animate':'attr']({x:l.x,y:l.y});else p&&(r.stateMarkerGraphic=o=u.renderer.symbol(p,l.x,l.y,l.width,l.height).add(r.markerGroup),o.currentSymbol=p);!u.styledMode&&o&&o.attr(r.pointAttribs(this,e))};o&&(o[e&&this.isInside?'show':'hide'](),o.element.point=this)};e=f.halo;f=(o=this.graphic||o)&&o.visibility||'inherit';e&&e.size&&o&&'hidden'!==f&&!this.isCluster?(a||(r.halo=a=u.renderer.path().add(o.parentGroup)),a.show()[i?'animate':'attr']({d:this.haloPath(e.size)}),a.attr({'class':'highcharts-halo highcharts-color-'+s(this.colorIndex,r.colorIndex)+(this.className?' '+this.className:''),visibility:f,zIndex:-1}),a.point=this,u.styledMode||a.attr(n({fill:this.color||r.color,'fill-opacity':e.opacity},t.filterUserAttributes(e.attributes||{})))):a&&a.point&&a.point.haloPath&&a.animate({d:a.point.haloPath(0)},null,a.hide);h(this,'afterSetState')}};e.prototype.haloPath=function(t){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-t,this.plotY-t,2*t,2*t)};return e}();return i.Point=e});i(e,'Core/Legend.js',[e['Core/Animation/AnimationUtilities.js'],e['Core/Globals.js'],e['Core/Series/Point.js'],e['Core/Utilities.js']],function(t,e,i,o){var C=t.animObject,M=t.setAnimation;t=e.isFirefox;var p=e.marginNames,c=e.win,a=o.addEvent,d=o.createElement,u=o.css,h=o.defined,f=o.discardElement,g=o.find,s=o.fireEvent,m=o.format,y=o.isNumber,n=o.merge,r=o.pick,v=o.relativeLength,x=o.stableSort,b=o.syncTimeout;o=o.wrap;var l=function(){function t(t,e){this.allItems=[];this.contentGroup=this.box=void 0;this.display=!1;this.group=void 0;this.offsetWidth=this.maxLegendWidth=this.maxItemWidth=this.legendWidth=this.legendHeight=this.lastLineHeight=this.lastItemY=this.itemY=this.itemX=this.itemMarginTop=this.itemMarginBottom=this.itemHeight=this.initialItemY=0;this.options={};this.padding=0;this.pages=[];this.proximate=!1;this.scrollGroup=void 0;this.widthOption=this.totalItemWidth=this.titleHeight=this.symbolWidth=this.symbolHeight=0;this.chart=t;this.init(t,e)};t.prototype.init=function(t,e){this.chart=t;this.setOptions(e);e.enabled&&(this.render(),a(this.chart,'endResize',function(){this.legend.positionCheckboxes()}),this.proximate?this.unchartrender=a(this.chart,'render',function(){this.legend.proximatePositions();this.legend.positionItems()}):this.unchartrender&&this.unchartrender())};t.prototype.setOptions=function(t){var e=r(t.padding,8);this.options=t;this.chart.styledMode||(this.itemStyle=t.itemStyle,this.itemHiddenStyle=n(this.itemStyle,t.itemHiddenStyle));this.itemMarginTop=t.itemMarginTop||0;this.itemMarginBottom=t.itemMarginBottom||0;this.padding=e;this.initialItemY=e-5;this.symbolWidth=r(t.symbolWidth,16);this.pages=[];this.proximate='proximate'===t.layout&&!this.chart.inverted;this.baseline=void 0};t.prototype.update=function(t,e){var i=this.chart;this.setOptions(n(!0,this.options,t));this.destroy();i.isDirtyLegend=i.isDirtyBox=!0;r(e,!0)&&i.redraw();s(this,'afterUpdate')};t.prototype.colorizeItem=function(t,e){t.legendGroup[e?'removeClass':'addClass']('highcharts-legend-item-hidden');if(!this.chart.styledMode){var o=this.options,h=t.legendItem,l=t.legendLine,n=t.legendSymbol,r=this.itemHiddenStyle.color;o=e?o.itemStyle.color:r;var a=e?t.color||r:r,p=t.options&&t.options.marker,i={fill:a};h&&h.css({fill:o,color:o});l&&l.attr({stroke:a});n&&(p&&n.isMarker&&(i=t.pointAttribs(),e||(i.stroke=i.fill=r)),n.attr(i))};s(this,'afterColorizeItem',{item:t,visible:e})};t.prototype.positionItems=function(){this.allItems.forEach(this.positionItem,this);this.chart.isResizing||this.positionCheckboxes()};t.prototype.positionItem=function(t){var l=this,e=this.options,r=e.symbolPadding,n=!e.rtl,o=t._legendItemPos;e=o[0];o=o[1];var a=t.checkbox,i=t.legendGroup;i&&i.element&&(r={translateX:n?e:this.legendWidth-e-2*r-4,translateY:o},n=function(){s(l,'afterPositionItem',{item:t})},h(i.translateY)?i.animate(r,void 0,n):(i.attr(r),n()));a&&(a.x=e,a.y=o)};t.prototype.destroyItem=function(t){var e=t.checkbox;['legendItem','legendLine','legendSymbol','legendGroup'].forEach(function(e){t[e]&&(t[e]=t[e].destroy())});e&&f(t.checkbox)};t.prototype.destroy=function(){function t(t){this[t]&&(this[t]=this[t].destroy())};this.getAllItems().forEach(function(e){['legendItem','legendGroup'].forEach(t,e)});'clipRect up down pager nav box title group'.split(' ').forEach(t,this);this.display=null};t.prototype.positionCheckboxes=function(){var e=this.group&&this.group.alignAttr,i=this.clipHeight||this.legendHeight,o=this.titleHeight;if(e){var t=e.translateY;this.allItems.forEach(function(r){var s=r.checkbox;if(s){var n=t+o+s.y+(this.scrollOffset||0)+3;u(s,{left:e.translateX+r.checkboxOffset+s.x-20+'px',top:n+'px',display:this.proximate||n>t-6&&n<t+i-6?'':'none'})}},this)}};t.prototype.renderTitle=function(){var t=this.options,o=this.padding,e=t.title,i=0;e.text&&(this.title||(this.title=this.chart.renderer.label(e.text,o-3,o-4,null,null,null,t.useHTML,null,'legend-title').attr({zIndex:1}),this.chart.styledMode||this.title.css(e.style),this.title.add(this.group)),e.width||this.title.css({width:this.maxLegendWidth+'px'}),t=this.title.getBBox(),i=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:i}));this.titleHeight=i};t.prototype.setText=function(t){var e=this.options;t.legendItem.attr({text:e.labelFormat?m(e.labelFormat,t,this.chart):e.labelFormatter.call(t)})};t.prototype.renderItem=function(t){var i=this.chart,h=i.renderer,o=this.options,f=this.symbolWidth,l=o.symbolPadding,p=this.itemStyle,y=this.itemHiddenStyle,a='horizontal'===o.layout?r(o.itemDistance,20):0,g=!o.rtl,e=t.legendItem,m=!t.series,c=!m&&t.series.drawLegendSymbol?t.series:t,s=c.options;s=this.createCheckboxForItem&&s&&s.showCheckbox;a=f+l+a+(s?20:0);var d=o.useHTML,u=t.options.className;e||(t.legendGroup=h.g('legend-item').addClass('highcharts-'+c.type+'-series highcharts-color-'+t.colorIndex+(u?' '+u:'')+(m?' highcharts-series-'+t.index:'')).attr({zIndex:1}).add(this.scrollGroup),t.legendItem=e=h.text('',g?f+l:-l,this.baseline||0,d),i.styledMode||e.css(n(t.visible?p:y)),e.attr({align:g?'left':'right',zIndex:2}).add(t.legendGroup),this.baseline||(this.fontMetrics=h.fontMetrics(i.styledMode?12:p.fontSize,e),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,e.attr('y',this.baseline)),this.symbolHeight=o.symbolHeight||this.fontMetrics.f,c.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,e,d));s&&!t.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(t);this.colorizeItem(t,t.visible);!i.styledMode&&p.width||e.css({width:(o.itemWidth||this.widthOption||i.spacingBox.width)-a+'px'});this.setText(t);i=e.getBBox();t.itemWidth=t.checkboxOffset=o.itemWidth||t.legendItemWidth||i.width+a;this.maxItemWidth=Math.max(this.maxItemWidth,t.itemWidth);this.totalItemWidth+=t.itemWidth;this.itemHeight=t.itemHeight=Math.round(t.legendItemHeight||i.height||this.symbolHeight)};t.prototype.layoutItem=function(t){var e=this.options,i=this.padding,o='horizontal'===e.layout,s=t.itemHeight,n=this.itemMarginBottom,a=this.itemMarginTop,l=o?r(e.itemDistance,20):0,h=this.maxLegendWidth;e=e.alignColumns&&this.totalItemWidth>h?this.maxItemWidth:t.itemWidth;o&&this.itemX-i+e>h&&(this.itemX=i,this.lastLineHeight&&(this.itemY+=a+this.lastLineHeight+n),this.lastLineHeight=0);this.lastItemY=a+this.itemY+n;this.lastLineHeight=Math.max(s,this.lastLineHeight);t._legendItemPos=[this.itemX,this.itemY];o?this.itemX+=e:(this.itemY+=a+s+n,this.lastLineHeight=s);this.offsetWidth=this.widthOption||Math.max((o?this.itemX-i-(t.checkbox?0:l):e)+i,this.offsetWidth)};t.prototype.getAllItems=function(){var t=[];this.chart.series.forEach(function(e){var i=e&&e.options;e&&r(i.showInLegend,h(i.linkedTo)?!1:void 0,!0)&&(t=t.concat(e.legendItems||('point'===i.legendType?e.data:e)))});s(this,'afterGetAllItems',{allItems:t});return t};t.prototype.getAlignment=function(){var t=this.options;return this.proximate?t.align.charAt(0)+'tv':t.floating?'':t.align.charAt(0)+t.verticalAlign.charAt(0)+t.layout.charAt(0)};t.prototype.adjustMargins=function(t,e){var i=this.chart,o=this.options,s=this.getAlignment();s&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(n,a){n.test(s)&&!h(t[a])&&(i[p[a]]=Math.max(i[p[a]],i.legend[(a+1)%2?'legendHeight':'legendWidth']+[1,-1,-1,1][a]*o[a%2?'x':'y']+r(o.margin,12)+e[a]+(i.titleOffset[a]||0)))})};t.prototype.proximatePositions=function(){var t=this.chart,i=[],o='left'===this.options.align;this.allItems.forEach(function(e){var r,s=o;if(e.yAxis){e.xAxis.options.reversed&&(s=!s);e.points&&(r=g(s?e.points:e.points.slice(0).reverse(),function(t){return y(t.plotY)}));s=this.itemMarginTop+e.legendItem.getBBox().height+this.itemMarginBottom;var n=e.yAxis.top-t.plotTop;e.visible?(r=r?r.plotY:e.yAxis.height,r+=n-.3*s):r=n+e.yAxis.height;i.push({target:r,size:s,item:e})}},this);e.distribute(i,t.plotHeight);i.forEach(function(e){e.item._legendItemPos[1]=t.plotTop-t.spacing[0]+e.pos})};t.prototype.render=function(){var n=this.chart,l=n.renderer,a=this.group,e=this.box,i=this.options,h=this.padding;this.itemX=h;this.itemY=this.initialItemY;this.lastItemY=this.offsetWidth=0;this.widthOption=v(i.width,n.spacingBox.width-h);var r=n.spacingBox.width-2*h-i.x;-1<['rm','lm'].indexOf(this.getAlignment().substring(0,2))&&(r/=2);this.maxLegendWidth=this.widthOption||r;a||(this.group=a=l.g('legend').attr({zIndex:7}).add(),this.contentGroup=l.g().attr({zIndex:1}).add(a),this.scrollGroup=l.g().add(this.contentGroup));this.renderTitle();var t=this.getAllItems();x(t,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)});i.reversed&&t.reverse();this.allItems=t;this.display=r=!!t.length;this.itemHeight=this.totalItemWidth=this.maxItemWidth=this.lastLineHeight=0;t.forEach(this.renderItem,this);t.forEach(this.layoutItem,this);t=(this.widthOption||this.offsetWidth)+h;var o=this.lastItemY+this.lastLineHeight+this.titleHeight;o=this.handleOverflow(o);o+=h;e||(this.box=e=l.rect().addClass('highcharts-legend-box').attr({r:i.borderRadius}).add(a),e.isNew=!0);n.styledMode||e.attr({stroke:i.borderColor,'stroke-width':i.borderWidth||0,fill:i.backgroundColor||'none'}).shadow(i.shadow);0<t&&0<o&&(e[e.isNew?'attr':'animate'](e.crisp.call({},{x:0,y:0,width:t,height:o},e.strokeWidth())),e.isNew=!1);e[r?'show':'hide']();n.styledMode&&'none'===a.getStyle('display')&&(t=o=0);this.legendWidth=t;this.legendHeight=o;r&&this.align();this.proximate||this.positionItems();s(this,'afterRender')};t.prototype.align=function(t){void 0===t&&(t=this.chart.spacingBox);var e=this.chart,o=this.options,i=t.y;/(lth|ct|rth)/.test(this.getAlignment())&&0<e.titleOffset[0]?i+=e.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&0<e.titleOffset[2]&&(i-=e.titleOffset[2]);i!==t.y&&(t=n(t,{y:i}));this.group.align(n(o,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?'top':o.verticalAlign}),!0,t)};t.prototype.handleOverflow=function(t){var e=this,f=this.chart,p=f.renderer,a=this.options,i=a.y,c=this.padding;i=f.spacingBox.height+('top'===a.verticalAlign?-i:i)-c;var m=a.maxHeight,d,h=this.clipRect,u=a.navigation,y=r(u.animation,!0),s=u.arrowSize||12,o=this.nav,n=this.pages,l,g=this.allItems,v=function(t){'number'===typeof t?h.attr({height:t}):h&&(e.clipRect=h.destroy(),e.contentGroup.clip());e.contentGroup.div&&(e.contentGroup.div.style.clip=t?'rect('+c+'px,9999px,'+(c+t)+'px,0)':'auto')},x=function(t){e[t]=p.circle(0,0,1.3*s).translate(s/2,s/2).add(o);f.styledMode||e[t].attr('fill','rgba(0,0,0,0.0001)');return e[t]};'horizontal'!==a.layout||'middle'===a.verticalAlign||a.floating||(i/=2);m&&(i=Math.min(i,m));n.length=0;t>i&&!1!==u.enabled?(this.clipHeight=d=Math.max(i-20-this.titleHeight-c,0),this.currentPage=r(this.currentPage,1),this.fullHeight=t,g.forEach(function(t,e){var i=t._legendItemPos[1],r=Math.round(t.legendItem.getBBox().height),o=n.length;if(!o||i-n[o-1]>d&&(l||i)!==n[o-1])n.push(l||i),o++;t.pageIx=o-1;l&&(g[e-1].pageIx=o-1);e===g.length-1&&i+r-n[o-1]>d&&i!==l&&(n.push(i),t.pageIx=o);i!==l&&(l=i)}),h||(h=e.clipRect=p.clipRect(0,c,9999,0),e.contentGroup.clip(h)),v(d),o||(this.nav=o=p.g().attr({zIndex:1}).add(this.group),this.up=p.symbol('triangle',0,0,s,s).add(o),x('upTracker').on('click',function(){e.scroll(-1,y)}),this.pager=p.text('',15,10).addClass('highcharts-legend-navigation'),f.styledMode||this.pager.css(u.style),this.pager.add(o),this.down=p.symbol('triangle-down',0,0,s,s).add(o),x('downTracker').on('click',function(){e.scroll(1,y)})),e.scroll(0),t=i):o&&(v(),this.nav=o.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0);return t};t.prototype.scroll=function(t,e){var c=this,a=this.chart,h=this.pages,o=h.length,i=this.currentPage+t;t=this.clipHeight;var n=this.options.navigation,l=this.pager,p=this.padding;i>o&&(i=o);0<i&&('undefined'!==typeof e&&M(e,a),this.nav.attr({translateX:p,translateY:t+this.padding+7+this.titleHeight,visibility:'visible'}),[this.up,this.upTracker].forEach(function(t){t.attr({'class':1===i?'highcharts-legend-nav-inactive':'highcharts-legend-nav-active'})}),l.attr({text:i+'/'+o}),[this.down,this.downTracker].forEach(function(t){t.attr({x:18+this.pager.getBBox().width,'class':i===o?'highcharts-legend-nav-inactive':'highcharts-legend-nav-active'})},this),a.styledMode||(this.up.attr({fill:1===i?n.inactiveColor:n.activeColor}),this.upTracker.css({cursor:1===i?'default':'pointer'}),this.down.attr({fill:i===o?n.inactiveColor:n.activeColor}),this.downTracker.css({cursor:i===o?'default':'pointer'})),this.scrollOffset=-h[i-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=i,this.positionCheckboxes(),e=C(r(e,a.renderer.globalAnimation,!0)),b(function(){s(c,'afterScroll',{currentPage:i})},e.duration))};t.prototype.setItemEvents=function(t,e,o){var r=this,h=r.chart.renderer.boxWrapper,a=t instanceof i,l='highcharts-legend-'+(a?'point':'series')+'-active',p=r.chart.styledMode;(o?[e,t.legendSymbol]:[t.legendGroup]).forEach(function(i){if(i)i.on('mouseover',function(){t.visible&&r.allItems.forEach(function(e){t!==e&&e.setState('inactive',!a)});t.setState('hover');t.visible&&h.addClass(l);p||e.css(r.options.itemHoverStyle)}).on('mouseout',function(){r.chart.styledMode||e.css(n(t.visible?r.itemStyle:r.itemHiddenStyle));r.allItems.forEach(function(e){t!==e&&e.setState('',!a)});h.removeClass(l);t.setState()}).on('click',function(e){var i=function(){t.setVisible&&t.setVisible();r.allItems.forEach(function(e){t!==e&&e.setState(t.visible?'inactive':'',!a)})};h.removeClass(l);e={browserEvent:e};t.firePointEvent?t.firePointEvent('legendItemClick',e,i):s(t,'legendItemClick',e,i)})})};t.prototype.createCheckboxForItem=function(t){t.checkbox=d('input',{type:'checkbox',className:'highcharts-legend-checkbox',checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container);a(t.checkbox,'click',function(e){s(t.series||t,'checkboxClick',{checked:e.target.checked,item:t},function(){t.select()})})};return t}();(/Trident\/7\.0/.test(c.navigator&&c.navigator.userAgent)||t)&&o(l.prototype,'positionItem',function(t,e){var i=this,o=function(){e._legendItemPos&&t.call(i,e)};o();i.bubbleLegend||setTimeout(o)});e.Legend=l;return e.Legend});i(e,'Core/Series/SeriesRegistry.js',[e['Core/Globals.js'],e['Core/Options.js'],e['Core/Series/Point.js'],e['Core/Utilities.js']],function(t,e,i,o){var s=e.defaultOptions,a=o.error,n=o.extendClass,h=o.merge,r;(function(t){function e(e,o){var n=s.plotOptions||{},r=o.defaultOptions;o.prototype.pointClass||(o.prototype.pointClass=i);o.prototype.type=e;r&&(n[e]=r);t.seriesTypes[e]=o};t.seriesTypes={};t.getSeries=function(e,i){void 0===i&&(i={});var o=e.options.chart;o=i.type||o.type||o.defaultSeriesType||'';var r=t.seriesTypes[o];t||a(17,!0,e,{missingModuleFor:o});o=new r;'function'===typeof o.init&&o.init(e,i);return o};t.registerSeriesType=e;t.seriesType=function(o,r,a,l,p){var c=s.plotOptions||{};r=r||'';c[o]=h(c[r],a);e(o,n(t.seriesTypes[r]||function(){},l));t.seriesTypes[o].prototype.type=o;p&&(t.seriesTypes[o].prototype.pointClass=n(i,p));return t.seriesTypes[o]}})(r||(r={}));t.seriesType=r.seriesType;t.seriesTypes=r.seriesTypes;return r});i(e,'Core/Chart/Chart.js',[e['Core/Animation/AnimationUtilities.js'],e['Core/Axis/Axis.js'],e['Core/Globals.js'],e['Core/Legend.js'],e['Core/MSPointer.js'],e['Core/Options.js'],e['Core/Color/Palette.js'],e['Core/Pointer.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Time.js'],e['Core/Utilities.js'],e['Core/Renderer/HTML/AST.js']],function(t,e,i,o,r,s,h,l,f,g,a,I){var P=t.animate,H=t.animObject,T=t.setAnimation,m=i.charts,v=i.doc,x=i.win,z=s.defaultOptions,Y=s.time,L=f.seriesTypes,k=a.addEvent,B=a.attr,F=a.cleanRecursively,O=a.createElement,d=a.css,c=a.defined,V=a.discardElement,U=a.erase,R=a.error,b=a.extend,E=a.find,n=a.fireEvent,C=a.getStyle,Z=a.isArray,K=a.isFunction,M=a.isNumber,j=a.isObject,w=a.isString,u=a.merge,q=a.numberFormat,S=a.objectEach,p=a.pick,D=a.pInt,N=a.relativeLength,X=a.removeEvent,A=a.splat,G=a.syncTimeout,J=a.uniqueKey,W=i.marginNames,y=function(){function t(t,e,i){this.yAxis=this.xAxis=this.userOptions=this.titleOffset=this.time=this.symbolCounter=this.spacingBox=this.spacing=this.series=this.renderTo=this.renderer=this.pointer=this.pointCount=this.plotWidth=this.plotTop=this.plotLeft=this.plotHeight=this.plotBox=this.options=this.numberFormatter=this.margin=this.legend=this.labelCollectors=this.isResizing=this.index=this.container=this.colorCounter=this.clipBox=this.chartWidth=this.chartHeight=this.bounds=this.axisOffset=this.axes=void 0;this.getArgs(t,e,i)};t.prototype.getArgs=function(t,e,i){w(t)||t.nodeName?(this.renderTo=t,this.init(e,i)):this.init(t,e)};t.prototype.init=function(t,e){var o,s=t.series,r=t.plotOptions||{};n(this,'init',{args:arguments},function(){t.series=null;o=u(z,t);var h=o.chart||{};S(o.plotOptions,function(t,e){j(t)&&(t.tooltip=r[e]&&u(r[e].tooltip)||void 0)});o.tooltip.userOptions=t.chart&&t.chart.forExport&&t.tooltip.userOptions||t.tooltip;o.series=t.series=s;this.userOptions=t;var l=h.events;this.margin=[];this.spacing=[];this.bounds={h:{},v:{}};this.labelCollectors=[];this.callback=e;this.isResizing=0;this.options=o;this.axes=[];this.series=[];this.time=t.time&&Object.keys(t.time).length?new g(t.time):i.time;this.numberFormatter=h.numberFormatter||q;this.styledMode=h.styledMode;this.hasCartesianSeries=h.showAxes;var a=this;a.index=m.length;m.push(a);i.chartCount++;l&&S(l,function(t,e){K(t)&&k(a,e,t)});a.xAxis=[];a.yAxis=[];a.pointCount=a.colorCounter=a.symbolCounter=0;n(a,'afterInit');a.firstRender()})};t.prototype.initSeries=function(t){var e=this.options.chart;e=t.type||e.type||e.defaultSeriesType;var i=L[e];i||R(17,!0,this,{missingModuleFor:e});e=new i;'function'===typeof e.init&&e.init(this,t);return e};t.prototype.setSeriesData=function(){this.getSeriesOrderByLinks().forEach(function(t){t.points||t.data||!t.enabledDataSorting||t.setData(t.options.data,!1)})};t.prototype.getSeriesOrderByLinks=function(){return this.series.concat().sort(function(t,e){return t.linkedSeries.length||e.linkedSeries.length?e.linkedSeries.length-t.linkedSeries.length:0})};t.prototype.orderSeries=function(t){var e=this.series;for(t=t||0;t<e.length;t++)e[t]&&(e[t].index=t,e[t].name=e[t].getName())};t.prototype.isInsidePlot=function(t,e,i){var o=i?e:t;t=i?t:e;o={x:o,y:t,isInsidePlot:0<=o&&o<=this.plotWidth&&0<=t&&t<=this.plotHeight};n(this,'afterIsInsidePlot',o);return o.isInsidePlot};t.prototype.redraw=function(t){n(this,'beforeRedraw');var r=this.hasCartesianSeries?this.axes:this.colorAxis||[],i=this.series,p=this.pointer,s=this.legend,a=this.userOptions.legend,h=this.isDirtyLegend,o=this.isDirtyBox,c=this.renderer,d=c.isHidden(),u=[];this.setResponsive&&this.setResponsive(!1);T(this.hasRendered?t:!1,this);d&&this.temporaryDisplay();this.layOutTitles();for(t=i.length;t--;){var e=i[t];if(e.options.stacking||e.options.centerInCategory){var l=!0;if(e.isDirty){var f=!0;break}}};if(f)for(t=i.length;t--;)e=i[t],e.options.stacking&&(e.isDirty=!0);i.forEach(function(t){t.isDirty&&('point'===t.options.legendType?('function'===typeof t.updateTotals&&t.updateTotals(),h=!0):a&&(a.labelFormatter||a.labelFormat)&&(h=!0));t.isDirtyData&&n(t,'updatedData')});h&&s&&s.options.enabled&&(s.render(),this.isDirtyLegend=!1);l&&this.getStacks();r.forEach(function(t){t.updateNames();t.setScale()});this.getMargins();r.forEach(function(t){t.isDirty&&(o=!0)});r.forEach(function(t){var e=t.min+','+t.max;t.extKey!==e&&(t.extKey=e,u.push(function(){n(t,'afterSetExtremes',b(t.eventArgs,t.getExtremes()));delete t.eventArgs}));(o||l)&&t.redraw()});o&&this.drawChartBox();n(this,'predraw');i.forEach(function(t){(o||t.isDirty)&&t.visible&&t.redraw();t.isDirtyData=!1});p&&p.reset(!0);c.draw();n(this,'redraw');n(this,'render');d&&this.temporaryDisplay(!0);u.forEach(function(t){t.call()})};t.prototype.get=function(t){function o(e){return e.id===t||e.options&&e.options.id===t};var r=this.series,e,i=E(this.axes,o)||E(this.series,o);for(e=0;!i&&e<r.length;e++)i=E(r[e].points||[],o);return i};t.prototype.getAxes=function(){var o=this,t=this.options,i=t.xAxis=A(t.xAxis||{});t=t.yAxis=A(t.yAxis||{});n(this,'getAxes');i.forEach(function(t,e){t.index=e;t.isX=!0});t.forEach(function(t,e){t.index=e});i.concat(t).forEach(function(t){new e(o,t)});n(this,'afterGetAxes')};t.prototype.getSelectedPoints=function(){var t=[];this.series.forEach(function(e){t=t.concat(e.getPointsCollection().filter(function(t){return p(t.selectedStaging,t.selected)}))});return t};t.prototype.getSelectedSeries=function(){return this.series.filter(function(t){return t.selected})};t.prototype.setTitle=function(t,e,i){this.applyDescription('title',t);this.applyDescription('subtitle',e);this.applyDescription('caption',void 0);this.layOutTitles(i)};t.prototype.applyDescription=function(t,e){var r=this,o='title'===t?{color:h.neutralColor80,fontSize:this.options.isStock?'16px':'18px'}:{color:h.neutralColor60};o=this.options[t]=u(!this.styledMode&&{style:o},this.options[t],e);var i=this[t];i&&e&&(this[t]=i=i.destroy());o&&!i&&(i=this.renderer.text(o.text,0,0,o.useHTML).attr({align:o.align,'class':'highcharts-'+t,zIndex:o.zIndex||4}).add(),i.update=function(e){r[{title:'setTitle',subtitle:'setSubtitle',caption:'setCaption'}[t]](e)},this.styledMode||i.css(o.style),this[t]=i)};t.prototype.layOutTitles=function(t){var e=[0,0,0],o=this.renderer,r=this.spacingBox;['title','subtitle','caption'].forEach(function(t){var s=this[t],i=this.options[t],a=i.verticalAlign||'top';t='title'===t?-3:'top'===a?e[0]+2:0;if(s){if(!this.styledMode)var n=i.style.fontSize;n=o.fontMetrics(n,s).b;s.css({width:(i.width||r.width+(i.widthAdjust||0))+'px'});var h=Math.round(s.getBBox(i.useHTML).height);s.align(b({y:'bottom'===a?n:t+n,height:h},i),!1,'spacingBox');i.floating||('top'===a?e[0]=Math.ceil(e[0]+h):'bottom'===a&&(e[2]=Math.ceil(e[2]+h)))}},this);e[0]&&'top'===(this.options.title.verticalAlign||'top')&&(e[0]+=this.options.title.margin);e[2]&&'bottom'===this.options.caption.verticalAlign&&(e[2]+=this.options.caption.margin);var i=!this.titleOffset||this.titleOffset.join(',')!==e.join(',');this.titleOffset=e;n(this,'afterLayOutTitles');!this.isDirtyBox&&i&&(this.isDirtyBox=this.isDirtyLegend=i,this.hasRendered&&p(t,!0)&&this.isDirtyBox&&this.redraw())};t.prototype.getChartSize=function(){var t=this.options.chart,i=t.width;t=t.height;var e=this.renderTo;c(i)||(this.containerWidth=C(e,'width'));c(t)||(this.containerHeight=C(e,'height'));this.chartWidth=Math.max(0,i||this.containerWidth||600);this.chartHeight=Math.max(0,N(t,this.chartWidth)||(1<this.containerHeight?this.containerHeight:400))};t.prototype.temporaryDisplay=function(t){var e=this.renderTo;if(t)for(;e&&e.style;)e.hcOrigStyle&&(d(e,e.hcOrigStyle),delete e.hcOrigStyle),e.hcOrigDetached&&(v.body.removeChild(e),e.hcOrigDetached=!1),e=e.parentNode;else for(;e&&e.style;){v.body.contains(e)||e.parentNode||(e.hcOrigDetached=!0,v.body.appendChild(e));if('none'===C(e,'display',!1)||e.hcOricDetached)e.hcOrigStyle={display:e.style.display,height:e.style.height,overflow:e.style.overflow},t={display:'block',overflow:'hidden'},e!==this.renderTo&&(t.height=0),d(e,t),e.offsetWidth||e.style.setProperty('display','block','important');e=e.parentNode;if(e===v.body)break}};t.prototype.setClassName=function(t){this.container.className='highcharts-container '+(t||'')};t.prototype.getContainer=function(){var r=this.options,o=r.chart,t=this.renderTo,l=J(),a,h;t||(this.renderTo=t=o.renderTo);w(t)&&(this.renderTo=t=v.getElementById(t));t||R(13,!0,this);var e=D(B(t,'data-highcharts-chart'));M(e)&&m[e]&&m[e].hasRendered&&m[e].destroy();B(t,'data-highcharts-chart',this.index);t.innerHTML='';o.skipClone||t.offsetWidth||this.temporaryDisplay();this.getChartSize();e=this.chartWidth;var s=this.chartHeight;d(t,{overflow:'hidden'});this.styledMode||(a=b({position:'relative',overflow:'hidden',width:e+'px',height:s+'px',textAlign:'left',lineHeight:'normal',zIndex:0,'-webkit-tap-highlight-color':'rgba(0,0,0,0)',userSelect:'none'},o.style));this.container=t=O('div',{id:l},a,t);this._cursor=t.style.cursor;this.renderer=new(i[o.renderer]||i.Renderer)(t,e,s,null,o.forExport,r.exporting&&r.exporting.allowHTML,this.styledMode);T(void 0,this);this.setClassName(o.className);if(this.styledMode)for(h in r.defs)this.renderer.definition(r.defs[h]);else this.renderer.setStyle(o.style);this.renderer.chartIndex=this.index;n(this,'afterGetContainer')};t.prototype.getMargins=function(t){var i=this.spacing,o=this.margin,e=this.titleOffset;this.resetMargins();e[0]&&!c(o[0])&&(this.plotTop=Math.max(this.plotTop,e[0]+i[0]));e[2]&&!c(o[2])&&(this.marginBottom=Math.max(this.marginBottom,e[2]+i[2]));this.legend&&this.legend.display&&this.legend.adjustMargins(o,i);n(this,'getMargins');t||this.getAxisMargins()};t.prototype.getAxisMargins=function(){var t=this,o=t.axisOffset=[0,0,0,0],e=t.colorAxis,r=t.margin,i=function(t){t.forEach(function(t){t.visible&&t.getOffset()})};t.hasCartesianSeries?i(t.axes):e&&e.length&&i(e);W.forEach(function(e,i){c(r[i])||(t[e]+=o[i])});t.setChartSize()};t.prototype.reflow=function(t){var e=this,i=e.options.chart,o=e.renderTo,s=c(i.width)&&c(i.height),r=i.width||C(o,'width');i=i.height||C(o,'height');o=t?t.target:x;delete e.pointer.chartPosition;if(!s&&!e.isPrinting&&r&&i&&(o===x||o===v)){if(r!==e.containerWidth||i!==e.containerHeight)a.clearTimeout(e.reflowTimeout),e.reflowTimeout=G(function(){e.container&&e.setSize(void 0,void 0,!1)},t?100:0);e.containerWidth=r;e.containerHeight=i}};t.prototype.setReflow=function(t){var e=this;!1===t||this.unbindReflow?!1===t&&this.unbindReflow&&(this.unbindReflow=this.unbindReflow()):(this.unbindReflow=k(x,'resize',function(t){e.options&&e.reflow(t)}),k(this,'destroy',this.unbindReflow))};t.prototype.setSize=function(t,e,i){var o=this,r=o.renderer;o.isResizing+=1;T(i,o);i=r.globalAnimation;o.oldChartHeight=o.chartHeight;o.oldChartWidth=o.chartWidth;'undefined'!==typeof t&&(o.options.chart.width=t);'undefined'!==typeof e&&(o.options.chart.height=e);o.getChartSize();o.styledMode||(i?P:d)(o.container,{width:o.chartWidth+'px',height:o.chartHeight+'px'},i);o.setChartSize(!0);r.setSize(o.chartWidth,o.chartHeight,i);o.axes.forEach(function(t){t.isDirty=!0;t.setScale()});o.isDirtyLegend=!0;o.isDirtyBox=!0;o.layOutTitles();o.getMargins();o.redraw(i);o.oldChartHeight=null;n(o,'resize');G(function(){o&&n(o,'endResize',null,function(){--o.isResizing})},H(i).duration)};t.prototype.setChartSize=function(t){var o=this.inverted,r=this.renderer,e=this.chartWidth,c=this.chartHeight,d=this.options.chart,i=this.spacing,s=this.clipOffset,l,p,a,h;this.plotLeft=l=Math.round(this.plotLeft);this.plotTop=p=Math.round(this.plotTop);this.plotWidth=a=Math.max(0,Math.round(e-l-this.marginRight));this.plotHeight=h=Math.max(0,Math.round(c-p-this.marginBottom));this.plotSizeX=o?h:a;this.plotSizeY=o?a:h;this.plotBorderWidth=d.plotBorderWidth||0;this.spacingBox=r.spacingBox={x:i[3],y:i[0],width:e-i[3]-i[1],height:c-i[0]-i[2]};this.plotBox=r.plotBox={x:l,y:p,width:a,height:h};e=2*Math.floor(this.plotBorderWidth/2);o=Math.ceil(Math.max(e,s[3])/2);r=Math.ceil(Math.max(e,s[0])/2);this.clipBox={x:o,y:r,width:Math.floor(this.plotSizeX-Math.max(e,s[1])/2-o),height:Math.max(0,Math.floor(this.plotSizeY-Math.max(e,s[2])/2-r))};t||this.axes.forEach(function(t){t.setAxisSize();t.setAxisTranslation()});n(this,'afterSetChartSize',{skipAxes:t})};t.prototype.resetMargins=function(){n(this,'resetMargins');var t=this,e=t.options.chart;['margin','spacing'].forEach(function(i){var o=e[i],r=j(o)?o:[o,o,o,o];['Top','Right','Bottom','Left'].forEach(function(o,s){t[i][s]=p(e[i+o],r[s])})});W.forEach(function(e,i){t[e]=p(t.margin[i],t.spacing[i])});t.axisOffset=[0,0,0,0];t.clipOffset=[0,0,0,0]};t.prototype.drawChartBox=function(){var t=this.options.chart,a=this.renderer,b=this.chartWidth,C=this.chartHeight,o=this.chartBackground,l=this.plotBackground,r=this.plotBorder,d=this.styledMode,p=this.plotBGImage,h=t.backgroundColor,M=t.plotBackgroundColor,c=t.plotBackgroundImage,s,f=this.plotLeft,g=this.plotTop,m=this.plotWidth,y=this.plotHeight,v=this.plotBox,x=this.clipRect,u=this.clipBox,e='animate';o||(this.chartBackground=o=a.rect().addClass('highcharts-background').add(),e='attr');if(d)var i=s=o.strokeWidth();else{i=t.borderWidth||0;s=i+(t.shadow?8:0);h={fill:h||'none'};if(i||o['stroke-width'])h.stroke=t.borderColor,h['stroke-width']=i;o.attr(h).shadow(t.shadow)};o[e]({x:s/2,y:s/2,width:b-s-i%2,height:C-s-i%2,r:t.borderRadius});e='animate';l||(e='attr',this.plotBackground=l=a.rect().addClass('highcharts-plot-background').add());l[e](v);d||(l.attr({fill:M||'none'}).shadow(t.plotShadow),c&&(p?(c!==p.attr('href')&&p.attr('href',c),p.animate(v)):this.plotBGImage=a.image(c,f,g,m,y).add()));x?x.animate({width:u.width,height:u.height}):this.clipRect=a.clipRect(u);e='animate';r||(e='attr',this.plotBorder=r=a.rect().addClass('highcharts-plot-border').attr({zIndex:1}).add());d||r.attr({stroke:t.plotBorderColor,'stroke-width':t.plotBorderWidth||0,fill:'none'});r[e](r.crisp({x:f,y:g,width:m,height:y},-r.strokeWidth()));this.isDirtyBox=!1;n(this,'afterDrawChartBox')};t.prototype.propFromSeries=function(){var i=this,o=i.options.chart,t,r=i.options.series,s,e;['inverted','angular','polar'].forEach(function(n){t=L[o.type||o.defaultSeriesType];e=o[n]||t&&t.prototype[n];for(s=r&&r.length;!e&&s--;)(t=L[r[s].type])&&t.prototype[n]&&(e=!0);i[n]=e})};t.prototype.linkSeries=function(){var t=this,e=t.series;e.forEach(function(t){t.linkedSeries.length=0});e.forEach(function(e){var i=e.options.linkedTo;w(i)&&(i=':previous'===i?t.series[e.index-1]:t.get(i))&&i.linkedParent!==e&&(i.linkedSeries.push(e),e.linkedParent=i,i.enabledDataSorting&&e.setDataSortingOptions(),e.visible=p(e.options.visible,i.options.visible,e.visible))});n(this,'afterLinkSeries')};t.prototype.renderSeries=function(){this.series.forEach(function(t){t.translate();t.render()})};t.prototype.renderLabels=function(){var t=this,e=t.options.labels;e.items&&e.items.forEach(function(i){var o=b(e.style,i.style),r=D(o.left)+t.plotLeft,s=D(o.top)+t.plotTop+12;delete o.left;delete o.top;t.renderer.text(i.html,r,s).attr({zIndex:2}).css(o).add()})};t.prototype.render=function(){var t=this.axes,e=this.colorAxis,l=this.renderer,i=this.options,n=0,a=function(t){t.forEach(function(t){t.visible&&t.render()})};this.setTitle();this.legend=new o(this,i.legend);this.getStacks&&this.getStacks();this.getMargins(!0);this.setChartSize();i=this.plotWidth;t.some(function(t){if(t.horiz&&t.visible&&t.options.labels.enabled&&t.series.length)return n=21,!0});var h=this.plotHeight=Math.max(this.plotHeight-n,0);t.forEach(function(t){t.setScale()});this.getAxisMargins();var r=1.1<i/this.plotWidth,s=1.05<h/this.plotHeight;if(r||s)t.forEach(function(t){(t.horiz&&r||!t.horiz&&s)&&t.setTickInterval(!0)}),this.getMargins();this.drawChartBox();this.hasCartesianSeries?a(t):e&&e.length&&a(e);this.seriesGroup||(this.seriesGroup=l.g('series-group').attr({zIndex:3}).add());this.renderSeries();this.renderLabels();this.addCredits();this.setResponsive&&this.setResponsive();this.hasRendered=!0};t.prototype.addCredits=function(t){var i=this,e=u(!0,this.options.credits,t);e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text+(this.mapCredits||''),0,0).addClass('highcharts-credits').on('click',function(){e.href&&(x.location.href=e.href)}).attr({align:e.position.align,zIndex:8}),i.styledMode||this.credits.css(e.style),this.credits.add().align(e.position),this.credits.update=function(t){i.credits=i.credits.destroy();i.addCredits(t)})};t.prototype.destroy=function(){var t=this,r=t.axes,s=t.series,o=t.container,e,a=o&&o.parentNode;n(t,'destroy');t.renderer.forExport?U(m,t):m[t.index]=void 0;i.chartCount--;t.renderTo.removeAttribute('data-highcharts-chart');X(t);for(e=r.length;e--;)r[e]=r[e].destroy();this.scroller&&this.scroller.destroy&&this.scroller.destroy();for(e=s.length;e--;)s[e]=s[e].destroy();'title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer'.split(' ').forEach(function(e){var i=t[e];i&&i.destroy&&(t[e]=i.destroy())});o&&(o.innerHTML='',X(o),a&&V(o));S(t,function(e,i){delete t[i]})};t.prototype.firstRender=function(){var t=this,e=t.options;if(!t.isReadyToRender||t.isReadyToRender()){t.getContainer();t.resetMargins();t.setChartSize();t.propFromSeries();t.getAxes();(Z(e.series)?e.series:[]).forEach(function(e){t.initSeries(e)});t.linkSeries();t.setSeriesData();n(t,'beforeRender');l&&(t.pointer=i.hasTouch||!x.PointerEvent&&!x.MSPointerEvent?new l(t,e):new r(t,e));t.render();t.pointer.getChartPosition();if(!t.renderer.imgCount&&!t.hasLoaded)t.onload();t.temporaryDisplay(!0)}};t.prototype.onload=function(){this.callbacks.concat([this.callback]).forEach(function(t){t&&'undefined'!==typeof this.index&&t.apply(this,[this])},this);n(this,'load');n(this,'render');c(this.index)&&this.setReflow(this.options.chart.reflow);this.hasLoaded=!0};t.prototype.addSeries=function(t,e,i){var r,o=this;t&&(e=p(e,!0),n(o,'addSeries',{options:t},function(){r=o.initSeries(t);o.isDirtyLegend=!0;o.linkSeries();r.enabledDataSorting&&r.setData(t.data,!1);n(o,'afterAddSeries',{series:r});e&&o.redraw(i)}));return r};t.prototype.addAxis=function(t,e,i,o){return this.createAxis(e?'xAxis':'yAxis',{axis:t,redraw:i,animation:o})};t.prototype.addColorAxis=function(t,e,i){return this.createAxis('colorAxis',{axis:t,redraw:e,animation:i})};t.prototype.createAxis=function(t,o){var r=this.options,s='colorAxis'===t,a=o.redraw,h=o.animation;o=u(o.axis,{index:this[t].length,isX:'xAxis'===t});var n=s?new i.ColorAxis(this,o):new e(this,o);r[t]=A(r[t]||{});r[t].push(o);s&&(this.isDirtyLegend=!0,this.axes.forEach(function(t){t.series=[]}),this.series.forEach(function(t){t.bindAxes();t.isDirtyData=!0}));p(a,!0)&&this.redraw(h);return n};t.prototype.showLoading=function(t){var e=this,s=e.options,i=e.loadingDiv,o=e.loadingSpan,r=s.loading,n=function(){i&&d(i,{left:e.plotLeft+'px',top:e.plotTop+'px',width:e.plotWidth+'px',height:e.plotHeight+'px'})};i||(e.loadingDiv=i=O('div',{className:'highcharts-loading highcharts-loading-hidden'},null,e.container));o||(e.loadingSpan=o=O('span',{className:'highcharts-loading-inner'},null,i),k(e,'redraw',n));i.className='highcharts-loading';I.setElementHTML(o,p(t,s.lang.loading,''));e.styledMode||(d(i,b(r.style,{zIndex:10})),d(o,r.labelStyle),e.loadingShown||(d(i,{opacity:0,display:''}),P(i,{opacity:r.style.opacity||.5},{duration:r.showDuration||0})));e.loadingShown=!0;n()};t.prototype.hideLoading=function(){var e=this.options,t=this.loadingDiv;t&&(t.className='highcharts-loading highcharts-loading-hidden',this.styledMode||P(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){d(t,{display:'none'})}}));this.loadingShown=!1};t.prototype.update=function(t,e,i,o){var r=this,l={credits:'addCredits',title:'setTitle',subtitle:'setSubtitle',caption:'setCaption'},s,h,d,f=t.isResponsiveOptions,m=[];n(r,'update',{options:t});f||r.setResponsive(!1,!0);t=F(t,r.options);r.userOptions=u(r.userOptions,t);if(s=t.chart){u(!0,r.options.chart,s);'className' in s&&r.setClassName(s.className);'reflow' in s&&r.setReflow(s.reflow);if('inverted' in s||'polar' in s||'type' in s){r.propFromSeries();var a=!0};'alignTicks' in s&&(a=!0);S(s,function(t,e){-1!==r.propsRequireUpdateSeries.indexOf('chart.'+e)&&(h=!0);-1!==r.propsRequireDirtyBox.indexOf(e)&&(r.isDirtyBox=!0);-1!==r.propsRequireReflow.indexOf(e)&&(f?r.isDirtyBox=!0:d=!0)});!r.styledMode&&'style' in s&&r.renderer.setStyle(s.style)};!r.styledMode&&t.colors&&(this.options.colors=t.colors);t.time&&(this.time===Y&&(this.time=new g(t.time)),u(!0,r.options.time,t.time));S(t,function(e,i){if(r[i]&&'function'===typeof r[i].update)r[i].update(e,!1);else if('function'===typeof r[l[i]])r[l[i]](e);else'color'!==i&&-1===r.collectionsWithUpdate.indexOf(i)&&u(!0,r.options[i],t[i]);'chart'!==i&&-1!==r.propsRequireUpdateSeries.indexOf(i)&&(h=!0)});this.collectionsWithUpdate.forEach(function(e){if(t[e]){if('series'===e){var o=[];r[e].forEach(function(t,e){t.options.isInternal||o.push(p(t.options.index,e))})};A(t[e]).forEach(function(t,s){var a=c(t.id),n;a&&(n=r.get(t.id));!n&&r[e]&&(n=r[e][o?o[s]:s])&&a&&c(n.options.id)&&(n=void 0);n&&n.coll===e&&(n.update(t,!1),i&&(n.touched=!0));!n&&i&&r.collectionsWithInit[e]&&(r.collectionsWithInit[e][0].apply(r,[t].concat(r.collectionsWithInit[e][1]||[]).concat([!1])).touched=!0)});i&&r[e].forEach(function(t){t.touched||t.options.isInternal?delete t.touched:m.push(t)})}});m.forEach(function(t){t.chart&&t.remove(!1)});a&&r.axes.forEach(function(t){t.update({},!1)});h&&r.getSeriesOrderByLinks().forEach(function(t){t.chart&&t.update({},!1)},this);a=s&&s.width;s=s&&s.height;w(s)&&(s=N(s,a||r.chartWidth));d||M(a)&&a!==r.chartWidth||M(s)&&s!==r.chartHeight?r.setSize(a,s,o):p(e,!0)&&r.redraw(o);n(r,'afterUpdate',{options:t,redraw:e,animation:o})};t.prototype.setSubtitle=function(t,e){this.applyDescription('subtitle',t);this.layOutTitles(e)};t.prototype.setCaption=function(t,e){this.applyDescription('caption',t);this.layOutTitles(e)};t.prototype.showResetZoom=function(){function a(){e.zoomOut()};var e=this,i=z.lang,t=e.options.chart.resetZoomButton,o=t.theme,r=o.states,s='chart'===t.relativeTo||'spaceBox'===t.relativeTo?null:this.scrollablePlotBox||'plotBox';n(this,'beforeShowResetZoom',null,function(){e.resetZoomButton=e.renderer.button(i.resetZoom,null,null,a,o,r&&r.hover).attr({align:t.position.align,title:i.resetZoomTitle}).addClass('highcharts-reset-zoom').add().align(t.position,!1,s)});n(this,'afterShowResetZoom')};t.prototype.zoomOut=function(){n(this,'selection',{resetSelection:!0},this.zoom)};t.prototype.zoom=function(t){var e=this,r,i=e.pointer,s=!1,n=e.inverted?i.mouseDownX:i.mouseDownY;!t||t.resetSelection?(e.axes.forEach(function(t){r=t.zoom()}),i.initiated=!1):t.xAxis.concat(t.yAxis).forEach(function(t){var o=t.axis,a=e.inverted?o.left:o.top,p=e.inverted?a+o.width:a+o.height,h=o.isXAxis,l=!1;if(!h&&n>=a&&n<=p||h||!c(n))l=!0;i[h?'zoomX':'zoomY']&&l&&(r=o.zoom(t.min,t.max),o.displayBtn&&(s=!0))});var o=e.resetZoomButton;s&&!o?e.showResetZoom():!s&&j(o)&&(e.resetZoomButton=o.destroy());r&&e.redraw(p(e.options.chart.animation,t&&t.animation,100>e.pointCount))};t.prototype.pan=function(t,e){var i=this,s=i.hoverPoints,r=i.options.chart,h=i.options.mapNavigation&&i.options.mapNavigation.enabled,a;e='object'===typeof e?e:{enabled:e,type:'x'};r&&r.panning&&(r.panning=e);var o=e.type;n(this,'pan',{originalEvent:t},function(){s&&s.forEach(function(t){t.setState()});var e=[1];'xy'===o?e=[1,0]:'y'===o&&(e=[0]);e.forEach(function(e){var r=i[e?'xAxis':'yAxis'][0],f=r.horiz,g=t[f?'chartX':'chartY'];f=f?'mouseDownX':'mouseDownY';var c=i[f],d=(r.pointRange||0)/2,n=r.reversed&&!i.inverted||!r.reversed&&i.inverted?-1:1,u=r.getExtremes(),l=r.toValue(c-g,!0)+d*n;n=r.toValue(c+r.len-g,!0)-d*n;var m=n<l;c=m?n:l;l=m?l:n;n=r.hasVerticalPanning();var s=r.panningState;!n||e||s&&!s.isDirty||r.series.forEach(function(t){var e=t.getProcessedData(!0);e=t.getExtremes(e.yData,!0);s||(s={startMin:Number.MAX_VALUE,startMax:-Number.MAX_VALUE});M(e.dataMin)&&M(e.dataMax)&&(s.startMin=Math.min(p(t.options.threshold,Infinity),e.dataMin,s.startMin),s.startMax=Math.max(p(t.options.threshold,-Infinity),e.dataMax,s.startMax))});e=Math.min(p(null===s||void 0===s?void 0:s.startMin,u.dataMin),d?u.min:r.toValue(r.toPixels(u.min)-r.minPixelPadding));d=Math.max(p(null===s||void 0===s?void 0:s.startMax,u.dataMax),d?u.max:r.toValue(r.toPixels(u.max)+r.minPixelPadding));r.panningState=s;r.isOrdinal||(n=e-c,0<n&&(l+=n,c=e),n=l-d,0<n&&(l=d,c-=n),r.series.length&&c!==u.min&&l!==u.max&&c>=e&&l<=d&&(r.setExtremes(c,l,!1,!1,{trigger:'pan'}),i.resetZoomButton||h||c===e||l===d||!o.match('y')||(i.showResetZoom(),r.displayBtn=!1),a=!0),i[f]=g)});a&&i.redraw(!1);d(i.container,{cursor:'move'})})};return t}();b(y.prototype,{callbacks:[],collectionsWithInit:{xAxis:[y.prototype.addAxis,[!0]],yAxis:[y.prototype.addAxis,[!1]],series:[y.prototype.addSeries]},collectionsWithUpdate:['xAxis','yAxis','zAxis','series'],propsRequireDirtyBox:'backgroundColor borderColor borderWidth borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow'.split(' '),propsRequireReflow:'margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft'.split(' '),propsRequireUpdateSeries:'chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions time tooltip'.split(' ')});i.chart=function(t,e,i){return new y(t,e,i)};i.Chart=y;'';return y});i(e,'Mixins/LegendSymbol.js',[e['Core/Globals.js'],e['Core/Utilities.js']],function(t,e){var o=e.merge,i=e.pick;return t.LegendSymbolMixin={drawRectangle:function(t,e){var o=t.symbolHeight,r=t.options.squareSymbol;e.legendSymbol=this.chart.renderer.rect(r?(t.symbolWidth-o)/2:0,t.baseline-o+1,r?o:t.symbolWidth,o,i(t.options.symbolRadius,o/2)).addClass('highcharts-point').attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e=this.options,r=e.marker,n=t.symbolWidth,a=t.symbolHeight,h=a/2,l=this.chart.renderer,p=this.legendGroup;t=t.baseline-Math.round(.3*t.fontMetrics.b);var s={};this.chart.styledMode||(s={'stroke-width':e.lineWidth||0},e.dashStyle&&(s.dashstyle=e.dashStyle));this.legendLine=l.path([['M',0,t],['L',n,t]]).addClass('highcharts-graph').attr(s).add(p);r&&!1!==r.enabled&&n&&(e=Math.min(i(r.radius,h),h),0===this.symbol.indexOf('url')&&(r=o(r,{width:a,height:a}),e=0),this.legendSymbol=r=l.symbol(this.symbol,n/2-e,t-e,2*e,2*e,r).addClass('highcharts-point').add(p),r.isMarker=!0)}}});i(e,'Core/Series/Series.js',[e['Core/Animation/AnimationUtilities.js'],e['Core/Globals.js'],e['Mixins/LegendSymbol.js'],e['Core/Options.js'],e['Core/Color/Palette.js'],e['Core/Series/Point.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Renderer/SVG/SVGElement.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s,h,p,a){var M=t.animObject,E=t.setAnimation,j=e.hasTouch,D=e.svg,I=e.win,g=o.defaultOptions,u=h.seriesTypes,S=a.addEvent,x=a.arrayMax,k=a.arrayMin,m=a.clamp,z=a.cleanRecursively,w=a.correctFloat,c=a.defined,A=a.erase,y=a.error,f=a.extend,B=a.find,l=a.fireEvent,P=a.getNestedProperty,b=a.isArray,T=a.isFunction,d=a.isNumber,R=a.isString,v=a.merge,C=a.objectEach,n=a.pick,L=a.removeEvent,N=a.splat,O=a.syncTimeout;t=function(){function t(){this.zones=this.yAxis=this.xAxis=this.userOptions=this.tooltipOptions=this.processedYData=this.processedXData=this.points=this.options=this.linkedSeries=this.index=this.eventsToUnbind=this.eventOptions=this.data=this.chart=this._i=void 0};t.prototype.init=function(t,e){l(this,'init',{options:e});var i=this,o=t.series,s;this.eventOptions=this.eventOptions||{};this.eventsToUnbind=[];i.chart=t;i.options=e=i.setOptions(e);i.linkedSeries=[];i.bindAxes();f(i,{name:e.name,state:'',visible:!1!==e.visible,selected:!0===e.selected});var r=e.events;C(r,function(t,e){T(t)&&i.eventOptions[e]!==t&&(T(i.eventOptions[e])&&L(i,e,i.eventOptions[e]),i.eventOptions[e]=t,S(i,e,t))});if(r&&r.click||e.point&&e.point.events&&e.point.events.click||e.allowPointSelect)t.runTrackerClick=!0;i.getColor();i.getSymbol();i.parallelArrays.forEach(function(t){i[t+'Data']||(i[t+'Data']=[])});i.isCartesian&&(t.hasCartesianSeries=!0);o.length&&(s=o[o.length-1]);i._i=n(s&&s._i,-1)+1;i.opacity=i.options.opacity;t.orderSeries(this.insert(o));e.dataSorting&&e.dataSorting.enabled?i.setDataSortingOptions():i.points||i.data||i.setData(e.data,!1);l(this,'afterInit')};t.prototype.is=function(t){return u[t]&&this instanceof u[t]};t.prototype.insert=function(t){var i=this.options.index,e;if(d(i)){for(e=t.length;e--;)if(i>=n(t[e].options.index,t[e]._i)){t.splice(e+1,0,this);break};-1===e&&t.unshift(this);e+=1}
else t.push(this);return n(e,t.length-1)};t.prototype.bindAxes=function(){var t=this,e=t.options,o=t.chart,i;l(this,'bindAxes',null,function(){(t.axisTypes||[]).forEach(function(r){o[r].forEach(function(o){i=o.options;if(e[r]===i.index||'undefined'!==typeof e[r]&&e[r]===i.id||'undefined'===typeof e[r]&&0===i.index)t.insert(o.series),t[r]=o,o.isDirty=!0});t[r]||t.optionalAxis===r||y(18,!0,o)})});l(this,'afterBindAxes')};t.prototype.updateParallelArrays=function(t,e){var i=t.series,o=arguments,r=d(e)?function(o){var r='y'===o&&i.toYData?i.toYData(t):t[o];i[o+'Data'][e]=r}:function(t){Array.prototype[e].apply(i[t+'Data'],Array.prototype.slice.call(o,2))};i.parallelArrays.forEach(r)};t.prototype.hasData=function(){return this.visible&&'undefined'!==typeof this.dataMax&&'undefined'!==typeof this.dataMin||this.visible&&this.yData&&0<this.yData.length};t.prototype.autoIncrement=function(){var t=this.options,i=this.xIncrement,o,r=t.pointIntervalUnit,e=this.chart.time;i=n(i,t.pointStart,0);this.pointInterval=o=n(this.pointInterval,t.pointInterval,1);r&&(t=new e.Date(i),'day'===r?e.set('Date',t,e.get('Date',t)+o):'month'===r?e.set('Month',t,e.get('Month',t)+o):'year'===r&&e.set('FullYear',t,e.get('FullYear',t)+o),o=t.getTime()-i);this.xIncrement=i+o;return i};t.prototype.setDataSortingOptions=function(){var t=this.options;f(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1});c(t.pointRange)||(t.pointRange=1)};t.prototype.setOptions=function(t){var r=this.chart,o=r.options,i=o.plotOptions,e=r.userOptions||{};t=v(t);r=r.styledMode;var a={plotOptions:i,userOptions:t};l(this,'setOptions',a);var h=a.plotOptions[this.type],s=e.plotOptions||{};this.userOptions=a.userOptions;e=v(h,i.series,e.plotOptions&&e.plotOptions[this.type],t);this.tooltipOptions=v(g.tooltip,g.plotOptions.series&&g.plotOptions.series.tooltip,g.plotOptions[this.type].tooltip,o.tooltip.userOptions,i.series&&i.series.tooltip,i[this.type].tooltip,t.tooltip);this.stickyTracking=n(t.stickyTracking,s[this.type]&&s[this.type].stickyTracking,s.series&&s.series.stickyTracking,this.tooltipOptions.shared&&!this.noSharedTooltip?!0:e.stickyTracking);null===h.marker&&delete e.marker;this.zoneAxis=e.zoneAxis;o=this.zones=(e.zones||[]).slice();!e.negativeColor&&!e.negativeFillColor||e.zones||(i={value:e[this.zoneAxis+'Threshold']||e.threshold||0,className:'highcharts-negative'},r||(i.color=e.negativeColor,i.fillColor=e.negativeFillColor),o.push(i));o.length&&c(o[o.length-1].value)&&o.push(r?{}:{color:this.color,fillColor:this.fillColor});l(this,'afterSetOptions',{options:e});return e};t.prototype.getName=function(){return n(this.options.name,'Series '+(this.index+1))};t.prototype.getCyclic=function(t,e,i){var o=this.chart,a=this.userOptions,s=t+'Index',h=t+'Counter',l=i?i.length:n(o.options.chart[t+'Count'],o[t+'Count']);if(!e){var r=n(a[s],a['_'+s]);c(r)||(o.series.length||(o[h]=0),a['_'+s]=r=o[h]%l,o[h]+=1);i&&(e=i[r])};'undefined'!==typeof r&&(this[s]=r);this[t]=e};t.prototype.getColor=function(){this.chart.styledMode?this.getCyclic('color'):this.options.colorByPoint?this.options.color=null:this.getCyclic('color',this.options.color||g.plotOptions[this.type].color,this.chart.options.colors)};t.prototype.getPointsCollection=function(){return(this.hasGroupedData?this.points:this.data)||[]};t.prototype.getSymbol=function(){this.getCyclic('symbol',this.options.marker.symbol,this.chart.options.symbols)};t.prototype.findPointIndex=function(t,e){var n=t.id,a=t.x,r=this.points,h,l=this.options.dataSorting;if(n)var o=this.chart.get(n);else if(this.linkedParent||this.enabledDataSorting){var s=l&&l.matchByName?'name':'index';o=B(r,function(e){return!e.touched&&e[s]===t[s]});if(!o)return};if(o){var i=o&&o.index;'undefined'!==typeof i&&(h=!0)};'undefined'===typeof i&&d(a)&&(i=this.xData.indexOf(a,e));-1!==i&&'undefined'!==typeof i&&this.cropped&&(i=i>=this.cropStart?i-this.cropStart:i);!h&&r[i]&&r[i].touched&&(i=void 0);return i};t.prototype.updateData=function(t,e){var n=this.options,o=n.dataSorting,i=this.points,r=[],a,s,h,u=this.requireSorting,l=t.length===i.length,p=!0;this.xIncrement=null;t.forEach(function(t,e){var p=c(t)&&this.pointClass.prototype.optionsToObject.call({series:this},t)||{};var s=p.x;if(p.id||d(s)){if(s=this.findPointIndex(p,h),-1===s||'undefined'===typeof s?r.push(t):i[s]&&t!==n.data[s]?(i[s].update(t,!1,null,!1),i[s].touched=!0,u&&(h=s+1)):i[s]&&(i[s].touched=!0),!l||e!==s||o&&o.enabled||this.hasDerivedData)a=!0}
else r.push(t)},this);if(a)for(t=i.length;t--;)(s=i[t])&&!s.touched&&s.remove&&s.remove(!1,e);else!l||o&&o.enabled?p=!1:(t.forEach(function(t,e){i[e].update&&t!==i[e].y&&i[e].update(t,!1,null,!1)}),r.length=0);i.forEach(function(t){t&&(t.touched=!1)});if(!p)return!1;r.forEach(function(t){this.addPoint(t,!1,null,null,!1)},this);null===this.xIncrement&&this.xData&&this.xData.length&&(this.xIncrement=x(this.xData),this.autoIncrement());return!0};t.prototype.setData=function(t,e,i,o){var r=this,a=r.points,M=a&&a.length||0,s,u=r.options,f=r.chart,S=u.dataSorting,h=null,v=r.xAxis;h=u.turboThreshold;var g=this.xData,l=this.yData,x=(s=r.pointArrayMap)&&s.length,m=u.keys,p=0,c=1,C;t=t||[];s=t.length;e=n(e,!0);S&&S.enabled&&(t=this.sortData(t));!1!==o&&s&&M&&!r.cropped&&!r.hasGroupedData&&r.visible&&!r.isSeriesBoosting&&(C=this.updateData(t,i));if(!C){r.xIncrement=null;r.colorCounter=0;this.parallelArrays.forEach(function(t){r[t+'Data'].length=0});if(h&&s>h)if(h=r.getFirstValidPoint(t),d(h))for(i=0;i<s;i++)g[i]=this.autoIncrement(),l[i]=t[i];else if(b(h))if(x)for(i=0;i<s;i++)o=t[i],g[i]=o[0],l[i]=o.slice(1,x+1);else for(m&&(p=m.indexOf('x'),c=m.indexOf('y'),p=0<=p?p:0,c=0<=c?c:1),i=0;i<s;i++)o=t[i],g[i]=o[p],l[i]=o[c];else y(12,!1,f);else for(i=0;i<s;i++)'undefined'!==typeof t[i]&&(o={series:r},r.pointClass.prototype.applyOptions.apply(o,[t[i]]),r.updateParallelArrays(o,i));l&&R(l[0])&&y(14,!0,f);r.data=[];r.options.data=r.userOptions.data=t;for(i=M;i--;)a[i]&&a[i].destroy&&a[i].destroy();v&&(v.minRange=v.userMinRange);r.isDirty=f.isDirtyBox=!0;r.isDirtyData=!!a;i=!1};'point'===u.legendType&&(this.processData(),this.generatePoints());e&&f.redraw(i)};t.prototype.sortData=function(t){var e=this,i=e.options.dataSorting.sortKey||'y',o=function(t,e){return c(e)&&t.pointClass.prototype.optionsToObject.call({series:t},e)||{}};t.forEach(function(i,r){t[r]=o(e,i);t[r].index=r},this);t.concat().sort(function(t,e){t=P(i,t);e=P(i,e);return e<t?-1:e>t?1:0}).forEach(function(t,e){t.x=e},this);e.linkedSeries&&e.linkedSeries.forEach(function(e){var r=e.options,i=r.data;r.dataSorting&&r.dataSorting.enabled||!i||(i.forEach(function(r,s){i[s]=o(e,r);t[s]&&(i[s].x=t[s].x,i[s].index=s)}),e.setData(i,!1))});return t};t.prototype.getProcessedData=function(t){var e=this.xData,p=this.yData,o=e.length,s=0,i=this.xAxis,n=this.options,r=n.cropThreshold,u=t||this.getExtremesFromAll||n.getExtremesFromAll,f=this.isCartesian;t=i&&i.val2lin;n=!(!i||!i.logarithmic);var c=this.requireSorting;if(i){i=i.getExtremes();var h=i.min,l=i.max};if(f&&this.sorted&&!u&&(!r||o>r||this.forceCrop))if(e[o-1]<h||e[0]>l)e=[],p=[];else if(this.yData&&(e[0]<h||e[o-1]>l)){s=this.cropData(this.xData,this.yData,h,l);e=s.xData;p=s.yData;s=s.start;var d=!0};for(r=e.length||1;--r;)if(o=n?t(e[r])-t(e[r-1]):e[r]-e[r-1],0<o&&('undefined'===typeof a||o<a))var a=o;else 0>o&&c&&(y(15,!1,this.chart),c=!1);return{xData:e,yData:p,cropped:d,cropStart:s,closestPointRange:a}};t.prototype.processData=function(t){var e=this.xAxis;if(this.isCartesian&&!this.isDirty&&!e.isDirty&&!this.yAxis.isDirty&&!t)return!1;t=this.getProcessedData();this.cropped=t.cropped;this.cropStart=t.cropStart;this.processedXData=t.xData;this.processedYData=t.yData;this.closestPointRange=this.basePointRange=t.closestPointRange};t.prototype.cropData=function(t,e,i,o,r){var l=t.length,a=0,h=l,s;r=n(r,this.cropShoulder);for(s=0;s<l;s++)if(t[s]>=i){a=Math.max(0,s-r);break};for(i=s;i<l;i++)if(t[i]>o){h=i+r;break};return{xData:t.slice(a,h),yData:e.slice(a,h),start:a,end:h}};t.prototype.generatePoints=function(){var r=this.options,n=r.data,e=this.data,c,a=this.processedXData,g=this.processedYData,d=this.pointClass,h=a.length,u=this.cropStart||0,s=this.hasGroupedData;r=r.keys;var p=[],t;e||s||(e=[],e.length=n.length,e=this.data=e);r&&s&&(this.options.keys=!1);for(t=0;t<h;t++){var o=u+t;if(s){var i=(new d).init(this,[a[t]].concat(N(g[t])));i.dataGroup=this.groupMap[t];i.dataGroup.options&&(i.options=i.dataGroup.options,f(i,i.dataGroup.options),delete i.dataLabels)}
else(i=e[o])||'undefined'===typeof n[o]||(e[o]=i=(new d).init(this,n[o],a[t]));i&&(i.index=o,p[t]=i)};this.options.keys=r;if(e&&(h!==(c=e.length)||s))for(t=0;t<c;t++)t!==u||s||(t+=h),e[t]&&(e[t].destroyElements(),e[t].plotX=void 0);this.data=e;this.points=p;l(this,'afterGeneratePoints')};t.prototype.getXExtremes=function(t){return{min:k(t),max:x(t)}};t.prototype.getExtremes=function(t,e){var p=this.xAxis,a=this.yAxis,c=this.processedXData||this.xData,h=[],u=0,f=0,s=0,g=this.requireSorting?this.cropShoulder:0,m=a?a.positiveValuesOnly:!1,o;t=t||this.stackedYData||this.processedYData||[];a=t.length;p&&(s=p.getExtremes(),f=s.min,s=s.max);for(o=0;o<a;o++){var n=c[o],i=t[o],r=(d(i)||b(i))&&(i.length||0<i||!m);n=e||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!p||(c[o+g]||n)>=f&&(c[o-g]||n)<=s;if(r&&n)if(r=i.length)for(;r--;)d(i[r])&&(h[u++]=i[r]);else h[u++]=i};t={dataMin:k(h),dataMax:x(h)};l(this,'afterGetExtremes',{dataExtremes:t});return t};t.prototype.applyExtremes=function(){var t=this.getExtremes();this.dataMin=t.dataMin;this.dataMax=t.dataMax;return t};t.prototype.getFirstValidPoint=function(t){for(var e=null,o=t.length,i=0;null===e&&i<o;)e=t[i],i++;return e};t.prototype.translate=function(){this.processedXData||this.processData();this.generatePoints();var u=this.options,k=u.stacking,a=this.xAxis,x=a.categories,L=this.enabledDataSorting,i=this.yAxis,A=this.points,O=A.length,E=!!this.modifyValue,f,C=this.pointPlacementToXValue(),j=!!C,h=u.threshold,P=u.startFromThreshold?h:0,g,T=this.zoneAxis||'y',M=Number.MAX_VALUE;for(f=0;f<O;f++){var t=A[f],o=t.x,e=t.y,r=t.low,p=k&&i.stacking&&i.stacking.stacks[(this.negStacks&&e<(P?0:h)?'-':'')+this.stackKey];if(i.positiveValuesOnly&&!i.validatePositiveValue(e)||a.positiveValuesOnly&&!a.validatePositiveValue(o))t.isNull=!0;t.plotX=g=w(m(a.translate(o,0,0,0,1,C,'flags'===this.type),-1E5,1E5));if(k&&this.visible&&p&&p[o]){var v=this.getStackIndicator(v,o,this.index);if(!t.isNull){var s=p[o],y=s.points[v.key]}};b(y)&&(r=y[0],e=y[1],r===P&&v.key===p[o].base&&(r=n(d(h)&&h,i.min)),i.positiveValuesOnly&&0>=r&&(r=null),t.total=t.stackTotal=s.total,t.percentage=s.total&&t.y/s.total*100,t.stackY=e,this.irregularWidths||s.setOffset(this.pointXOffset||0,this.barW||0));t.yBottom=c(r)?m(i.translate(r,0,1,0,1),-1E5,1E5):null;E&&(e=this.modifyValue(e,t));t.plotY=void 0;d(e)&&(e=i.translate(e,!1,!0,!1,!0),'undefined'!==typeof e&&(t.plotY=m(e,-1E5,1E5)));t.isInside=this.isPointInside(t);t.clientX=j?w(a.translate(o,0,0,0,1,C)):g;t.negative=t[T]<(u[T+'Threshold']||h||0);t.category=x&&'undefined'!==typeof x[t.x]?x[t.x]:t.x;if(!t.isNull&&!1!==t.visible){'undefined'!==typeof S&&(M=Math.min(M,Math.abs(g-S)));var S=g};t.zone=this.zones.length&&t.getZone();!t.graphic&&this.group&&L&&(t.isNew=!0)};this.closestPointRangePx=M;l(this,'afterTranslate')};t.prototype.getValidPoints=function(t,e,i){var o=this.chart;return(t||this.points||[]).filter(function(t){return e&&!o.isInsidePlot(t.plotX,t.plotY,o.inverted)?!1:!1!==t.visible&&(i||!t.isNull)})};t.prototype.getClipBox=function(t,e){var s=this.options,i=this.chart,n=i.inverted,o=this.xAxis,r=o&&this.yAxis,a=i.options.chart.scrollablePlotArea||{};t&&!1===s.clip&&r?t=n?{y:-i.chartWidth+r.len+r.pos,height:i.chartWidth,width:i.chartHeight,x:-i.chartHeight+o.len+o.pos}:{y:-r.pos,height:i.chartHeight,width:i.chartWidth,x:-o.pos}:(t=this.clipBox||i.clipBox,e&&(t.width=i.plotSizeX,t.x=(i.scrollablePixelsX||0)*(a.scrollPositionX||0)));return e?{width:t.width,x:t.x}:t};t.prototype.setClip=function(t){var e=this.chart,s=this.options,a=e.renderer,n=e.inverted,h=this.clipBox,r=this.getClipBox(t),i=this.sharedClipKey||['_sharedClip',t&&t.duration,t&&t.easing,t&&t.defer,r.height,s.xAxis,s.yAxis].join(),o=e[i],l=e[i+'m'];t&&(r.width=0,n&&(r.x=e.plotHeight+(!1!==s.clip?0:e.plotTop)));o?e.hasLoaded||o.attr(r):(t&&(e[i+'m']=l=a.clipRect(n?e.plotSizeX+99:-99,n?-e.plotLeft:-e.plotTop,99,n?e.chartWidth:e.chartHeight)),e[i]=o=a.clipRect(r),o.count={length:0});t&&!o.count[this.index]&&(o.count[this.index]=!0,o.count.length+=1);if(!1!==s.clip||t)this.group.clip(t||h?o:e.clipRect),this.markerGroup.clip(l),this.sharedClipKey=i;t||(o.count[this.index]&&(delete o.count[this.index],--o.count.length),0===o.count.length&&i&&e[i]&&(h||(e[i]=e[i].destroy()),e[i+'m']&&(e[i+'m']=e[i+'m'].destroy())))};t.prototype.animate=function(t){var e=this.chart,i=M(this.options.animation);if(t)this.setClip(i);else{var r=this.sharedClipKey;t=e[r];var o=this.getClipBox(i,!0);t&&t.animate(o,i);e[r+'m']&&e[r+'m'].animate({width:o.width+99,x:o.x-(e.inverted?0:99)},i)}};t.prototype.afterAnimate=function(){this.setClip();l(this,'afterAnimate');this.finishedAnimating=!0};t.prototype.drawPoints=function(){var c=this.points,p=this.chart,a,e,r=this.options.marker,f=this[this.specialGroup]||this.markerGroup,h=this.xAxis,g=n(r.enabled,!h||h.isRadial?!0:null,this.closestPointRangePx>=r.enabledThreshold*r.radius);if(!1!==r.enabled||this._hasPointMarkers)for(a=0;a<c.length;a++){var t=c[a],l=(e=t.graphic)?'animate':'attr',s=t.marker||{};var u=!!t.marker;if((g&&'undefined'===typeof s.enabled||s.enabled)&&!t.isNull&&!1!==t.visible){var d=n(s.symbol,this.symbol),i=this.markerAttribs(t,t.selected&&'select');this.enabledDataSorting&&(t.startXPos=h.reversed?-i.width:h.width);var o=!1!==t.isInside;e?e[o?'show':'hide'](o).animate(i):o&&(0<i.width||t.hasImage)&&(t.graphic=e=p.renderer.symbol(d,i.x,i.y,i.width,i.height,u?s:r).add(f),this.enabledDataSorting&&p.hasRendered&&(e.attr({x:t.startXPos}),l='animate'));e&&'animate'===l&&e[o?'show':'hide'](o).animate(i);if(e&&!p.styledMode)e[l](this.pointAttribs(t,t.selected&&'select'));e&&e.addClass(t.getClassName(),!0)}
else e&&(t.graphic=e.destroy())}};t.prototype.markerAttribs=function(t,e){var s=this.options,i=s.marker,r=t.marker||{},a=r.symbol||i.symbol,o=n(r.radius,i.radius);e&&(i=i.states[e],e=r.states&&r.states[e],o=n(e&&e.radius,i&&i.radius,o+(i&&i.radiusPlus||0)));t.hasImage=a&&0===a.indexOf('url');t.hasImage&&(o=0);t={x:s.crisp?Math.floor(t.plotX)-o:t.plotX-o,y:t.plotY-o};o&&(t.width=t.height=2*o);return t};t.prototype.pointAttribs=function(t,e){var i=this.options.marker,o=t&&t.options,s=o&&o.marker||{},r=this.color,a=o&&o.color,l=t&&t.color;o=n(s.lineWidth,i.lineWidth);var h=t&&t.zone&&t.zone.color;t=1;r=a||h||l||r;a=s.fillColor||i.fillColor||r;r=s.lineColor||i.lineColor||r;e=e||'normal';i=i.states[e];e=s.states&&s.states[e]||{};o=n(e.lineWidth,i.lineWidth,o+n(e.lineWidthPlus,i.lineWidthPlus,0));a=e.fillColor||i.fillColor||a;r=e.lineColor||i.lineColor||r;t=n(e.opacity,i.opacity,t);return{stroke:r,'stroke-width':o,fill:a,opacity:t}};t.prototype.destroy=function(t){var e=this,o=e.chart,c=/AppleWebKit\/533/.test(I.navigator.userAgent),n,r,h=e.data||[],s,i;l(e,'destroy');this.removeEvents(t);(e.axisTypes||[]).forEach(function(t){(i=e[t])&&i.series&&(A(i.series,e),i.isDirty=i.forceRedraw=!0)});e.legendItem&&e.chart.legend.destroyItem(e);for(r=h.length;r--;)(s=h[r])&&s.destroy&&s.destroy();e.points=null;a.clearTimeout(e.animationTimeout);C(e,function(t,e){t instanceof p&&!t.survive&&(n=c&&'group'===e?'hide':'destroy',t[n]())});o.hoverSeries===e&&(o.hoverSeries=null);A(o.series,e);o.orderSeries();C(e,function(i,o){t&&'hcEvents'===o||delete e[o]})};t.prototype.applyZones=function(){var c=this,e=this.chart,C=e.renderer,M=this.zones,r,o,s=this.clips||[],t,a=this.graph,h=this.area,d=Math.max(e.chartWidth,e.chartHeight),i=this[(this.zoneAxis||'y')+'Axis'],g=e.inverted,y,u,f,S=!1,v,x;if(M.length&&(a||h)&&i&&'undefined'!==typeof i.min){var b=i.reversed,p=i.horiz;a&&!this.showLine&&a.hide();h&&h.hide();var l=i.getExtremes();M.forEach(function(M,k){r=b?p?e.plotWidth:0:p?0:i.toPixels(l.min)||0;r=m(n(o,r),0,d);o=m(Math.round(i.toPixels(n(M.value,l.max),!0)||0),0,d);S&&(r=o=i.toPixels(l.max));y=Math.abs(r-o);u=Math.min(r,o);f=Math.max(r,o);i.isXAxis?(t={x:g?f:u,y:0,width:y,height:d},p||(t.x=e.plotHeight-t.x)):(t={x:0,y:g?f:u,width:d,height:y},p&&(t.y=e.plotWidth-t.y));g&&C.isVML&&(t=i.isXAxis?{x:0,y:b?u:f,height:t.width,width:e.chartWidth}:{x:t.y-e.plotLeft-e.spacingBox.x,y:0,width:t.height,height:e.chartHeight});s[k]?s[k].animate(t):s[k]=C.clipRect(t);v=c['zone-area-'+k];x=c['zone-graph-'+k];a&&x&&x.clip(s[k]);h&&v&&v.clip(s[k]);S=M.value>l.max;c.resetZones&&0===o&&(o=void 0)});this.clips=s}
else c.visible&&(a&&a.show(!0),h&&h.show(!0))};t.prototype.invertGroups=function(t){function i(){['group','markerGroup'].forEach(function(i){e[i]&&(o.renderer.isVML&&e[i].attr({width:e.yAxis.len,height:e.xAxis.len}),e[i].width=e.yAxis.len,e[i].height=e.xAxis.len,e[i].invert(e.isRadialSeries?!1:t))})};var e=this,o=e.chart;e.xAxis&&(e.eventsToUnbind.push(S(o,'resize',i)),i(),e.invertGroups=i)};t.prototype.plotGroup=function(t,e,i,o,r){var s=this[t],n=!s;i={visibility:i,zIndex:o||.1};'undefined'===typeof this.opacity||this.chart.styledMode||'inactive'===this.state||(i.opacity=this.opacity);n&&(this[t]=s=this.chart.renderer.g().add(r));s.addClass('highcharts-'+e+' highcharts-series-'+this.index+' highcharts-'+this.type+'-series '+(c(this.colorIndex)?'highcharts-color-'+this.colorIndex+' ':'')+(this.options.className||'')+(s.hasClass('highcharts-tracker')?' highcharts-tracker':''),!0);s.attr(i)[n?'attr':'animate'](this.getPlotBox());return s};t.prototype.getPlotBox=function(){var e=this.chart,i=this.xAxis,t=this.yAxis;e.inverted&&(i=t,t=this.xAxis);return{translateX:i?i.left:e.plotLeft,translateY:t?t.top:e.plotTop,scaleX:1,scaleY:1}};t.prototype.removeEvents=function(t){t||L(this);this.eventsToUnbind.length&&(this.eventsToUnbind.forEach(function(t){t()}),this.eventsToUnbind.length=0)};t.prototype.render=function(){var t=this,i=t.chart,o=t.options,r=M(o.animation),e=!t.finishedAnimating&&i.renderer.isSVG&&r.duration,a=t.visible?'inherit':'hidden',h=o.zIndex,p=t.hasRendered,c=i.seriesGroup,d=i.inverted;l(this,'render');var s=t.plotGroup('group','series',a,h,c);t.markerGroup=t.plotGroup('markerGroup','markers',a,h,c);e&&t.animate&&t.animate(!0);s.inverted=n(t.invertible,t.isCartesian)?d:!1;t.drawGraph&&(t.drawGraph(),t.applyZones());t.visible&&t.drawPoints();t.drawDataLabels&&t.drawDataLabels();t.redrawPoints&&t.redrawPoints();t.drawTracker&&!1!==t.options.enableMouseTracking&&t.drawTracker();t.invertGroups(d);!1===o.clip||t.sharedClipKey||p||s.clip(i.clipRect);e&&t.animate&&t.animate();p||(e&&r.defer&&(e+=r.defer),t.animationTimeout=O(function(){t.afterAnimate()},e||0));t.isDirty=!1;t.hasRendered=!0;l(t,'afterRender')};t.prototype.redraw=function(){var t=this.chart,r=this.isDirty||this.isDirtyData,e=this.group,i=this.xAxis,o=this.yAxis;e&&(t.inverted&&e.attr({width:t.plotWidth,height:t.plotHeight}),e.animate({translateX:n(i&&i.left,t.plotLeft),translateY:n(o&&o.top,t.plotTop)}));this.translate();this.render();r&&delete this.kdTree};t.prototype.searchPoint=function(t,e){var i=this.xAxis,o=this.yAxis,r=this.chart.inverted;return this.searchKDTree({clientX:r?i.len-t.chartY+i.pos:t.chartX-i.pos,plotY:r?o.len-t.chartX+o.pos:t.chartY-o.pos},e,t)};t.prototype.buildKDTree=function(t){function i(t,o,r){var s;if(s=t&&t.length){var n=e.kdAxisArray[o%r];t.sort(function(t,e){return t[n]-e[n]});s=Math.floor(s/2);return{point:t[s],left:i(t.slice(0,s),o+1,r),right:i(t.slice(s+1),o+1,r)}}};this.buildingKdTree=!0;var e=this,o=-1<e.options.findNearestPointBy.indexOf('y')?2:1;delete e.kdTree;O(function(){e.kdTree=i(e.getValidPoints(null,!e.directTouch),o,o);e.buildingKdTree=!1},e.options.kdNow||t&&'touchstart'===t.type?0:1)};t.prototype.searchKDTree=function(t,e,i){function n(t,e,i,h){var p=e.point,d=a.kdAxisArray[i%h],u=p,f=c(t[r])&&c(p[r])?Math.pow(t[r]-p[r],2):null,l=c(t[s])&&c(p[s])?Math.pow(t[s]-p[s],2):null;l=(f||0)+(l||0);p.dist=c(l)?Math.sqrt(l):Number.MAX_VALUE;p.distX=c(f)?Math.sqrt(f):Number.MAX_VALUE;d=t[d]-p[d];l=0>d?'left':'right';f=0>d?'right':'left';e[l]&&(l=n(t,e[l],i+1,h),u=l[o]<u[o]?l:p);e[f]&&Math.sqrt(d*d)<u[o]&&(t=n(t,e[f],i+1,h),u=t[o]<u[o]?t:u);return u};var a=this,r=this.kdAxisArray[0],s=this.kdAxisArray[1],o=e?'distX':'dist';e=-1<a.options.findNearestPointBy.indexOf('y')?2:1;this.kdTree||this.buildingKdTree||this.buildKDTree(i);if(this.kdTree)return n(t,this.kdTree,e,e)};t.prototype.pointPlacementToXValue=function(){var t=this.options,i=t.pointRange,e=this.xAxis;t=t.pointPlacement;'between'===t&&(t=e.reversed?-.5:.5);return d(t)?t*(i||e.pointRange):0};t.prototype.isPointInside=function(t){return'undefined'!==typeof t.plotY&&'undefined'!==typeof t.plotX&&0<=t.plotY&&t.plotY<=this.yAxis.len&&0<=t.plotX&&t.plotX<=this.xAxis.len};t.prototype.drawTracker=function(){var t=this,o=t.options,i=o.trackByArea,r=[].concat(i?t.areaPath:t.graphPath),e=t.chart,h=e.pointer,p=e.renderer,c=e.options.tooltip.snap,s=t.tracker,n=function(i){if(e.hoverSeries!==t)t.onMouseOver()},a='rgba(192,192,192,'+(D?.0001:.002)+')';s?s.attr({d:r}):t.graph&&(t.tracker=p.path(r).attr({visibility:t.visible?'visible':'hidden',zIndex:2}).addClass(i?'highcharts-tracker-area':'highcharts-tracker-line').add(t.group),e.styledMode||t.tracker.attr({'stroke-linecap':'round','stroke-linejoin':'round',stroke:a,fill:i?a:'none','stroke-width':t.graph.strokeWidth()+(i?0:2*c)}),[t.tracker,t.markerGroup].forEach(function(t){t.addClass('highcharts-tracker').on('mouseover',n).on('mouseout',function(t){h.onTrackerMouseOut(t)});o.cursor&&!e.styledMode&&t.css({cursor:o.cursor});if(j)t.on('touchstart',n)}));l(this,'afterDrawTracker')};t.prototype.addPoint=function(t,e,i,o,r){var g=this.options,p=this.data,m=this.chart,h=this.xAxis;h=h&&h.hasNames&&h.names;var u=g.data,d=this.xData,f;e=n(e,!0);var a={series:this};this.pointClass.prototype.applyOptions.apply(a,[t]);var c=a.x,s=d.length;if(this.requireSorting&&c<d[s-1])for(f=!0;s&&d[s-1]>c;)s--;this.updateParallelArrays(a,'splice',s,0,0);this.updateParallelArrays(a,s);h&&a.name&&(h[c]=a.name);u.splice(s,0,t);f&&(this.data.splice(s,0,null),this.processData());'point'===g.legendType&&this.generatePoints();i&&(p[0]&&p[0].remove?p[0].remove(!1):(p.shift(),this.updateParallelArrays(a,'shift'),u.shift()));!1!==r&&l(this,'addPoint',{point:a});this.isDirtyData=this.isDirty=!0;e&&m.redraw(o)};t.prototype.removePoint=function(t,e,i){var o=this,s=o.data,r=s[t],a=o.points,h=o.chart,l=function(){a&&a.length===s.length&&a.splice(t,1);s.splice(t,1);o.options.data.splice(t,1);o.updateParallelArrays(r||{series:o},'splice',t,1);r&&r.destroy();o.isDirty=!0;o.isDirtyData=!0;e&&h.redraw()};E(i,h);e=n(e,!0);r?r.firePointEvent('remove',null,l):l()};t.prototype.remove=function(t,e,i,o){function a(){s.destroy(o);r.isDirtyLegend=r.isDirtyBox=!0;r.linkSeries();n(t,!0)&&r.redraw(e)};var s=this,r=s.chart;!1!==i?l(s,'remove',null,a):a()};t.prototype.update=function(t,e){t=z(t,this.userOptions);l(this,'update',{options:t});var i=this,a=i.chart,o=i.userOptions,h=i.initialType||i.type,g=a.options.plotOptions,r=t.type||o.type||a.options.chart.type,c=!(this.hasDerivedData||r&&r!==this.type||'undefined'!==typeof t.pointStart||'undefined'!==typeof t.pointInterval||i.hasOptionChanged('dataGrouping')||i.hasOptionChanged('pointStart')||i.hasOptionChanged('pointInterval')||i.hasOptionChanged('pointIntervalUnit')||i.hasOptionChanged('keys')),x=u[h].prototype,m,s=['eventOptions','navigatorSeries','baseSeries'],b=i.finishedAnimating&&{animation:!1},p={};c&&(s.push('data','isDirtyData','points','processedXData','processedYData','xIncrement','cropped','_hasPointMarkers','_hasPointLabels','nodes','layout','mapMap','mapData','minY','maxY','minX','maxX'),!1!==t.visible&&s.push('area','graph'),i.parallelArrays.forEach(function(t){s.push(t+'Data')}),t.data&&(t.dataSorting&&f(i.options.dataSorting,t.dataSorting),this.setData(t.data,!1)));t=v(o,b,{index:'undefined'===typeof o.index?i.index:o.index,pointStart:n(g&&g.series&&g.series.pointStart,o.pointStart,i.xData[0])},!c&&{data:i.options.data},t);c&&t.data&&(t.data=i.options.data);s=['group','markerGroup','dataLabelsGroup','transformGroup'].concat(s);s.forEach(function(t){s[t]=i[t];delete i[t]});if(u[r||h]){if(o=r!==i.type,i.remove(!1,!1,!1,!0),o)if(Object.setPrototypeOf)Object.setPrototypeOf(i,u[r||h].prototype);else{o=Object.hasOwnProperty.call(i,'hcEvents')&&i.hcEvents;for(m in x)i[m]=void 0;f(i,u[r||h].prototype);o?i.hcEvents=o:delete i.hcEvents}}
else y(17,!0,a,{missingModuleFor:r||h});s.forEach(function(t){i[t]=s[t]});i.init(a,t);if(c&&this.points){var d=i.options;!1===d.visible?(p.graphic=1,p.dataLabel=1):i._hasPointLabels||(t=d.marker,r=d.dataLabels,t&&(!1===t.enabled||'symbol' in t)&&(p.graphic=1),r&&!1===r.enabled&&(p.dataLabel=1));this.points.forEach(function(t){t&&t.series&&(t.resolveColor(),Object.keys(p).length&&t.destroyElements(p),!1===d.showInLegend&&t.legendItem&&a.legend.destroyItem(t))},this)};i.initialType=h;a.linkSeries();l(this,'afterUpdate');n(e,!0)&&a.redraw(c?void 0:!1)};t.prototype.setName=function(t){this.name=this.options.name=this.userOptions.name=t;this.chart.isDirtyLegend=!0};t.prototype.hasOptionChanged=function(t){var i=this.options[t],e=this.chart.options.plotOptions,o=this.userOptions[t];return o?i!==o:i!==n(e&&e[this.type]&&e[this.type][t],e&&e.series&&e.series[t],i)};t.prototype.onMouseOver=function(){var t=this.chart,e=t.hoverSeries;t.pointer.setHoverChartIndex();if(e&&e!==this)e.onMouseOut();this.options.events.mouseOver&&l(this,'mouseOver');this.setState('hover');t.hoverSeries=this};t.prototype.onMouseOut=function(){var o=this.options,t=this.chart,e=t.tooltip,i=t.hoverPoint;t.hoverSeries=null;if(i)i.onMouseOut();this&&o.events.mouseOut&&l(this,'mouseOut');!e||this.stickyTracking||e.shared&&!this.noSharedTooltip||e.hide();t.series.forEach(function(t){t.setState('',!0)})};t.prototype.setState=function(t,e){var i=this,r=i.options,s=i.graph,p=r.inactiveOtherPoints,o=r.states,a=r.lineWidth,h=r.opacity,l=n(o[t||'normal']&&o[t||'normal'].animation,i.chart.options.chart.animation);r=0;t=t||'';if(i.state!==t&&([i.group,i.markerGroup,i.dataLabelsGroup].forEach(function(e){e&&(i.state&&e.removeClass('highcharts-series-'+i.state),t&&e.addClass('highcharts-series-'+t))}),i.state=t,!i.chart.styledMode)){if(o[t]&&!1===o[t].enabled)return;t&&(a=o[t].lineWidth||a+(o[t].lineWidthPlus||0),h=n(o[t].opacity,h));if(s&&!s.dashstyle)for(o={'stroke-width':a},s.animate(o,l);i['zone-graph-'+r];)i['zone-graph-'+r].animate(o,l),r+=1;p||[i.group,i.markerGroup,i.dataLabelsGroup,i.labelBySeries].forEach(function(t){t&&t.animate({opacity:h},l)})};e&&p&&i.points&&i.setAllPointsToState(t||void 0)};t.prototype.setAllPointsToState=function(t){this.points.forEach(function(e){e.setState&&e.setState(t)})};t.prototype.setVisible=function(t,e){var i=this,o=i.chart,s=i.legendItem,n=o.options.chart.ignoreHiddenSeries,a=i.visible,r=(i.visible=t=i.options.visible=i.userOptions.visible='undefined'===typeof t?!a:t)?'show':'hide';['group','dataLabelsGroup','markerGroup','tracker','tt'].forEach(function(t){if(i[t])i[t][r]()});if(o.hoverSeries===i||(o.hoverPoint&&o.hoverPoint.series)===i)i.onMouseOut();s&&o.legend.colorizeItem(i,t);i.isDirty=!0;i.options.stacking&&o.series.forEach(function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)});i.linkedSeries.forEach(function(e){e.setVisible(t,!1)});n&&(o.isDirtyBox=!0);l(i,r);!1!==e&&o.redraw()};t.prototype.show=function(){this.setVisible(!0)};t.prototype.hide=function(){this.setVisible(!1)};t.prototype.select=function(t){this.selected=t=this.options.selected='undefined'===typeof t?!this.selected:t;this.checkbox&&(this.checkbox.checked=t);l(this,t?'select':'unselect')};t.defaultOptions={lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1E3},events:{},marker:{enabledThreshold:2,lineColor:r.backgroundColor,lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:r.neutralColor20,lineColor:r.neutralColor100,lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:'center',defer:!0,formatter:function(){var t=this.series.chart.numberFormatter;return'number'!==typeof this.y?'':t(this.y,-1)},padding:5,style:{fontSize:'11px',fontWeight:'bold',color:'contrast',textOutline:'1px contrast'},verticalAlign:'bottom',x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:50},opacity:.2}},stickyTracking:!0,turboThreshold:1E3,findNearestPointBy:'x'};return t}();f(t.prototype,{axisTypes:['xAxis','yAxis'],coll:'series',colorCounter:0,cropShoulder:1,directTouch:!1,drawLegendSymbol:i.drawLineMarker,isCartesian:!0,kdAxisArray:['clientX','plotY'],parallelArrays:['x','y'],pointClass:s,requireSorting:!0,sorted:!0});h.series=t;'';'';return t});i(e,'Extensions/ScrollablePlotArea.js',[e['Core/Animation/AnimationUtilities.js'],e['Core/Axis/Axis.js'],e['Core/Chart/Chart.js'],e['Core/Series/Series.js'],e['Core/Globals.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s){var l=t.stop,n=s.addEvent,a=s.createElement,h=s.merge,p=s.pick;'';n(i,'afterSetChartSize',function(t){var i=this.options.chart.scrollablePlotArea,e=i&&i.minWidth;i=i&&i.minHeight;if(!this.renderer.forExport){if(e){if(this.scrollablePixelsX=e=Math.max(0,e-this.chartWidth)){this.scrollablePlotBox=h(this.plotBox);this.plotWidth+=e;this.inverted?(this.clipBox.height+=e,this.plotBox.height+=e):(this.clipBox.width+=e,this.plotBox.width+=e);var o={1:{name:'right',value:e}}}}
else i&&(this.scrollablePixelsY=e=Math.max(0,i-this.chartHeight))&&(this.scrollablePlotBox=h(this.plotBox),this.plotHeight+=e,this.inverted?(this.clipBox.width+=e,this.plotBox.width+=e):(this.clipBox.height+=e,this.plotBox.height+=e),o={2:{name:'bottom',value:e}});o&&!t.skipAxes&&this.axes.forEach(function(t){o[t.side]?t.getPlotLinePath=function(){var e=o[t.side].name,i=this[e];this[e]=i-o[t.side].value;var s=r.Axis.prototype.getPlotLinePath.apply(this,arguments);this[e]=i;return s}:(t.setAxisSize(),t.setAxisTranslation())})}});n(i,'render',function(){this.scrollablePixelsX||this.scrollablePixelsY?(this.setUpScrolling&&this.setUpScrolling(),this.applyFixed()):this.fixedDiv&&this.applyFixed()});i.prototype.setUpScrolling=function(){var e=this,t={WebkitOverflowScrolling:'touch',overflowX:'hidden',overflowY:'hidden'};this.scrollablePixelsX&&(t.overflowX='auto');this.scrollablePixelsY&&(t.overflowY='auto');this.scrollingParent=a('div',{className:'highcharts-scrolling-parent'},{position:'relative'},this.renderTo);this.scrollingContainer=a('div',{className:'highcharts-scrolling'},t,this.scrollingParent);n(this.scrollingContainer,'scroll',function(){e.pointer&&delete e.pointer.chartPosition});this.innerContainer=a('div',{className:'highcharts-inner-container'},null,this.scrollingContainer);this.innerContainer.appendChild(this.container);this.setUpScrolling=null};i.prototype.moveFixedElements=function(){var o=this.container,e=this.fixedRenderer,i='.highcharts-contextbutton .highcharts-credits .highcharts-legend .highcharts-legend-checkbox .highcharts-navigator-series .highcharts-navigator-xaxis .highcharts-navigator-yaxis .highcharts-navigator .highcharts-reset-zoom .highcharts-scrollbar .highcharts-subtitle .highcharts-title'.split(' '),t;this.scrollablePixelsX&&!this.inverted?t='.highcharts-yaxis':this.scrollablePixelsX&&this.inverted?t='.highcharts-xaxis':this.scrollablePixelsY&&!this.inverted?t='.highcharts-xaxis':this.scrollablePixelsY&&this.inverted&&(t='.highcharts-yaxis');t&&i.push(t+':not(.highcharts-radial-axis)',t+'-labels:not(.highcharts-radial-axis-labels)');i.forEach(function(t){[].forEach.call(o.querySelectorAll(t),function(t){(t.namespaceURI===e.SVG_NS?e.box:e.box.parentNode).appendChild(t);t.style.pointerEvents='auto'})})};i.prototype.applyFixed=function(){var u=this,t,c,i,s=!this.fixedDiv,d=this.options.chart,h=d.scrollablePlotArea;s?(this.fixedDiv=a('div',{className:'highcharts-fixed'},{position:'absolute',overflow:'hidden',pointerEvents:'none',zIndex:((null===(t=d.style)||void 0===t?void 0:t.zIndex)||0)+2,top:0},null,!0),null===(c=this.scrollingContainer)||void 0===c?void 0:c.parentNode.insertBefore(this.fixedDiv,this.scrollingContainer),this.renderTo.style.overflow='visible',this.fixedRenderer=t=new r.Renderer(this.fixedDiv,this.chartWidth,this.chartHeight,null===(i=this.options.chart)||void 0===i?void 0:i.style),this.scrollableMask=t.path().attr({fill:this.options.chart.backgroundColor||'#fff','fill-opacity':p(h.opacity,.85),zIndex:-1}).addClass('highcharts-scrollable-mask').add(),n(this,'afterShowResetZoom',this.moveFixedElements),n(this,'afterLayOutTitles',this.moveFixedElements),n(e,'afterInit',function(){u.scrollableDirty=!0}),n(o,'show',function(){u.scrollableDirty=!0})):this.fixedRenderer.setSize(this.chartWidth,this.chartHeight);if(this.scrollableDirty||s)this.scrollableDirty=!1,this.moveFixedElements();i=this.chartWidth+(this.scrollablePixelsX||0);t=this.chartHeight+(this.scrollablePixelsY||0);l(this.container);this.container.style.width=i+'px';this.container.style.height=t+'px';this.renderer.boxWrapper.attr({width:i,height:t,viewBox:[0,0,i,t].join(' ')});this.chartBackground.attr({width:i,height:t});this.scrollingContainer.style.height=this.chartHeight+'px';s&&(h.scrollPositionX&&(this.scrollingContainer.scrollLeft=this.scrollablePixelsX*h.scrollPositionX),h.scrollPositionY&&(this.scrollingContainer.scrollTop=this.scrollablePixelsY*h.scrollPositionY));t=this.axisOffset;s=this.plotTop-t[0]-1;h=this.plotLeft-t[3]-1;i=this.plotTop+this.plotHeight+t[2]+1;t=this.plotLeft+this.plotWidth+t[1]+1;c=this.plotLeft+this.plotWidth-(this.scrollablePixelsX||0);d=this.plotTop+this.plotHeight-(this.scrollablePixelsY||0);s=this.scrollablePixelsX?[['M',0,s],['L',this.plotLeft-1,s],['L',this.plotLeft-1,i],['L',0,i],['Z'],['M',c,s],['L',this.chartWidth,s],['L',this.chartWidth,i],['L',c,i],['Z']]:this.scrollablePixelsY?[['M',h,0],['L',h,this.plotTop-1],['L',t,this.plotTop-1],['L',t,0],['Z'],['M',h,d],['L',h,this.chartHeight],['L',t,this.chartHeight],['L',t,d],['Z']]:[['M',0,0]];'adjustHeight'!==this.redrawTrigger&&this.scrollableMask.attr({d:s})}});i(e,'Core/Axis/StackingAxis.js',[e['Core/Animation/AnimationUtilities.js'],e['Core/Utilities.js']],function(t,e){var r=t.getDeferredAnimation,o=e.addEvent,s=e.destroyObjectProperties,n=e.fireEvent,i=e.objectEach,a=e.pick,h=function(){function t(t){this.oldStacks={};this.stacks={};this.stacksTouched=0;this.axis=t};t.prototype.buildStacks=function(){var e=this.axis,i=e.series,s=a(e.options.reversedStacks,!0),o=i.length,t;if(!e.isXAxis){this.usePercentage=!1;for(t=o;t--;){var r=i[s?t:o-t-1];r.setStackedPoints();r.setGroupedPoints()};for(t=0;t<o;t++)i[t].modifyStacks();n(e,'afterBuildStacks')}};t.prototype.cleanStacks=function(){if(!this.axis.isXAxis){if(this.oldStacks)var t=this.stacks=this.oldStacks;i(t,function(t){i(t,function(t){t.cumulative=t.total})})}};t.prototype.resetStacks=function(){var t=this,e=t.stacks;t.axis.isXAxis||i(e,function(e){i(e,function(i,o){i.touched<t.stacksTouched?(i.destroy(),delete e[o]):(i.total=null,i.cumulative=null)})})};t.prototype.renderStackTotals=function(){var t=this.axis,e=t.chart,s=e.renderer,n=this.stacks;t=r(e,t.options.stackLabels.animation);var o=this.stackTotalGroup=this.stackTotalGroup||s.g('stack-labels').attr({visibility:'visible',zIndex:6,opacity:0}).add();o.translate(e.plotLeft,e.plotTop);i(n,function(t){i(t,function(t){t.render(o)})});o.animate({opacity:1},t)};return t}();return function(){function t(){};t.compose=function(e){o(e,'init',t.onInit);o(e,'destroy',t.onDestroy)};t.onDestroy=function(){var t=this.stacking;if(t){var e=t.stacks;i(e,function(t,i){s(t);e[i]=null});t&&t.stackTotalGroup&&t.stackTotalGroup.destroy()}};t.onInit=function(){this.stacking||(this.stacking=new h(this))};return t}()});i(e,'Extensions/Stacking.js',[e['Core/Axis/Axis.js'],e['Core/Chart/Chart.js'],e['Core/Globals.js'],e['Core/Series/Series.js'],e['Core/Axis/StackingAxis.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s){var a=s.correctFloat,h=s.defined,c=s.destroyObjectProperties,d=s.format,u=s.isArray,p=s.isNumber,n=s.pick;'';var l=function(){function t(t,e,i,o,r){var s=t.chart.inverted;this.axis=t;this.isNegative=i;this.options=e=e||{};this.x=o;this.total=null;this.points={};this.hasValidPoints=!1;this.stack=r;this.rightCliff=this.leftCliff=0;this.alignOptions={align:e.align||(s?i?'left':'right':'center'),verticalAlign:e.verticalAlign||(s?'middle':i?'bottom':'top'),y:e.y,x:e.x};this.textAlign=e.textAlign||(s?i?'right':'left':'center')};t.prototype.destroy=function(){c(this,this.axis)};t.prototype.render=function(t){var o=this.axis.chart,e=this.options,i=e.format;i=i?d(i,this,o):e.formatter.call(this);this.label?this.label.attr({text:i,visibility:'hidden'}):(this.label=o.renderer.label(i,null,null,e.shape,null,null,e.useHTML,!1,'stack-labels'),i={r:e.borderRadius||0,text:i,rotation:e.rotation,padding:n(e.padding,5),visibility:'hidden'},o.styledMode||(i.fill=e.backgroundColor,i.stroke=e.borderColor,i['stroke-width']=e.borderWidth,this.label.css(e.style)),this.label.attr(i),this.label.added||this.label.add(t));this.label.labelrank=o.plotSizeY};t.prototype.setOffset=function(t,e,i,r,s){var a=this.axis,l=a.chart;r=a.translate(a.stacking.usePercentage?100:r?r:this.total,0,0,0,1);i=a.translate(i?i:0);i=h(r)&&Math.abs(r-i);t=n(s,l.xAxis[0].translate(this.x))+t;a=h(r)&&this.getStackBox(l,this,t,r,e,i,a);e=this.label;i=this.isNegative;t='justify'===n(this.options.overflow,'justify');var c=this.textAlign;e&&a&&(s=e.getBBox(),r=e.padding,c='left'===c?l.inverted?-r:r:'right'===c?s.width:l.inverted&&'center'===c?s.width/2:l.inverted?i?s.width+r:-r:s.width/2,i=l.inverted?s.height/2:i?-r:s.height,this.alignOptions.x=n(this.options.x,0),this.alignOptions.y=n(this.options.y,0),a.x-=c,a.y-=i,e.align(this.alignOptions,null,a),l.isInsidePlot(e.alignAttr.x+c-this.alignOptions.x,e.alignAttr.y+i-this.alignOptions.y)?e.show():(e.alignAttr.y=-9999,t=!1),t&&o.prototype.justifyDataLabel.call(this.axis,e,this.alignOptions,e.alignAttr,s,a),e.attr({x:e.alignAttr.x,y:e.alignAttr.y}),n(!t&&this.options.crop,!0)&&((l=p(e.x)&&p(e.y)&&l.isInsidePlot(e.x-r+e.width,e.y)&&l.isInsidePlot(e.x+r,e.y))||e.hide()))};t.prototype.getStackBox=function(t,e,i,o,r,s,n){var h=e.axis.reversed,a=t.inverted,l=n.height+n.pos-(a?t.plotLeft:t.plotTop);e=e.isNegative&&!h||!e.isNegative&&h;return{x:a?e?o-n.right:o-s+n.pos-t.plotLeft:i+t.xAxis[0].transB-t.plotLeft,y:a?n.height-i-r:e?l-o-s:l-o,width:a?s:r,height:a?r:s}};return t}();e.prototype.getStacks=function(){var t=this,e=t.inverted;t.yAxis.forEach(function(t){t.stacking&&t.stacking.stacks&&t.hasVisibleSeries&&(t.stacking.oldStacks=t.stacking.stacks)});t.series.forEach(function(i){var o=i.xAxis&&i.xAxis.options||{};!i.options.stacking||!0!==i.visible&&!1!==t.options.chart.ignoreHiddenSeries||(i.stackKey=[i.type,n(i.options.stack,''),e?o.top:o.left,e?o.height:o.width].join())})};r.compose(t);o.prototype.setGroupedPoints=function(){this.options.centerInCategory&&(this.is('column')||this.is('columnrange'))&&!this.options.stacking&&1<this.chart.series.length&&o.prototype.setStackedPoints.call(this,'group')};o.prototype.setStackedPoints=function(t){var c=t||this.options.stacking;if(c&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var k=this.processedXData,C=this.processedYData,M=[],w=C.length,g=this.options,S=g.threshold,v=n(g.startFromThreshold&&S,0);g=g.stack;t=t?this.type+','+c:this.stackKey;var x='-'+t,b=this.negStacks,p=this.yAxis,r=p.stacking.stacks,y=p.stacking.oldStacks,s,d;p.stacking.stacksTouched+=1;for(d=0;d<w;d++){var i=k[d],o=C[d],m=this.getStackIndicator(m,i,this.index),f=m.key,e=(s=b&&o<(v?0:S))?x:t;r[e]||(r[e]={});r[e][i]||(y[e]&&y[e][i]?(r[e][i]=y[e][i],r[e][i].total=null):r[e][i]=new l(p,p.options.stackLabels,s,i,g));e=r[e][i];null!==o?(e.points[f]=e.points[this.index]=[n(e.cumulative,v)],h(e.cumulative)||(e.base=f),e.touched=p.stacking.stacksTouched,0<m.index&&!1===this.singleStacks&&(e.points[f][0]=e.points[this.index+','+i+',0'][0])):e.points[f]=e.points[this.index]=null;'percent'===c?(s=s?t:x,b&&r[s]&&r[s][i]?(s=r[s][i],e.total=s.total=Math.max(s.total,e.total)+Math.abs(o)||0):e.total=a(e.total+(Math.abs(o)||0))):'group'===c?(u(o)&&(o=o[0]),null!==o&&(e.total=(e.total||0)+1)):e.total=a(e.total+(o||0));e.cumulative='group'===c?(e.total||1)-1:n(e.cumulative,v)+(o||0);null!==o&&(e.points[f].push(e.cumulative),M[d]=e.cumulative,e.hasValidPoints=!0)};'percent'===c&&(p.stacking.usePercentage=!0);'group'!==c&&(this.stackedYData=M);p.stacking.oldStacks={}}};o.prototype.modifyStacks=function(){var t=this,i=t.stackKey,o=t.yAxis.stacking.stacks,r=t.processedXData,e,s=t.options.stacking;t[s+'Stacker']&&[i,'-'+i].forEach(function(i){for(var a=r.length,n,h;a--;)if(n=r[a],e=t.getStackIndicator(e,n,t.index,i),h=(n=o[i]&&o[i][n])&&n.points[e.key])t[s+'Stacker'](h,n,a)})};o.prototype.percentStacker=function(t,e,i){e=e.total?100/e.total:0;t[0]=a(t[0]*e);t[1]=a(t[1]*e);this.stackedYData[i]=t[1]};o.prototype.getStackIndicator=function(t,e,i,o){!h(t)||t.x!==e||o&&t.key!==o?t={x:e,index:0,key:o}:t.index++;t.key=[i,e,t.index].join();return t};i.StackItem=l;return i.StackItem});i(e,'Series/Line/LineSeries.js',[e['Core/Color/Palette.js'],e['Core/Series/Series.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i,o){var r=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),s=o.defined,n=o.merge;o=function(i){function o(){var t=null!==i&&i.apply(this,arguments)||this;t.data=void 0;t.options=void 0;t.points=void 0;return t};r(o,i);o.prototype.drawGraph=function(){var e=this,o=this.options,i=(this.gappedPath||this.getGraphPath).call(this),s=this.chart.styledMode,r=[['graph','highcharts-graph']];s||r[0].push(o.lineColor||this.color||t.neutralColor20,o.dashStyle);r=e.getZonesGraphs(r);r.forEach(function(t,r){var a=t[0],n=e[a],h=n?'animate':'attr';n?(n.endX=e.preventGraphAnimation?null:i.xMap,n.animate({d:i})):i.length&&(e[a]=n=e.chart.renderer.path(i).addClass(t[1]).attr({zIndex:1}).add(e.group));n&&!s&&(a={stroke:t[2],'stroke-width':o.lineWidth,fill:e.fillGraph&&e.color||'none'},t[3]?a.dashstyle=t[3]:'square'!==o.linecap&&(a['stroke-linecap']=a['stroke-linejoin']='round'),n[h](a).shadow(2>r&&o.shadow));n&&(n.startX=i.xMap,n.isArea=i.isArea)})};o.prototype.getGraphPath=function(t,e,i){var r=this,l=r.options,o=l.step,p,a=[],h=[],n;t=t||r.points;(p=t.reversed)&&t.reverse();(o={right:1,center:2}[o]||o&&3)&&p&&(o=4-o);t=this.getValidPoints(t,!1,!(l.connectNulls&&!e&&!i));t.forEach(function(p,c){var u=p.plotX,f=p.plotY,d=t[c-1];(p.leftCliff||d&&d.rightCliff)&&!i&&(n=!0);p.isNull&&!s(e)&&0<c?n=!l.connectNulls:p.isNull&&!e?n=!0:(0===c||n?c=[['M',p.plotX,p.plotY]]:r.getPointSpline?c=[r.getPointSpline(t,p,c)]:o?(c=1===o?[['L',d.plotX,f]]:2===o?[['L',(d.plotX+u)/2,d.plotY],['L',(d.plotX+u)/2,f]]:[['L',u,d.plotY]],c.push(['L',u,f])):c=[['L',u,f]],h.push(p.x),o&&(h.push(p.x),2===o&&h.push(p.x)),a.push.apply(a,c),n=!1)});a.xMap=h;return r.graphPath=a};o.prototype.getZonesGraphs=function(t){this.zones.forEach(function(e,i){i=['zone-graph-'+i,'highcharts-graph highcharts-zone-graph-'+i+' '+(e.className||'')];this.chart.styledMode||i.push(e.color||this.color,e.dashStyle||this.options.dashStyle);t.push(i)},this);return t};o.defaultOptions=n(e.defaultOptions,{});return o}(e);i.registerSeriesType('line',o);'';return o});i(e,'Series/Area/AreaSeries.js',[e['Core/Color/Color.js'],e['Mixins/LegendSymbol.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i,o){var h=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),l=t.parse,s=i.seriesTypes.line;t=o.extend;var n=o.merge,a=o.objectEach,r=o.pick;o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;e.data=void 0;e.options=void 0;e.points=void 0;return e};h(e,t);e.prototype.drawGraph=function(){this.areaPath=[];t.prototype.drawGraph.apply(this);var e=this,i=this.areaPath,o=this.options,s=[['area','highcharts-area',this.color,o.fillColor]];this.zones.forEach(function(t,i){s.push(['zone-area-'+i,'highcharts-area highcharts-zone-area-'+i+' '+t.className,t.color||e.color,t.fillColor||o.fillColor])});s.forEach(function(t){var a=t[0],s=e[a],h=s?'animate':'attr',n={};s?(s.endX=e.preventGraphAnimation?null:i.xMap,s.animate({d:i})):(n.zIndex=0,s=e[a]=e.chart.renderer.path(i).addClass(t[1]).add(e.group),s.isArea=!0);e.chart.styledMode||(n.fill=r(t[3],l(t[2]).setOpacity(r(o.fillOpacity,.75)).get()));s[h](n);s.startX=i.xMap;s.shiftUnit=o.step?2:1})};e.prototype.getGraphPath=function(t){var h=s.prototype.getGraphPath,i=this.options,n=i.stacking,l=this.yAxis,e,p=[],c=[],g=this.index,m=l.stacking.stacks[this.stackKey],y=i.threshold,d=Math.round(l.getThreshold(i.threshold));i=r(i.connectNulls,'percent'===n);var f=function(e,i,o){var r=t[e];e=n&&m[r.x].points[g];var h=r[o+'Null']||0;o=r[o+'Cliff']||0;r=!0;if(o||h){var s=(h?e[0]:e[1])+o,a=e[0]+o;r=!!h}
else!n&&t[i]&&t[i].isNull&&(s=a=y);'undefined'!==typeof s&&(c.push({plotX:u,plotY:null===s?d:l.getThreshold(s),isNull:r,isCliff:!0}),p.push({plotX:u,plotY:null===a?d:l.getThreshold(a),doCurve:!1}))};t=t||this.points;n&&(t=this.getStackPoints(t));for(e=0;e<t.length;e++){n||(t[e].leftCliff=t[e].rightCliff=t[e].leftNull=t[e].rightNull=void 0);var o=t[e].isNull,u=r(t[e].rectPlotX,t[e].plotX),a=n?r(t[e].yBottom,d):d;if(!o||i)i||f(e,e-1,'left'),o&&!n&&i||(c.push(t[e]),p.push({x:e,plotX:u,plotY:a})),i||f(e,e+1,'right')};e=h.call(this,c,!0,!0);p.reversed=!0;o=h.call(this,p,!0,!0);(a=o[0])&&'M'===a[0]&&(o[0]=['L',a[1],a[2]]);o=e.concat(o);h=h.call(this,c,!1,i);o.xMap=e.xMap;this.areaPath=o;return h};e.prototype.getStackPoints=function(t){var h=[],o=[],f=this.xAxis,s=this.yAxis,n=s.stacking.stacks[this.stackKey],i={},l=this.index,p=s.series,c=p.length,d=r(s.options.reversedStacks,!0)?1:-1,e;t=t||this.points;if(this.options.stacking){for(e=0;e<t.length;e++)t[e].leftNull=t[e].rightNull=void 0,i[t[e].x]=t[e];a(n,function(t,e){null!==t.total&&o.push(e)});o.sort(function(t,e){return t-e});var u=p.map(function(t){return t.visible});o.forEach(function(t,r){var a=0,p,g;if(i[t]&&!i[t].isNull)h.push(i[t]),[-1,1].forEach(function(s){var f=1===s?'rightNull':'leftNull',a=0,h=n[o[r+s]];if(h)for(e=l;0<=e&&e<c;)p=h.points[e],p||(e===l?i[t][f]=!0:u[e]&&(g=n[t].points[e])&&(a-=g[1]-g[0])),e+=d;i[t][1===s?'rightCliff':'leftCliff']=a});else{for(e=l;0<=e&&e<c;){if(p=n[t].points[e]){a=p[1];break};e+=d};a=s.translate(a,0,1,0,1);h.push({isNull:!0,plotX:f.translate(t,0,0,0,1),x:t,plotY:a,yBottom:a})}})};return h};e.defaultOptions=n(s.defaultOptions,{threshold:0});return e}(s);t(o.prototype,{singleStacks:!1,drawLegendSymbol:e.drawRectangle});i.registerSeriesType('area',o);'';return o});i(e,'Series/Spline/SplineSeries.js',[e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e){var r=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),o=t.seriesTypes.line,s=e.merge,i=e.pick;e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;e.data=void 0;e.options=void 0;e.points=void 0;return e};r(e,t);e.prototype.getPointSpline=function(t,e,o){var l=e.plotX||0,r=e.plotY||0,a=t[o-1];o=t[o+1];if(a&&!a.isNull&&!1!==a.doCurve&&!e.isCliff&&o&&!o.isNull&&!1!==o.doCurve&&!e.isCliff){t=a.plotY||0;var h=o.plotX||0;o=o.plotY||0;var p=0,c=(1.5*l+(a.plotX||0))/2.5,n=(1.5*r+t)/2.5;h=(1.5*l+h)/2.5;var s=(1.5*r+o)/2.5;h!==c&&(p=(s-n)*(h-l)/(h-c)+r-s);n+=p;s+=p;n>t&&n>r?(n=Math.max(t,r),s=2*r-n):n<t&&n<r&&(n=Math.min(t,r),s=2*r-n);s>o&&s>r?(s=Math.max(o,r),n=2*r-s):s<o&&s<r&&(s=Math.min(o,r),n=2*r-s);e.rightContX=h;e.rightContY=s};e=['C',i(a.rightContX,a.plotX,0),i(a.rightContY,a.plotY,0),i(c,l,0),i(n,r,0),l,r];a.rightContX=a.rightContY=void 0;return e};e.defaultOptions=s(o.defaultOptions);return e}(o);t.registerSeriesType('spline',e);'';return e});i(e,'Series/AreaSpline/AreaSplineSeries.js',[e['Series/Area/AreaSeries.js'],e['Series/Spline/SplineSeries.js'],e['Mixins/LegendSymbol.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i,o,r){var n=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),s=t.prototype,a=r.extend,h=r.merge;r=function(i){function o(){var t=null!==i&&i.apply(this,arguments)||this;t.data=void 0;t.points=void 0;t.options=void 0;return t};n(o,i);o.defaultOptions=h(e.defaultOptions,t.defaultOptions);return o}(e);a(r.prototype,{getGraphPath:s.getGraphPath,getStackPoints:s.getStackPoints,drawGraph:s.drawGraph,drawLegendSymbol:i.drawRectangle});o.registerSeriesType('areaspline',r);'';return r});i(e,'Series/Column/ColumnSeries.js',[e['Core/Animation/AnimationUtilities.js'],e['Core/Color/Color.js'],e['Core/Globals.js'],e['Mixins/LegendSymbol.js'],e['Core/Color/Palette.js'],e['Core/Series/Series.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s,a,n){var v=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),x=t.animObject,b=e.parse,C=i.hasTouch;t=i.noop;var l=n.clamp,f=n.css,g=n.defined,d=n.extend,m=n.fireEvent,u=n.isArray,p=n.isNumber,c=n.merge,h=n.pick,y=n.objectEach;n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;e.borderWidth=void 0;e.data=void 0;e.group=void 0;e.options=void 0;e.points=void 0;return e};v(e,t);e.prototype.animate=function(t){var e=this,i=this.yAxis,a=e.options,s=this.chart.inverted,o={},n=s?'translateX':'translateY';if(t)o.scaleY=.001,t=l(i.toPixels(a.threshold),i.pos,i.pos+i.len),s?o.translateX=t-i.len:o.translateY=t,e.clipBox&&e.setClip(),e.group.attr(o);else{var r=e.group.attr(n);e.group.animate({scaleY:1},d(x(e.options.animation),{step:function(t,s){e.group&&(o[n]=r+s.pos*(i.pos-r),e.group.attr(o))}}))}};e.prototype.init=function(e,i){t.prototype.init.apply(this,arguments);var o=this;e=o.chart;e.hasRendered&&e.series.forEach(function(t){t.type===o.type&&(t.isDirty=!0)})};e.prototype.getColumnMetrics=function(){var e=this,i=e.options,t=e.xAxis,c=e.yAxis,r=t.options.reversedStacks;r=t.reversed&&!r||!t.reversed&&r;var n,l={},o=0;!1===i.grouping?o=1:e.chart.series.forEach(function(t){var s=t.yAxis,i=t.options;if(t.type===e.type&&(t.visible||!e.chart.options.chart.ignoreHiddenSeries)&&c.len===s.len&&c.pos===s.pos){if(i.stacking&&'group'!==i.stacking){n=t.stackKey;'undefined'===typeof l[n]&&(l[n]=o++);var r=l[n]}
else!1!==i.grouping&&(r=o++);t.columnIndex=r}});var a=Math.min(Math.abs(t.transA)*(t.ordinal&&t.ordinal.slope||i.pointRange||t.closestPointRange||t.tickInterval||1),t.len),p=a*i.groupPadding,s=(a-2*p)/(o||1);i=Math.min(i.maxPointWidth||t.len,h(i.pointWidth,s*(1-2*i.pointPadding)));e.columnMetrics={width:i,offset:(s-i)/2+(p+((e.columnIndex||0)+(r?1:0))*s-a/2)*(r?-1:1),paddedWidth:s,columnCount:o};return e.columnMetrics};e.prototype.crispCol=function(t,e,i,o){var n=this.chart,r=this.borderWidth,s=-(r%2?.5:0);r=r%2?.5:1;n.inverted&&n.renderer.isVML&&(r+=1);this.options.crisp&&(i=Math.round(t+i)+s,t=Math.round(t)+s,i-=t);o=Math.round(e+o)+r;s=.5>=Math.abs(e)&&.5<o;e=Math.round(e)+r;o-=e;s&&o&&(--e,o+=1);return{x:t,y:e,width:i,height:o}};e.prototype.adjustForMissingColumns=function(t,e,i,o){var n=this,a=this.options.stacking;if(!i.isNull&&1<o.columnCount){var s=0,r=0;y(this.yAxis.stacking&&this.yAxis.stacking.stacks,function(t){if('number'===typeof i.x&&(t=t[i.x.toString()])){var e=t.points[n.index],o=t.total;a?(e&&(s=r),t.hasValidPoints&&r++):u(e)&&(s=e[1],r=o||0)}});t=(i.plotX||0)+((r-1)*o.paddedWidth+e)/2-e-s*o.paddedWidth};return t};e.prototype.translate=function(){var t=this,i=t.chart,a=t.options,y=t.dense=2>t.closestPointRange*t.xAxis.transA;y=t.borderWidth=h(a.borderWidth,y?0:1);var c=t.xAxis,e=t.yAxis,o=a.threshold,n=t.translatedThreshold=e.getThreshold(o),r=h(a.minPointLength,5),d=t.getColumnMetrics(),u=d.width,f=t.barW=Math.max(u,1+2*y),v=t.pointXOffset=d.offset,x=t.dataMin,m=t.dataMax;i.inverted&&(n-=.5);a.pointPadding&&(f=Math.ceil(f));s.prototype.translate.apply(t);t.points.forEach(function(s){var k=h(s.yBottom,n),b=999+Math.abs(k),w=u,P=s.plotX||0;b=l(s.plotY,-b,e.len+b);var y=P+v,C=f,S=Math.min(b,k),M=Math.max(b,k)-S;if(r&&Math.abs(M)<r){M=r;var A=!e.reversed&&!s.negative||e.reversed&&s.negative;p(o)&&p(m)&&s.y===o&&m<=o&&(e.min||0)<o&&(x!==m||(e.max||0)<=o)&&(A=!A);S=Math.abs(S-n)>r?k-r:n-(A?r:0)};g(s.options.pointWidth)&&(w=C=Math.ceil(s.options.pointWidth),y-=Math.round((w-u)/2));a.centerInCategory&&(y=t.adjustForMissingColumns(y,w,s,d));s.barX=y;s.pointWidth=w;s.tooltipPos=i.inverted?[l(e.len+e.pos-i.plotLeft-b,e.pos-i.plotLeft,e.len+e.pos-i.plotLeft),c.len+c.pos-i.plotTop-(P||0)-v-C/2,M]:[c.left-i.plotLeft+y+C/2,l(b+e.pos-i.plotTop,e.pos-i.plotTop,e.len+e.pos-i.plotTop),M];s.shapeType=t.pointClass.prototype.shapeType||'rect';s.shapeArgs=t.crispCol.apply(t,s.isNull?[y,n,C,0]:[y,S,C,M])})};e.prototype.drawGraph=function(){this.group[this.dense?'addClass':'removeClass']('highcharts-dense-data')};e.prototype.pointAttribs=function(t,e){var l=this.options,i=this.pointAttrToOptions||{};var r=i.stroke||'borderColor',p=i['stroke-width']||'borderWidth',s=t&&t.color||this.color,n=t&&t[r]||l[r]||this.color||s,a=t&&t[p]||l[p]||this[p]||0;i=t&&t.options.dashStyle||l.dashStyle;var d=h(t&&t.opacity,l.opacity,1);if(t&&this.zones.length){var o=t.getZone();s=t.options.color||o&&(o.color||t.nonZonedColor)||this.color;o&&(n=o.borderColor||n,i=o.dashStyle||i,a=o.borderWidth||a)};e&&t&&(t=c(l.states[e],t.options.states&&t.options.states[e]||{}),e=t.brightness,s=t.color||'undefined'!==typeof e&&b(s).brighten(t.brightness).get()||s,n=t[r]||n,a=t[p]||a,i=t.dashStyle||i,d=h(t.opacity,d));r={fill:s,stroke:n,'stroke-width':a,opacity:d};i&&(r.dashstyle=i);return r};e.prototype.drawPoints=function(){var t=this,i=this.chart,e=t.options,s=i.renderer,r=e.animationLimit||250,o;t.points.forEach(function(n){var a=n.graphic,l=!!a,h=a&&i.pointCount<r?'animate':'attr';if(p(n.plotY)&&null!==n.y){o=n.shapeArgs;a&&n.hasNewShapeType()&&(a=a.destroy());t.enabledDataSorting&&(n.startXPos=t.xAxis.reversed?-(o?o.width:0):t.xAxis.width);a||(n.graphic=a=s[n.shapeType](o).add(n.group||t.group))&&t.enabledDataSorting&&i.hasRendered&&i.pointCount<r&&(a.attr({x:n.startXPos}),l=!0,h='animate');if(a&&l)a[h](c(o));if(e.borderRadius)a[h]({r:e.borderRadius});i.styledMode||a[h](t.pointAttribs(n,n.selected&&'select')).shadow(!1!==n.allowShadow&&e.shadow,null,e.stacking&&!e.borderRadius);a&&(a.addClass(n.getClassName(),!0),a.attr({visibility:n.visible?'inherit':'hidden'}))}
else a&&(n.graphic=a.destroy())})};e.prototype.drawTracker=function(){var t=this,i=t.chart,e=i.pointer,o=function(t){var i=e.getPointFromEvent(t);'undefined'!==typeof i&&(e.isDirectTouch=!0,i.onMouseOver(t))},r;t.points.forEach(function(t){r=u(t.dataLabels)?t.dataLabels:t.dataLabel?[t.dataLabel]:[];t.graphic&&(t.graphic.element.point=t);r.forEach(function(e){e.div?e.div.point=t:e.element.point=t})});t._hasTracking||(t.trackerGroups.forEach(function(r){if(t[r]){t[r].addClass('highcharts-tracker').on('mouseover',o).on('mouseout',function(t){e.onTrackerMouseOut(t)});if(C)t[r].on('touchstart',o);!i.styledMode&&t.options.cursor&&t[r].css(f).css({cursor:t.options.cursor})}}),t._hasTracking=!0);m(this,'afterDrawTracker')};e.prototype.remove=function(){var t=this,e=t.chart;e.hasRendered&&e.series.forEach(function(e){e.type===t.type&&(e.isDirty=!0)});s.prototype.remove.apply(t,arguments)};e.defaultOptions=c(s.defaultOptions,{borderRadius:0,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:r.neutralColor20,borderColor:r.neutralColor100}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:r.backgroundColor});return e}(s);d(n.prototype,{cropShoulder:0,directTouch:!0,drawLegendSymbol:o.drawRectangle,getSymbol:t,negStacks:!0,trackerGroups:['group','dataLabelsGroup']});a.registerSeriesType('column',n);'';'';return n});i(e,'Series/Bar/BarSeries.js',[e['Series/Column/ColumnSeries.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i){var o=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),r=i.extend,s=i.merge;i=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;t.data=void 0;t.options=void 0;t.points=void 0;return t};o(i,e);i.defaultOptions=s(t.defaultOptions,{});return i}(t);r(i.prototype,{inverted:!0});e.registerSeriesType('bar',i);'';return i});i(e,'Series/Scatter/ScatterSeries.js',[e['Series/Column/ColumnSeries.js'],e['Series/Line/LineSeries.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i,o){var r=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),s=o.addEvent,n=o.extend,a=o.merge;o=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;e.data=void 0;e.options=void 0;e.points=void 0;return e};r(i,t);i.prototype.applyJitter=function(){var e=this,t=this.options.jitter,i=this.points.length;t&&this.points.forEach(function(o,r){['x','y'].forEach(function(s,n){var h='plot'+s.toUpperCase();if(t[s]&&!o.isNull){var a=e[s+'Axis'],p=t[s]*a.transA;if(a&&!a.isLog){var l=Math.max(0,o[h]-p);a=Math.min(a.len,o[h]+p);n=1E4*Math.sin(r+n*i);o[h]=l+(a-l)*(n-Math.floor(n));'x'===s&&(o.clientX=o.plotX)}}})})};i.prototype.drawGraph=function(){(this.options.lineWidth||0===this.options.lineWidth&&this.graph&&this.graph.strokeWidth())&&t.prototype.drawGraph.call(this)};i.defaultOptions=a(e.defaultOptions,{lineWidth:0,findNearestPointBy:'xy',jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 10px"> {series.name}</span><br/>',pointFormat:'x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>'}});return i}(e);n(o.prototype,{drawTracker:t.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:['group','markerGroup','dataLabelsGroup'],takeOrdinalPosition:!1});s(o,'afterTranslate',function(){this.applyJitter()});i.registerSeriesType('scatter',o);'';return o});i(e,'Mixins/CenteredSeries.js',[e['Core/Globals.js'],e['Core/Series/Series.js'],e['Core/Utilities.js']],function(t,e,i){var r=i.isNumber,o=i.pick,n=i.relativeLength,s=t.deg2rad;return t.CenteredSeriesMixin={getCenter:function(){var t=this.options,s=this.chart,h=2*(t.slicedOffset||0),l=s.plotWidth-2*h,p=s.plotHeight-2*h,i=t.center,c=Math.min(l,p),r=t.size,a=t.innerSize||0;'string'===typeof r&&(r=parseFloat(r));'string'===typeof a&&(a=parseFloat(a));t=[o(i[0],'50%'),o(i[1],'50%'),o(r&&0>r?void 0:t.size,'100%'),o(a&&0>a?void 0:t.innerSize||0,'0%')];!s.angular||this instanceof e||(t[3]=0);for(i=0;4>i;++i)r=t[i],s=2>i||2===i&&/%$/.test(r),t[i]=n(r,[l,p,c,t[2]][i])+(s?h:0);t[3]>t[2]&&(t[3]=t[2]);return t},getStartAndEndRadians:function(t,e){t=r(t)?t:0;e=r(e)&&e>t&&360>e-t?e:t+360;return{start:s*(t+-90),end:s*(e+-90)}}}});i(e,'Series/Pie/PiePoint.js',[e['Core/Animation/AnimationUtilities.js'],e['Core/Series/Point.js'],e['Core/Utilities.js']],function(t,e,i){var a=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),h=t.setAnimation,r=i.addEvent,l=i.defined;t=i.extend;var s=i.isNumber,o=i.pick,n=i.relativeLength;i=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;e.labelDistance=void 0;e.options=void 0;e.series=void 0;return e};a(i,t);i.prototype.getConnectorPath=function(){var t=this.labelPosition,i=this.series.options.dataLabels,e=i.connectorShape,o=this.connectorShapes;o[e]&&(e=o[e]);return e.call(this,{x:t.final.x,y:t.final.y,alignment:t.alignment},t.connectorPosition,i)};i.prototype.getTranslate=function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}};i.prototype.haloPath=function(t){var e=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(e.x,e.y,e.r+t,e.r+t,{innerR:e.r-1,start:e.start,end:e.end})};i.prototype.init=function(){e.prototype.init.apply(this,arguments);var t=this;t.name=o(t.name,'Slice');var i=function(e){t.slice('select'===e.type)};r(t,'select',i);r(t,'unselect',i);return t};i.prototype.isValid=function(){return s(this.y)&&0<=this.y};i.prototype.setVisible=function(t,e){var i=this,r=i.series,s=r.chart,n=r.options.ignoreHiddenPoint;e=o(e,n);t!==i.visible&&(i.visible=i.options.visible=t='undefined'===typeof t?!i.visible:t,r.options.data[r.data.indexOf(i)]=i.options,['graphic','dataLabel','connector','shadowGroup'].forEach(function(e){if(i[e])i[e][t?'show':'hide'](t)}),i.legendItem&&s.legend.colorizeItem(i,t),t||'hover'!==i.state||i.setState(''),n&&(r.isDirty=!0),e&&s.redraw())};i.prototype.slice=function(t,e,i){var r=this.series;h(i,r.chart);o(e,!0);this.sliced=this.options.sliced=l(t)?t:!this.sliced;r.options.data[r.data.indexOf(this)]=this.options;this.graphic&&this.graphic.animate(this.getTranslate());this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())};return i}(e);t(i.prototype,{connectorShapes:{fixedOffset:function(t,e,i){var o=e.breakAt;e=e.touchingSliceAt;return[['M',t.x,t.y],i.softConnector?['C',t.x+('left'===t.alignment?-5:5),t.y,2*o.x-e.x,2*o.y-e.y,o.x,o.y]:['L',o.x,o.y],['L',e.x,e.y]]},straight:function(t,e){e=e.touchingSliceAt;return[['M',t.x,t.y],['L',e.x,e.y]]},crookedLine:function(t,e,i){e=e.touchingSliceAt;var r=this.series,s=r.center[0],o=r.chart.plotWidth,h=r.chart.plotLeft;r=t.alignment;var a=this.shapeArgs.r;i=n(i.crookDistance,1);o='left'===r?s+a+(o+h-s-a)*(1-i):h+(s-a)*i;i=['L',o,t.y];s=!0;if('left'===r?o>t.x||o<e.x:o<t.x||o>e.x)s=!1;t=[['M',t.x,t.y]];s&&t.push(i);t.push(['L',e.x,e.y]);return t}}});return i});i(e,'Series/Pie/PieSeries.js',[e['Mixins/CenteredSeries.js'],e['Series/Column/ColumnSeries.js'],e['Core/Globals.js'],e['Mixins/LegendSymbol.js'],e['Core/Color/Palette.js'],e['Series/Pie/PiePoint.js'],e['Core/Series/Series.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Renderer/SVG/SVGRenderer.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s,n,h,l,a){var m=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),y=t.getStartAndEndRadians;i=i.noop;var d=a.clamp,u=a.extend,f=a.fireEvent,p=a.merge,c=a.pick,g=a.relativeLength;a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;e.center=void 0;e.data=void 0;e.maxLabelDistance=void 0;e.options=void 0;e.points=void 0;return e};m(e,t);e.prototype.animate=function(t){var e=this,o=e.points,i=e.startAngleRad;t||o.forEach(function(t){var r=t.graphic,o=t.shapeArgs;r&&o&&(r.attr({r:c(t.startR,e.center&&e.center[3]/2),start:i,end:i}),r.animate({r:o.r,start:o.start,end:o.end},e.options.animation))})};e.prototype.drawEmpty=function(){var o=this.startAngleRad,s=this.endAngleRad,t=this.options;if(0===this.total&&this.center){var e=this.center[0],i=this.center[1];this.graph||(this.graph=this.chart.renderer.arc(e,i,this.center[1]/2,0,o,s).addClass('highcharts-empty-series').add(this.group));this.graph.attr({d:l.prototype.symbols.arc(e,i,this.center[2]/2,0,{start:o,end:s,innerR:this.center[3]/2})});this.chart.styledMode||this.graph.attr({'stroke-width':t.borderWidth,fill:t.fillColor||'none',stroke:t.color||r.neutralColor20})}
else this.graph&&(this.graph=this.graph.destroy())};e.prototype.drawPoints=function(){var t=this.chart.renderer;this.points.forEach(function(e){e.graphic&&e.hasNewShapeType()&&(e.graphic=e.graphic.destroy());e.graphic||(e.graphic=t[e.shapeType](e.shapeArgs).add(e.series.group),e.delayedRendering=!0)})};e.prototype.generatePoints=function(){t.prototype.generatePoints.call(this);this.updateTotals()};e.prototype.getX=function(t,e,i){var o=this.center,r=this.radii?this.radii[i.index]||0:o[2]/2;t=Math.asin(d((t-o[1])/(r+i.labelDistance),-1,1));return o[0]+(e?-1:1)*Math.cos(t)*(r+i.labelDistance)+(0<i.labelDistance?(e?-1:1)*this.options.dataLabels.padding:0)};e.prototype.hasData=function(){return!!this.processedXData.length};e.prototype.redrawPoints=function(){var t=this,i=t.chart,a=i.renderer,o,e,r,s,n=t.options.shadow;this.drawEmpty();!n||t.shadowGroup||i.styledMode||(t.shadowGroup=a.g('shadow').attr({zIndex:-1}).add(t.group));t.points.forEach(function(h){var c={};e=h.graphic;if(!h.isNull&&e){s=h.shapeArgs;o=h.getTranslate();if(!i.styledMode){var l=h.shadowGroup;n&&!l&&(l=h.shadowGroup=a.g('shadow').add(t.shadowGroup));l&&l.attr(o);r=t.pointAttribs(h,h.selected&&'select')};h.delayedRendering?(e.setRadialReference(t.center).attr(s).attr(o),i.styledMode||e.attr(r).attr({'stroke-linejoin':'round'}).shadow(n,l),h.delayedRendering=!1):(e.setRadialReference(t.center),i.styledMode||p(!0,c,r),p(!0,c,s,o),e.animate(c));e.attr({visibility:h.visible?'inherit':'hidden'});e.addClass(h.getClassName(),!0)}
else e&&(h.graphic=e.destroy())})};e.prototype.sortByAngle=function(t,e){t.sort(function(t,i){return'undefined'!==typeof t.angle&&(i.angle-t.angle)*e})};e.prototype.translate=function(t){this.generatePoints();var l=0,o=this.options,p=o.slicedOffset,x=p+(o.borderWidth||0),s=y(o.startAngle,o.endAngle),d=this.startAngleRad=s.start;s=(this.endAngleRad=s.end)-d;var u=this.points,v=o.dataLabels.distance;o=o.ignoreHiddenPoint;var h,m=u.length;t||(this.center=t=this.getCenter());for(h=0;h<m;h++){var e=u[h],r=d+l*s;!e.isValid()||o&&!e.visible||(l+=e.percentage/100);var i=d+l*s;e.shapeType='arc';e.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:Math.round(1E3*r)/1E3,end:Math.round(1E3*i)/1E3};e.labelDistance=c(e.options.dataLabels&&e.options.dataLabels.distance,v);e.labelDistance=g(e.labelDistance,e.shapeArgs.r);this.maxLabelDistance=Math.max(this.maxLabelDistance||0,e.labelDistance);i=(i+r)/2;i>1.5*Math.PI?i-=2*Math.PI:i<-Math.PI/2&&(i+=2*Math.PI);e.slicedTranslation={translateX:Math.round(Math.cos(i)*p),translateY:Math.round(Math.sin(i)*p)};var n=Math.cos(i)*t[2]/2,a=Math.sin(i)*t[2]/2;e.tooltipPos=[t[0]+.7*n,t[1]+.7*a];e.half=i<-Math.PI/2||i>Math.PI/2?1:0;e.angle=i;r=Math.min(x,e.labelDistance/5);e.labelPosition={natural:{x:t[0]+n+Math.cos(i)*e.labelDistance,y:t[1]+a+Math.sin(i)*e.labelDistance},'final':{},alignment:0>e.labelDistance?'center':e.half?'right':'left',connectorPosition:{breakAt:{x:t[0]+n+Math.cos(i)*r,y:t[1]+a+Math.sin(i)*r},touchingSliceAt:{x:t[0]+n,y:t[1]+a}}}};f(this,'afterTranslate')};e.prototype.updateTotals=function(){var e,i=0,o=this.points,r=o.length,s=this.options.ignoreHiddenPoint;for(e=0;e<r;e++){var t=o[e];!t.isValid()||s&&!t.visible||(i+=t.y)};this.total=i;for(e=0;e<r;e++)t=o[e],t.percentage=0<i&&(t.visible||!s)?t.y/i*100:0,t.total=i};e.defaultOptions=p(n.defaultOptions,{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{allowOverlap:!0,connectorPadding:5,connectorShape:'fixedOffset',crookDistance:'70%',distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:'point',marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:r.backgroundColor,borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}});return e}(n);u(a.prototype,{axisTypes:[],directTouch:!0,drawGraph:null,drawLegendSymbol:o.drawRectangle,drawTracker:e.prototype.drawTracker,getCenter:t.getCenter,getSymbol:i,isCartesian:!1,noSharedTooltip:!0,pointAttribs:e.prototype.pointAttribs,pointClass:s,requireSorting:!1,searchPoint:i,trackerGroups:['group','dataLabelsGroup']});h.registerSeriesType('pie',a);'';return a});i(e,'Core/Series/DataLabels.js',[e['Core/Animation/AnimationUtilities.js'],e['Core/Globals.js'],e['Core/Color/Palette.js'],e['Core/Series/Series.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s){var x=t.getDeferredAnimation;t=e.noop;r=r.seriesTypes;var f=s.arrayMax,p=s.clamp,a=s.defined,d=s.extend,u=s.fireEvent,g=s.format,h=s.isArray,l=s.merge,m=s.objectEach,n=s.pick,y=s.relativeLength,v=s.splat,c=s.stableSort;'';e.distribute=function(t,i,o){function u(t,e){return t.target-e.target};var r,a=!0,s=t,l=[],h=0,d=s.reducedLen||i;for(r=t.length;r--;)h+=t[r].size;if(h>d){c(t,function(t,e){return(e.rank||0)-(t.rank||0)});for(h=r=0;h<=d;)h+=t[r].size,r++;l=t.splice(r-1,t.length)};c(t,u);for(t=t.map(function(t){return{size:t.size,targets:[t.target],align:n(t.align,.5)}});a;){for(r=t.length;r--;)a=t[r],h=(Math.min.apply(0,a.targets)+Math.max.apply(0,a.targets))/2,a.pos=p(h-a.size*a.align,0,i-a.size);r=t.length;for(a=!1;r--;)0<r&&t[r-1].pos+t[r-1].size>t[r].pos&&(t[r-1].size+=t[r].size,t[r-1].targets=t[r-1].targets.concat(t[r].targets),t[r-1].align=.5,t[r-1].pos+t[r-1].size>i&&(t[r-1].pos=i-t[r-1].size),t.splice(r,1),a=!0)};s.push.apply(s,l);r=0;t.some(function(t){var n=0;if(t.targets.some(function(){s[r].pos=t.pos+n;if('undefined'!==typeof o&&Math.abs(s[r].pos-s[r].target)>o)return s.slice(0,r+1).forEach(function(t){delete t.pos}),s.reducedLen=(s.reducedLen||i)-.1*i,s.reducedLen>.1*i&&e.distribute(s,i,o),!0;n+=s[r].size;r++}))return!0});c(s,u)};o.prototype.drawDataLabels=function(){function C(t,e){var i=e.filter;return i?(e=i.operator,t=t[i.property],i=i.value,'>'===e&&t>i||'<'===e&&t<i||'>='===e&&t>=i||'<='===e&&t<=i||'=='===e&&t==i||'==='===e&&t===i?!0:!1):!0};function f(t,e){var i=[],o;if(h(t)&&!h(e))i=t.map(function(t){return l(t,e)});else if(h(e)&&!h(t))i=e.map(function(e){return l(t,e)});else if(h(t)||h(e))for(o=Math.max(t.length,e.length);o--;)i[o]=l(t[o],e[o]);else i=l(t,e);return i};var t=this,e=t.chart,r=t.options,o=r.dataLabels,b=t.points,y,s=t.hasRendered||0,d=o.animation;d=o.defer?x(e,d,t):{defer:0,duration:0};var c=e.renderer;o=f(f(e.options.plotOptions&&e.options.plotOptions.series&&e.options.plotOptions.series.dataLabels,e.options.plotOptions&&e.options.plotOptions[t.type]&&e.options.plotOptions[t.type].dataLabels),o);u(this,'drawDataLabels');if(h(o)||o.enabled||t._hasPointLabels){var p=t.plotGroup('dataLabelsGroup','data-labels',s?'inherit':'hidden',o.zIndex||6);p.attr({opacity:+s});!s&&(s=t.dataLabelsGroup)&&(t.visible&&p.show(!0),s[r.animation?'animate':'attr']({opacity:1},d));b.forEach(function(s){y=v(f(o,s.dlOptions||s.options&&s.options.dataLabels));y.forEach(function(o,h){var y=o.enabled&&(!s.isNull||s.dataLabelOnNull)&&C(s,o),l=s.dataLabels?s.dataLabels[h]:s.dataLabel,b=s.connectors?s.connectors[h]:s.connector,x=n(o.distance,s.labelDistance),M=!l;if(y){var u=s.getLabelConfig(),d=n(o[s.formatPrefix+'Format'],o.format);u=a(d)?g(d,u,e):(o[s.formatPrefix+'Formatter']||o.formatter).call(u,o);d=o.style;var v=o.rotation;e.styledMode||(d.color=n(o.color,d.color,t.color,i.neutralColor100),'contrast'===d.color?(s.contrastColor=c.getContrast(s.color||t.color),d.color=!a(x)&&o.inside||0>x||r.stacking?s.contrastColor:i.neutralColor100):delete s.contrastColor,r.cursor&&(d.cursor=r.cursor));var f={r:o.borderRadius||0,rotation:v,padding:o.padding,zIndex:1};e.styledMode||(f.fill=o.backgroundColor,f.stroke=o.borderColor,f['stroke-width']=o.borderWidth);m(f,function(t,e){'undefined'===typeof t&&delete f[e]})};!l||y&&a(u)?y&&a(u)&&(l?f.text=u:(s.dataLabels=s.dataLabels||[],l=s.dataLabels[h]=v?c.text(u,0,-9999,o.useHTML).addClass('highcharts-data-label'):c.label(u,0,-9999,o.shape,null,null,o.useHTML,null,'data-label'),h||(s.dataLabel=l),l.addClass(' highcharts-data-label-color-'+s.colorIndex+' '+(o.className||'')+(o.useHTML?' highcharts-tracker':''))),l.options=o,l.attr(f),e.styledMode||l.css(d).shadow(o.shadow),l.added||l.add(p),o.textPath&&!o.useHTML&&(l.setTextPath(s.getDataLabelPath&&s.getDataLabelPath(l)||s.graphic,o.textPath),s.dataLabelPath&&!o.textPath.enabled&&(s.dataLabelPath=s.dataLabelPath.destroy())),t.alignDataLabel(s,l,o,null,M)):(s.dataLabel=s.dataLabel&&s.dataLabel.destroy(),s.dataLabels&&(1===s.dataLabels.length?delete s.dataLabels:delete s.dataLabels[h]),h||delete s.dataLabel,b&&(s.connector=s.connector.destroy(),s.connectors&&(1===s.connectors.length?delete s.connectors:delete s.connectors[h])))})})};u(this,'afterDrawDataLabels')};o.prototype.alignDataLabel=function(t,e,i,o,r){var v=this,a=this.chart,p=this.isCartesian&&a.inverted,c=this.enabledDataSorting,s=n(t.dlBox&&t.dlBox.centerX,t.plotX,-9999),m=n(t.plotY,-9999),h=e.getBBox(),f=i.rotation,g=i.align,x=a.isInsidePlot(s,Math.round(m),p),u='justify'===n(i.overflow,c?'none':'justify'),y=this.visible&&!1!==t.visible&&(t.series.forceDL||c&&!u||x||i.inside&&o&&a.isInsidePlot(s,p?o.x+1:o.y+o.height-1,p)),l=function(i){c&&v.xAxis&&!u&&v.setDataLabelStartPos(t,e,r,x,i)};if(y){var b=a.renderer.fontMetrics(a.styledMode?void 0:i.style.fontSize,e).b;o=d({x:p?this.yAxis.len-m:s,y:Math.round(p?this.xAxis.len-s:m),width:0,height:0},o);d(i,{width:h.width,height:h.height});f?(u=!1,s=a.renderer.rotCorr(b,f),s={x:o.x+(i.x||0)+o.width/2+s.x,y:o.y+(i.y||0)+{top:0,middle:.5,bottom:1}[i.verticalAlign]*o.height},l(s),e[r?'attr':'animate'](s).attr({align:g}),l=(f+720)%360,l=180<l&&360>l,'left'===g?s.y-=l?h.height:0:'center'===g?(s.x-=h.width/2,s.y-=h.height/2):'right'===g&&(s.x-=h.width,s.y-=l?0:h.height),e.placed=!0,e.alignAttr=s):(l(o),e.align(i,null,o),s=e.alignAttr);u&&0<=o.height?this.justifyDataLabel(e,i,s,h,o,r):n(i.crop,!0)&&(y=a.isInsidePlot(s.x,s.y)&&a.isInsidePlot(s.x+h.width,s.y+h.height));if(i.shape&&!f)e[r?'attr':'animate']({anchorX:p?a.plotWidth-t.plotY:t.plotX,anchorY:p?a.plotHeight-t.plotX:t.plotY})};r&&c&&(e.placed=!1);y||c&&!u||(e.hide(!0),e.placed=!1)};o.prototype.setDataLabelStartPos=function(t,e,i,o,r){var h=this.chart,a=h.inverted,s=this.xAxis,l=s.reversed,n=a?e.height/2:e.width/2;t=(t=t.pointWidth)?t/2:0;s=a?r.x:l?-n-t:s.width-n+t;r=a?l?this.yAxis.height-n+t:-n-t:r.y;e.startXPos=s;e.startYPos=r;o?'hidden'===e.visibility&&(e.show(),e.attr({opacity:0}).animate({opacity:1})):e.attr({opacity:1}).animate({opacity:0},void 0,e.hide);h.hasRendered&&(i&&e.attr({x:e.startXPos,y:e.startYPos}),e.placed=!0)};o.prototype.justifyDataLabel=function(t,e,i,o,r,s){var p=this.chart,d=e.align,u=e.verticalAlign,c=t.box?0:t.padding||0,a=e.x;a=void 0===a?0:a;var n=e.y,l=void 0===n?0:n;n=i.x+c;if(0>n){'right'===d&&0<=a?(e.align='left',e.inside=!0):a-=n;var h=!0};n=i.x+o.width-c;n>p.plotWidth&&('left'===d&&0>=a?(e.align='right',e.inside=!0):a+=p.plotWidth-n,h=!0);n=i.y+c;0>n&&('bottom'===u&&0<=l?(e.verticalAlign='top',e.inside=!0):l-=n,h=!0);n=i.y+o.height-c;n>p.plotHeight&&('top'===u&&0>=l?(e.verticalAlign='bottom',e.inside=!0):l+=p.plotHeight-n,h=!0);h&&(e.x=a,e.y=l,t.placed=!s,t.align(e,void 0,r));return h};r.pie&&(r.pie.prototype.dataLabelPositioners={radialDistributionY:function(t){return t.top+t.distributeBox.pos},radialDistributionX:function(t,e,i,o){return t.getX(i<e.top+2||i>e.bottom-2?o:i,e.half,e)},justify:function(t,e,i){return i[0]+(t.half?-1:1)*(e+t.labelDistance)},alignToPlotEdges:function(t,e,i,o){t=t.getBBox().width;return e?t+o:i-t-o},alignToConnectors:function(t,e,i,o){var r=0,s;t.forEach(function(t){s=t.dataLabel.getBBox().width;s>r&&(r=s)});return e?r+o:i-r-o}},r.pie.prototype.drawDataLabels=function(){var t=this,T=t.data,r,u=t.chart,p=t.options.dataLabels||{},m=p.connectorPadding,L,k=u.plotWidth,O=u.plotHeight,E=u.plotLeft,j=Math.round(u.chartWidth/3),g,P=t.center,x=P[2]/2,w=P[1],c,b,y,C,D=[[],[]],s,d,M,A,h=[0,0,0,0],S=t.dataLabelPositioners,v;t.visible&&(p.enabled||t._hasPointLabels)&&(T.forEach(function(t){t.dataLabel&&t.visible&&t.dataLabel.shortened&&(t.dataLabel.attr({width:'auto'}).css({width:'auto',textOverflow:'clip'}),t.dataLabel.shortened=!1)}),o.prototype.drawDataLabels.apply(t),T.forEach(function(t){t.dataLabel&&(t.visible?(D[t.half].push(t),t.dataLabel._pos=null,!a(p.style.width)&&!a(t.options.dataLabels&&t.options.dataLabels.style&&t.options.dataLabels.style.width)&&t.dataLabel.getBBox().width>j&&(t.dataLabel.css({width:Math.round(.7*j)+'px'}),t.dataLabel.shortened=!0)):(t.dataLabel=t.dataLabel.destroy(),t.dataLabels&&1===t.dataLabels.length&&delete t.dataLabels))}),D.forEach(function(i,o){var T=i.length,g=[],f;if(T){t.sortByAngle(i,o-.5);if(0<t.maxLabelDistance){var l=Math.max(0,w-x-t.maxLabelDistance),L=Math.min(w+x+t.maxLabelDistance,u.plotHeight);i.forEach(function(t){0<t.labelDistance&&t.dataLabel&&(t.top=Math.max(0,w-x-t.labelDistance),t.bottom=Math.min(w+x+t.labelDistance,u.plotHeight),f=t.dataLabel.getBBox().height||21,t.distributeBox={target:t.labelPosition.natural.y-t.top+f/2,size:f,rank:t.y},g.push(t.distributeBox))});l=L+f-l;e.distribute(g,l,l/5)};for(A=0;A<T;A++){r=i[A];y=r.labelPosition;c=r.dataLabel;M=!1===r.visible?'hidden':'inherit';d=l=y.natural.y;g&&a(r.distributeBox)&&('undefined'===typeof r.distributeBox.pos?M='hidden':(C=r.distributeBox.size,d=S.radialDistributionY(r)));delete r.positionIndex;if(p.justify)s=S.justify(r,x,P);else switch(p.alignTo){case'connectors':s=S.alignToConnectors(i,o,k,E);break;case'plotEdges':s=S.alignToPlotEdges(c,o,k,E);break;default:s=S.radialDistributionX(t,r,d,l)};c._attr={visibility:M,align:y.alignment};v=r.options.dataLabels||{};c._pos={x:s+n(v.x,p.x)+({left:m,right:-m}[y.alignment]||0),y:d+n(v.y,p.y)-10};y.final.x=s;y.final.y=d;n(p.crop,!0)&&(b=c.getBBox().width,l=null,s-b<m&&1===o?(l=Math.round(b-s+m),h[3]=Math.max(l,h[3])):s+b>k-m&&0===o&&(l=Math.round(s+b-k+m),h[1]=Math.max(l,h[1])),0>d-C/2?h[0]=Math.max(Math.round(-d+C/2),h[0]):d+C/2>O&&(h[2]=Math.max(Math.round(d+C/2-O),h[2])),c.sideOverflow=l)}}}),0===f(h)||this.verifyDataLabelOverflow(h))&&(this.placeDataLabels(),this.points.forEach(function(e){v=l(p,e.options.dataLabels);if(L=n(v.connectorWidth,1)){var o;g=e.connector;if((c=e.dataLabel)&&c._pos&&e.visible&&0<e.labelDistance){M=c._attr.visibility;if(o=!g)e.connector=g=u.renderer.path().addClass('highcharts-data-label-connector highcharts-color-'+e.colorIndex+(e.className?' '+e.className:'')).add(t.dataLabelsGroup),u.styledMode||g.attr({'stroke-width':L,stroke:v.connectorColor||e.color||i.neutralColor60});g[o?'attr':'animate']({d:e.getConnectorPath()});g.attr('visibility',M)}
else g&&(e.connector=g.destroy())}}))},r.pie.prototype.placeDataLabels=function(){this.points.forEach(function(t){var e=t.dataLabel,i;e&&t.visible&&((i=e._pos)?(e.sideOverflow&&(e._attr.width=Math.max(e.getBBox().width-e.sideOverflow,0),e.css({width:e._attr.width+'px',textOverflow:(this.options.dataLabels.style||{}).textOverflow||'ellipsis'}),e.shortened=!0),e.attr(e._attr),e[e.moved?'animate':'attr'](i),e.moved=!0):e&&e.attr({y:-9999}));delete t.distributeBox},this)},r.pie.prototype.alignDataLabel=t,r.pie.prototype.verifyDataLabelOverflow=function(t){var e=this.center,o=this.options,n=o.center,r=o.minSize||80,s=null!==o.size;if(!s){if(null!==n[0])var i=Math.max(e[2]-Math.max(t[1],t[3]),r);else i=Math.max(e[2]-t[1]-t[3],r),e[0]+=(t[3]-t[1])/2;null!==n[1]?i=p(i,r,e[2]-Math.max(t[0],t[2])):(i=p(i,r,e[2]-t[0]-t[2]),e[1]+=(t[0]-t[2])/2);i<e[2]?(e[2]=i,e[3]=Math.min(y(o.innerSize||0,i),i),this.translate(e),this.drawDataLabels&&this.drawDataLabels()):s=!0};return s});r.column&&(r.column.prototype.alignDataLabel=function(t,e,i,r,s){var h=this.chart.inverted,p=t.series,a=t.dlBox||t.shapeArgs,c=n(t.below,t.plotY>n(this.translatedThreshold,p.yAxis.len)),d=n(i.inside,!!this.options.stacking);a&&(r=l(a),0>r.y&&(r.height+=r.y,r.y=0),a=r.y+r.height-p.yAxis.len,0<a&&a<r.height&&(r.height-=a),h&&(r={x:p.yAxis.len-r.y-r.height,y:p.xAxis.len-r.x-r.width,width:r.height,height:r.width}),d||(h?(r.x+=c?0:r.width,r.width=0):(r.y+=c?r.height:0,r.height=0)));i.align=n(i.align,!h||d?'center':c?'right':'left');i.verticalAlign=n(i.verticalAlign,h||d?'middle':c?'top':'bottom');o.prototype.alignDataLabel.call(this,t,e,i,r,s);i.inside&&t.contrastColor&&e.css({color:t.contrastColor})})});i(e,'Extensions/OverlappingDataLabels.js',[e['Core/Chart/Chart.js'],e['Core/Utilities.js']],function(t,e){var r=e.addEvent,i=e.fireEvent,s=e.isArray,n=e.isNumber,o=e.objectEach,a=e.pick;r(t,'render',function(){var t=[];(this.labelCollectors||[]).forEach(function(e){t=t.concat(e())});(this.yAxis||[]).forEach(function(e){e.stacking&&e.options.stackLabels&&!e.options.stackLabels.allowOverlap&&o(e.stacking.stacks,function(e){o(e,function(e){t.push(e.label)})})});(this.series||[]).forEach(function(e){var i=e.options.dataLabels;e.visible&&(!1!==i.enabled||e._hasPointLabels)&&(i=function(e){return e.forEach(function(e){e.visible&&(s(e.dataLabels)?e.dataLabels:e.dataLabel?[e.dataLabel]:[]).forEach(function(i){var o=i.options;i.labelrank=a(o.labelrank,e.labelrank,e.shapeArgs&&e.shapeArgs.height);o.allowOverlap||t.push(i)})})},i(e.nodes||[]),i(e.points))});this.hideOverlappingLabels(t)});t.prototype.hideOverlappingLabels=function(t){var l=this,p=t.length,d=l.renderer,e,o,h,c=!1,a=function(t){var e,i=t.box?0:t.padding||0,o=e=0,a;if(t&&(!t.alignAttr||t.placed)){var s=t.alignAttr||{x:t.attr('x'),y:t.attr('y')};var r=t.parentGroup;t.width||(e=t.getBBox(),t.width=e.width,t.height=e.height,e=d.fontMetrics(null,t.element).h);var h=t.width-2*i;(a={left:'0',center:'0.5',right:'1'}[t.alignValue])?o=+a*h:n(t.x)&&Math.round(t.x)!==t.translateX&&(o=t.x-t.translateX);return{x:s.x+(r.translateX||0)+i-(o||0),y:s.y+(r.translateY||0)+i-e,width:t.width-2*i,height:t.height-2*i}}};for(o=0;o<p;o++)if(e=t[o])e.oldOpacity=e.opacity,e.newOpacity=1,e.absoluteBox=a(e);t.sort(function(t,e){return(e.labelrank||0)-(t.labelrank||0)});for(o=0;o<p;o++){var s=(a=t[o])&&a.absoluteBox;for(e=o+1;e<p;++e){var r=(h=t[e])&&h.absoluteBox;!s||!r||a===h||0===a.newOpacity||0===h.newOpacity||r.x>=s.x+s.width||r.x+r.width<=s.x||r.y>=s.y+s.height||r.y+r.height<=s.y||((a.labelrank<h.labelrank?a:h).newOpacity=0)}};t.forEach(function(t){if(t){var e=t.newOpacity;t.oldOpacity!==e&&(t.alignAttr&&t.placed?(t[e?'removeClass':'addClass']('highcharts-data-label-hidden'),c=!0,t.alignAttr.opacity=e,t[t.isOld?'animate':'attr'](t.alignAttr,null,function(){l.styledMode||t.css({pointerEvents:e?'auto':'none'});t.visibility=e?'inherit':'hidden'}),i(l,'afterHideOverlappingLabel')):t.attr({opacity:e}));t.isOld=!0}});c&&i(l,'afterHideAllOverlappingLabels')}});i(e,'Core/Responsive.js',[e['Core/Chart/Chart.js'],e['Core/Utilities.js']],function(t,e){var o=e.find,r=e.isArray,s=e.isObject,n=e.merge,a=e.objectEach,i=e.pick,h=e.splat,l=e.uniqueKey;t.prototype.setResponsive=function(t,e){var s=this.options.responsive,i=[],r=this.currentResponsive;!e&&s&&s.rules&&s.rules.forEach(function(t){'undefined'===typeof t._id&&(t._id=l());this.matchResponsiveRule(t,i)},this);e=n.apply(0,i.map(function(t){return o(s.rules,function(e){return e._id===t}).chartOptions}));e.isResponsiveOptions=!0;i=i.toString()||void 0;i!==(r&&r.ruleIds)&&(r&&this.update(r.undoOptions,t,!0),i?(r=this.currentOptions(e),r.isResponsiveOptions=!0,this.currentResponsive={ruleIds:i,mergedOptions:e,undoOptions:r},this.update(e,t,!0)):this.currentResponsive=void 0)};t.prototype.matchResponsiveRule=function(t,e){var o=t.condition;(o.callback||function(){return this.chartWidth<=i(o.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=i(o.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=i(o.minWidth,0)&&this.chartHeight>=i(o.minHeight,0)}).call(this)&&e.push(t._id)};t.prototype.currentOptions=function(t){function e(t,i,n,l){var p;a(t,function(t,a){if(!l&&-1<o.collectionsWithUpdate.indexOf(a)&&i[a])for(t=h(t),n[a]=[],p=0;p<Math.max(t.length,i[a].length);p++)i[a][p]&&(void 0===t[p]?n[a][p]=i[a][p]:(n[a][p]={},e(t[p],i[a][p],n[a][p],l+1)));else s(t)?(n[a]=r(t)?[]:{},e(t,i[a]||{},n[a],l+1)):n[a]='undefined'===typeof i[a]?null:i[a]})};var o=this,i={};e(t,this.options,i,0);return i}});i(e,'masters/highcharts.src.js',[e['Core/Globals.js'],e['Core/Utilities.js'],e['Core/Renderer/HTML/AST.js'],e['Core/Series/Series.js']],function(t,e,i,o){t.addEvent=e.addEvent;t.arrayMax=e.arrayMax;t.arrayMin=e.arrayMin;t.attr=e.attr;t.clearTimeout=e.clearTimeout;t.correctFloat=e.correctFloat;t.createElement=e.createElement;t.css=e.css;t.defined=e.defined;t.destroyObjectProperties=e.destroyObjectProperties;t.discardElement=e.discardElement;t.erase=e.erase;t.error=e.error;t.extend=e.extend;t.extendClass=e.extendClass;t.find=e.find;t.fireEvent=e.fireEvent;t.format=e.format;t.getMagnitude=e.getMagnitude;t.getStyle=e.getStyle;t.inArray=e.inArray;t.isArray=e.isArray;t.isClass=e.isClass;t.isDOMElement=e.isDOMElement;t.isFunction=e.isFunction;t.isNumber=e.isNumber;t.isObject=e.isObject;t.isString=e.isString;t.keys=e.keys;t.merge=e.merge;t.normalizeTickInterval=e.normalizeTickInterval;t.numberFormat=e.numberFormat;t.objectEach=e.objectEach;t.offset=e.offset;t.pad=e.pad;t.pick=e.pick;t.pInt=e.pInt;t.relativeLength=e.relativeLength;t.removeEvent=e.removeEvent;t.splat=e.splat;t.stableSort=e.stableSort;t.syncTimeout=e.syncTimeout;t.timeUnits=e.timeUnits;t.uniqueKey=e.uniqueKey;t.useSerialIds=e.useSerialIds;t.wrap=e.wrap;t.AST=i;t.Series=o;return t});i(e,'Core/Axis/MapAxis.js',[e['Core/Axis/Axis.js'],e['Core/Utilities.js']],function(t,e){var i=e.addEvent,o=e.pick,r=function(){return function(t){this.axis=t}}();e=function(){function t(){};t.compose=function(t){t.keepProps.push('mapAxis');i(t,'init',function(){this.mapAxis||(this.mapAxis=new r(this))});i(t,'getSeriesExtremes',function(){if(this.mapAxis){var t=[];this.isXAxis&&(this.series.forEach(function(e,i){e.useMapGeometry&&(t[i]=e.xData,e.xData=[])}),this.mapAxis.seriesXData=t)}});i(t,'afterGetSeriesExtremes',function(){if(this.mapAxis){var r=this.mapAxis.seriesXData||[],i;if(this.isXAxis){var t=o(this.dataMin,Number.MAX_VALUE),e=o(this.dataMax,-Number.MAX_VALUE);this.series.forEach(function(s,n){s.useMapGeometry&&(t=Math.min(t,o(s.minX,t)),e=Math.max(e,o(s.maxX,e)),s.xData=r[n],i=!0)});i&&(this.dataMin=t,this.dataMax=e);this.mapAxis.seriesXData=void 0}}});i(t,'afterSetAxisTranslation',function(){if(this.mapAxis){var t=this.chart,e=t.plotWidth/t.plotHeight;t=t.xAxis[0];var i;'yAxis'===this.coll&&'undefined'!==typeof t.transA&&this.series.forEach(function(t){t.preserveAspectRatio&&(i=!0)});if(i&&(this.transA=t.transA=Math.min(this.transA,t.transA),e/=(t.max-t.min)/(this.max-this.min),e=1>e?this:t,t=(e.max-e.min)*e.transA,e.mapAxis.pixelPadding=e.len-t,e.minPixelPadding=e.mapAxis.pixelPadding/2,t=e.mapAxis.fixTo)){t=t[1]-e.toValue(t[0],!0);t*=e.transA;if(Math.abs(t)>e.minPixelPadding||e.min===e.dataMin&&e.max===e.dataMax)t=0;e.minPixelPadding-=t}}});i(t,'render',function(){this.mapAxis&&(this.mapAxis.fixTo=void 0)})};return t}();e.compose(t);return e});i(e,'Mixins/ColorSeries.js',[],function(){return{colorPointMixin:{setVisible:function(t){var e=this,i=t?'show':'hide';e.visible=e.options.visible=!!t;['graphic','dataLabel'].forEach(function(t){if(e[t])e[t][i]()});this.series.buildKDTree()}},colorSeriesMixin:{optionalAxis:'colorAxis',colorAxis:0,translateColors:function(){var t=this,i=this.options.nullColor,e=this.colorAxis,o=this.colorKey;(this.data.length?this.data:this.points).forEach(function(r){var s=r.getNestedProperty(o);(s=r.options.color||(r.isNull||null===r.value?i:e&&'undefined'!==typeof s?e.toColor(s,r):r.color||t.color))&&r.color!==s&&(r.color=s,'point'===t.options.legendType&&r.legendItem&&t.chart.legend.colorizeItem(r,r.visible))})}}}});i(e,'Core/Axis/ColorAxis.js',[e['Core/Axis/Axis.js'],e['Core/Chart/Chart.js'],e['Core/Color/Color.js'],e['Mixins/ColorSeries.js'],e['Core/Animation/Fx.js'],e['Core/Globals.js'],e['Core/Legend.js'],e['Mixins/LegendSymbol.js'],e['Core/Color/Palette.js'],e['Core/Series/Point.js'],e['Core/Series/Series.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s,n,a,h,p,c,l){var M=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),f=i.parse;i=o.colorPointMixin;o=o.colorSeriesMixin;var x=s.noop,d=l.addEvent,y=l.erase,m=l.extend,b=l.isNumber,v=l.merge,u=l.pick,C=l.splat;'';m(c.prototype,o);m(p.prototype,i);e.prototype.collectionsWithUpdate.push('colorAxis');e.prototype.collectionsWithInit.colorAxis=[e.prototype.addColorAxis];var g=function(t){function e(e,i){var o=t.call(this,e,i)||this;o.beforePadding=!1;o.chart=void 0;o.coll='colorAxis';o.dataClasses=void 0;o.legendItem=void 0;o.legendItems=void 0;o.name='';o.options=void 0;o.stops=void 0;o.visible=!0;o.init(e,i);return o};M(e,t);e.prototype.init=function(i,o){var r=i.options.legend||{},s=o.layout?'vertical'!==o.layout:'vertical'!==r.layout;r=v(e.defaultOptions,o,{showEmpty:!1,title:null,visible:r.enabled&&(o?!1!==o.visible:!0)});this.coll='colorAxis';this.side=o.side||s?2:1;this.reversed=o.reversed||!s;this.opposite=!s;i.options[this.coll]=r;t.prototype.init.call(this,i,r);o.dataClasses&&this.initDataClasses(o);this.initStops();this.horiz=s;this.zoomEnabled=!1};e.prototype.initDataClasses=function(t){var i=this.chart,r,e=0,s=i.options.chart.colorCount,o=this.options,n=t.dataClasses.length;this.dataClasses=r=[];this.legendItems=[];t.dataClasses.forEach(function(t,a){t=v(t);r.push(t);if(i.styledMode||!t.color)'category'===o.dataClassColor?(i.styledMode||(a=i.options.colors,s=a.length,t.color=a[e]),t.colorIndex=e,e++,e===s&&(e=0)):t.color=f(o.minColor).tweenTo(f(o.maxColor),2>n?.5:a/(n-1))})};e.prototype.hasData=function(){return!!(this.tickPositions||[]).length};e.prototype.setTickPositions=function(){if(!this.dataClasses)return t.prototype.setTickPositions.call(this)};e.prototype.initStops=function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]];this.stops.forEach(function(t){t.color=f(t[1])})};e.prototype.setOptions=function(e){t.prototype.setOptions.call(this,e);this.options.crosshair=this.options.marker};e.prototype.setAxisSize=function(){var t=this.legendSymbol,o=this.chart,i=o.options.legend||{},r,s;t?(this.left=i=t.attr('x'),this.top=r=t.attr('y'),this.width=s=t.attr('width'),this.height=t=t.attr('height'),this.right=o.chartWidth-i-s,this.bottom=o.chartHeight-r-t,this.len=this.horiz?s:t,this.pos=this.horiz?i:r):this.len=(this.horiz?i.symbolWidth:i.symbolHeight)||e.defaultLegendLength};e.prototype.normalizedValue=function(t){this.logarithmic&&(t=this.logarithmic.log2lin(t));return 1-(this.max-t)/(this.max-this.min||1)};e.prototype.toColor=function(t,e){var n=this.dataClasses,i=this.stops,o;if(n)for(o=n.length;o--;){var s=n[o],r=s.from;i=s.to;if(('undefined'===typeof r||t>=r)&&('undefined'===typeof i||t<=i)){var a=s.color;e&&(e.dataClass=o,e.colorIndex=s.colorIndex);break}}
else{t=this.normalizedValue(t);for(o=i.length;o--&&!(t>i[o][0]););r=i[o]||i[o+1];i=i[o+1]||r;t=1-(i[0]-t)/(i[0]-r[0]||1);a=r.color.tweenTo(i.color,t)};return a};e.prototype.getOffset=function(){var e=this.legendGroup,i=this.chart.axisOffset[this.side];e&&(this.axisParent=e,t.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=i)};e.prototype.setLegendColor=function(){var e=this.reversed,t=e?1:0;e=e?0:1;t=this.horiz?[t,0,e,0]:[0,e,0,t];this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:this.stops}};e.prototype.drawLegendSymbol=function(t,i){var s=t.padding,o=t.options,r=this.horiz,n=u(o.symbolWidth,r?e.defaultLegendLength:12),a=u(o.symbolHeight,r?12:e.defaultLegendLength),h=u(o.labelPadding,r?16:30);o=u(o.itemDistance,10);this.setLegendColor();i.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,n,a).attr({zIndex:1}).add(i.legendGroup);this.legendItemWidth=n+s+(r?o:h);this.legendItemHeight=a+s+(r?h:0)};e.prototype.setState=function(t){this.series.forEach(function(e){e.setState(t)})};e.prototype.setVisible=function(){};e.prototype.getSeriesExtremes=function(){var a=this.series,h=a.length,r;this.dataMin=Infinity;for(this.dataMax=-Infinity;h--;){var t=a[h],i=t.colorKey=u(t.options.colorKey,t.colorKey,t.pointValKey,t.zoneAxis,'y'),o=t.pointArrayMap,n=t[i+'Min']&&t[i+'Max'];if(t[i+'Data'])var e=t[i+'Data'];else if(o){e=[];o=o.indexOf(i);var s=t.yData;if(0<=o&&s)for(r=0;r<s.length;r++)e.push(u(s[r][o],s[r]))}
else e=t.yData;n?(t.minColorValue=t[i+'Min'],t.maxColorValue=t[i+'Max']):(e=c.prototype.getExtremes.call(t,e),t.minColorValue=e.dataMin,t.maxColorValue=e.dataMax);'undefined'!==typeof t.minColorValue&&(this.dataMin=Math.min(this.dataMin,t.minColorValue),this.dataMax=Math.max(this.dataMax,t.maxColorValue));n||c.prototype.applyExtremes.call(t)}};e.prototype.drawCrosshair=function(e,i){var n=i&&i.plotX,a=i&&i.plotY,r=this.pos,s=this.len;if(i){var o=this.toPixels(i.getNestedProperty(i.series.colorKey));o<r?o=r-2:o>r+s&&(o=r+s+2);i.plotX=o;i.plotY=this.len-o;t.prototype.drawCrosshair.call(this,e,i);i.plotX=n;i.plotY=a;this.cross&&!this.cross.addedToColorAxis&&this.legendGroup&&(this.cross.addClass('highcharts-coloraxis-marker').add(this.legendGroup),this.cross.addedToColorAxis=!0,!this.chart.styledMode&&this.crosshair&&this.cross.attr({fill:this.crosshair.color}))}};e.prototype.getPlotLinePath=function(e){var o=this.left,i=e.translatedValue,r=this.top;return b(i)?this.horiz?[['M',i-4,r-6],['L',i+4,r-6],['L',i,r],['Z']]:[['M',o,i],['L',o-6,i+6],['L',o-6,i-6],['Z']]:t.prototype.getPlotLinePath.call(this,e)};e.prototype.update=function(e,i){var o=this.chart.legend;this.series.forEach(function(t){t.isDirtyData=!0});(e.dataClasses&&o.allItems||this.dataClasses)&&this.destroyItems();t.prototype.update.call(this,e,i);this.legendItem&&(this.setLegendColor(),o.colorizeItem(this,!0))};e.prototype.destroyItems=function(){var t=this.chart;this.legendItem?t.legend.destroyItem(this):this.legendItems&&this.legendItems.forEach(function(e){t.legend.destroyItem(e)});t.isDirtyLegend=!0};e.prototype.destroy=function(){this.chart.isDirtyLegend=!0;this.destroyItems();t.prototype.destroy.apply(this,[].slice.call(arguments))};e.prototype.remove=function(e){this.destroyItems();t.prototype.remove.call(this,e)};e.prototype.getDataClassLegendSymbols=function(){var e=this,i=e.chart,o=e.legendItems,r=i.options.legend,s=r.valueDecimals,n=r.valueSuffix||'',t;o.length||e.dataClasses.forEach(function(r,h){var l=!0,p=r.from,c=r.to,d=i.numberFormatter;t='';'undefined'===typeof p?t='< ':'undefined'===typeof c&&(t='> ');'undefined'!==typeof p&&(t+=d(p,s)+n);'undefined'!==typeof p&&'undefined'!==typeof c&&(t+=' - ');'undefined'!==typeof c&&(t+=d(c,s)+n);o.push(m({chart:i,name:t,options:{},drawLegendSymbol:a.drawRectangle,visible:!0,setState:x,isDataClass:!0,setVisible:function(){l=e.visible=!l;e.series.forEach(function(t){t.points.forEach(function(t){t.dataClass===h&&t.setVisible(l)})});i.legend.colorizeItem(this,l)}},r))});return o};e.defaultLegendLength=200;e.defaultOptions={lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:h.neutralColor40},labels:{overflow:'justify',rotation:0},minColor:h.highlightColor10,maxColor:h.highlightColor100,tickLength:5,showInLegend:!0};e.keepProps=['legendGroup','legendItemHeight','legendItemWidth','legendItem','legendSymbol'];return e}(t);Array.prototype.push.apply(t.keepProps,g.keepProps);s.ColorAxis=g;['fill','stroke'].forEach(function(t){r.prototype[t+'Setter']=function(){this.elem.attr(t,f(this.start).tweenTo(f(this.end),this.pos),null,!0)}});d(e,'afterGetAxes',function(){var e=this,t=e.options;this.colorAxis=[];t.colorAxis&&(t.colorAxis=C(t.colorAxis),t.colorAxis.forEach(function(t,i){t.index=i;new g(e,t)}))});d(c,'bindAxes',function(){var t=this.axisTypes;t?-1===t.indexOf('colorAxis')&&t.push('colorAxis'):this.axisTypes=['colorAxis']});d(n,'afterGetAllItems',function(t){var i=[],e,o;(this.chart.colorAxis||[]).forEach(function(o){(e=o.options)&&e.showInLegend&&(e.dataClasses&&e.visible?i=i.concat(o.getDataClassLegendSymbols()):e.visible&&i.push(o),o.series.forEach(function(i){if(!i.options.showInLegend||e.dataClasses)'point'===i.options.legendType?i.points.forEach(function(e){y(t.allItems,e)}):y(t.allItems,i)}))});for(o=i.length;o--;)t.allItems.unshift(i[o])});d(n,'afterColorizeItem',function(t){t.visible&&t.item.legendColor&&t.item.legendSymbol.attr({fill:t.item.legendColor})});d(n,'afterUpdate',function(){var t=this.chart.colorAxis;t&&t.forEach(function(t,e,i){t.update({},i)})});d(c,'afterTranslate',function(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors()});return g});i(e,'Mixins/ColorMapSeries.js',[e['Core/Globals.js'],e['Core/Series/Point.js'],e['Core/Utilities.js']],function(t,e,i){var o=i.defined;return{colorMapPointMixin:{dataLabelOnNull:!0,isValid:function(){return null!==this.value&&Infinity!==this.value&&-Infinity!==this.value},setState:function(t){e.prototype.setState.call(this,t);this.graphic&&this.graphic.attr({zIndex:'hover'===t?1:0})}},colorMapSeriesMixin:{pointArrayMap:['value'],axisTypes:['xAxis','yAxis','colorAxis'],trackerGroups:['group','markerGroup','dataLabelsGroup'],getSymbol:t.noop,parallelArrays:['x','y','value'],colorKey:'value',pointAttribs:t.seriesTypes.column.prototype.pointAttribs,colorAttribs:function(t){var e={};o(t.color)&&(e[this.colorProp||'fill']=t.color);return e}}}});i(e,'Maps/MapNavigationOptionsDefault.js',[e['Core/Options.js'],e['Core/Utilities.js']],function(t,e){e=e.extend;var i={buttonOptions:{alignTo:'plotBox',align:'left',verticalAlign:'top',x:0,width:18,height:18,padding:5,style:{fontSize:'15px',fontWeight:'bold'},theme:{'stroke-width':1,'text-align':'center'}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:'+',y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:'-',y:28}},mouseWheelSensitivity:1.1};e(t.defaultOptions.lang,{zoomIn:'Zoom in',zoomOut:'Zoom out'});return t.defaultOptions.mapNavigation=i});i(e,'Maps/MapNavigation.js',[e['Core/Chart/Chart.js'],e['Core/Globals.js'],e['Core/Utilities.js']],function(t,e,i){function a(t){t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)};function s(t){this.init(t)};var l=e.doc,o=i.addEvent,h=i.extend,n=i.merge,p=i.objectEach,r=i.pick;s.prototype.init=function(t){this.chart=t;t.mapNavButtons=[]};s.prototype.update=function(t){var e=this.chart,s=e.options.mapNavigation,i,l,c,u,f,g=function(t){this.handler.call(e,t);a(t)},d=e.mapNavButtons;t&&(s=e.options.mapNavigation=n(e.options.mapNavigation,t));for(;d.length;)d.pop().destroy();r(s.enableButtons,s.enabled)&&!e.renderer.forExport&&p(s.buttons,function(t,r){i=n(s.buttonOptions,t);e.styledMode||(l=i.theme,l.style=n(i.theme.style,i.style),u=(c=l.states)&&c.hover,f=c&&c.select);t=e.renderer.button(i.text,0,0,g,l,u,f,0,'zoomIn'===r?'topbutton':'bottombutton').addClass('highcharts-map-navigation highcharts-'+{zoomIn:'zoom-in',zoomOut:'zoom-out'}[r]).attr({width:i.width,height:i.height,title:e.options.lang[r],padding:i.padding,zIndex:5}).add();t.handler=i.onclick;o(t.element,'dblclick',a);d.push(t);var p=i,m=o(e,'load',function(){t.align(h(p,{width:t.width,height:2*t.height}),null,p.alignTo);m()})});this.updateEvents(s)};s.prototype.updateEvents=function(t){var e=this.chart;r(t.enableDoubleClickZoom,t.enabled)||t.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||o(e.container,'dblclick',function(t){e.pointer.onContainerDblClick(t)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick());r(t.enableMouseWheelZoom,t.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||o(e.container,'undefined'===typeof l.onmousewheel?'DOMMouseScroll':'mousewheel',function(t){e.pointer.onContainerMouseWheel(t);a(t);return!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())};h(t.prototype,{fitToBox:function(t,e){[['x','width'],['y','height']].forEach(function(i){var o=i[0];i=i[1];t[o]+t[i]>e[o]+e[i]&&(t[i]>e[i]?(t[i]=e[i],t[o]=e[o]):t[o]=e[o]+e[i]-t[i]);t[i]>e[i]&&(t[i]=e[i]);t[o]<e[o]&&(t[o]=e[o])});return t},mapZoom:function(t,e,i,o,s){var a=this.xAxis[0],n=a.max-a.min,h=r(e,a.min+n/2),p=n*t;n=this.yAxis[0];var l=n.max-n.min,c=r(i,n.min+l/2);l*=t;h=this.fitToBox({x:h-p*(o?(o-a.pos)/a.len:.5),y:c-l*(s?(s-n.pos)/n.len:.5),width:p,height:l},{x:a.dataMin,y:n.dataMin,width:a.dataMax-a.dataMin,height:n.dataMax-n.dataMin});p=h.x<=a.dataMin&&h.width>=a.dataMax-a.dataMin&&h.y<=n.dataMin&&h.height>=n.dataMax-n.dataMin;o&&a.mapAxis&&(a.mapAxis.fixTo=[o-a.pos,e]);s&&n.mapAxis&&(n.mapAxis.fixTo=[s-n.pos,i]);'undefined'===typeof t||p?(a.setExtremes(void 0,void 0,!1),n.setExtremes(void 0,void 0,!1)):(a.setExtremes(h.x,h.x+h.width,!1),n.setExtremes(h.y,h.y+h.height,!1));this.redraw()}});o(t,'beforeRender',function(){this.mapNavigation=new s(this);this.mapNavigation.update()});e.MapNavigation=s});i(e,'Maps/MapPointer.js',[e['Core/Pointer.js'],e['Core/Utilities.js']],function(t,e){var i=e.extend,o=e.pick;e=e.wrap;i(t.prototype,{onContainerDblClick:function(t){var e=this.chart;t=this.normalize(t);e.options.mapNavigation.enableDoubleClickZoomTo?e.pointer.inClass(t.target,'highcharts-tracker')&&e.hoverPoint&&e.hoverPoint.zoomTo():e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(.5,e.xAxis[0].toValue(t.chartX),e.yAxis[0].toValue(t.chartY),t.chartX,t.chartY)},onContainerMouseWheel:function(t){var e=this.chart;t=this.normalize(t);var i=t.detail||-(t.wheelDelta/120);e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(Math.pow(e.options.mapNavigation.mouseWheelSensitivity,i),e.xAxis[0].toValue(t.chartX),e.yAxis[0].toValue(t.chartY),t.chartX,t.chartY)}});e(t.prototype,'zoomOption',function(t){var e=this.chart.options.mapNavigation;o(e.enableTouchZoom,e.enabled)&&(this.chart.options.chart.pinchType='xy');t.apply(this,[].slice.call(arguments,1))});e(t.prototype,'pinchTranslate',function(t,e,i,o,r,s,n){t.call(this,e,i,o,r,s,n);'map'===this.chart.options.chart.type&&this.hasZoom&&(t=o.scaleX>o.scaleY,this.pinchTranslateDirection(!t,e,i,o,r,s,n,t?o.scaleX:o.scaleY))})});i(e,'Maps/MapSymbols.js',[e['Core/Globals.js'],e['Core/Renderer/SVG/SVGRenderer.js']],function(t,e){function o(t,e,i,o,r,s,n,a){return[['M',t+r,e],['L',t+i-s,e],['C',t+i-s/2,e,t+i,e+s/2,t+i,e+s],['L',t+i,e+o-n],['C',t+i,e+o-n/2,t+i-n/2,e+o,t+i-n,e+o],['L',t+a,e+o],['C',t+a/2,e+o,t,e+o-a/2,t,e+o-a],['L',t,e+r],['C',t,e+r/2,t+r/2,e,t+r,e],['Z']]};var i=t.Renderer;e.prototype.symbols.topbutton=function(t,e,i,r,s){s=s&&s.r||0;return o(t-1,e-1,i,r,s,s,0,0)};e.prototype.symbols.bottombutton=function(t,e,i,r,s){s=s&&s.r||0;return o(t-1,e-1,i,r,0,0,s,s)};i!==e&&['topbutton','bottombutton'].forEach(function(t){i.prototype.symbols[t]=e.prototype.symbols[t]});return e.prototype.symbols});i(e,'Maps/Map.js',[e['Core/Chart/Chart.js'],e['Core/Globals.js'],e['Core/Renderer/SVG/SVGRenderer.js'],e['Core/Utilities.js']],function(t,e,i,o){var a=o.getOptions,s=o.merge,n=o.pick,r;(function(e){e.maps={};e.mapChart=function(e,i,o){var h='string'===typeof e||e.nodeName,r=arguments[h?1:0],d=r,l={endOnTick:!1,visible:!1,minPadding:0,maxPadding:0,startOnTick:!1},p=a().credits;var c=r.series;r.series=null;r=s({chart:{panning:{enabled:!0,type:'xy'},type:'map'},credits:{mapText:n(p.mapText,' \u00a9 <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:n(p.mapTextFull,'{geojson.copyright}')},tooltip:{followTouchMove:!1},xAxis:l,yAxis:s(l,{reversed:!0})},r,{chart:{inverted:!1,alignTicks:!1}});r.series=d.series=c;return h?new t(e,r,o):new t(r,i)};e.splitPath=function(t){'string'===typeof t&&(t=t.replace(/([A-Za-z])/g,' $1 ').replace(/^\s*/,'').replace(/\s*$/,''),t=t.split(/[ ,;]+/).map(function(t){return/[A-za-z]/.test(t)?t:parseFloat(t)}));return i.prototype.pathToSegments(t)}})(r||(r={}));e.Map=r.mapChart;e.mapChart=r.mapChart;e.maps=r.maps;return r});i(e,'Series/Map/MapPoint.js',[e['Mixins/ColorMapSeries.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i){var r=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();t=t.colorMapPointMixin;var o=i.extend;e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;e.options=void 0;e.path=void 0;e.series=void 0;return e};r(e,t);e.prototype.applyOptions=function(e,i){var r=this.series;e=t.prototype.applyOptions.call(this,e,i);i=r.joinBy;r.mapData&&r.mapMap&&(i=t.prototype.getNestedProperty.call(e,i[1]),(i='undefined'!==typeof i&&r.mapMap[i])?(r.xyFromShape&&(e.x=i._midX,e.y=i._midY),o(e,i)):e.value=e.value||null);return e};e.prototype.onMouseOver=function(e){i.clearTimeout(this.colorInterval);if(null!==this.value||this.series.options.nullInteraction)t.prototype.onMouseOver.call(this,e);else this.series.onMouseOut(e)};e.prototype.zoomTo=function(){var t=this.series;t.xAxis.setExtremes(this._minX,this._maxX,!1);t.yAxis.setExtremes(this._minY,this._maxY,!1);t.chart.redraw()};return e}(e.seriesTypes.scatter.prototype.pointClass);o(e.prototype,{dataLabelOnNull:t.dataLabelOnNull,isValid:t.isValid,setState:t.setState});return e});i(e,'Series/Map/MapSeries.js',[e['Mixins/ColorMapSeries.js'],e['Core/Globals.js'],e['Mixins/LegendSymbol.js'],e['Maps/Map.js'],e['Series/Map/MapPoint.js'],e['Core/Color/Palette.js'],e['Core/Series/Series.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Renderer/SVG/SVGRenderer.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s,n,h,p,a){var S=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();t=t.colorMapSeriesMixin;var u=e.noop,C=o.maps,M=o.splitPath;o=h.seriesTypes;var d=o.column,m=o.scatter;o=a.extend;var y=a.fireEvent,f=a.getNestedProperty,v=a.isArray,c=a.isNumber,g=a.merge,x=a.objectEach,l=a.pick,b=a.splat;a=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;e.baseTrans=void 0;e.chart=void 0;e.data=void 0;e.group=void 0;e.joinBy=void 0;e.options=void 0;e.points=void 0;e.transformGroup=void 0;return e};S(i,t);i.prototype.animate=function(t){var e=this.options.animation,i=this.group,o=this.xAxis,r=this.yAxis,s=o.pos,n=r.pos;this.chart.renderer.isSVG&&(!0===e&&(e={duration:1E3}),t?i.attr({translateX:s+o.len/2,translateY:n+r.len/2,scaleX:.001,scaleY:.001}):i.animate({translateX:s,translateY:n,scaleX:1,scaleY:1},e))};i.prototype.animateDrilldown=function(t){var o=this.chart.plotBox,i=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],e=i.bBox,r=this.chart.options.drilldown.animation;t||(t=Math.min(e.width/o.width,e.height/o.height),i.shapeArgs={scaleX:t,scaleY:t,translateX:e.x,translateY:e.y},this.points.forEach(function(t){t.graphic&&t.graphic.attr(i.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},r)}))};i.prototype.animateDrillupFrom=function(t){d.prototype.animateDrillupFrom.call(this,t)};i.prototype.animateDrillupTo=function(t){d.prototype.animateDrillupTo.call(this,t)};i.prototype.doFullTranslate=function(){return this.isDirtyData||this.chart.isResizing||this.chart.renderer.isVML||!this.baseTrans};i.prototype.drawMapDataLabels=function(){n.prototype.drawDataLabels.call(this);this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)};i.prototype.drawPoints=function(){var t=this,r=t.xAxis,e=t.yAxis,c=t.group,s=t.chart,y=s.renderer,p=this.baseTrans;t.transformGroup||(t.transformGroup=y.g().attr({scaleX:1,scaleY:1}).add(c),t.transformGroup.survive=!0);if(t.doFullTranslate())s.hasRendered&&!s.styledMode&&t.points.forEach(function(e){e.shapeArgs&&(e.shapeArgs.fill=t.pointAttribs(e,e.state).fill)}),t.group=t.transformGroup,d.prototype.drawPoints.apply(t),t.group=c,t.points.forEach(function(e){if(e.graphic){var i='';e.name&&(i+='highcharts-name-'+e.name.replace(/ /g,'-').toLowerCase());e.properties&&e.properties['hc-key']&&(i+=' highcharts-key-'+e.properties['hc-key'].toLowerCase());i&&e.graphic.addClass(i);s.styledMode&&e.graphic.css(t.pointAttribs(e,e.selected&&'select'||void 0))}}),this.baseTrans={originX:r.min-r.minPixelPadding/r.transA,originY:e.min-e.minPixelPadding/e.transA+(e.reversed?0:e.len/e.transA),transAX:r.transA,transAY:e.transA},this.transformGroup.animate({translateX:0,translateY:0,scaleX:1,scaleY:1});else{var o=r.transA/p.transAX,n=e.transA/p.transAY,a=r.toPixels(p.originX,!0),h=e.toPixels(p.originY,!0);.99<o&&1.01>o&&.99<n&&1.01>n&&(n=o=1,a=Math.round(a),h=Math.round(h));var i=this.transformGroup;if(s.renderer.globalAnimation){var u=i.attr('translateX'),f=i.attr('translateY'),g=i.attr('scaleX'),m=i.attr('scaleY');i.attr({animator:0}).animate({animator:1},{step:function(t,e){i.attr({translateX:u+(a-u)*e.pos,translateY:f+(h-f)*e.pos,scaleX:g+(o-g)*e.pos,scaleY:m+(n-m)*e.pos})}})}
else i.attr({translateX:a,translateY:h,scaleX:o,scaleY:n})};s.styledMode||c.element.setAttribute('stroke-width',l(t.options[t.pointAttrToOptions&&t.pointAttrToOptions['stroke-width']||'borderWidth'],1)/(o||1));this.drawMapDataLabels()};i.prototype.getBox=function(t){var e=Number.MAX_VALUE,s=-e,n=e,a=-e,h=e,i=e,o=this.xAxis,r=this.yAxis,c;(t||[]).forEach(function(t){if(t.path){'string'===typeof t.path?t.path=M(t.path):'M'===t.path[0]&&(t.path=p.prototype.pathToSegments(t.path));var g=t.path||[],d=-e,o=e,u=-e,r=e,f=t.properties;t._foundBox||(g.forEach(function(t){var e=t[t.length-2];t=t[t.length-1];'number'===typeof e&&'number'===typeof t&&(o=Math.min(o,e),d=Math.max(d,e),r=Math.min(r,t),u=Math.max(u,t))}),t._midX=o+(d-o)*l(t.middleX,f&&f['hc-middle-x'],.5),t._midY=r+(u-r)*l(t.middleY,f&&f['hc-middle-y'],.5),t._maxX=d,t._minX=o,t._maxY=u,t._minY=r,t.labelrank=l(t.labelrank,(d-o)*(u-r)),t._foundBox=!0);s=Math.max(s,t._maxX);n=Math.min(n,t._minX);a=Math.max(a,t._maxY);h=Math.min(h,t._minY);i=Math.min(t._maxX-t._minX,t._maxY-t._minY,i);c=!0}});c&&(this.minY=Math.min(h,l(this.minY,e)),this.maxY=Math.max(a,l(this.maxY,-e)),this.minX=Math.min(n,l(this.minX,e)),this.maxX=Math.max(s,l(this.maxX,-e)),o&&'undefined'===typeof o.options.minRange&&(o.minRange=Math.min(5*i,(this.maxX-this.minX)/5,o.minRange||e)),r&&'undefined'===typeof r.options.minRange&&(r.minRange=Math.min(5*i,(this.maxY-this.minY)/5,r.minRange||e)))};i.prototype.getExtremes=function(){var t=n.prototype.getExtremes.call(this,this.valueData),e=t.dataMin;t=t.dataMax;this.chart.hasRendered&&this.isDirtyData&&this.getBox(this.options.data);c(e)&&(this.valueMin=e);c(t)&&(this.valueMax=t);return{dataMin:this.minY,dataMax:this.maxY}};i.prototype.hasData=function(){return!!this.processedXData.length};i.prototype.pointAttribs=function(t,e){e=t.series.chart.styledMode?this.colorAttribs(t):d.prototype.pointAttribs.call(this,t,e);e['stroke-width']=l(t.options[this.pointAttrToOptions&&this.pointAttrToOptions['stroke-width']||'borderWidth'],'inherit');return e};i.prototype.render=function(){var t=this,e=n.prototype.render;t.chart.renderer.isVML&&3E3<t.data.length?setTimeout(function(){e.call(t)}):e.call(t)};i.prototype.setData=function(t,i,o,s){var y=this.options,l=this.chart.options.chart,p=l&&l.map,a=y.mapData,h=this.joinBy,u=y.keys||this.pointArrayMap,m=[],b={},d=this.chart.mapTransforms;!a&&p&&(a='string'===typeof p?C[p]:p);t&&t.forEach(function(e,i){var s=0;if(c(e))t[i]={value:e};else if(v(e)){t[i]={};!y.keys&&e.length>u.length&&'string'===typeof e[0]&&(t[i]['hc-key']=e[0],++s);for(var o=0;o<u.length;++o,++s)u[o]&&'undefined'!==typeof e[s]&&(0<u[o].indexOf('.')?r.prototype.setNestedProperty(t[i],e[s],u[o]):t[i][u[o]]=e[s])};h&&'_i'===h[0]&&(t[i]._i=i)});this.getBox(t);(this.chart.mapTransforms=d=l&&l.mapTransforms||a&&a['hc-transform']||d)&&x(d,function(t){t.rotation&&(t.cosAngle=Math.cos(t.rotation),t.sinAngle=Math.sin(t.rotation))});if(a){'FeatureCollection'===a.type&&(this.mapTitle=a.title,a=e.geojson(a,this.type,this));this.mapData=a;this.mapMap={};for(d=0;d<a.length;d++)l=a[d],p=l.properties,l._i=d,h[0]&&p&&p[h[0]]&&(l[h[0]]=p[h[0]]),b[l[h[0]]]=l;this.mapMap=b;if(t&&h[1]){var S=h[1];t.forEach(function(t){t=f(S,t);b[t]&&m.push(b[t])})};if(y.allAreas){this.getBox(a);t=t||[];if(h[1]){var M=h[1];t.forEach(function(t){m.push(f(M,t))})};m='|'+m.map(function(t){return t&&t[h[0]]}).join('|')+'|';a.forEach(function(e){h[0]&&-1!==m.indexOf('|'+e[h[0]]+'|')||(t.push(g(e,{value:null})),s=!1)})}
else this.getBox(m)};n.prototype.setData.call(this,t,i,o,s)};i.prototype.setOptions=function(t){t=n.prototype.setOptions.call(this,t);var e=t.joinBy;null===e&&(e='_i');e=this.joinBy=b(e);e[1]||(e[1]=e[0]);return t};i.prototype.translate=function(){var t=this,e=t.xAxis,i=t.yAxis,o=t.doFullTranslate();t.generatePoints();t.data.forEach(function(r){c(r._midX)&&c(r._midY)&&(r.plotX=e.toPixels(r._midX,!0),r.plotY=i.toPixels(r._midY,!0));o&&(r.shapeType='path',r.shapeArgs={d:t.translatePath(r.path)})});y(t,'afterTranslate')};i.prototype.translatePath=function(t){var h=this.xAxis,l=this.yAxis,e=h.min,i=h.transA,o=h.minPixelPadding,r=l.min,s=l.transA,n=l.minPixelPadding,a=[];t&&t.forEach(function(t){'M'===t[0]?a.push(['M',(t[1]-(e||0))*i+o,(t[2]-(r||0))*s+n]):'L'===t[0]?a.push(['L',(t[1]-(e||0))*i+o,(t[2]-(r||0))*s+n]):'C'===t[0]?a.push(['C',(t[1]-(e||0))*i+o,(t[2]-(r||0))*s+n,(t[3]-(e||0))*i+o,(t[4]-(r||0))*s+n,(t[5]-(e||0))*i+o,(t[6]-(r||0))*s+n]):'Q'===t[0]?a.push(['Q',(t[1]-(e||0))*i+o,(t[2]-(r||0))*s+n,(t[3]-(e||0))*i+o,(t[4]-(r||0))*s+n]):'Z'===t[0]&&a.push(['Z'])});return a};i.defaultOptions=g(m.defaultOptions,{animation:!1,dataLabels:{crop:!1,formatter:function(){return this.point.value},inside:!0,overflow:!1,padding:0,verticalAlign:'middle'},marker:null,nullColor:s.neutralColor3,stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:'{point.name}: {point.value}<br/>'},turboThreshold:0,allAreas:!0,borderColor:s.neutralColor20,borderWidth:1,joinBy:'hc-key',states:{hover:{halo:null,brightness:.2},normal:{animation:!0},select:{color:s.neutralColor20},inactive:{opacity:1}}});return i}(m);o(a.prototype,{type:'map',axisTypes:t.axisTypes,colorAttribs:t.colorAttribs,colorKey:t.colorKey,directTouch:!0,drawDataLabels:u,drawGraph:u,drawLegendSymbol:i.drawRectangle,forceDL:!0,getExtremesFromAll:!0,getSymbol:t.getSymbol,parallelArrays:t.parallelArrays,pointArrayMap:t.pointArrayMap,pointClass:r,preserveAspectRatio:!0,searchPoint:u,trackerGroups:t.trackerGroups,useMapGeometry:!0});h.registerSeriesType('map',a);'';return a});i(e,'Series/MapLine/MapLineSeries.js',[e['Series/Map/MapSeries.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i){var o=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),r=e.series,s=i.extend,n=i.merge;i=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;t.data=void 0;t.options=void 0;t.points=void 0;return t};o(i,e);i.prototype.pointAttribs=function(e,i){e=t.prototype.pointAttribs.call(this,e,i);e.fill=this.options.fillColor;return e};i.defaultOptions=n(t.defaultOptions,{lineWidth:1,fillColor:'none'});return i}(t);s(i.prototype,{type:'mapline',colorProp:'stroke',drawLegendSymbol:r.prototype.drawLegendSymbol,pointAttrToOptions:{stroke:'color','stroke-width':'lineWidth'}});e.registerSeriesType('mapline',i);'';return i});i(e,'Series/MapPoint/MapPointPoint.js',[e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e){var i=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),o=e.merge;return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;e.options=void 0;e.series=void 0;return e};i(e,t);e.prototype.applyOptions=function(e,i){e='undefined'!==typeof e.lat&&'undefined'!==typeof e.lon?o(e,this.series.chart.fromLatLonToPoint(e)):e;return t.prototype.applyOptions.call(this,e,i)};return e}(t.seriesTypes.scatter.prototype.pointClass)});i(e,'Series/MapPoint/MapPointSeries.js',[e['Series/MapPoint/MapPointPoint.js'],e['Core/Color/Palette.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i,o){var s=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),r=i.seriesTypes.scatter,n=o.extend,a=o.merge;o=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;e.data=void 0;e.options=void 0;e.points=void 0;return e};s(i,t);i.prototype.drawDataLabels=function(){t.prototype.drawDataLabels.call(this);this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)};i.defaultOptions=a(r.defaultOptions,{dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:e.neutralColor100}}});return i}(r);n(o.prototype,{type:'mappoint',forceDL:!0,pointClass:t});i.registerSeriesType('mappoint',o);'';return o});i(e,'Series/Bubble/BubblePoint.js',[e['Core/Series/Point.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i){var o=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();i=i.extend;e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;t.options=void 0;t.series=void 0;return t};o(i,e);i.prototype.haloPath=function(e){return t.prototype.haloPath.call(this,0===e?0:(this.marker?this.marker.radius||0:0)+e)};return i}(e.seriesTypes.scatter.prototype.pointClass);i(e.prototype,{ttBelow:!1});return e});i(e,'Series/Bubble/BubbleLegend.js',[e['Core/Chart/Chart.js'],e['Core/Color/Color.js'],e['Core/Globals.js'],e['Core/Legend.js'],e['Core/Color/Palette.js'],e['Core/Series/Series.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s,n){var m=e.parse,y=i.noop;e=n.addEvent;var d=n.arrayMax,u=n.arrayMin,p=n.isNumber,h=n.merge,c=n.objectEach,a=n.pick,l=n.setOptions,f=n.stableSort,g=n.wrap;'';l({legend:{bubbleLegend:{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:'',formatter:void 0,align:'right',style:{fontSize:10,color:void 0},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:'area',sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}});l=function(){function t(t,e){this.options=this.symbols=this.visible=this.ranges=this.movementX=this.maxLabel=this.legendSymbol=this.legendItemWidth=this.legendItemHeight=this.legendItem=this.legendGroup=this.legend=this.fontMetrics=this.chart=void 0;this.setState=y;this.init(t,e)};t.prototype.init=function(t,e){this.options=t;this.visible=!0;this.chart=e.chart;this.legend=e};t.prototype.addToLegend=function(t){t.splice(this.options.legendIndex,0,this)};t.prototype.drawLegendSymbol=function(t){var o=this.chart,r=this.options,s=a(t.options.itemDistance,20),e=r.ranges,i=r.connectorDistance;this.fontMetrics=o.renderer.fontMetrics(r.labels.style.fontSize.toString()+'px');e&&e.length&&p(e[0].value)?(f(e,function(t,e){return e.value-t.value}),this.ranges=e,this.setOptions(),this.render(),o=this.getMaxLabelSize(),e=this.ranges[0].radius,t=2*e,i=i-e+o.width,i=0<i?i:0,this.maxLabel=o,this.movementX='left'===r.labels.align?i:0,this.legendItemWidth=t+i+s,this.legendItemHeight=t+this.fontMetrics.h/2):t.options.bubbleLegend.autoRanges=!0};t.prototype.setOptions=function(){var e=this.ranges,t=this.options,i=this.chart.series[t.seriesIndex],l=this.legend.baseline,o={'z-index':t.zIndex,'stroke-width':t.borderWidth},r={'z-index':t.zIndex,'stroke-width':t.connectorWidth},p=this.getLabelStyles(),s=i.options.marker.fillOpacity,n=this.chart.styledMode;e.forEach(function(c,d){n||(o.stroke=a(c.borderColor,t.borderColor,i.color),o.fill=a(c.color,t.color,1!==s?m(i.color).setOpacity(s).get('rgba'):i.color),r.stroke=a(c.connectorColor,t.connectorColor,i.color));e[d].radius=this.getRangeRadius(c.value);e[d]=h(e[d],{center:e[0].radius-e[d].radius+l});n||h(!0,e[d],{bubbleStyle:h(!1,o),connectorStyle:h(!1,r),labelStyle:p})},this)};t.prototype.getLabelStyles=function(){var t=this.options,e={},i='left'===t.labels.align,o=this.legend.options.rtl;c(t.labels.style,function(t,i){'color'!==i&&'fontSize'!==i&&'z-index'!==i&&(e[i]=t)});return h(!1,e,{'font-size':t.labels.style.fontSize,fill:a(t.labels.style.color,r.neutralColor100),'z-index':t.zIndex,align:o||i?'right':'left'})};t.prototype.getRangeRadius=function(t){var e=this.options;return this.chart.series[this.options.seriesIndex].getRadius.call(this,e.ranges[e.ranges.length-1].value,e.ranges[0].value,e.minSize,e.maxSize,t)};t.prototype.render=function(){var t=this.chart.renderer,e=this.options.zThreshold;this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]});this.legendSymbol=t.g('bubble-legend');this.legendItem=t.g('bubble-legend-item');this.legendSymbol.translateX=0;this.legendSymbol.translateY=0;this.ranges.forEach(function(t){t.value>=e&&this.renderRange(t)},this);this.legendSymbol.add(this.legendItem);this.legendItem.add(this.legendGroup);this.hideOverlappingLabels()};t.prototype.renderRange=function(t){var e=this.options,r=e.labels,s=this.chart.renderer,p=this.symbols,f=p.labels,d=t.center,u=Math.abs(t.radius),i=e.connectorDistance||0,n=r.align,a=r.style.fontSize;i=this.legend.options.rtl||'left'===n?-i:i;r=e.connectorWidth;var h=this.ranges[0].radius||0,l=d-u-e.borderWidth/2+r/2;a=a/2-(this.fontMetrics.h-a)/2;var o=s.styledMode;'center'===n&&(i=0,e.connectorDistance=0,t.labelStyle.align='center');n=l+e.labels.y;var c=h+i+e.labels.x;p.bubbleItems.push(s.circle(h,d+((l%1?1:.5)-(r%2?0:.5)),u).attr(o?{}:t.bubbleStyle).addClass((o?'highcharts-color-'+this.options.seriesIndex+' ':'')+'highcharts-bubble-legend-symbol '+(e.className||'')).add(this.legendSymbol));p.connectors.push(s.path(s.crispLine([['M',h,l],['L',h+i,l]],e.connectorWidth)).attr(o?{}:t.connectorStyle).addClass((o?'highcharts-color-'+this.options.seriesIndex+' ':'')+'highcharts-bubble-legend-connectors '+(e.connectorClassName||'')).add(this.legendSymbol));t=s.text(this.formatLabel(t),c,n+a).attr(o?{}:t.labelStyle).addClass('highcharts-bubble-legend-labels '+(e.labels.className||'')).add(this.legendSymbol);f.push(t);t.placed=!0;t.alignAttr={x:c,y:n+a}};t.prototype.getMaxLabelSize=function(){var t,e;this.symbols.labels.forEach(function(i){e=i.getBBox(!0);t=t?e.width>t.width?e:t:e});return t||{}};t.prototype.formatLabel=function(t){var e=this.options,i=e.labels.formatter;e=e.labels.format;var o=this.chart.numberFormatter;return e?n.format(e,t):i?i.call(t):o(t.value,1)};t.prototype.hideOverlappingLabels=function(){var e=this.chart,t=this.symbols;!this.options.labels.allowOverlap&&t&&(e.hideOverlappingLabels(t.labels),t.labels.forEach(function(e,i){e.newOpacity?e.newOpacity!==e.oldOpacity&&t.connectors[i].show():t.connectors[i].hide()}))};t.prototype.getRanges=function(){var s=this.legend.bubbleLegend,e=s.options.ranges,r,i=Number.MAX_VALUE,t=-Number.MAX_VALUE;s.chart.series.forEach(function(e){e.isBubble&&!e.ignoreSeries&&(r=e.zData.filter(p),r.length&&(i=a(e.options.zMin,Math.min(i,Math.max(u(r),!1===e.options.displayNegative?e.options.zThreshold:-Number.MAX_VALUE))),t=a(e.options.zMax,Math.max(t,d(r)))))});var o=i===t?[{value:t}]:[{value:i},{value:(i+t)/2},{value:t,autoRanges:!0}];e.length&&e[0].radius&&o.reverse();o.forEach(function(t,i){e&&e[i]&&(o[i]=h(!1,e[i],t))});return o};t.prototype.predictBubbleSizes=function(){var e=this.chart,i=this.fontMetrics,a=e.legend.options,o='horizontal'===a.layout,l=o?e.legend.lastLineHeight:0,r=e.plotSizeX,s=e.plotSizeY,t=e.series[this.options.seriesIndex];e=Math.ceil(t.minPxSize);var n=Math.ceil(t.maxPxSize);t=t.options.maxSize;var h=Math.min(s,r);if(a.floating||!/%$/.test(t))i=n;else if(t=parseFloat(t),i=(h+l-i.h/2)*t/100/(t/100+1),o&&s-i>=r||!o&&r-i>=s)i=n;return[e,Math.ceil(i)]};t.prototype.updateRanges=function(t,e){var i=this.legend.options.bubbleLegend;i.minSize=t;i.maxSize=e;i.ranges=this.getRanges()};t.prototype.correctSizes=function(){var e=this.legend,t=this.chart.series[this.options.seriesIndex];1<Math.abs(Math.ceil(t.maxPxSize)-this.options.maxSize)&&(this.updateRanges(this.options.minSize,t.maxPxSize),e.render())};return t}();e(o,'afterGetAllItems',function(t){var o=this.bubbleLegend,r=this.options,e=r.bubbleLegend,s=this.chart.getVisibleBubbleSeriesIndex();o&&o.ranges&&o.ranges.length&&(e.ranges.length&&(e.autoRanges=!!e.ranges[0].autoRanges),this.destroyItem(o));0<=s&&r.enabled&&e.enabled&&(e.seriesIndex=s,this.bubbleLegend=new i.BubbleLegend(e,this),this.bubbleLegend.addToLegend(t.allItems))});t.prototype.getVisibleBubbleSeriesIndex=function(){for(var e=this.series,t=0;t<e.length;){if(e[t]&&e[t].isBubble&&e[t].visible&&e[t].zData.length)return t;t++};return-1};o.prototype.getLinesHeights=function(){var e=this.allItems,o=[],s=e.length,t,i=0;for(t=0;t<s;t++)if(e[t].legendItemHeight&&(e[t].itemHeight=e[t].legendItemHeight),e[t]===e[s-1]||e[t+1]&&e[t]._legendItemPos[1]!==e[t+1]._legendItemPos[1]){o.push({height:0});var r=o[o.length-1];for(i;i<=t;i++)e[i].itemHeight>r.height&&(r.height=e[i].itemHeight);r.step=t};return o};o.prototype.retranslateItems=function(t){var o,r,e,s=this.options.rtl,i=0;this.allItems.forEach(function(n,a){o=n.legendGroup.translateX;r=n._legendItemPos[1];if((e=n.movementX)||s&&n.ranges)e=s?o-n.options.maxSize/2:o+e,n.legendGroup.attr({translateX:e});a>t[i].step&&i++;n.legendGroup.attr({translateY:Math.round(r+t[i].height/2)});n._legendItemPos[1]=r+t[i].height/2})};e(s,'legendItemClick',function(){var t=this.chart,i=this.visible,e=this.chart.legend;e&&e.bubbleLegend&&(this.visible=!i,this.ignoreSeries=i,t=0<=t.getVisibleBubbleSeriesIndex(),e.bubbleLegend.visible!==t&&(e.update({bubbleLegend:{enabled:t}}),e.bubbleLegend.visible=t),this.visible=i)});g(t.prototype,'drawChartBox',function(t,e,i){var o=this.legend,r=0<=this.getVisibleBubbleSeriesIndex();if(o&&o.options.enabled&&o.bubbleLegend&&o.options.bubbleLegend.autoRanges&&r){var s=o.bubbleLegend.options;r=o.bubbleLegend.predictBubbleSizes();o.bubbleLegend.updateRanges(r[0],r[1]);s.placed||(o.group.placed=!1,o.allItems.forEach(function(t){t.legendGroup.translateY=null}));o.render();this.getMargins();this.axes.forEach(function(t){t.visible&&t.render();s.placed||(t.setScale(),t.updateNames(),c(t.ticks,function(t){t.isNew=!0;t.isNewLabel=!0}))});s.placed=!0;this.getMargins();t.call(this,e,i);o.bubbleLegend.correctSizes();o.retranslateItems(o.getLinesHeights())}
else t.call(this,e,i),o&&o.options.enabled&&o.bubbleLegend&&(o.render(),o.retranslateItems(o.getLinesHeights()))});i.BubbleLegend=l;return i.BubbleLegend});i(e,'Series/Bubble/BubbleSeries.js',[e['Core/Axis/Axis.js'],e['Series/Bubble/BubblePoint.js'],e['Core/Color/Color.js'],e['Core/Globals.js'],e['Core/Series/Series.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s,n){var y=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),v=i.parse;i=o.noop;var c=s.seriesTypes;o=c.column;var l=c.scatter,d=n.arrayMax,u=n.arrayMin,f=n.clamp,p=n.extend,a=n.isNumber,g=n.merge,h=n.pick,m=n.pInt;n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;e.data=void 0;e.maxPxSize=void 0;e.minPxSize=void 0;e.options=void 0;e.points=void 0;e.radii=void 0;e.yData=void 0;e.zData=void 0;return e};y(e,t);e.prototype.animate=function(t){!t&&this.points.length<this.options.animationLimit&&this.points.forEach(function(t){var e=t.graphic;e&&e.width&&(this.hasRendered||e.attr({x:t.plotX,y:t.plotY,width:1,height:1}),e.animate(this.markerAttribs(t),this.options.animation))},this)};e.prototype.getRadii=function(t,e,i){var r=this.zData,a=this.yData,h=i.minPxSize,l=i.maxPxSize,s=[],o=0;for(i=r.length;o<i;o++){var n=r[o];s.push(this.getRadius(t,e,h,l,n,a[o]))};this.radii=s};e.prototype.getRadius=function(t,e,i,o,r,s){var h=this.options,c='width'!==h.sizeBy,l=h.zThreshold,p=e-t,n=.5;if(null===s||null===r)return null;if(a(r)){h.sizeByAbsoluteValue&&(r=Math.abs(r-l),p=Math.max(e-l,Math.abs(t-l)),t=0);if(r<t)return i/2-1;0<p&&(n=(r-t)/p)};c&&0<=n&&(n=Math.sqrt(n));return Math.ceil(i+n*(o-i))/2};e.prototype.hasData=function(){return!!this.processedXData.length};e.prototype.pointAttribs=function(t,e){var i=this.options.marker.fillOpacity;t=r.prototype.pointAttribs.call(this,t,e);1!==i&&(t.fill=v(t.fill).setOpacity(i).get('rgba'));return t};e.prototype.translate=function(){var o,r=this.data,s=this.radii;t.prototype.translate.call(this);for(o=r.length;o--;){var i=r[o],e=s?s[o]:0;a(e)&&e>=this.minPxSize/2?(i.marker=p(i.marker,{radius:e,width:2*e,height:2*e}),i.dlBox={x:i.plotX-e,y:i.plotY-e,width:2*e,height:2*e}):i.shapeArgs=i.plotY=i.dlBox=void 0}};e.defaultOptions=g(l.defaultOptions,{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:'middle'},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:'circle'},minSize:8,maxSize:'20%',softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:'({point.x}, {point.y}), Size: {point.z}'},turboThreshold:0,zThreshold:0,zoneAxis:'z'});return e}(l);p(n.prototype,{alignDataLabel:o.prototype.alignDataLabel,applyZones:i,bubblePadding:!0,buildKDTree:i,directTouch:!0,isBubble:!0,pointArrayMap:['y','z'],pointClass:e,parallelArrays:['x','y','z'],trackerGroups:['group','dataLabelsGroup'],specialGroup:'group',zoneAxis:'z'});t.prototype.beforePadding=function(){var t=this,e=this.len,n=this.chart,o=0,i=e,l=this.isXAxis,x=l?'xData':'yData',p=this.min,r={},b=Math.min(n.plotWidth,n.plotHeight),c=Number.MAX_VALUE,g=-Number.MAX_VALUE,y=this.max-p,s=e/y,v=[];this.series.forEach(function(e){var i=e.options;!e.bubblePadding||!e.visible&&n.options.chart.ignoreHiddenSeries||(t.allowZoomOutside=!0,v.push(e),l&&(['minSize','maxSize'].forEach(function(t){var e=i[t],o=/%$/.test(e);e=m(e);r[t]=o?b*e/100:e}),e.minPxSize=r.minSize,e.maxPxSize=Math.max(r.maxSize,r.minSize),e=e.zData.filter(a),e.length&&(c=h(i.zMin,f(u(e),!1===i.displayNegative?i.zThreshold:-Number.MAX_VALUE,c)),g=h(i.zMax,Math.max(g,d(e))))))});v.forEach(function(e){var n=e[x],r=n.length;l&&e.getRadii(c,g,e);if(0<y)for(;r--;)if(a(n[r])&&t.dataMin<=n[r]&&n[r]<=t.max){var h=e.radii?e.radii[r]:0;o=Math.min((n[r]-p)*s-h,o);i=Math.max((n[r]-p)*s+h,i)}});v.length&&0<y&&!this.logarithmic&&(i-=e,s*=(e+Math.max(0,o)-Math.min(i,e))/e,[['min','userMin',o],['max','userMax',i]].forEach(function(e){'undefined'===typeof h(t.options[e[0]],t[e[1]])&&(t[e[0]]+=e[2]/s)}))};s.registerSeriesType('bubble',n);'';'';return n});i(e,'Series/MapBubble/MapBubblePoint.js',[e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e){var r=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),i=t.seriesTypes,s=i.map;t=e.extend;var o=e.merge;e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this};r(e,t);e.prototype.applyOptions=function(e,i){return e&&'undefined'!==typeof e.lat&&'undefined'!==typeof e.lon?t.prototype.applyOptions.call(this,o(e,this.series.chart.fromLatLonToPoint(e)),i):s.prototype.pointClass.prototype.applyOptions.call(this,e,i)};e.prototype.isValid=function(){return'number'===typeof this.z};return e}(i.bubble.prototype.pointClass);t(e.prototype,{ttBelow:!1});return e});i(e,'Series/MapBubble/MapBubbleSeries.js',[e['Series/Bubble/BubbleSeries.js'],e['Series/MapBubble/MapBubblePoint.js'],e['Series/Map/MapSeries.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i,o,r){var s=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=r.extend,a=r.merge;r=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;t.data=void 0;t.options=void 0;t.points=void 0;return t};s(i,e);i.defaultOptions=a(t.defaultOptions,{animationLimit:500,tooltip:{pointFormat:'{point.name}: {point.z}'}});return i}(t);n(r.prototype,{type:'mapbubble',getBox:i.prototype.getBox,pointArrayMap:['z'],pointClass:e,setData:i.prototype.setData,setOptions:i.prototype.setOptions,xyFromShape:!0});o.registerSeriesType('mapbubble',r);'';return r});i(e,'Series/Heatmap/HeatmapPoint.js',[e['Mixins/ColorMapSeries.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Utilities.js']],function(t,e,i){var n=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();t=t.colorMapPointMixin;var o=i.clamp,r=i.extend,s=i.pick;e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;e.options=void 0;e.series=void 0;e.value=void 0;e.x=void 0;e.y=void 0;return e};n(e,t);e.prototype.applyOptions=function(e,i){e=t.prototype.applyOptions.call(this,e,i);e.formatPrefix=e.isNull||null===e.value?'null':'point';return e};e.prototype.getCellAttributes=function(){var e=this.series,h=e.options,l=(h.colsize||1)/2,p=(h.rowsize||1)/2,i=e.xAxis,r=e.yAxis,n=this.options.marker||e.options.marker;e=e.pointPlacementToXValue();var a=s(this.pointPadding,h.pointPadding,0),t={x1:o(Math.round(i.len-(i.translate(this.x-l,!1,!0,!1,!0,-e)||0)),-i.len,2*i.len),x2:o(Math.round(i.len-(i.translate(this.x+l,!1,!0,!1,!0,-e)||0)),-i.len,2*i.len),y1:o(Math.round(r.translate(this.y-p,!1,!0,!1,!0)||0),-r.len,2*r.len),y2:o(Math.round(r.translate(this.y+p,!1,!0,!1,!0)||0),-r.len,2*r.len)};[['width','x'],['height','y']].forEach(function(e){var r=e[0];e=e[1];var o=e+'1',i=e+'2',l=Math.abs(t[o]-t[i]),s=n&&n.lineWidth||0,h=Math.abs(t[o]+t[i])/2;n[r]&&n[r]<l&&(t[o]=h-n[r]/2-s/2,t[i]=h+n[r]/2+s/2);a&&('y'===e&&(o=i,i=e+'1'),t[o]+=a,t[i]-=a)});return t};e.prototype.haloPath=function(t){if(!t)return[];var e=this.shapeArgs;return['M',e.x-t,e.y-t,'L',e.x-t,e.y+e.height+t,e.x+e.width+t,e.y+e.height+t,e.x+e.width+t,e.y-t,'Z']};e.prototype.isValid=function(){return Infinity!==this.value&&-Infinity!==this.value};return e}(e.seriesTypes.scatter.prototype.pointClass);r(e.prototype,{dataLabelOnNull:t.dataLabelOnNull,setState:t.setState});return e});i(e,'Series/Heatmap/HeatmapSeries.js',[e['Mixins/ColorMapSeries.js'],e['Core/Globals.js'],e['Series/Heatmap/HeatmapPoint.js'],e['Mixins/LegendSymbol.js'],e['Core/Color/Palette.js'],e['Core/Series/SeriesRegistry.js'],e['Core/Renderer/SVG/SVGRenderer.js'],e['Core/Utilities.js']],function(t,e,i,o,r,s,n,a){var x=this&&this.__extends||function(){var t=function(e,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return t(e,i)};return function(e,i){function o(){this.constructor=e};t(e,i);e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();t=t.colorMapSeriesMixin;var g=e.noop,h=s.series,d=s.seriesTypes,m=d.column,u=d.scatter,l=n.prototype.symbols,p=a.extend,y=a.fireEvent,f=a.isNumber,c=a.merge,v=a.pick;n=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;e.colorAxis=void 0;e.data=void 0;e.options=void 0;e.points=void 0;e.valueMax=NaN;e.valueMin=NaN;return e};x(i,t);i.prototype.drawPoints=function(){var t=this;if((this.options.marker||{}).enabled||this._hasPointMarkers)h.prototype.drawPoints.call(this),this.points.forEach(function(e){e.graphic&&e.graphic[t.chart.styledMode?'css':'animate'](t.colorAttribs(e))})};i.prototype.getExtremes=function(){var t=h.prototype.getExtremes.call(this,this.valueData),e=t.dataMin;t=t.dataMax;f(e)&&(this.valueMin=e);f(t)&&(this.valueMax=t);return h.prototype.getExtremes.call(this)};i.prototype.getValidPoints=function(t,e){return h.prototype.getValidPoints.call(this,t,e,!0)};i.prototype.hasData=function(){return!!this.processedXData.length};i.prototype.init=function(){h.prototype.init.apply(this,arguments);var t=this.options;t.pointRange=v(t.pointRange,t.colsize||1);this.yAxis.axisPointRange=t.rowsize||1;p(l,{ellipse:l.circle,rect:l.square})};i.prototype.markerAttribs=function(t,e){var n=t.marker||{},a=this.options.marker||{},i=t.shapeArgs||{},o={};if(t.hasImage)return{x:t.plotX,y:t.plotY};if(e){var s=a.states[e]||{};var r=n.states&&n.states[e]||{};[['width','x'],['height','y']].forEach(function(t){o[t[0]]=(r[t[0]]||s[t[0]]||i[t[0]])+(r[t[0]+'Plus']||s[t[0]+'Plus']||0);o[t[1]]=i[t[1]]+(i[t[0]]-o[t[0]])/2})};return e?o:i};i.prototype.pointAttribs=function(t,i){var o=h.prototype.pointAttribs.call(this,t,i),r=this.options||{},s=this.chart.options.plotOptions||{},n=s.series||{},a=s.heatmap||{};s=r.borderColor||a.borderColor||n.borderColor;n=r.borderWidth||a.borderWidth||n.borderWidth||o['stroke-width'];o.stroke=t&&t.marker&&t.marker.lineColor||r.marker&&r.marker.lineColor||s||this.color;o['stroke-width']=n;i&&(t=c(r.states[i],r.marker&&r.marker.states[i],t&&t.options.states&&t.options.states[i]||{}),i=t.brightness,o.fill=t.color||e.color(o.fill).brighten(i||0).get(),o.stroke=t.lineColor);return o};i.prototype.setClip=function(t){var e=this.chart;h.prototype.setClip.apply(this,arguments);(!1!==this.options.clip||t)&&this.markerGroup.clip((t||this.clipBox)&&this.sharedClipKey?e[this.sharedClipKey]:e.clipRect)};i.prototype.translate=function(){var t=this.options,e=t.marker&&t.marker.symbol||'',i=l[e]?e:'rect';t=this.options;var o=-1!==['circle','square'].indexOf(i);this.generatePoints();this.points.forEach(function(t){var s=t.getCellAttributes(),r={x:Math.min(s.x1,s.x2),y:Math.min(s.y1,s.y2),width:Math.max(Math.abs(s.x2-s.x1),0),height:Math.max(Math.abs(s.y2-s.y1),0)};var a=t.hasImage=0===(t.marker&&t.marker.symbol||e||'').indexOf('url');if(o){var n=Math.abs(r.width-r.height);r.x=Math.min(s.x1,s.x2)+(r.width<r.height?0:n/2);r.y=Math.min(s.y1,s.y2)+(r.width<r.height?n/2:0);r.width=r.height=Math.min(r.width,r.height)};n={plotX:(s.x1+s.x2)/2,plotY:(s.y1+s.y2)/2,clientX:(s.x1+s.x2)/2,shapeType:'path',shapeArgs:c(!0,r,{d:l[i](r.x,r.y,r.width,r.height)})};a&&(t.marker={width:r.width,height:r.height});p(t,n)});y(this,'afterTranslate')};i.defaultOptions=c(u.defaultOptions,{animation:!1,borderWidth:0,nullColor:r.neutralColor3,dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:'middle',crop:!1,overflow:!1,padding:0},marker:{symbol:'rect',radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:'{point.x}, {point.y}: {point.value}<br/>'},states:{hover:{halo:!1,brightness:.2}}});return i}(u);p(n.prototype,{alignDataLabel:m.prototype.alignDataLabel,axisTypes:t.axisTypes,colorAttribs:t.colorAttribs,colorKey:t.colorKey,directTouch:!0,drawLegendSymbol:o.drawRectangle,getBox:g,getExtremesFromAll:!0,getSymbol:h.prototype.getSymbol,hasPointSpecificOptions:!0,parallelArrays:t.parallelArrays,pointArrayMap:['y','value'],pointClass:i,trackerGroups:t.trackerGroups});s.registerSeriesType('heatmap',n);'';'';return n});i(e,'Extensions/GeoJSON.js',[e['Core/Chart/Chart.js'],e['Core/Globals.js'],e['Core/Utilities.js']],function(t,e,i){function n(t,e){var i,o=!1,a=t.x,r=t.y;t=0;for(i=e.length-1;t<e.length;i=t++){var s=e[t][1]>r,n=e[i][1]>r;s!==n&&a<(e[i][0]-e[t][0])*(r-e[t][1])/(e[i][1]-e[t][1])+e[t][0]&&(o=!o)};return o};var r=e.win,o=i.error,a=i.extend,s=i.format,h=i.merge;i=i.wrap;'';t.prototype.transformFromLatLon=function(t,e){var i,s=(null===(i=this.userOptions.chart)||void 0===i?void 0:i.proj4)||r.proj4;if(!s)return o(21,!1,this),{x:0,y:null};t=s(e.crs,[t.lon,t.lat]);i=e.cosAngle||e.rotation&&Math.cos(e.rotation);s=e.sinAngle||e.rotation&&Math.sin(e.rotation);t=e.rotation?[t[0]*i+t[1]*s,-t[0]*s+t[1]*i]:t;return{x:((t[0]-(e.xoffset||0))*(e.scale||1)+(e.xpan||0))*(e.jsonres||1)+(e.jsonmarginX||0),y:(((e.yoffset||0)-t[1])*(e.scale||1)+(e.ypan||0))*(e.jsonres||1)-(e.jsonmarginY||0)}};t.prototype.transformToLatLon=function(t,e){if('undefined'===typeof r.proj4)o(21,!1,this);else{t={x:((t.x-(e.jsonmarginX||0))/(e.jsonres||1)-(e.xpan||0))/(e.scale||1)+(e.xoffset||0),y:((-t.y-(e.jsonmarginY||0))/(e.jsonres||1)+(e.ypan||0))/(e.scale||1)+(e.yoffset||0)};var i=e.cosAngle||e.rotation&&Math.cos(e.rotation),s=e.sinAngle||e.rotation&&Math.sin(e.rotation);e=r.proj4(e.crs,'WGS84',e.rotation?{x:t.x*i+t.y*-s,y:t.x*s+t.y*i}:t);return{lat:e.y,lon:e.x}}};t.prototype.fromPointToLatLon=function(t){var e=this.mapTransforms,i;if(e){for(i in e)if(Object.hasOwnProperty.call(e,i)&&e[i].hitZone&&n({x:t.x,y:-t.y},e[i].hitZone.coordinates[0]))return this.transformToLatLon(t,e[i]);return this.transformToLatLon(t,e['default'])};o(22,!1,this)};t.prototype.fromLatLonToPoint=function(t){var e=this.mapTransforms,i;if(!e)return o(22,!1,this),{x:0,y:null};for(i in e)if(Object.hasOwnProperty.call(e,i)&&e[i].hitZone){var r=this.transformFromLatLon(t,e[i]);if(n({x:r.x,y:-r.y},e[i].hitZone.coordinates[0]))return r};return this.transformFromLatLon(t,e['default'])};e.geojson=function(t,e,i){var n=[],o=[],r=function(t){t.forEach(function(t,e){0===e?o.push(['M',t[0],-t[1]]):o.push(['L',t[0],-t[1]])})};e=e||'map';t.features.forEach(function(t){var i=t.geometry,h=i.type;i=i.coordinates;t=t.properties;var s;o=[];'map'===e||'mapbubble'===e?('Polygon'===h?(i.forEach(r),o.push(['Z'])):'MultiPolygon'===h&&(i.forEach(function(t){t.forEach(r)}),o.push(['Z'])),o.length&&(s={path:o})):'mapline'===e?('LineString'===h?r(i):'MultiLineString'===h&&i.forEach(r),o.length&&(s={path:o})):'mappoint'===e&&'Point'===h&&(s={x:i[0],y:-i[1]});s&&n.push(a(s,{name:t.name||t.NAME,properties:t}))});i&&t.copyrightShort&&(i.chart.mapCredits=s(i.chart.options.credits.mapText,{geojson:t}),i.chart.mapCreditsFull=s(i.chart.options.credits.mapTextFull,{geojson:t}));return n};i(t.prototype,'addCredits',function(t,e){e=h(!0,this.options.credits,e);this.mapCredits&&(e.href=null);t.call(this,e);this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})})});i(e,'masters/modules/map.src.js',[],function(){});i(e,'masters/highmaps.src.js',[e['masters/highcharts.src.js']],function(t){t.product='Highmaps';return t});e['masters/highmaps.src.js']._modules=e;return e['masters/highmaps.src.js']});
/* Source and licensing information for the above line(s) can be found at https://www.fgr.gob.cu/themes/custom/fgr/js/highmaps/highmaps.js. */;
/* Source and licensing information for the line(s) below can be found at https://www.fgr.gob.cu/themes/custom/fgr/js/highmaps/cu-all.js. */
;Highcharts.maps['countries/cu/cu-all']={'title':'Cuba','version':'1.1.3','type':'FeatureCollection','copyright':'Copyright (c) 2020 Highsoft AS, Based on data from Natural Earth','copyrightShort':'Natural Earth','copyrightUrl':'http://www.naturalearthdata.com','crs':{'type':'name','properties':{'name':'urn:ogc:def:crs:EPSG:32617'}},'hc-transform':{'default':{'crs':'+proj=utm +zone=17 +datum=WGS84 +units=m +no_defs','scale':0.00062123118811,'jsonres':15.5,'jsonmarginX':-999,'jsonmarginY':9851.0,'xoffset':91928.3671739,'yoffset':2572921.49102}},'features':[{'type':'Feature','id':'CU.HO','properties':{'hc-group':'admin1','hc-middle-x':0.27,'hc-middle-y':0.47,'hc-key':'cu-ho','hc-a2':'HO','labelrank':'7','hasc':'CU.HO','alt-name':null,'woe-id':'2345116','subregion':null,'fips':'CU12','postal-code':'HO','name':'Holgun','country':'Cuba','type-en':'Province','region':null,'longitude':'-76.1892','woe-name':'Holgun','latitude':'20.808','woe-label':'Holguin, CU, Cuba','type':'Provincia'},'geometry':{'type':'MultiPolygon','coordinates':[[[[8464,7264],[8468,7251],[8398,7261],[8371,7282],[8370,7301],[8419,7312],[8440,7303],[8464,7264]]],[[[7616,7774],[7655,7747],[7762,7709],[7795,7689],[7804,7633],[7819,7609],[7862,7633],[7894,7617],[7899,7593],[7912,7609],[7934,7598],[7933,7617],[7980,7619],[8010,7641],[8062,7628],[8113,7667],[8141,7649],[8203,7655],[8232,7652],[8252,7635],[8262,7599],[8302,7608],[8325,7594],[8361,7543],[8342,7498],[8322,7475],[8317,7446],[8295,7419],[8262,7408],[8246,7444],[8219,7442],[8228,7421],[8199,7418],[8223,7369],[8240,7386],[8266,7395],[8318,7395],[8367,7370],[8373,7344],[8396,7339],[8389,7313],[8337,7331],[8315,7359],[8241,7341],[8175,7347],[8180,7321],[8165,7251],[8187,7219],[8242,7193],[8259,7228],[8306,7271],[8315,7292],[8341,7264],[8338,7226],[8373,7228],[8368,7206],[8401,7192],[8394,7215],[8454,7204],[8475,7224],[8504,7203],[8511,7225],[8475,7231],[8487,7248],[8511,7256],[8557,7256],[8596,7237],[8603,7225],[8579,7219],[8594,7191],[8607,7206],[8617,7184],[8641,7179],[8698,7188],[8641,7216],[8621,7221],[8634,7235],[8696,7247],[8759,7238],[8775,7224],[8759,7212],[8806,7205],[8839,7210],[8850,7185],[8856,7208],[8891,7202],[8876,7216],[8957,7229],[9005,7213],[9016,7197],[9057,7201],[9108,7164],[9188,7158],[9225,7141],[9211,7133],[9227,7097],[9248,7085],[9207,7066],[9184,7040],[9174,6992],[9184,6963],[9144,6945],[9123,6922],[8996,6986],[8961,6977],[8965,6950],[8988,6922],[8950,6940],[8917,6942],[8858,6994],[8805,6972],[8773,6977],[8735,6944],[8724,6895],[8700,6911],[8678,6901],[8632,6936],[8587,6918],[8536,6978],[8566,7014],[8565,7051],[8491,7033],[8455,7051],[8426,7039],[8376,6993],[8349,7005],[8344,6960],[8301,6929],[8207,6923],[8135,6887],[8086,6897],[8075,6924],[8058,6928],[8016,6958],[8025,6980],[7986,6984],[7969,7018],[7920,7052],[7901,7049],[7911,7011],[7860,6977],[7874,6940],[7867,6893],[7846,6871],[7850,6903],[7776,6908],[7750,6947],[7700,6987],[7579,7018],[7584,7041],[7510,7063],[7445,7097],[7383,7116],[7376,7174],[7318,7157],[7281,7171],[7265,7188],[7245,7179],[7222,7197],[7242,7208],[7241,7230],[7222,7255],[7232,7301],[7250,7326],[7254,7351],[7251,7426],[7263,7463],[7295,7444],[7325,7449],[7377,7473],[7420,7479],[7434,7526],[7498,7583],[7590,7640],[7593,7680],[7614,7713],[7616,7774]]]]}},{'type':'Feature','id':'CU.AR','properties':{'hc-group':'admin1','hc-middle-x':0.48,'hc-middle-y':0.42,'hc-key':'cu-ar','hc-a2':'AR','labelrank':'7','hasc':'CU.AR','alt-name':null,'woe-id':'-2345115','subregion':null,'fips':'CU17','postal-code':'AR','name':'Artemisa','country':'Cuba','type-en':'Province','region':null,'longitude':'-82.69029999999999','woe-name':null,'latitude':'22.8546','woe-label':null,'type':'Provincia'},'geometry':{'type':'MultiPolygon','coordinates':[[[[1427,9113],[1418,9110],[1421,9177],[1427,9188],[1438,9138],[1427,9113]]],[[[1413,9654],[1434,9639],[1466,9649],[1477,9626],[1448,9597],[1458,9585],[1504,9565],[1513,9529],[1511,9464],[1490,9403],[1490,9364],[1529,9294],[1555,9278],[1554,9242],[1489,9234],[1437,9247],[1396,9233],[1350,9244],[1315,9236],[1211,9265],[1169,9255],[1159,9237],[1148,9177],[1124,9164],[1114,9186],[1081,9223],[1045,9299],[1027,9312],[999,9356],[975,9375],[1019,9389],[1037,9410],[1035,9446],[1010,9494],[1011,9565],[1038,9615],[1106,9609],[1151,9620],[1240,9615],[1376,9634],[1413,9654]]]]}},{'type':'Feature','id':'CU.MA','properties':{'hc-group':'admin1','hc-middle-x':0.51,'hc-middle-y':0.54,'hc-key':'cu-ma','hc-a2':'MA','labelrank':'7','hasc':'CU.MA','alt-name':null,'woe-id':'2345108','subregion':null,'fips':'CU03','postal-code':'MA','name':'Matanzas','country':'Cuba','type-en':'Province','region':null,'longitude':'-81.18600000000001','woe-name':'Matanzas','latitude':'22.6152','woe-label':'Matanzas, CU, Cuba','type':'Provincia'},'geometry':{'type':'MultiPolygon','coordinates':[[[[2385,8565],[2387,8551],[2352,8557],[2352,8585],[2385,8565]]],[[[3397,9774],[3449,9778],[3450,9762],[3428,9748],[3381,9763],[3344,9759],[3354,9783],[3380,9788],[3397,9774]]],[[[3262,9783],[3251,9767],[3222,9760],[3231,9786],[3257,9794],[3262,9783]]],[[[3214,9781],[3186,9765],[3146,9779],[3118,9778],[3080,9790],[3067,9803],[3090,9806],[3152,9788],[3214,9781]]],[[[3016,9851],[3054,9833],[3050,9815],[3005,9827],[2994,9848],[3016,9851]]],[[[3029,9738],[3087,9736],[3084,9758],[3100,9744],[3107,9759],[3123,9736],[3097,9713],[3063,9722],[3031,9719],[2958,9686],[3029,9738]]],[[[3334,8560],[3290,8559],[3168,8567],[3024,8551],[2938,8560],[2881,8586],[2827,8604],[2792,8675],[2788,8702],[2795,8747],[2765,8791],[2727,8799],[2720,8774],[2734,8729],[2735,8599],[2727,8566],[2706,8568],[2721,8591],[2716,8625],[2693,8663],[2665,8653],[2657,8620],[2641,8606],[2618,8619],[2595,8597],[2559,8613],[2537,8684],[2499,8701],[2452,8701],[2421,8718],[2360,8695],[2353,8708],[2284,8730],[2269,8714],[2204,8722],[2183,8694],[2112,8706],[2087,8734],[2058,8782],[1917,8839],[1879,8865],[1851,8871],[1834,8901],[1786,8911],[1777,8929],[1794,8956],[1822,8966],[1936,8962],[1973,8971],[1999,8967],[2048,8972],[2097,8963],[2148,8971],[2187,8988],[2253,8998],[2285,9023],[2285,9072],[2294,9102],[2286,9116],[2328,9170],[2341,9239],[2339,9255],[2286,9292],[2280,9318],[2287,9358],[2259,9381],[2243,9410],[2256,9450],[2258,9496],[2231,9533],[2193,9556],[2199,9571],[2240,9607],[2227,9622],[2235,9641],[2259,9638],[2245,9715],[2256,9737],[2358,9737],[2402,9707],[2406,9685],[2398,9642],[2385,9627],[2409,9619],[2435,9628],[2456,9676],[2556,9692],[2577,9709],[2648,9722],[2699,9746],[2767,9790],[2802,9787],[2760,9764],[2716,9752],[2662,9719],[2648,9701],[2692,9689],[2748,9624],[2783,9605],[2811,9609],[2853,9679],[2891,9686],[2943,9681],[2952,9637],[2970,9631],[3013,9642],[3168,9671],[3263,9664],[3302,9689],[3307,9709],[3289,9729],[3315,9737],[3337,9729],[3303,9664],[3332,9641],[3310,9608],[3307,9555],[3295,9541],[3259,9546],[3206,9540],[3197,9532],[3197,9462],[3180,9445],[3218,9383],[3259,9351],[3275,9352],[3321,9377],[3338,9374],[3374,9287],[3354,9261],[3368,9230],[3363,9180],[3385,9112],[3406,9080],[3383,9062],[3350,9008],[3303,8992],[3191,9005],[3160,9004],[3092,9016],[3040,8986],[3001,8949],[3014,8936],[2988,8878],[3016,8870],[2999,8789],[3003,8770],[3032,8767],[3032,8727],[3074,8698],[3097,8670],[3187,8627],[3232,8638],[3257,8629],[3310,8632],[3321,8615],[3334,8560]]]]}},{'type':'Feature','id':'CU.VC','properties':{'hc-group':'admin1','hc-middle-x':0.61,'hc-middle-y':0.53,'hc-key':'cu-vc','hc-a2':'VC','labelrank':'6','hasc':'CU.VC','alt-name':null,'woe-id':'2345120','subregion':null,'fips':'CU16','postal-code':'VC','name':'Villa Clara','country':'Cuba','type-en':'Province','region':null,'longitude':'-79.95269999999999','woe-name':'Villa Clara','latitude':'22.601','woe-label':'Villa Clara, CU, Cuba','type':'Provincia'},'geometry':{'type':'MultiPolygon','coordinates':[[[[4234,9424],[4253,9409],[4229,9396],[4175,9441],[4199,9463],[4196,9446],[4222,9439],[4234,9424]]],[[[4005,9536],[4029,9529],[4018,9505],[3997,9518],[3967,9495],[3960,9521],[4005,9536]]],[[[4081,9478],[4052,9493],[4063,9510],[4045,9516],[4055,9532],[4089,9535],[4098,9516],[4074,9500],[4081,9478]]],[[[3669,9555],[3689,9526],[3589,9543],[3574,9555],[3601,9555],[3649,9579],[3671,9581],[3688,9570],[3669,9555]]],[[[3853,9633],[3864,9602],[3833,9612],[3830,9643],[3853,9633]]],[[[3776,9651],[3756,9642],[3695,9665],[3715,9702],[3752,9669],[3787,9663],[3776,9651]]],[[[3675,9661],[3627,9693],[3615,9713],[3639,9721],[3682,9674],[3675,9661]]],[[[3543,9727],[3502,9722],[3465,9704],[3476,9729],[3520,9734],[3543,9727]]],[[[4586,9168],[4510,9218],[4476,9255],[4458,9248],[4423,9258],[4390,9282],[4385,9298],[4356,9319],[4342,9349],[4323,9356],[4281,9344],[4279,9363],[4327,9373],[4344,9366],[4396,9308],[4417,9291],[4463,9277],[4500,9247],[4541,9232],[4561,9212],[4586,9168]]],[[[3332,9641],[3368,9576],[3388,9562],[3459,9548],[3492,9516],[3565,9511],[3608,9486],[3642,9476],[3705,9482],[3764,9505],[3756,9530],[3773,9531],[3825,9505],[3868,9502],[3872,9527],[3893,9514],[3930,9448],[3968,9426],[4021,9418],[4053,9448],[4114,9466],[4122,9456],[4095,9434],[4072,9445],[4061,9436],[4049,9398],[4066,9374],[4086,9365],[4144,9356],[4215,9304],[4232,9319],[4263,9317],[4289,9209],[4316,9198],[4350,9160],[4373,9112],[4404,9079],[4459,9073],[4499,9014],[4499,8988],[4481,8954],[4501,8932],[4535,8866],[4564,8827],[4557,8757],[4506,8774],[4484,8775],[4455,8762],[4438,8743],[4420,8696],[4403,8676],[4378,8670],[4342,8687],[4322,8680],[4281,8692],[4237,8677],[4218,8679],[4187,8712],[4155,8713],[4144,8703],[4149,8666],[4175,8616],[4198,8607],[4192,8574],[4157,8509],[4133,8487],[4103,8489],[4077,8503],[4019,8517],[3999,8511],[3981,8476],[3954,8471],[3901,8440],[3902,8454],[3880,8472],[3874,8535],[3847,8566],[3824,8636],[3820,8707],[3839,8767],[3814,8778],[3793,8810],[3777,8861],[3739,8857],[3691,8899],[3681,8925],[3702,8960],[3685,8980],[3687,9014],[3668,9024],[3652,9070],[3669,9092],[3665,9120],[3655,9111],[3620,9110],[3606,9075],[3549,9054],[3537,9060],[3545,9104],[3507,9107],[3484,9126],[3465,9126],[3447,9105],[3406,9080],[3385,9112],[3363,9180],[3368,9230],[3354,9261],[3374,9287],[3338,9374],[3321,9377],[3275,9352],[3259,9351],[3218,9383],[3180,9445],[3197,9462],[3197,9532],[3206,9540],[3259,9546],[3295,9541],[3307,9555],[3310,9608],[3332,9641]]]]}},{'type':'Feature','id':'CU.5812','properties':{'hc-group':'admin1','hc-middle-x':0.47,'hc-middle-y':0.44,'hc-key':'cu-5812','hc-a2':'NU','labelrank':'20','hasc':'-99','alt-name':null,'woe-id':'-99','subregion':null,'fips':null,'postal-code':null,'name':null,'country':'Cuba','type-en':null,'region':null,'longitude':'-77.8912','woe-name':null,'latitude':'20.5697','woe-label':null,'type':null},'geometry':{'type':'MultiPolygon','coordinates':[[[[5294,7208],[5301,7195],[5290,7169],[5275,7194],[5294,7208]]],[[[1514,8038],[1477,8047],[1474,8057],[1502,8056],[1514,8038]]],[[[1657,8062],[1598,8046],[1605,8058],[1636,8070],[1657,8062]]],[[[1378,8234],[1406,8228],[1415,8202],[1396,8212],[1382,8205],[1369,8225],[1378,8234]]],[[[592,8463],[510,8457],[507,8460],[554,8473],[592,8463]]],[[[5580,8761],[5569,8789],[5586,8806],[5605,8809],[5580,8761]]],[[[6008,8859],[5965,8905],[5974,8908],[6003,8879],[6008,8859]]],[[[-471,8983],[-424,8960],[-449,8954],[-487,8970],[-471,8983]]],[[[5753,9032],[5741,9005],[5715,9008],[5741,9040],[5753,9032]]],[[[5048,9058],[5067,9056],[5082,9030],[5037,9045],[5048,9058]]],[[[5244,9161],[5262,9138],[5257,9129],[5233,9150],[5226,9140],[5203,9171],[5224,9173],[5244,9161]]],[[[4779,9173],[4767,9160],[4743,9181],[4776,9190],[4779,9173]]],[[[4407,9224],[4409,9195],[4387,9219],[4406,9245],[4407,9224]]],[[[3957,9524],[3945,9554],[3968,9546],[3972,9532],[3957,9524]]],[[[3906,9620],[3921,9605],[3888,9574],[3888,9607],[3906,9620]]],[[[2544,8527],[2482,8583],[2547,8534],[2567,8538],[2566,8565],[2580,8573],[2596,8537],[2624,8536],[2586,8523],[2575,8533],[2544,8527]]]]}},{'type':'Feature','id':'CU.IJ','properties':{'hc-group':'admin1','hc-middle-x':0.20,'hc-middle-y':0.43,'hc-key':'cu-ij','hc-a2':'IJ','labelrank':'6','hasc':'CU.IJ','alt-name':null,'woe-id':'2345109','subregion':null,'fips':'CU04','postal-code':'IJ','name':'Isla de la Juventud','country':'Cuba','type-en':'Special Municipality','region':null,'longitude':'-82.81480000000001','woe-name':'Isla de la Juventud','latitude':'21.6754','woe-label':'Isla de la Juventud, CU, Cuba','type':'Municipio Especial'},'geometry':{'type':'MultiPolygon','coordinates':[[[[1845,8046],[1824,8045],[1886,8091],[1926,8102],[1953,8130],[1961,8102],[1944,8088],[1845,8046]]],[[[2063,8120],[2032,8095],[2015,8095],[2044,8131],[2094,8149],[2063,8120]]],[[[1336,8427],[1309,8426],[1282,8439],[1272,8457],[1294,8462],[1348,8432],[1336,8427]]],[[[2500,8167],[2554,8203],[2562,8192],[2514,8149],[2435,8096],[2404,8083],[2372,8080],[2381,8106],[2409,8102],[2439,8137],[2463,8128],[2489,8140],[2500,8167]]],[[[1328,8265],[1345,8221],[1328,8189],[1320,8153],[1368,8130],[1361,8110],[1395,8079],[1364,8041],[1340,8022],[1303,8010],[1175,7948],[1099,7921],[1028,7914],[1007,7929],[942,7931],[901,7946],[857,7950],[825,7994],[784,8024],[765,8057],[746,8123],[813,8075],[835,8047],[871,8034],[912,8034],[967,8079],[980,8069],[977,8047],[995,8080],[990,8093],[949,8109],[866,8261],[854,8303],[865,8349],[908,8381],[922,8406],[982,8435],[937,8449],[952,8460],[1082,8443],[1218,8405],[1249,8385],[1254,8369],[1246,8324],[1305,8269],[1328,8265]]]]}},{'type':'Feature','id':'CU.SS','properties':{'hc-group':'admin1','hc-middle-x':0.55,'hc-middle-y':0.68,'hc-key':'cu-ss','hc-a2':'SS','labelrank':'7','hasc':'CU.SS','alt-name':null,'woe-id':'2345118','subregion':null,'fips':'CU14','postal-code':'SS','name':'Sancti Spritus','country':'Cuba','type-en':'Province','region':null,'longitude':'-79.3804','woe-name':'Sancti Spritus','latitude':'21.9618','woe-label':'Sancti Spiritus, CU, Cuba','type':'Provincia'},'geometry':{'type':'MultiPolygon','coordinates':[[[[4705,9178],[4699,9178],[4696,9198],[4734,9200],[4705,9178]]],[[[4948,9208],[4925,9195],[4905,9215],[4845,9218],[4839,9233],[4932,9228],[4948,9208]]],[[[3825,8318],[3828,8368],[3901,8440],[3954,8471],[3981,8476],[3999,8511],[4019,8517],[4077,8503],[4103,8489],[4133,8487],[4157,8509],[4192,8574],[4198,8607],[4175,8616],[4149,8666],[4144,8703],[4155,8713],[4187,8712],[4218,8679],[4237,8677],[4281,8692],[4322,8680],[4342,8687],[4378,8670],[4403,8676],[4420,8696],[4438,8743],[4455,8762],[4484,8775],[4506,8774],[4557,8757],[4564,8827],[4535,8866],[4501,8932],[4481,8954],[4499,8988],[4499,9014],[4574,8951],[4603,8938],[4629,8943],[4676,8913],[4695,8926],[4766,8916],[4781,8935],[4830,8923],[4889,8941],[4930,8947],[4985,8941],[4979,8893],[4963,8878],[4939,8809],[4882,8703],[4883,8673],[4869,8639],[4871,8617],[4918,8579],[4953,8562],[4958,8519],[4921,8453],[4890,8458],[4838,8353],[4829,8311],[4800,8247],[4824,8205],[4815,8157],[4823,8145],[4851,8145],[4880,8158],[4905,8211],[4952,8185],[4964,8089],[4947,8092],[4911,8078],[4849,8073],[4797,8046],[4756,8035],[4676,8034],[4596,8057],[4560,8083],[4475,8079],[4434,8100],[4410,8135],[4386,8106],[4360,8123],[4304,8143],[4286,8175],[4203,8181],[4135,8199],[4110,8199],[4092,8163],[4031,8185],[4051,8200],[4035,8210],[4030,8250],[3996,8232],[3954,8235],[3922,8245],[3911,8235],[3935,8221],[3923,8208],[3904,8216],[3880,8253],[3871,8296],[3859,8310],[3825,8318]]]]}},{'type':'Feature','id':'CU.CA','properties':{'hc-group':'admin1','hc-middle-x':0.57,'hc-middle-y':0.35,'hc-key':'cu-ca','hc-a2':'CA','labelrank':'7','hasc':'CU.CA','alt-name':null,'woe-id':'2345111','subregion':null,'fips':'CU05','postal-code':'CA','name':'Ciego de vila','country':'Cuba','type-en':'Province','region':null,'longitude':'-78.6388','woe-name':'Ciego de vila','latitude':'21.9626','woe-label':'Ciego de Avila, CU, Cuba','type':'Provincia'},'geometry':{'type':'MultiPolygon','coordinates':[[[[5186,7160],[5169,7145],[5144,7153],[5109,7188],[5129,7192],[5186,7160]]],[[[5009,7259],[5009,7245],[5058,7247],[5077,7237],[5089,7209],[5064,7221],[4993,7228],[4970,7251],[4992,7279],[5009,7259]]],[[[4952,7283],[4915,7294],[4854,7338],[4885,7339],[4920,7323],[4963,7314],[4952,7283]]],[[[4599,7566],[4638,7525],[4623,7519],[4577,7532],[4604,7533],[4541,7576],[4573,7581],[4599,7566]]],[[[5179,9096],[5170,9078],[5143,9071],[5141,9096],[5179,9096]]],[[[4818,7374],[4782,7422],[4757,7444],[4735,7446],[4743,7424],[4707,7452],[4750,7455],[4795,7429],[4860,7360],[4839,7360],[4846,7338],[4818,7352],[4763,7409],[4781,7411],[4818,7374]]],[[[5494,9024],[5462,9008],[5390,9004],[5340,9029],[5270,9045],[5252,9056],[5266,9068],[5251,9085],[5215,9061],[5212,9097],[5225,9090],[5228,9111],[5266,9110],[5310,9102],[5334,9087],[5440,9088],[5486,9123],[5532,9115],[5553,9104],[5556,9081],[5624,9014],[5625,8994],[5600,9001],[5478,8970],[5488,8999],[5505,8999],[5494,9024]]],[[[4985,8941],[5083,8931],[5129,8935],[5154,8862],[5177,8856],[5201,8899],[5173,8935],[5203,8932],[5235,8900],[5344,8864],[5387,8824],[5427,8800],[5511,8784],[5529,8787],[5530,8758],[5544,8766],[5560,8736],[5610,8700],[5640,8701],[5689,8684],[5748,8677],[5756,8645],[5790,8644],[5794,8629],[5830,8618],[5841,8594],[5837,8570],[5804,8549],[5743,8496],[5675,8478],[5664,8447],[5670,8429],[5741,8368],[5761,8334],[5735,8317],[5735,8282],[5691,8273],[5667,8278],[5642,8311],[5634,8334],[5609,8325],[5585,8295],[5595,8237],[5560,8194],[5571,8177],[5492,8171],[5463,8103],[5443,8118],[5392,8094],[5370,8073],[5319,8040],[5282,8023],[5243,8047],[5190,8054],[5173,8066],[5179,8081],[5203,8072],[5234,8078],[5216,8106],[5178,8131],[5156,8134],[5091,8112],[5045,8107],[5025,8085],[4964,8089],[4952,8185],[4905,8211],[4880,8158],[4851,8145],[4823,8145],[4815,8157],[4824,8205],[4800,8247],[4829,8311],[4838,8353],[4890,8458],[4921,8453],[4958,8519],[4953,8562],[4918,8579],[4871,8617],[4869,8639],[4883,8673],[4882,8703],[4939,8809],[4963,8878],[4979,8893],[4985,8941]]]]}},{'type':'Feature','id':'CU.CM','properties':{'hc-group':'admin1','hc-middle-x':0.42,'hc-middle-y':0.55,'hc-key':'cu-cm','hc-a2':'CM','labelrank':'7','hasc':'CU.CM','alt-name':'Puerto Principe','woe-id':'2345110','subregion':null,'fips':'CU05','postal-code':'CM','name':'Camagey','country':'Cuba','type-en':'Province','region':null,'longitude':'-77.93040000000001','woe-name':'Camagey','latitude':'21.3675','woe-label':'Camaguey, CU, Cuba','type':'Provincia'},'geometry':{'type':'MultiPolygon','coordinates':[[[[5459,7167],[5501,7165],[5489,7149],[5442,7137],[5426,7126],[5392,7140],[5459,7167]]],[[[6643,7474],[6601,7489],[6579,7457],[6568,7467],[6570,7499],[6523,7507],[6497,7557],[6465,7533],[6469,7512],[6455,7479],[6408,7474],[6403,7455],[6358,7440],[6348,7406],[6319,7410],[6300,7433],[6280,7429],[6278,7361],[6256,7349],[6195,7336],[6171,7337],[6120,7262],[6109,7175],[6062,7181],[6040,7175],[5998,7143],[5933,7140],[5898,7148],[5887,7171],[5874,7156],[5840,7194],[5806,7203],[5775,7249],[5725,7289],[5699,7282],[5692,7305],[5663,7354],[5591,7404],[5542,7406],[5530,7413],[5503,7457],[5437,7507],[5426,7613],[5391,7702],[5397,7733],[5426,7728],[5423,7755],[5382,7773],[5363,7864],[5344,7896],[5333,7947],[5317,7981],[5282,8023],[5319,8040],[5370,8073],[5392,8094],[5443,8118],[5463,8103],[5492,8171],[5571,8177],[5560,8194],[5595,8237],[5585,8295],[5609,8325],[5634,8334],[5642,8311],[5667,8278],[5691,8273],[5735,8282],[5735,8317],[5761,8334],[5741,8368],[5670,8429],[5664,8447],[5675,8478],[5743,8496],[5804,8549],[5837,8570],[5841,8594],[5830,8618],[5847,8623],[5870,8585],[5895,8560],[5928,8500],[5952,8487],[5999,8441],[6020,8402],[6045,8407],[6048,8487],[6064,8503],[6107,8499],[6066,8481],[6062,8453],[6072,8428],[6102,8403],[6126,8404],[6145,8381],[6155,8337],[6212,8312],[6226,8320],[6252,8305],[6312,8315],[6347,8306],[6392,8279],[6400,8301],[6425,8309],[6433,8293],[6460,8305],[6495,8273],[6464,8277],[6464,8239],[6489,8178],[6532,8171],[6556,8159],[6582,8172],[6566,8203],[6528,8228],[6504,8291],[6474,8306],[6456,8339],[6439,8330],[6424,8345],[6411,8332],[6331,8405],[6320,8421],[6300,8416],[6323,8454],[6357,8464],[6392,8436],[6406,8395],[6514,8321],[6586,8296],[6649,8246],[6723,8198],[6751,8187],[6784,8192],[6777,8172],[6799,8141],[6796,8120],[6767,8075],[6735,8103],[6670,8131],[6635,8137],[6626,8122],[6586,8144],[6563,8141],[6559,8119],[6618,8091],[6666,8086],[6664,8050],[6644,8033],[6665,7989],[6715,7990],[6707,7970],[6752,7993],[6769,8011],[6780,8068],[6812,8127],[6850,8121],[6960,7992],[6979,7977],[6925,7937],[6885,7923],[6824,7929],[6795,7845],[6809,7819],[6848,7820],[6854,7811],[6799,7757],[6794,7737],[6800,7668],[6765,7607],[6746,7588],[6684,7564],[6671,7544],[6643,7474]]],[[[5506,7040],[5556,6991],[5573,6983],[5585,7003],[5608,6984],[5615,6963],[5603,6944],[5544,6974],[5530,7003],[5476,7032],[5506,7040]]],[[[6284,8556],[6263,8508],[6278,8480],[6251,8474],[6231,8458],[6235,8477],[6218,8482],[6205,8444],[6174,8491],[6161,8500],[6126,8497],[6090,8517],[6099,8561],[6064,8578],[6042,8548],[6010,8549],[5995,8579],[5964,8610],[5980,8642],[6023,8615],[6039,8615],[6071,8637],[6101,8641],[6138,8612],[6173,8624],[6228,8596],[6258,8613],[6284,8584],[6284,8556]]],[[[6101,8779],[6150,8727],[6126,8725],[6100,8751],[6059,8812],[6067,8827],[6025,8863],[6049,8868],[6088,8824],[6101,8779]]],[[[6047,8640],[6036,8651],[6015,8643],[5997,8686],[5976,8693],[5959,8684],[5968,8657],[5913,8689],[5906,8704],[5873,8726],[5863,8743],[5892,8763],[5903,8798],[5904,8837],[5889,8867],[5919,8860],[5937,8836],[5914,8801],[5921,8784],[5966,8781],[5985,8753],[6005,8782],[6048,8758],[6006,8738],[6041,8717],[6083,8703],[6047,8640]]],[[[5856,8821],[5807,8851],[5736,8860],[5711,8879],[5732,8892],[5702,8920],[5686,8890],[5664,8896],[5676,8933],[5660,8954],[5637,8964],[5615,8949],[5594,8957],[5608,8974],[5662,8980],[5708,8994],[5716,8981],[5736,8992],[5761,8986],[5805,8953],[5831,8908],[5840,8861],[5862,8838],[5896,8831],[5880,8815],[5856,8821]]]]}},{'type':'Feature','id':'CU.CH','properties':{'hc-group':'admin1','hc-middle-x':0.43,'hc-middle-y':0.55,'hc-key':'cu-ch','hc-a2':'CH','labelrank':'9','hasc':'CU.CH','alt-name':null,'woe-id':'2345107','subregion':null,'fips':'CU02','postal-code':'CH','name':'La Habana','country':'Cuba','type-en':'Province','region':null,'longitude':'-82.30750000000001','woe-name':'La Habana','latitude':'23.0737','woe-label':'La Habana, CU, Cuba','type':'Provincia'},'geometry':{'type':'Polygon','coordinates':[[[1513,9529],[1504,9565],[1458,9585],[1448,9597],[1477,9626],[1466,9649],[1434,9639],[1413,9654],[1447,9668],[1461,9686],[1483,9691],[1543,9732],[1583,9737],[1628,9757],[1697,9767],[1729,9780],[1797,9763],[1846,9772],[1848,9751],[1869,9720],[1853,9712],[1855,9692],[1835,9644],[1800,9685],[1778,9689],[1755,9658],[1742,9674],[1734,9638],[1744,9603],[1697,9544],[1667,9542],[1592,9549],[1566,9522],[1536,9538],[1513,9529]]]}},{'type':'Feature','id':'CU.CF','properties':{'hc-group':'admin1','hc-middle-x':0.42,'hc-middle-y':0.41,'hc-key':'cu-cf','hc-a2':'CF','labelrank':'7','hasc':'CU.CF','alt-name':null,'woe-id':'2345112','subregion':null,'fips':'CU08','postal-code':'CF','name':'Cienfuegos','country':'Cuba','type-en':'Province','region':null,'longitude':'-80.48309999999999','woe-name':'Cienfuegos','latitude':'22.3253','woe-label':'Cienfuegos, CU, Cuba','type':'Provincia'},'geometry':{'type':'Polygon','coordinates':[[[3901,8440],[3828,8368],[3825,8318],[3738,8343],[3709,8367],[3657,8383],[3626,8409],[3517,8525],[3510,8547],[3490,8547],[3476,8576],[3507,8574],[3530,8611],[3501,8620],[3502,8634],[3470,8642],[3483,8671],[3442,8708],[3423,8693],[3394,8701],[3389,8678],[3428,8642],[3456,8598],[3462,8572],[3456,8547],[3413,8563],[3334,8560],[3321,8615],[3310,8632],[3257,8629],[3232,8638],[3187,8627],[3097,8670],[3074,8698],[3032,8727],[3032,8767],[3003,8770],[2999,8789],[3016,8870],[2988,8878],[3014,8936],[3001,8949],[3040,8986],[3092,9016],[3160,9004],[3191,9005],[3303,8992],[3350,9008],[3383,9062],[3406,9080],[3447,9105],[3465,9126],[3484,9126],[3507,9107],[3545,9104],[3537,9060],[3549,9054],[3606,9075],[3620,9110],[3655,9111],[3665,9120],[3669,9092],[3652,9070],[3668,9024],[3687,9014],[3685,8980],[3702,8960],[3681,8925],[3691,8899],[3739,8857],[3777,8861],[3793,8810],[3814,8778],[3839,8767],[3820,8707],[3824,8636],[3847,8566],[3874,8535],[3880,8472],[3902,8454],[3901,8440]]]}},{'type':'Feature','id':'CU.GU','properties':{'hc-group':'admin1','hc-middle-x':0.38,'hc-middle-y':0.49,'hc-key':'cu-gu','hc-a2':'GU','labelrank':'7','hasc':'CU.GU','alt-name':null,'woe-id':'2345114','subregion':null,'fips':'CU10','postal-code':'GU','name':'Guantnamo','country':'Cuba','type-en':'Province','region':null,'longitude':'-74.8112','woe-name':'Guantnamo','latitude':'20.2358','woe-label':'Guantanamo, CU, Cuba','type':'Provincia'},'geometry':{'type':'Polygon','coordinates':[[[9207,7066],[9248,7085],[9291,7071],[9295,7057],[9362,7014],[9416,6940],[9478,6879],[9524,6868],[9575,6831],[9584,6809],[9605,6825],[9668,6821],[9720,6850],[9765,6843],[9821,6805],[9842,6773],[9851,6732],[9843,6708],[9801,6685],[9756,6649],[9752,6610],[9721,6581],[9683,6580],[9640,6590],[9593,6589],[9530,6574],[9487,6569],[9405,6546],[9366,6552],[9335,6538],[9271,6545],[9170,6526],[9145,6514],[9097,6466],[9037,6456],[9008,6398],[8976,6384],[8940,6379],[8921,6393],[8919,6375],[8890,6366],[8887,6445],[8845,6444],[8879,6468],[8896,6504],[8887,6541],[8866,6537],[8844,6497],[8810,6501],[8807,6466],[8834,6457],[8803,6442],[8753,6404],[8751,6364],[8699,6350],[8600,6340],[8536,6424],[8507,6451],[8488,6489],[8485,6528],[8541,6565],[8541,6589],[8525,6596],[8521,6636],[8495,6680],[8488,6717],[8504,6744],[8502,6796],[8486,6826],[8527,6857],[8546,6902],[8565,6897],[8587,6918],[8632,6936],[8678,6901],[8700,6911],[8724,6895],[8735,6944],[8773,6977],[8805,6972],[8858,6994],[8917,6942],[8950,6940],[8988,6922],[8965,6950],[8961,6977],[8996,6986],[9123,6922],[9144,6945],[9184,6963],[9174,6992],[9184,7040],[9207,7066]]]}},{'type':'Feature','id':'CU.GR','properties':{'hc-group':'admin1','hc-middle-x':0.58,'hc-middle-y':0.53,'hc-key':'cu-gr','hc-a2':'GR','labelrank':'6','hasc':'CU.GR','alt-name':null,'woe-id':'2345113','subregion':null,'fips':'CU09','postal-code':'GR','name':'Granma','country':'Cuba','type-en':'Province','region':null,'longitude':'-76.8386','woe-name':'Granma','latitude':'20.3212','woe-label':'Granma, CU, Cuba','type':'Provincia'},'geometry':{'type':'Polygon','coordinates':[[[6930,6298],[6850,6298],[6773,6321],[6760,6310],[6735,6319],[6718,6303],[6663,6312],[6637,6305],[6622,6286],[6649,6286],[6603,6266],[6491,6258],[6427,6241],[6348,6239],[6286,6221],[6239,6228],[6221,6249],[6222,6268],[6241,6314],[6261,6318],[6289,6344],[6286,6356],[6309,6382],[6336,6427],[6383,6471],[6367,6494],[6404,6492],[6433,6508],[6458,6546],[6518,6582],[6552,6621],[6653,6671],[6687,6683],[6702,6722],[6729,6735],[6730,6716],[6771,6729],[6790,6776],[6838,6809],[6840,6861],[6854,6876],[6867,6914],[6835,6963],[6797,6989],[6751,7004],[6752,6984],[6706,7014],[6705,7045],[6729,7057],[6749,7094],[6692,7120],[6686,7100],[6627,7168],[6605,7176],[6631,7191],[6659,7248],[6669,7232],[6708,7250],[6739,7232],[6837,7231],[6904,7207],[6971,7224],[7014,7218],[7107,7217],[7132,7206],[7151,7166],[7222,7197],[7245,7179],[7265,7188],[7281,7171],[7318,7157],[7376,7174],[7383,7116],[7445,7097],[7510,7063],[7584,7041],[7579,7018],[7700,6987],[7750,6947],[7776,6908],[7751,6872],[7726,6864],[7715,6913],[7685,6929],[7687,6885],[7664,6833],[7601,6834],[7588,6816],[7569,6730],[7571,6711],[7541,6681],[7550,6637],[7556,6547],[7518,6498],[7460,6471],[7408,6476],[7403,6434],[7361,6444],[7352,6431],[7296,6427],[7259,6440],[7244,6455],[7201,6437],[7162,6464],[7130,6436],[7104,6428],[7032,6422],[6995,6369],[6924,6355],[6916,6346],[6930,6298]]]}},{'type':'Feature','id':'CU.LT','properties':{'hc-group':'admin1','hc-middle-x':0.61,'hc-middle-y':0.56,'hc-key':'cu-lt','hc-a2':'LT','labelrank':'7','hasc':'CU.LT','alt-name':null,'woe-id':'2345117','subregion':null,'fips':'CU13','postal-code':'LT','name':'Las Tunas','country':'Cuba','type-en':'Province','region':null,'longitude':'-77.0723','woe-name':'Las Tunas','latitude':'21.0299','woe-label':'Las Tunas, CU, Cuba','type':'Provincia'},'geometry':{'type':'Polygon','coordinates':[[[7222,7197],[7151,7166],[7132,7206],[7107,7217],[7014,7218],[6971,7224],[6904,7207],[6837,7231],[6739,7232],[6708,7250],[6669,7232],[6659,7248],[6631,7191],[6605,7176],[6570,7175],[6449,7131],[6420,7133],[6369,7151],[6321,7128],[6292,7143],[6262,7141],[6228,7151],[6162,7150],[6109,7175],[6120,7262],[6171,7337],[6195,7336],[6256,7349],[6278,7361],[6280,7429],[6300,7433],[6319,7410],[6348,7406],[6358,7440],[6403,7455],[6408,7474],[6455,7479],[6469,7512],[6465,7533],[6497,7557],[6523,7507],[6570,7499],[6568,7467],[6579,7457],[6601,7489],[6635,7470],[6643,7474],[6671,7544],[6684,7564],[6746,7588],[6765,7607],[6800,7668],[6794,7737],[6799,7757],[6854,7811],[6848,7820],[6809,7819],[6795,7845],[6824,7929],[6885,7923],[6925,7937],[6979,7977],[7030,7950],[7086,7940],[7093,7915],[7113,7916],[7100,7882],[7053,7875],[7029,7859],[7026,7843],[7040,7817],[7091,7846],[7098,7826],[7120,7908],[7182,7888],[7270,7869],[7291,7839],[7212,7801],[7215,7817],[7196,7827],[7194,7798],[7244,7783],[7276,7765],[7316,7760],[7287,7778],[7275,7810],[7311,7819],[7335,7812],[7377,7783],[7370,7749],[7317,7745],[7338,7738],[7333,7717],[7365,7724],[7394,7696],[7416,7719],[7434,7719],[7474,7742],[7413,7755],[7397,7786],[7421,7807],[7541,7807],[7616,7774],[7614,7713],[7593,7680],[7590,7640],[7498,7583],[7434,7526],[7420,7479],[7377,7473],[7325,7449],[7295,7444],[7263,7463],[7251,7426],[7254,7351],[7250,7326],[7232,7301],[7222,7255],[7241,7230],[7242,7208],[7222,7197]]]}},{'type':'Feature','id':'CU.SC','properties':{'hc-group':'admin1','hc-middle-x':0.65,'hc-middle-y':0.49,'hc-key':'cu-sc','hc-a2':'SC','labelrank':'7','hasc':'CU.SC','alt-name':null,'woe-id':'2345119','subregion':null,'fips':'CU15','postal-code':'SC','name':'Santiago de Cuba','country':'Cuba','type-en':'Province','region':null,'longitude':'-76.21169999999999','woe-name':'Santiago de Cuba','latitude':'20.1959','woe-label':'Santiago de Cuba, CU, Cuba','type':'Provincia'},'geometry':{'type':'Polygon','coordinates':[[[8587,6918],[8565,6897],[8546,6902],[8527,6857],[8486,6826],[8502,6796],[8504,6744],[8488,6717],[8495,6680],[8521,6636],[8525,6596],[8541,6589],[8541,6565],[8485,6528],[8488,6489],[8507,6451],[8536,6424],[8600,6340],[8537,6353],[8520,6338],[8460,6332],[8408,6349],[8375,6343],[8254,6409],[8160,6406],[8080,6419],[8041,6414],[7993,6396],[7859,6424],[7767,6432],[7721,6429],[7641,6405],[7603,6398],[7529,6396],[7444,6371],[7315,6375],[7184,6361],[7164,6350],[7098,6356],[7051,6321],[7006,6304],[6930,6298],[6916,6346],[6924,6355],[6995,6369],[7032,6422],[7104,6428],[7130,6436],[7162,6464],[7201,6437],[7244,6455],[7259,6440],[7296,6427],[7352,6431],[7361,6444],[7403,6434],[7408,6476],[7460,6471],[7518,6498],[7556,6547],[7550,6637],[7541,6681],[7571,6711],[7569,6730],[7588,6816],[7601,6834],[7664,6833],[7687,6885],[7685,6929],[7715,6913],[7726,6864],[7751,6872],[7776,6908],[7850,6903],[7846,6871],[7867,6893],[7874,6940],[7860,6977],[7911,7011],[7901,7049],[7920,7052],[7969,7018],[7986,6984],[8025,6980],[8016,6958],[8058,6928],[8075,6924],[8086,6897],[8135,6887],[8207,6923],[8301,6929],[8344,6960],[8349,7005],[8376,6993],[8426,7039],[8455,7051],[8491,7033],[8565,7051],[8566,7014],[8536,6978],[8587,6918]]]}},{'type':'Feature','id':'CU.MQ','properties':{'hc-group':'admin1','hc-middle-x':0.48,'hc-middle-y':0.42,'hc-key':'cu-mq','hc-a2':'MQ','labelrank':'7','hasc':'CU.MQ','alt-name':null,'woe-id':'-2345115','subregion':null,'fips':'CU18','postal-code':'MQ','name':'Mayabeque','country':'Cuba','type-en':'Province','region':null,'longitude':'-82.0296','woe-name':null,'latitude':'22.8761','woe-label':null,'type':'Provincia'},'geometry':{'type':'Polygon','coordinates':[[[2286,9116],[2265,9119],[2185,9184],[2062,9229],[1949,9221],[1843,9204],[1812,9218],[1745,9238],[1669,9238],[1606,9231],[1554,9242],[1555,9278],[1529,9294],[1490,9364],[1490,9403],[1511,9464],[1513,9529],[1536,9538],[1566,9522],[1592,9549],[1667,9542],[1697,9544],[1744,9603],[1734,9638],[1742,9674],[1755,9658],[1778,9689],[1800,9685],[1835,9644],[1855,9692],[1853,9712],[1869,9720],[1848,9751],[1846,9772],[1912,9785],[1959,9754],[1988,9745],[2080,9731],[2102,9738],[2256,9737],[2245,9715],[2259,9638],[2235,9641],[2227,9622],[2240,9607],[2199,9571],[2193,9556],[2231,9533],[2258,9496],[2256,9450],[2243,9410],[2259,9381],[2287,9358],[2280,9318],[2286,9292],[2339,9255],[2341,9239],[2328,9170],[2286,9116]]]}},{'type':'Feature','id':'CU.PR','properties':{'hc-group':'admin1','hc-middle-x':0.62,'hc-middle-y':0.44,'hc-key':'cu-pr','hc-a2':'PR','labelrank':'7','hasc':'CU.PR','alt-name':null,'woe-id':'2345106','subregion':null,'fips':'CU01','postal-code':'PR','name':'Pinar del Ro','country':'Cuba','type-en':'Province','region':null,'longitude':'-83.67400000000001','woe-name':'Pinar del Ro','latitude':'22.4952','woe-label':'Pinar del Rio, CU, Cuba','type':'Provincia'},'geometry':{'type':'Polygon','coordinates':[[[1124,9164],[1100,9156],[1028,9099],[990,9092],[924,9059],[891,9038],[863,9010],[805,8902],[781,8879],[749,8876],[717,8886],[689,8884],[687,8862],[663,8863],[661,8841],[625,8818],[607,8796],[599,8768],[572,8741],[550,8755],[532,8719],[483,8716],[431,8723],[388,8742],[396,8751],[381,8787],[335,8733],[278,8708],[285,8723],[174,8709],[163,8732],[125,8711],[47,8717],[25,8713],[-16,8674],[-35,8606],[-53,8593],[-35,8556],[-11,8568],[-17,8545],[-52,8520],[-60,8499],[-46,8479],[-72,8452],[-96,8444],[-151,8470],[-195,8470],[-253,8440],[-293,8441],[-359,8414],[-478,8318],[-522,8296],[-564,8293],[-576,8315],[-535,8398],[-526,8439],[-548,8471],[-587,8479],[-632,8473],[-711,8452],[-750,8434],[-853,8370],[-893,8361],[-936,8363],[-978,8377],[-999,8404],[-997,8439],[-982,8461],[-962,8444],[-929,8434],[-900,8452],[-915,8478],[-882,8486],[-874,8454],[-791,8496],[-718,8516],[-633,8552],[-570,8594],[-545,8592],[-543,8579],[-512,8565],[-437,8591],[-392,8561],[-382,8543],[-354,8562],[-339,8559],[-324,8618],[-358,8577],[-372,8589],[-379,8638],[-398,8648],[-383,8678],[-422,8688],[-452,8708],[-475,8756],[-491,8759],[-460,8804],[-448,8869],[-433,8916],[-415,8945],[-400,8949],[-384,8977],[-329,9042],[-331,9056],[-289,9063],[-270,9073],[-245,9113],[-240,9136],[-251,9158],[-231,9149],[-216,9160],[-184,9142],[-174,9181],[-159,9196],[-128,9202],[-116,9244],[-90,9229],[-59,9256],[-76,9276],[-106,9278],[-75,9300],[-59,9294],[-35,9262],[-10,9270],[51,9312],[64,9298],[89,9330],[149,9335],[218,9368],[269,9381],[292,9373],[331,9387],[310,9395],[353,9414],[402,9415],[420,9455],[467,9458],[479,9440],[508,9479],[523,9485],[566,9456],[590,9474],[611,9514],[630,9534],[661,9547],[713,9578],[752,9587],[780,9569],[767,9543],[788,9509],[814,9533],[798,9562],[834,9583],[876,9591],[896,9603],[936,9590],[955,9602],[970,9586],[953,9564],[977,9575],[974,9554],[1011,9565],[1010,9494],[1035,9446],[1037,9410],[1019,9389],[975,9375],[999,9356],[1027,9312],[1045,9299],[1081,9223],[1114,9186],[1124,9164]]]}}]};
/* Source and licensing information for the above line(s) can be found at https://www.fgr.gob.cu/themes/custom/fgr/js/highmaps/cu-all.js. */;
/* Source and licensing information for the line(s) below can be found at https://www.fgr.gob.cu/themes/custom/fgr/js/highmaps/mapa-cuba.js. */
;jQuery(document).ready(function(o){if(jQuery('body').hasClass('node-7285')){if(drupalSettings.language=='es'){Highcharts.setOptions({lang:{zoomIn:['Ampliar'],zoomOut:['Disminuir'],}})};var a=[{value:0,'hc-key':'cu-ho','id_taxonomy':4,'id_block':13,'provincia':'Holgun'},{value:1,'hc-key':'cu-ar','id_taxonomy':15,'id_block':3,'provincia':'Artemisa'},{value:2,'hc-key':'cu-ma','id_taxonomy':12,'id_block':6,'provincia':'Matanzas'},{value:3,'hc-key':'cu-vc','id_taxonomy':10,'id_block':8,'provincia':'Clara'},{value:5,'hc-key':'cu-ij','id_taxonomy':1,'id_block':1,'provincia':'Isla'},{value:6,'hc-key':'cu-ss','id_taxonomy':9,'id_block':9,'provincia':'Sancti'},{value:7,'hc-key':'cu-ca','id_taxonomy':8,'id_block':10,'provincia':'Ciego'},{value:8,'hc-key':'cu-cm','id_taxonomy':7,'id_block':11,'provincia':'Camagey'},{value:9,'hc-key':'cu-ch','id_taxonomy':14,'id_block':4,'provincia':'Habana'},{value:10,'hc-key':'cu-cf','id_taxonomy':11,'id_block':7,'provincia':'Cienfuegos'},{value:11,'hc-key':'cu-gu','id_taxonomy':2,'id_block':16,'provincia':'Guantnamo'},{value:12,'hc-key':'cu-gr','id_taxonomy':5,'id_block':14,'provincia':'Granma'},{value:13,'hc-key':'cu-lt','id_taxonomy':6,'id_block':12,'provincia':'Tunas'},{value:14,'hc-key':'cu-sc','id_taxonomy':3,'id_block':15,'provincia':'Santiago'},{value:15,'hc-key':'cu-mq','id_taxonomy':13,'id_block':5,'provincia':'Mayabeque'},{value:16,'hc-key':'cu-pr','id_taxonomy':16,'id_block':2,'provincia':'Pinar'},];Highcharts.mapChart('mapa-cuba',{chart:{map:'countries/cu/cu-all',},title:{text:''},tooltip:{formatter:function(){return this.point.name}},legend:{enabled:!1},credits:{enabled:!1},subtitle:{},mapNavigation:{enabled:!0,buttonOptions:{verticalAlign:'top'},enableMouseWheelZoom:!1},colorAxis:{min:0,},plotOptions:{series:{point:{events:{click:function(){var i=this.id_block,c=this.provincia;o('#block-views-block-directivos-block-1 .vista-directivos .views-row').each(function(a,i){o(i).removeClass('d-flex').addClass('d-none')});o('#block-views-block-directivos-block-1 .vista-directivos .views-row.'+c).removeClass('d-none').addClass('d-flex');for(var a=1;a<=16;a++){o('#block-views-block-fiscalias-block-'+a).removeClass('d-block').addClass('d-none')};o('#block-views-block-fiscalias-block-'+i).removeClass('d-none').addClass('d-block')}}}}},series:[{data:a,name:'Province',cursor:'pointer',states:{hover:{color:'#dd0808'}},dataLabels:{enabled:!0,format:'{point.name}'}}]})}});
/* Source and licensing information for the above line(s) can be found at https://www.fgr.gob.cu/themes/custom/fgr/js/highmaps/mapa-cuba.js. */;
/* Source and licensing information for the line(s) below can be found at https://www.fgr.gob.cu/themes/custom/fgr/js/main.js. */
jQuery(document).ready(function () {

  jQuery('.vicefiscales-generales ul').toggle('hidden');
  jQuery('.vicefiscales-generales .icon.menos svg').toggle('hidden');
  jQuery('.vicefiscales-generales .icon svg').on('click', function () {
    jQuery('.vicefiscales-generales .icon.menos svg').toggle('hidden');
    jQuery('.vicefiscales-generales ul').toggle('hidden');
  });

  jQuery('.contenedor-direcciones ul').toggle('hidden');
  jQuery('.contenedor-direcciones .icon.menos svg').toggle('hidden');
  jQuery('.contenedor-direcciones .icon svg').on('click', function () {
    jQuery('.contenedor-direcciones .icon.menos svg').toggle('hidden');
    jQuery('.contenedor-direcciones ul').toggle('hidden');
  });

  jQuery('.departamentos-independientes ul').toggle('hidden');
  jQuery('.departamentos-independientes .icon.menos svg').toggle('hidden');
  jQuery('.departamentos-independientes .icon svg').on('click', function () {
    jQuery('.departamentos-independientes .icon.menos svg').toggle('hidden');
    jQuery('.departamentos-independientes ul').toggle('hidden');
  });

  jQuery('.fiscalias-provinciales ul').toggle('hidden');
  jQuery('.fiscalias-provinciales .icon.menos svg').toggle('hidden');
  jQuery('.fiscalias-provinciales .icon svg').on('click', function () {
    jQuery('.fiscalias-provinciales .icon.menos svg').toggle('hidden');
    jQuery('.fiscalias-provinciales ul').toggle('hidden');
  });

  jQuery('.fiscalias-municipales ul').toggle('hidden');
  jQuery('.fiscalias-municipales .icon.menos svg').toggle('hidden');
  jQuery('.fiscalias-municipales .icon svg').on('click', function () {
    jQuery('.fiscalias-municipales .icon.menos svg').toggle('hidden');
    jQuery('.fiscalias-municipales ul').toggle('hidden');
  });


  jQuery('#block-redessociales-2 ul a').attr('target', '_blanck');
  jQuery('#block-redessociales ul a').attr('target', '_blanck');

  jQuery('.path-search.es #edit-lang-fieldset .form-item-language-es label').html('Espaol');
  jQuery('.path-search.es #edit-lang-fieldset .form-item-language-en label').html('Ingls');


  /*Traduciendo Comentarios Vias de atencion*/
  
  if (jQuery('body.en').length) {
  const cant_comment = jQuery('.en #block-views-block-comment-block-1 .views-row .views-field-status .field-content').text();
  const my_array = cant_comment.split(" ");
  const count = my_array[0].split('\n');
  const text = my_array[1].split('\n');

  if (text[0] === "Comentarios") {
    jQuery('.en #block-views-block-comment-block-1 .views-row .views-field-status .field-content').text(count[count.length-1] +' '+ 'Comments');
  }else if(text[0] === "Comentario"){
    jQuery('.en #block-views-block-comment-block-1 .views-row .views-field-status .field-content').text(count[count.length-1] +' '+ 'Comment');
  }
  }


});

/* Source and licensing information for the above line(s) can be found at https://www.fgr.gob.cu/themes/custom/fgr/js/main.js. */;
